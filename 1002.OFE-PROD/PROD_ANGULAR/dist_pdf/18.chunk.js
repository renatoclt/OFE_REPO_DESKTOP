webpackJsonp([18],{"./src/app/facturacion-electronica/comprobantes/factura/factura-anticipo-modal-component.html":function(t,a){t.exports='<div [@dialog] *ngIf="visible" class="dialog">\r\n\r\n  <div class="container-fluid">\r\n    <div class="row">\r\n      <div class="col-md-12">\r\n        <div class="card">\r\n          <div class="card-header card-header-icon" data-background-color="blue">\r\n            <i class="material-icons">assignment</i>\r\n          </div>\r\n          <h3 class="card-title">{{\'bitacora\' | translate}}</h3>\r\n          <div class="card-content">\r\n\r\n            <div class="form-footer text-right">\r\n              <div class="form-group">\r\n                <button type="button" class="btn btn-default blue" (click)="close()" data-dismiss="modal" data-background-color="blue">{{\'cerrar\' | translate}}</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n  <div *ngIf="visible" class="overlay" (click)="close()"></div>\r\n'},"./src/app/facturacion-electronica/comprobantes/factura/factura-anticipo-modal.component.css":function(t,a,o){a=t.exports=o("./node_modules/css-loader/lib/css-base.js")(!1),a.push([t.i,".dialog{z-index:1000;position:fixed;right:0;left:0;top:20px;margin-right:auto;margin-left:auto;min-height:200px;width:90%;max-width:520px;background-color:#fff;padding:12px;box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}@media (min-width:768px){.dialog{top:40px}}.dialog__close-btn{border:0;background:none;color:#2d2d2d;position:absolute;top:8px;right:8px;font-size:1.2em}table thead>tr{background-color:#e6e6e6;color:#6d6d6d}",""]),t.exports=t.exports.toString()},"./src/app/facturacion-electronica/comprobantes/factura/factura-anticipo-modal.component.ts":function(t,a,o){"use strict";var e=o("./node_modules/@angular/core/@angular/core.es5.js"),r=o("./node_modules/@angular/animations/@angular/animations.es5.js");o.d(a,"a",function(){return s});var i=this&&this.__decorate||function(t,a,o,e){var r,i=arguments.length,c=i<3?a:null===e?e=Object.getOwnPropertyDescriptor(a,o):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,a,o,e);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(a,o,c):r(a,o))||c);return i>3&&c&&Object.defineProperty(a,o,c),c},c=this&&this.__metadata||function(t,a){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,a)},s=function(){function t(){this.closable=!0,this.visibleChange=new e.EventEmitter,console.log("MODAL CONSTRUCTIR")}return t.prototype.ngOnInit=function(){console.log("MODAL")},t.prototype.close=function(){console.log("MODAL close"),this.visible=!1,this.visibleChange.emit(this.visible)},t}();i([o.i(e.Input)(),c("design:type",Object)],s.prototype,"closable",void 0),i([o.i(e.Input)(),c("design:type",Boolean)],s.prototype,"visible",void 0),i([o.i(e.Output)(),c("design:type","function"==typeof(n=void 0!==e.EventEmitter&&e.EventEmitter)&&n||Object)],s.prototype,"visibleChange",void 0),s=i([o.i(e.Component)({selector:"factura-anticipo-modal-component",template:o("./src/app/facturacion-electronica/comprobantes/factura/factura-anticipo-modal-component.html"),styles:[o("./src/app/facturacion-electronica/comprobantes/factura/factura-anticipo-modal.component.css")],animations:[o.i(r.a)("dialog",[o.i(r.b)("void => *",[o.i(r.c)({transform:"scale3d(.3, .3, .3)"}),o.i(r.d)(100)]),o.i(r.b)("* => void",[o.i(r.d)(100,o.i(r.c)({transform:"scale3d(.0, .0, .0)"}))])])]}),c("design:paramtypes",[])],s);var n},"./src/app/facturacion-electronica/comprobantes/factura/factura.component.css":function(t,a,o){a=t.exports=o("./node_modules/css-loader/lib/css-base.js")(!1),a.push([t.i,".material-icons{font-size:1.5rem;margin-right:.5rem}.blue{background:#0079bf}.input-group-addon{background:transparent;border:0;padding:0}.card .card-header.card-header-icon{width:60px}.navbar.navbar-info{margin:0 15px}.align-right{text-align:center}.float-right{float:right}.pull-right{float:right!important}input.ng-invalid.ng-touched,mat-select.ng-invalid.ng-touched{border-bottom:1px solid red}mat-select{border-bottom:1px solid #aaa}.control-label{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.text-danger{font-size:11px;font-weight:700}.navbar.navbar-info{margin:0 15px 15px}.btn.btn-default.btn-simple{color:#0079bf}.dt-buttons .pull-right{margin-right:15px}",""]),t.exports=t.exports.toString()},"./src/app/facturacion-electronica/comprobantes/factura/factura.component.html":function(t,a){t.exports='<div class="container-fluid">\r\n  <div class="row">\r\n    <div >\r\n      <div class="card">\r\n        <div class="card-header card-header-text" data-background-color="blue">\r\n          <h4 class="card-title">{{\'crearFactura\' | translate}}</h4>\r\n        </div>\r\n        <div class="card-content">\r\n          <form [formGroup]="facturaFormGroup" (ngSubmit)="irVistaPrevia()" novalidate autocomplete="off">\r\n            <div class="row">\r\n              <div class="col-xs-12 col-sm-6 col-md-4">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblSerie" class="control-label">{{\'serie\' | translate}}\r\n                    <span class="star">*</span>\r\n                  </label>\r\n                  <select id="cmbSerie" name="cmbSerie" formControlName="cmbSerie" class="form-control">\r\n                    <option *ngFor="let serie of series" [value]="serie.idSerie">\r\n                      {{serie.serie}}\r\n                    </option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-6 col-md-4">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblRuc" name="lblRuc" class="control-label">\r\n                    <i class="material-icons">search</i>{{\'ruc\' | translate}}\r\n                    <span class="star">*</span>\r\n                  </label>\r\n                  <input rucDirective type="text" name="txtRuc" id="txtRuc" formControlName="txtRuc" autocomplete="off" class="form-control" (keyup)="busquedaruc($event)">\r\n                </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-12 col-md-4">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblRazonSocial" name="lblRazonSocial" class="control-label">\r\n                    <i class="material-icons">search</i>{{\'razonSocial\' | translate}}\r\n                    <span class="star">*</span>\r\n                  </label>\r\n                  <input ng2-auto-complete autocomplete="off" #inputRazonSocial type="text" id="txtRazonSocial" name="txtRazonSocial" formControlName="txtRazonSocial"\r\n                    [source]="listarOrganizacionesDeAutcompletado.bind(this)" [list-formatter]="autocompleListFormatter" [value-formatter]="autocompleListFormatter"\r\n                    [loading-text]="\'cargando\' | translate" (valueChanged)="busqueda()" (change)="cambioAutocomplete()" min-chars=1 [accept-user-input]="true"\r\n                    [no-match-found-text]="\'noSeEncontraronResultados\' | translate" class="form-control">\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="row">\r\n              <div class="col-xs-12 col-sm-12 col-md-4">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblDireccionFiscal" name="lblDireccionFiscal" class="control-label">{{\'txtdireccionfiscal\' | translate}}\r\n                    <span class="star">*</span></label>\r\n                  <input type="text" id="txtDireccionFiscal" name="txtDireccionFiscal" formControlName="txtDireccionFiscal" class="form-control">\r\n                </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-6 col-md-4">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblCorreo" name="lblCorreo" class="control-label">{{\'txtcorreo\' | translate}}\r\n                    <span class="star">*</span>\r\n                  </label>\r\n                  <input type="email" id="txtCorreo" name="txtCorreo" formControlName="txtCorreo" class="form-control"\r\n                  title="Please provide only a Best Startup Ever corporate email address">\r\n                  <span *ngIf="!facturaFormGroup.get(\'txtCorreo\').valid && (facturaFormGroup.get(\'txtCorreo\').touched)">\r\n                      <span *ngIf="facturaFormGroup.controls[\'txtCorreo\'].hasError(\'required\')" class="text-danger">Correo es requerido.</span>\r\n                      <span *ngIf="facturaFormGroup.controls[\'txtCorreo\'].hasError(\'pattern\')" class="text-danger">Formato correo inv√°lido.</span>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-6 col-md-4">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblDetraccion" name="lblDetraccion" class="control-label">{{\'detraccion\' | translate}}</label>\r\n                  <input precioDirectiva type="text" id="txtDetraccion" name="txtDetraccion" formControlName="txtDetraccion" class="form-control"\r\n                    (blur)="calcularMontos()">\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="row">\r\n              <div class="col-xs-12 col-sm-6 col-md-4">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblFechaEmision" name="lblFechaEmision" class="control-label">{{\'fechaEmision\' | translate}}\r\n                    <span class="star">*</span>\r\n                  </label>\r\n                  <input type="text" id="txtFechaEmision" name="txtFechaEmision" formControlName="txtFechaEmision" class="form-control" datepicker\r\n                    minlength="10" min="10" maxlength="10" max="10" />\r\n                    <span *ngIf="facturaFormGroup.controls[\'txtFechaEmision\'].hasError(\'errorFecha\')" class="text-danger">{{facturaFormGroup.controls[\'txtFechaEmision\'].getError(\'errorFecha\') | translate}}</span>\r\n                    \x3c!-- <span class="text-danger" *ngIf="facturaFormGroup.errors && facturaFormGroup.errors.errorFecha">{{facturaFormGroup.errors.errorFecha | translate}}</span> --\x3e\r\n                  </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-6 col-md-4">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblFechaVencimiento" name="lblFechaVencimiento" class="control-label">{{\'fechaVencimiento\' | translate}}\r\n                    <span class="star">*</span>\r\n                  </label>\r\n                  <input type="text" id="txtFechaVencimiento" name="txtFechaVencimiento" formControlName="txtFechaVencimiento" class="form-control"\r\n                    datepicker minlength="10" min="10" maxlength="10" max="10" />\r\n                  <span *ngIf="facturaFormGroup.controls[\'txtFechaVencimiento\'].hasError(\'errorFechaMayorAHoy\')" class="text-danger">{{facturaFormGroup.controls[\'txtFechaVencimiento\'].getError(\'errorFechaMayorAHoy\') | translate}}</span>\r\n                  <span *ngIf="flagRangoFechas" class="text-danger">{{errorRangoFecha}}</span>\r\n                  <span class="text-danger" *ngIf="facturaFormGroup.errors && facturaFormGroup.errors.errorFecha">{{facturaFormGroup.errors.errorFecha | translate}}</span>\r\n                </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-6 col-md-4">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblMoneda" name="lblMoneda" class="control-label">{{\'tipoMoneda\' | translate}}\r\n                    <span class="star">*</span>\r\n                  </label>\r\n                  <select id="cmbMoneda" name="cmbMoneda" formControlName="cmbMoneda" class="form-control">\r\n                    <option *ngFor="let moneda of monedas | async" [value]="moneda.codigo">{{moneda.descripcionCorta}}</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="row">\r\n              <div class="col-xs-12 col-sm-6 col-md-4">\r\n                <div class="form-group">\r\n                  <div class="checkbox">\r\n                    <label>\r\n                      <input type="checkbox" name="chkFacturaAnticipo" id="chkFacturaAnticipo" formControlName="chkFacturaAnticipo" [checked]="esFacturaAnticipo"\r\n                        (click)="seleccionFacturaAnticipo($event.target.checked)">{{\'facturaAnticipo\' | translate}}\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="row ">\r\n              \x3c!-- <div class="col-md-12 float-right"> --\x3e\r\n                <div class="col-xs-12 col-sm-12 col-md-6 col-lg-3 float-right">\r\n                  <button class="btn btn-default float-right" type="button" (click)="irDocumentoRelacionado()" [disabled]="esFacturaAnticipo">{{\'documentoRelacionado\' | translate}}</button>\r\n                \x3c!-- </div> --\x3e\r\n              </div>\r\n            </div>\r\n\r\n\r\n              <div class="card">\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                    <i class="material-icons">list</i>\r\n                </div>\r\n                <div class="row"><h3>{{\'listaItems\' | translate}}</h3></div>\r\n                <div class="row"><p>&nbsp;</p></div>\r\n                <nav class="navbar navbar-info" role="navigation"></nav>\r\n                <div class="card-content">\r\n                  <app-data-table\r\n                    (iniciarData)="iniciarData($event)"\r\n                    (accion)="ejecutarAccion($event)"\r\n                    (eliminar)="eliminar($event)"\r\n                    (tipoProductoSeleccionado)="tipoProductoSeleccionado($event)"\r\n                    #otro\r\n                    [tipoBotonAgregar]="tipoBotonAgregar"\r\n                    [idTabla]="\'tabla2\'"\r\n                    [columnas]="columnasTabla"\r\n                    [acciones]="AccionesPrueba"\r\n                    [tipoAccion]="tipo"\r\n                    [habilitarAgregar]="true"\r\n                    [habilitarAcciones]="true"\r\n                    [habilitarCheckBox]="true"\r\n                    [habilitarFuncionalidadAgregar]="esFacturaAnticipo"\r\n                    [ordenarPorElCampo]="\'codigoItem\'"\r\n                    [ordenarAscendente]="true">\r\n                  </app-data-table>\r\n                </div>\r\n\r\n              </div>\r\n\r\n            \x3c!-- <div class="row" *ngIf="factura.documentoReferencia">\r\n              <div class="col-md-12">\r\n                <table class="table table-striped">\r\n                  <tbody>\r\n                    <tr *ngFor="let item of factura.documentoReferencia">\r\n                      <td>\r\n                        {{item.nombreTipoDocumento + \' \' + item.serieDocumentoDestino + \'-\' + item.correlativoDocumentoDestino}}\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div> --\x3e\r\n\r\n            <div class="row">\r\n              <div class="col-md-12">\r\n                <div class="form-group label-floating">\r\n                  <label class="control-label">{{\'observaciones\' | translate}}</label>\r\n                  <textarea class="form-control" id="txtObservaciones" name="txtObservaciones" formControlName="txtObservaciones" rows="3"></textarea>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class="row align-right">\r\n              <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblOperacionesGrabadas" name="lblOperacionesGrabadas" class="control-label">{{\'operacionesGravadas\' | translate}}</label>\r\n                  <input type="text" id="txtOperacionesGrabadas" name="txtOperacionesGrabadas" formControlName="txtOperacionesGrabadas" class="form-control">\r\n                </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblOperacionesInafectas" name="lblOperacionesInafectas" class="control-label">{{\'operacionesInafectas\' | translate}}</label>\r\n                  <input type="text" id="txtOperacionesInafectas" name="txtOperacionesInafectas" formControlName="txtOperacionesInafectas"\r\n                    class="form-control">\r\n                </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblOperacionesExoneradas" name="lblOperacionesExoneradas" class="control-label">{{\'operacionesExoneradas\' | translate}}</label>\r\n                  <input type="text" id="txtOperacionesExoneradas" name="txtOperacionesExoneradas" formControlName="txtOperacionesExoneradas"\r\n                    class="form-control">\r\n                </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblTotalDescuentos" name="lblTotalDescuentos" class="control-label">{{\'totalDescuentos\' | translate}}</label>\r\n                  <input type="text" id="txtTotalDescuentos" name="txtTotalDescuentos" formControlName="txtTotalDescuentos" class="form-control">\r\n                </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblSumatoriaOtrosTributos" name="lblSumatoriaOtrosTributos" class="control-label">{{\'sumatoriaOtrosTributos\' | translate}}</label>\r\n                  <input precioDirectiva type="text" id="txtSumatoriaOtrosTributos" name="txtSumatoriaOtrosTributos" formControlName="txtSumatoriaOtrosTributos"\r\n                    class="form-control" (blur)="calcularMontos()">\r\n                </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblSumatoriaOtrosCargos" name="lblSumatoriaOtrosCargos" class="control-label">{{\'sumatoriaOtrosCargos\' | translate}}</label>\r\n                  <input precioDirectiva type="text" id="txtSumatoriaOtrosCargos" name="txtSumatoriaOtrosCargos" formControlName="txtSumatoriaOtrosCargos"\r\n                    class="form-control" (blur)="calcularMontos()">\r\n                </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblTotalAnticipos" name="lblTotalAnticipos" class="control-label">{{\'totalAnticipos\' | translate}}</label>\r\n                  <input type="text" id="txtTotalAnticipos" name="txtTotalAnticipos" formControlName="txtTotalAnticipos" class="form-control">\r\n                </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblSumatoriaIsc" name="lblSumatoriaIsc" class="control-label">{{\'sumatoriaIsc\' | translate}}</label>\r\n                  <input type="text" id="txtSumatoriaIsc" name="txtSumatoriaIsc" formControlName="txtSumatoriaIsc" class="form-control">\r\n                </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblSumatoriaIgv" name="lblSumatoriaIgv" class="control-label">{{\'sumatoriaIgv\' | translate}}</label>\r\n                  <input type="text" id="txtSumatoriaIgv" name="txtSumatoriaIgv" formControlName="txtSumatoriaIgv" class="form-control">\r\n                </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblSubTotal" name="lblSubTotal" class="control-label">{{\'subTotal\' | translate}}</label>\r\n                  <input type="text" id="txtSubTotal" name="txtSubTotal" formControlName="txtSubTotal" class="form-control">\r\n                </div>\r\n              </div>\r\n              <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                <div class="form-group label-floating">\r\n                  <label id="lblImporteTotal" name="lblImporteTotal" class="control-label">{{\'importeTotal\' | translate}}</label>\r\n                  <input type="text" id="txtImporteTotal" name="txtImporteTotal" formControlName="txtImporteTotal" class="form-control">\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class="row">\r\n                <div class="col-md-12" align="right">\r\n                  <button type="submit" class="btn btn-default" [disabled]="!(flagVistaPrevia && facturaFormGroup.valid)">{{\'vistaPrevia\' | translate}}</button>\r\n                  \x3c!-- <button type="submit" class="btn btn-default btn-block">{{\'vistaPrevia\' | translate}}</button>\r\n                  <button type="button" class="btn btn-default btn-block" (click)="probarBotonVistaPrevia()">Probar Vista Previa</button> --\x3e\r\n                </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n'},"./src/app/facturacion-electronica/comprobantes/factura/factura.component.ts":function(t,a,o){"use strict";var e=o("./node_modules/@angular/core/@angular/core.es5.js"),r=o("./node_modules/@angular/forms/@angular/forms.es5.js"),i=o("./src/app/facturacion-electronica/general/data-table/data-table.component.ts"),c=o("./src/app/facturacion-electronica/general/utils/rutas.service.ts"),s=o("./node_modules/@angular/router/@angular/router.es5.js"),n=o("./src/app/facturacion-electronica/comprobantes/models/detalleEbiz.ts"),l=o("./src/app/facturacion-electronica/general/data-table/utils/accion.ts"),u=o("./src/app/facturacion-electronica/general/data-table/utils/tipo-accion.ts"),p=o("./src/app/facturacion-electronica/general/data-table/utils/modo-vista-accion.ts"),d=o("./src/app/facturacion-electronica/comprobantes/services/persistencia.service.ts"),m=o("./src/app/facturacion-electronica/comprobantes/models/facturaEbiz.ts"),h=o("./src/app/facturacion-electronica/general/data-table/utils/tipoBotonAgregar.ts"),f=o("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),b=o("./src/app/facturacion-electronica/comprobantes/models/cabeceraFactura.ts"),v=o("./src/app/facturacion-electronica/general/services/configuracionDocumento/series.service.ts"),g=o("./node_modules/rxjs/BehaviorSubject.js"),_=(o.n(g),o("./src/app/facturacion-electronica/general/services/organizacion/entidad.service.ts")),C=o("./src/app/facturacion-electronica/general/models/documento/tablaMaestra.ts"),O=o("./src/app/facturacion-electronica/general/services/documento/tablaMaestra.service.ts"),F=o("./src/app/facturacion-electronica/general/utils/catalogo-igv.service.ts"),I=o("./node_modules/rxjs/Observable.js"),x=(o.n(I),o("./src/app/facturacion-electronica/general/models/organizacion/entidad.ts")),A=o("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.entidad.service.ts"),T=o("./src/app/facturacion-electronica/general/utils/catalogo-documento-identidad.service.ts"),S=o("./src/app/facturacion-electronica/comprobantes/models/documentoConcepto.ts"),E=o("./src/app/facturacion-electronica/general/services/documento/conceptoDocumento.service.ts"),D=o("./src/app/facturacion-electronica/comprobantes/models/documentoParametro.ts"),R=o("./src/app/facturacion-electronica/general/services/utils/validadorPersonalizado.ts"),P=o("./node_modules/@ngx-translate/core/index.js"),N=o("./src/app/facturacion-electronica/general/services/refresh.service.ts"),G=o("./src/app/facturacion-electronica/comprobantes/services/padre-comprobante.service.ts"),y=o("./node_modules/@angular/common/@angular/common.es5.js"),w=o("./src/app/facturacion-electronica/general/data-table/utils/columna-data-table.ts");o.d(a,"a",function(){return B});var V=this&&this.__decorate||function(t,a,o,e){var r,i=arguments.length,c=i<3?a:null===e?e=Object.getOwnPropertyDescriptor(a,o):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,a,o,e);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(a,o,c):r(a,o))||c);return i>3&&c&&Object.defineProperty(a,o,c),c},M=this&&this.__metadata||function(t,a){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,a)},U=this&&this.__awaiter||function(t,a,o,e){return new(o||(o=Promise))(function(r,i){function c(t){try{n(e.next(t))}catch(t){i(t)}}function s(t){try{n(e.throw(t))}catch(t){i(t)}}function n(t){t.done?r(t.value):new o(function(a){a(t.value)}).then(c,s)}n((e=e.apply(t,a||[])).next())})},j=this&&this.__generator||function(t,a){function o(t){return function(a){return e([t,a])}}function e(o){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(c=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(c=c.call(i,o[1])).done)return c;switch(i=0,c&&(o=[0,c.value]),o[0]){case 0:case 1:c=o;break;case 4:return n.label++,{value:o[1],done:!1};case 5:n.label++,i=o[1],o=[0];continue;case 7:o=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(6===o[0]||2===o[0])){n=0;continue}if(3===o[0]&&(!c||o[1]>c[0]&&o[1]<c[3])){n.label=o[1];break}if(6===o[0]&&n.label<c[1]){n.label=c[1],c=o;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(o);break}c[2]&&n.ops.pop(),n.trys.pop();continue}o=a.call(t,n)}catch(t){o=[6,t],i=0}finally{r=c=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var r,i,c,s,n={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},B=function(){function t(t,a,o,e,r,i,c,s,d,f,v,_,C,O,F,I){var A=this;this._persistenciaService=t,this._rutas=a,this._route=o,this._activeRoute=e,this._tipos=r,this.seriesService=i,this._entidadServices=c,this._tablaMaestraService=s,this._catalogoIgvService=d,this._entidadPersistenciaService=f,this._cataloDocumentos=v,this._conceptoDocumentoService=_,this._translate=C,this._datePipe=O,this.Refresh=F,this._padreComprobanteService=I,this.showDialog=!1,this.titulo="factura",this.entidad=[],this.entidad_uno=new x.a,this.dtoOutSeries=[],this.estadoautocomplete=new g.BehaviorSubject(!1),this.series=[],this.dtoOuMonedas=[],this.TipoAccion=u.a,this.tipo=p.a.ICONOS,this.tipoBotonAgregar=h.a.COMBO,this.AccionesPrueba=[new l.a("editar",new l.b("edit","btn-info"),u.a.EDITAR),new l.a("eliminar",new l.b("delete","btn-info"),u.a.ELIMINAR)],this.searchData=[],this.producto=new n.a,this.monedas=new g.BehaviorSubject([]),this._padreComprobanteService.actualizarComprobante(this._activeRoute.snapshot.data.codigo,this._activeRoute.snapshot.data.mostrarCombo,!1),this.igv=.18,this._translate.get("continuar").subscribe(function(t){return A.labelContinuar=t}),this.factura=new m.a,this.cabeceraDatosFactura=new b.a,this.esFacturaAnticipo=!1,this.flagRangoFechas=!1,this.listaProductos=[],this.columnasTabla=[new w.a("codigo","codigoItem"),new w.a("descripcion","descripcionItem",{"text-align":"left"}),new w.a("cantidad","cantidad",{"text-align":"right"}),new w.a("unidadMedida","detalle.unidadMedida"),new w.a("valorUnitario","precioUnitario",{"text-align":"right"}),new w.a("igv","montoImpuesto",{"text-align":"right"}),new w.a("isc","detalle.subtotalIsc",{"text-align":"right"}),new w.a("descuento","detalle.descuento",{"text-align":"right"}),new w.a("valorVenta","precioTotal",{"text-align":"right"})]}return t.prototype.ngOnInit=function(){var t=this;this.initFormGroup(),console.log("this.Refresh.CargarPersistencia - ONINIT"),console.log(this.Refresh.CargarPersistencia),this.Refresh.CargarPersistencia||(this._persistenciaService.removePersistenciaSimple("documentosReferencia"),this._persistenciaService.removePersistenciaSimple("checkFacturaAnticipo"),this._persistenciaService.removePersistenciaSimple("listaProductos"),this._persistenciaService.removePersistenciaSimple("cabeceraFactura"),this._persistenciaService.removePersistencias(),this._persistenciaService.removePersistenciaSimple("factura"),this._persistenciaService.removePersistenciaSimple("listaProductos"),this._persistenciaService.removePersistenciaSimple("listaConsultaDocumentosRelacionados"),this._persistenciaService.removePersistenciaSimple("UUIDConsultaComprobante"),this._persistenciaService.removePersistenciaSimple("tipoComprobanteCodigo"),this._persistenciaService.removePersistenciaSimple("entidad"),this._persistenciaService.removePersistenciaSimple("checkFacturaAnticipo"),this._persistenciaService.removePersistenciaSimple("documentosReferenciaTemporal"),this._persistenciaService.removePersistenciaSimple("documentosReferencia")),this.cargarServicios(),this.cargarFactura(),this.setFlagVistaPrevia(),this.seriesService.filtroSeries(localStorage.getItem("id_entidad"),this._tipos.TIPO_DOCUMENTO_FACTURA,this._tipos.TIPO_SERIE_OFFLINE.toString()).subscribe(function(a){t.series=a}),this.listarrazonsocial(),this.esFacturaAnticipo=this._persistenciaService.getEstadoFacturaAnticipo(),!0===this.esFacturaAnticipo&&(this.facturaFormGroup.controls.txtDetraccion.disable(),this.facturaFormGroup.controls.txtDetraccion.setValue("0.00"))},t.prototype.ngAfterViewInit=function(){this.fillCabecera()},t.prototype.ngOnDestroy=function(){this.Refresh.CargarPersistencia=!1},t.prototype.cargarFactura=function(){this.listaProductos=this._persistenciaService.getListaProductos(),this.factura.documentoReferencia=this._persistenciaService.getDocumentosReferencia(),this.calcularMontos()},t.prototype.calcularMontos=function(){this.listaProductos=this._persistenciaService.getListaProductos();var t,a=this.facturaFormGroup.controls.txtDetraccion.value;if(this.factura.detraccion=Number(a),this.factura.totalDescuentos=0,this.factura.sumaAnticipos=0,this.factura.totalAnticipos=0,this.factura.sumaIgv=0,this.factura.sumaIsc=0,this.factura.subTotal=0,this.factura.importeTotal=0,this.factura.sumaOtrosCargos=0,this.factura.sumaOtrosTributos=0,this.factura.sumaOtrosTributos=Number(this.facturaFormGroup.controls.txtSumatoriaOtrosTributos.value),this.factura.sumaOtrosCargos=Number(this.facturaFormGroup.controls.txtSumatoriaOtrosCargos.value),this.factura.importeReferencial="0",this.factura.montoGravadas=0,this.factura.montoExoaneradas=0,this.factura.montoInafectas=0,this.factura.subTotalComprobanteConcepto=0,t=0,this.listaProductos.length>0){this.setTipoIgv(Number(this.listaProductos[0].detalle.codigoTipoIgv));for(var o=0;o<this.listaProductos.length;o++)t+=Number(this.listaProductos[o].cantidad)*Number(this.listaProductos[o].precioUnitario)-Number(this.listaProductos[o].detalle.descuento),this.factura.totalDescuentos=this.factura.totalDescuentos+Number(this.listaProductos[o].detalle.descuento),this.factura.sumaIsc=this.factura.sumaIsc+Number(this.listaProductos[o].detalle.subtotalIsc),this.factura.importeReferencial=(Number(this.factura.importeReferencial)+Number(this.listaProductos[o].cantidad)*Number(this.listaProductos[o].precioUnitario)).toString(),this.factura.subTotalComprobanteConcepto=this.factura.subTotalComprobanteConcepto+Number(this.listaProductos[o].cantidad)*Number(this.listaProductos[o].precioUnitario);this.factura.subTotal=t+this.factura.sumaIsc,this.tipoIgvItems===this._catalogoIgvService.IGV_GRAVADO_RANGO&&(this.factura.sumaIgv=this.factura.subTotal*this._catalogoIgvService.IGV_VALOR)}else this.tipoIgvItems=0;for(var o=0;o<this.factura.documentoReferencia.length;o++)this.factura.totalAnticipos=this.factura.totalAnticipos+Number(this.factura.documentoReferencia[o].anticipo);switch(this.factura.importeTotal=this.factura.subTotal+this.factura.sumaIgv-this.factura.totalAnticipos+this.factura.sumaOtrosCargos+this.factura.sumaOtrosTributos,this.factura.totalComprobante=(this.factura.subTotal+this.factura.sumaIgv-this.factura.totalAnticipos).toString(),this.facturaFormGroup.controls.txtOperacionesGrabadas.setValue("0.00"),this.facturaFormGroup.controls.txtOperacionesExoneradas.setValue("0.00"),this.facturaFormGroup.controls.txtOperacionesInafectas.setValue("0.00"),this.facturaFormGroup.controls.txtTotalDescuentos.setValue(this.formatearNumeroADecimales(this.factura.totalDescuentos)),this.facturaFormGroup.controls.txtTotalAnticipos.setValue(this.formatearNumeroADecimales(this.factura.totalAnticipos)),this.facturaFormGroup.controls.txtSumatoriaIsc.setValue(this.formatearNumeroADecimales(this.factura.sumaIsc)),this.facturaFormGroup.controls.txtSumatoriaIgv.setValue(this.formatearNumeroADecimales(this.factura.sumaIgv)),this.facturaFormGroup.controls.txtSubTotal.setValue(this.formatearNumeroADecimales(this.factura.subTotalComprobanteConcepto)),this.facturaFormGroup.controls.txtImporteTotal.setValue(this.formatearNumeroADecimales(this.factura.importeTotal)),this.tipoIgvItems){case this._catalogoIgvService.IGV_GRAVADO_RANGO:this.factura.montoGravadas=t,this.facturaFormGroup.controls.txtOperacionesGrabadas.setValue(this.formatearNumeroADecimales(this.factura.montoGravadas));break;case this._catalogoIgvService.IGV_EXONERADO_RANGO:this.factura.montoExoaneradas=t,this.facturaFormGroup.controls.txtOperacionesExoneradas.setValue(this.formatearNumeroADecimales(this.factura.montoExoaneradas));break;case this._catalogoIgvService.IGV_INAFECTO_RANGO:this.factura.montoInafectas=t,this.facturaFormGroup.controls.txtOperacionesInafectas.setValue(this.formatearNumeroADecimales(this.factura.montoInafectas))}},t.prototype.sumarOtrosCargos=function(){this.factura.importeTotal=Number(this.facturaFormGroup.controls.txtImporteTotal.value),0===this.listaProductos.length&&(this.factura.importeTotal=0),this.factura.sumaOtrosTributos=Number(this.facturaFormGroup.controls.txtSumatoriaOtrosTributos.value),this.factura.sumaOtrosCargos=Number(this.facturaFormGroup.controls.txtSumatoriaOtrosCargos.value),this.factura.importeTotal=this.factura.importeTotal+this.factura.sumaOtrosTributos+this.factura.sumaOtrosCargos,this.facturaFormGroup.controls.txtImporteTotal.setValue(this.formatearNumeroADecimales(this.factura.importeTotal))},t.prototype.formatearNumeroADecimales=function(t,a){return void 0===a&&(a=2),t.toFixed(a)},t.prototype.setTipoIgv=function(t){t>this._catalogoIgvService.IGV_INAFECTO_RANGO-1?t>this._catalogoIgvService.IGV_EXPORTACION_RANGO-1?this.tipoIgvItems=this._catalogoIgvService.IGV_EXPORTACION_RANGO:this.tipoIgvItems=this._catalogoIgvService.IGV_INAFECTO_RANGO:t>this._catalogoIgvService.IGV_EXONERADO_RANGO-1?this.tipoIgvItems=this._catalogoIgvService.IGV_EXONERADO_RANGO:this.tipoIgvItems=this._catalogoIgvService.IGV_GRAVADO_RANGO},t.prototype.fillCabecera=function(){if(this.cabeceraDatosFactura=this._persistenciaService.getCabeceraFactura(),this.cabeceraDatosFactura&&""!==this.cabeceraDatosFactura.ruc)this.estadoautocomplete.next(!0),this.busqueda(),""!==this.cabeceraDatosFactura.direccionFiscal&&this.eliminarEstiloInput("txtRuc","is-empty"),""!==this.cabeceraDatosFactura.correo&&this.eliminarEstiloInput("txtCorreo","is-empty"),""!==this.cabeceraDatosFactura.sumaOtrosCargos&&this.eliminarEstiloInput("txtSumatoriaOtrosCargos","is-empty"),""!==this.cabeceraDatosFactura.sumaOtrosTributos&&this.eliminarEstiloInput("txtSumatoriaOtrosTributos","is-empty"),""!==this.cabeceraDatosFactura.ruc&&this.eliminarEstiloInput("txtRuc","is-empty"),""!==this.cabeceraDatosFactura.serie&&this.eliminarEstiloInput("cmbSerie","is-empty"),""!==this.cabeceraDatosFactura.fechaEmision&&this.eliminarEstiloInput("txtFechaEmision","is-empty"),""!==this.cabeceraDatosFactura.fechaVencimiento&&this.eliminarEstiloInput("txtFechaVencimiento","is-empty"),""!==this.cabeceraDatosFactura.tipoMoneda&&this.eliminarEstiloInput("cmbMoneda","is-empty"),""!==this.cabeceraDatosFactura.observaciones&&this.eliminarEstiloInput("txtObservaciones","is-empty"),this.facturaFormGroup.controls.txtDireccionFiscal.setValue(this.cabeceraDatosFactura.direccionFiscal),this.facturaFormGroup.controls.txtCorreo.setValue(this.cabeceraDatosFactura.correo),this.facturaFormGroup.controls.txtSumatoriaOtrosCargos.setValue(this.cabeceraDatosFactura.sumaOtrosCargos),this.facturaFormGroup.controls.txtSumatoriaOtrosTributos.setValue(this.cabeceraDatosFactura.sumaOtrosTributos),this.facturaFormGroup.controls.txtRuc.setValue(this.cabeceraDatosFactura.ruc),this.facturaFormGroup.controls.txtDetraccion.setValue(this.cabeceraDatosFactura.detraccion),this.facturaFormGroup.controls.cmbSerie.setValue(this.cabeceraDatosFactura.serie),this.facturaFormGroup.controls.txtFechaEmision.setValue(this.cabeceraDatosFactura.fechaEmision),this.facturaFormGroup.controls.txtFechaVencimiento.setValue(this.cabeceraDatosFactura.fechaVencimiento),this.facturaFormGroup.controls.cmbMoneda.setValue(this.cabeceraDatosFactura.tipoMoneda),this.facturaFormGroup.controls.txtObservaciones.setValue(this.cabeceraDatosFactura.observaciones),this.facturaFormGroup.controls.txtRazonSocial.setValue(this.cabeceraDatosFactura.razonsSocial);else{var t=new Date,a=this.setMes(t.getDate())+"/"+this.setMes(t.getMonth()+1)+"/"+t.getFullYear().toString();this.facturaFormGroup.controls.txtFechaEmision.setValue(a),this.facturaFormGroup.controls.txtFechaVencimiento.setValue(a)}},t.prototype.setFacturaCabeceraDetalle=function(){this.guardarOrganizacion(),this.cabeceraDatosFactura=new b.a,this.cabeceraDatosFactura.ruc=this.facturaFormGroup.controls.txtRuc.value,this.cabeceraDatosFactura.razonsSocial=this.facturaFormGroup.controls.txtRazonSocial.value,this.cabeceraDatosFactura.detraccion=this.facturaFormGroup.controls.txtDetraccion.value,this.cabeceraDatosFactura.serie=this.facturaFormGroup.controls.cmbSerie.value,this.cabeceraDatosFactura.fechaEmision=this.facturaFormGroup.controls.txtFechaEmision.value,this.cabeceraDatosFactura.fechaVencimiento=this.facturaFormGroup.controls.txtFechaVencimiento.value,this.cabeceraDatosFactura.tipoMoneda=this.facturaFormGroup.controls.cmbMoneda.value,this.cabeceraDatosFactura.sumaOtrosCargos=this.facturaFormGroup.controls.txtSumatoriaOtrosCargos.value,this.cabeceraDatosFactura.sumaOtrosTributos=this.facturaFormGroup.controls.txtSumatoriaOtrosTributos.value,this.cabeceraDatosFactura.observaciones=this.facturaFormGroup.controls.txtObservaciones.value,this.cabeceraDatosFactura.direccionFiscal=this.facturaFormGroup.controls.txtDireccionFiscal.value,this.cabeceraDatosFactura.correo=this.facturaFormGroup.controls.txtCorreo.value,this._persistenciaService.setCabeceraFactura(this.cabeceraDatosFactura)},t.prototype.setFlagVistaPrevia=function(){this.listaProductos=this._persistenciaService.getListaProductos(),0===this.listaProductos.length?this.flagVistaPrevia=!1:this.flagVistaPrevia=!0},t.prototype.cargarServicios=function(){this.monedas=this._tablaMaestraService.obtenerPorIdTabla(C.e),this.todosTipoConceptos=this._conceptoDocumentoService.obtenerTodosConceptosDocumentos()},t.prototype.eliminarEstiloInput=function(t,a){setTimeout(function(){$("#"+t).parent().removeClass(a)},200)},t.prototype.iniciarData=function(t){this.listaProductos=this._persistenciaService.getListaProductos(),this.tabla.insertarData(this.listaProductos)},t.prototype.irDocumentoRelacionado=function(){this.setFacturaCabeceraDetalle(),this._persistenciaService.setFactura(this.factura);var t=this._persistenciaService.getDocumentosReferencia();this._persistenciaService.setPersistenciaSimple("documentosReferenciaTemporal",t),this._route.navigateByUrl(this._rutas.URL_COMPROBANTE_FACTURA_DOCUMENTO_RELACIONADO)},t.prototype.irAgregarServicio=function(){this.setFacturaCabeceraDetalle(),this._route.navigateByUrl(this._rutas.URL_COMPROBANTE_FACTURA_SERVICIO_AGREGAR)},t.prototype.irAgregarBien=function(){this.setFacturaCabeceraDetalle(),this._route.navigateByUrl(this._rutas.URL_COMPROBANTE_FACTURA_BIEN_AGREGAR)},t.prototype.irVistaPrevia=function(){return U(this,void 0,void 0,function(){return j(this,function(t){switch(t.label){case 0:return[4,this.guardarOrganizacion()];case 1:return t.sent(),this.validacionComprobanteMontos(),[2]}})})},t.prototype.validacionComprobanteMontos=function(){var t=this;this.factura.importeTotal<0?swal({title:"Advertencia",text:"El monto por anticipos no puede ser mayor al monto total del comprobante.",type:"warning",showCancelButton:!1,confirmButtonColor:"#2399e5",cancelButtonColor:"#2399e5",confirmButtonText:"Aceptar"}).then(function(a){a&&(t.irDocumentoRelacionado(),t._route.navigateByUrl(t._rutas.URL_COMPROBANTE_FACTURA_DOCUMENTO_RELACIONADO))}):(this.setFacturaCabeceraDetalle(),this.cargarDataVistaPrevia(),this._route.navigateByUrl(this._rutas.URL_COMPROBANTE_FACTURA_VISTA_PREVIA))},t.prototype.cargarDataVistaPrevia=function(){var t=this;this.factura.idSerie=this.facturaFormGroup.controls.cmbSerie.value;var a=this.series.find(function(a){return t.factura.idSerie===a.idSerie.toString()});this.factura.serieNombre=a.serie,this.factura.numeroComprobante=this.factura.serieNombre,this.factura.rucCompradorBase=this.facturaFormGroup.controls.txtRuc.value,this.factura.rucProveedorBase=localStorage.getItem("org_ruc"),this.factura.rucProveedor=this.factura.rucProveedorBase,this.factura.rucComprador=this.factura.rucCompradorBase,this.factura.usuarioCreacion=JSON.parse(localStorage.getItem("usuarioActual")).nombreusuario,this.factura.usuarioModificacion="SYSTEM",this.factura.idTablaTipoComprobante=this._tipos.ID_TABLA_TIPO_COMPROBANTE,this.esFacturaAnticipo,this.factura.idTipoComprobante=this._tipos.TIPO_DOCUMENTO_FACTURA,this.factura.idRegistroTipoComprobante=this._tipos.TIPO_DOCUMENTO_FACTURA,this.factura.razonSocialProveedor=localStorage.getItem("org_nombre"),this.factura.razonSocialComprador=this.facturaFormGroup.controls.txtRazonSocial.value,this.factura.observacionComprobante=this.facturaFormGroup.controls.txtObservaciones.value,this.factura.tipoComprobante=this._tipos.TIPO_DOCUMENTO_FACTURA_NOMBRE,this.factura.montoPagado=this.factura.importeTotal.toString(),this.factura.igv=this.factura.sumaIgv.toString(),this.factura.isc=this.factura.sumaIsc.toString(),this.factura.otrosTributos=this.factura.sumaOtrosTributos.toString(),this.factura.descuento=this.factura.totalDescuentos.toString(),this.factura.subtotalComprobante=(Number(this.factura.importeReferencial)-Number(this.factura.totalDescuentos)).toString(),this.factura.totalComprobante=this.factura.totalComprobante,this.factura.tipoItem=this.listaProductos[0].tipoProducto.toString(),this.monedas.subscribe(function(a){var o=a.findIndex(function(a){return a.codigo==t.facturaFormGroup.get("cmbMoneda").value});t.factura.moneda=a[o].descripcionCorta,t.factura.idTablaMoneda=a[o].tabla.toString(),t.factura.idRegistroMoneda=Number(a[o].codigo).toString()});var o=this.facturaFormGroup.controls.txtFechaEmision.value,e=o.toString().split("/"),r=Number(e[0]),i=Number(e[1])-1,c=Number(e[2]);this.factura.fechaEmision=Number(new Date(c,i,r)),o=this.facturaFormGroup.controls.txtFechaVencimiento.value,e=o.toString().split("/"),r=Number(e[0]),i=Number(e[1])-1,c=Number(e[2]),this.factura.fechaVencimiento=Number(new Date(c,i,r)),this.factura.direccionProveedor=localStorage.getItem("org_direccion"),this.factura.porcentajeDetracction=this.facturaFormGroup.controls.txtDetraccion.value,this.factura.detraccion=this.facturaFormGroup.controls.txtDetraccion.value,this.factura.direccionComprador=this.facturaFormGroup.controls.txtDireccionFiscal.value,this.factura.direccionProveedor=localStorage.getItem("org_direccion"),this.factura.porcentajeImpuesto=this.formatearNumeroADecimales(100*this.igv),this.factura.detalleEbiz=this._persistenciaService.getListaProductos(),this.org_busqueda=this._entidadPersistenciaService.getEntidad(),this.factura.documentoEntidad[0].idTipoEntidad=this._tipos.TIPO_ENTIDAD_EMISOR,this.factura.documentoEntidad[0].descripcionTipoEntidad=this._tipos.DESCRIPCION_TIPO_ENTIDAD_EMISOR,this.factura.documentoEntidad[0].idEntidad=localStorage.getItem("id_entidad"),this.factura.documentoEntidad[0].tipoDocumento="6",this.factura.documentoEntidad[0].documento=localStorage.getItem("org_ruc"),this.factura.documentoEntidad[0].denominacion=localStorage.getItem("org_nombre"),this.factura.documentoEntidad[0].nombreComercial=localStorage.getItem("org_nombre"),this.factura.documentoEntidad[0].direccionFiscal=localStorage.getItem("org_direccion"),this.factura.documentoEntidad[0].ubigeo="040101",this.factura.documentoEntidad[0].email=localStorage.getItem("org_email"),this.factura.documentoEntidad[0].correo=localStorage.getItem("org_email"),this.factura.documentoEntidad[0].notifica=this._tipos.NOTIFICACION_DOCUMENTO_ENTIDAD,this.factura.documentoEntidad[1].idTipoEntidad=this._tipos.TIPO_ENTIDAD_RECEPTOR,this.factura.documentoEntidad[1].descripcionTipoEntidad=this._tipos.DESCRIPCION_TIPO_ENTIDAD_RECEPTOR;var s,n=this.facturaFormGroup.controls.txtRuc.value,l=this._entidadServices.buscarPorRuc(n);l&&l.subscribe(function(t){t&&(s=t.id)}),this.factura.documentoEntidad[1].idEntidad=s,this.factura.documentoEntidad[1].tipoDocumento="6",this.factura.documentoEntidad[1].documento=this.facturaFormGroup.controls.txtRuc.value,this.factura.documentoEntidad[1].denominacion=this.facturaFormGroup.controls.txtRazonSocial.value,this.factura.documentoEntidad[1].nombreComercial=this.org_busqueda.direccionFiscal,this.factura.documentoEntidad[1].direccionFiscal=this.facturaFormGroup.controls.txtDireccionFiscal.value,this.factura.documentoEntidad[1].ubigeo=this.org_busqueda.ubigeo,this.factura.documentoEntidad[1].email=this.facturaFormGroup.controls.txtCorreo.value,this.factura.documentoEntidad[1].correo=this.facturaFormGroup.controls.txtCorreo.value,this.factura.documentoEntidad[1].notifica=this._tipos.NOTIFICACION_DOCUMENTO_ENTIDAD;var u=[Number(this._tipos.CONCEPTO_OPERACION_GRAVADA_CODIGO),Number(this._tipos.CONCEPTO_OPERACION_INAFECTAS_CODIGO),Number(this._tipos.CONCEPTO_OPERACION_EXONERADO_CODIGO),Number(this._tipos.CONCEPTO_OPERACION_GRATUITA_CODIGO),Number(this._tipos.CONCEPTO_OPERACION_SUB_TOTAL_VENTA_CODIGO),Number(this._tipos.CONCEPTO_OPERACION_TOTAL_DESCUENTOS_CODIGO),Number(this._tipos.CONCEPTO_OPERACION_DETRACCIONES_CODIGO),Number(this._tipos.CONCEPTO_OPERACION_OTROS_CARGOS_CODIGO)];if(this.tiposConceptos=this._conceptoDocumentoService.obtenerPorCodigos(this.todosTipoConceptos,u),this.setDocumentoConcepto(),this.esFacturaAnticipo){this.factura.documentoParametro=[];var p=new D.a;p.descripcionParametro=this._tipos.FACTURA_ANTICIPO_DESCRIPCION_PARAMETRO,p.idParametro=this._tipos.FACTURA_ANTICIPO_ID_PARAMETRO,p.jsonn.tipo=this._tipos.FACTURA_ANTICIPO_TIPO_PARAMETRO,p.jsonn.valor=this._tipos.FACTURA_ANTICIPO_TIPO_PARAMETRO_VALOR,p.jsonn.auxiliarEntero=this._tipos.FACTURA_ANTICIPO_ID_DOMINIO,p.jsonn.auxiliarCaracter=this._tipos.FACTURA_ANTICIPO_CODIGO_SUNAT,p.jsonn.auxiliarFecha=null,p.jsonn.auxiliarImporte=this.factura.importeTotal,this.factura.documentoParametro.push(p),this.factura.documentoParametro[0].json=JSON.stringify(this.factura.documentoParametro[0].jsonn)}else this.factura.documentoParametro=[];this.calcularMontos(),this._persistenciaService.setFactura(this.factura)},t.prototype.setDocumentoConcepto=function(){var t=this,a=new S.a;this.tiposConceptos.subscribe(function(o){for(var e=0,r=o;e<r.length;e++){var i=r[e];switch(Number(i.codigo)){case Number(t._tipos.CONCEPTO_OPERACION_GRAVADA_CODIGO):a=new S.a,a.idConcepto=i.idConcepto.toString(),a.descripcionConcepto=i.descripcion,a.codigoConcepto=i.codigo,a.importe=t.factura.montoGravadas.toString(),t.factura.documentoConcepto.push(a);break;case Number(t._tipos.CONCEPTO_OPERACION_INAFECTAS_CODIGO):a=new S.a,a.idConcepto=i.idConcepto.toString(),a.descripcionConcepto=i.descripcion,a.codigoConcepto=i.codigo,a.importe=t.factura.montoInafectas.toString(),t.factura.documentoConcepto.push(a);break;case Number(t._tipos.CONCEPTO_OPERACION_EXONERADO_CODIGO):a=new S.a,a.idConcepto=i.idConcepto.toString(),a.descripcionConcepto=i.descripcion,a.codigoConcepto=i.codigo,a.importe=t.factura.montoExoaneradas.toString(),t.factura.documentoConcepto.push(a);break;case Number(t._tipos.CONCEPTO_OPERACION_GRATUITA_CODIGO):a=new S.a,a.idConcepto=i.idConcepto.toString(),a.descripcionConcepto=i.descripcion,a.codigoConcepto=i.codigo,a.importe="0.00",t.factura.documentoConcepto.push(a);break;case Number(t._tipos.CONCEPTO_OPERACION_SUB_TOTAL_VENTA_CODIGO):a=new S.a,a.idConcepto=i.idConcepto.toString(),a.descripcionConcepto=i.descripcion,a.codigoConcepto=i.codigo,a.importe=t.factura.subTotalComprobanteConcepto.toString(),t.factura.documentoConcepto.push(a);break;case Number(t._tipos.CONCEPTO_OPERACION_TOTAL_DESCUENTOS_CODIGO):a=new S.a,a.idConcepto=i.idConcepto.toString(),a.descripcionConcepto=i.descripcion,a.codigoConcepto=i.codigo,a.importe=t.factura.totalDescuentos.toString(),t.factura.documentoConcepto.push(a);break;case Number(t._tipos.CONCEPTO_OPERACION_DETRACCIONES_CODIGO):a=new S.a,a.idConcepto=i.idConcepto.toString(),a.descripcionConcepto=i.descripcion,a.codigoConcepto=i.codigo,a.importe=t.factura.detraccion.toString(),t.factura.documentoConcepto.push(a);break;case Number(t._tipos.CONCEPTO_OPERACION_OTROS_CARGOS_CODIGO):a=new S.a,a.idConcepto=i.idConcepto.toString(),a.descripcionConcepto=i.descripcion,a.codigoConcepto=i.codigo,a.importe=t.factura.sumaOtrosCargos.toString(),t.factura.documentoConcepto.push(a)}}})},t.prototype.validacionesFacturaAnticipo=function(t){var a=this;if(!0===t)if(0===this._persistenciaService.getListaProductos().length)this.tituloFacturaAnticipo="Factura de Anticipo",this.invocarModalMontoacturaAnticipo(),this.esFacturaAnticipo=t,this._persistenciaService.setEstadoFacturaAnticipo(!0);else{var o=this;this.esFacturaAnticipo=!1,this.facturaFormGroup.controls.txtDetraccion.enable(),$("#chkFacturaAnticipo").prop("checked",!1),swal({title:"¬øEst√° seguro?",html:'<div class="text-center"> El comprobante ya tiene √≠tems ingresados, desea eliminarlos. </div>',type:"warning",showCancelButton:!0,confirmButtonColor:"#4caf50",cancelButtonColor:"#f44336",confirmButtonText:"S√ç",cancelButtonText:"NO"}).catch(function(t){o._persistenciaService.setEstadoFacturaAnticipo(!1)}).then(function(t){t?(o._persistenciaService.eliminarListaItemsFactura(),o.listaProductos=o._persistenciaService.getListaProductos(),o.tabla.insertarData(o.listaProductos),a.tituloFacturaAnticipo="Item(s) eliminado(s) correctamente.<br>Ingrese el monto de la factura de anticipo",a.invocarModalMontoacturaAnticipo()):(a.facturaFormGroup.controls.txtDetraccion.enable(),o._persistenciaService.setEstadoFacturaAnticipo(!1))})}else{var e=this;this.esFacturaAnticipo&&swal({title:"¬øEst√° seguro?",html:'<div class="text-center"> ¬°Se eliminar√°n los datos guardados! </div>',type:"warning",showCancelButton:!0,confirmButtonColor:"#4caf50",cancelButtonColor:"#f44336",confirmButtonText:"S√ç",cancelButtonText:"NO"}).catch(function(t){}).then(function(t){t?(e._persistenciaService.eliminarListaItemsFactura(),e.listaProductos=e._persistenciaService.getListaProductos(),e.tabla.insertarData(e.listaProductos),a.recargarTabla(),e._persistenciaService.setEstadoFacturaAnticipo(!1),e.esFacturaAnticipo=!1,e.facturaFormGroup.controls.txtDetraccion.enable(),e.listaProductos=e._persistenciaService.getListaProductos(),e.tabla.insertarData(e.listaProductos),a.factura.documentoParametro=[],e.calcularMontos()):(e.esFacturaAnticipo=!0,$("#chkFacturaAnticipo").prop("checked",!0))})}this.listaProductos=this._persistenciaService.getListaProductos(),this.tabla.insertarData(this.listaProductos)},t.prototype.seleccionFacturaAnticipo=function(t){var a,o,e,r,i=this;this._translate.get("mensajeComprobanteConDocumentosRelacionados").subscribe(function(t){return a=t}),this._translate.get("mensajeNotificacionTituloAdvertencia").subscribe(function(t){return o=t}),this._translate.get("eliminar").subscribe(function(t){return e=t}),this._translate.get("cancelar").subscribe(function(t){return r=t});var c=this;$("#chkFacturaAnticipo").prop("checked",!t),this.factura.documentoReferencia.length>0?swal({title:"Advertencia",text:a,type:"warning",showCancelButton:!0,confirmButtonColor:"#2399e5",cancelButtonColor:"#2399e5",confirmButtonText:e,cancelButtonText:r}).catch(function(t){}).then(function(a){!0===a?(swal({title:"Advertencia",text:"Documentos Relacionados eliminados exitosamente.",confirmButtonText:c.labelContinuar}),c._persistenciaService.removeDocumentosReferencia(),i.factura.documentoReferencia=[],i.validacionesFacturaAnticipo(t)):$("#chkFacturaAnticipo").prop("checked",!1)}):this.validacionesFacturaAnticipo(t)},t.prototype.invocarModalMontoacturaAnticipo=function(){var t,a=this;this._translate.get("formatoMontoSwalLabel").subscribe(function(a){return t=a});var o=this;swal({title:this.tituloFacturaAnticipo,html:'<div class="form-group label-floating" xmlns="http://www.w3.org/1999/html"><label class="control-label">Monto Factura Anticipo (sin IGV)<span class="star">*</span> </label><input type="text" id="montoAnticipo" type="text" class="form-control"/> <label>'+t+"</label></div>",allowOutsideClick:!1,preConfirm:function(){return new Promise(function(t,a){setTimeout(function(){var o=0,e=/([0-9,]{1,9})|([.]([0-9]{2}))/g,r=$("#montoAnticipo").val();r=r.split(",");r.filter(function(t){if(e.test(t)){var a=Number(t);return isNaN(a)?(o=1,!1):a<=0&&(o=2,!0)}return o=1,!0});if(o)switch(o){case 1:swal.showValidationError(),a(new Error("Formato Inv√°lido"));break;case 2:swal.showValidationError(),a(new Error("Monto Inv√°lido"))}else t(r)},500)})},showCancelButton:!0,confirmButtonColor:"#2399e5",cancelButtonColor:"#2399e5",confirmButtonText:"Agregar",cancelButtonText:"Regresar"}).catch(function(t){return console.log("CANCEL")}).then(function(t){t?(a.setFacturaAnticipo(Number(o.formatearNumeroADecimales(Number(t)))),swal({type:"success",title:"Acci√≥n Exitosa",confirmButtonText:o.labelContinuar,confirmButtonColor:"#4caf50"}),o.listaProductos=o._persistenciaService.getListaProductos(),o.tabla.insertarData(o.listaProductos),a.esFacturaAnticipo=!0,$("#chkFacturaAnticipo").prop("checked",!0),a._persistenciaService.setEstadoFacturaAnticipo(!0),a.facturaFormGroup.controls.txtDetraccion.disable(),a.facturaFormGroup.controls.txtDetraccion.setValue("0.00")):(a.esFacturaAnticipo=!1,$("#chkFacturaAnticipo").prop("checked",!1),a._persistenciaService.setEstadoFacturaAnticipo(!1),a.facturaFormGroup.controls.txtDetraccion.enable())})},t.prototype.setFacturaAnticipo=function(t){var a=new D.a;this.producto.descripcionItem="Factura de Anticipo",this.producto.idRegistroUnidad="0000001",this.producto.idTablaUnidad="10000",this.producto.codigoUnidadMedida="NIU",this.producto.posicion="1",this.producto.codigoItem=this._tipos.FACTURA_ANTICIPO_VALOR_CODIGO_ITEM,this.producto.precioUnitario=this.formatearNumeroADecimales(t),this.producto.precioTotal=this.formatearNumeroADecimales(Number((Number(this.producto.precioUnitario)*this.igv+Number(this.producto.precioUnitario)).toString())),this.producto.cantidad="1.00",this.producto.montoImpuesto=this.formatearNumeroADecimales(Number(this.producto.precioUnitario)*this.igv),this.producto.detalle.idTipoIgv=this._tipos.FACTURA_ANTICIPO_ID_TIPO_IGV,this.producto.detalle.codigoTipoIgv=this._tipos.FACTURA_ANTICIPO_CODIGO_TIPO_IGV,this.producto.detalle.descripcionTipoIgv=this._tipos.FACTURA_ANTICIPO_DESCRIPCION_TIPO_IGV,this.producto.detalle.idTipoIsc=this._tipos.ID_ISC_ID_TIPO_NO_TIENE,this.producto.detalle.codigoTipoIsc=this._tipos.CODIGO_TIPO_ISC_NO_TIENE,this.producto.detalle.descripcionTipoIsc=this._tipos.DESCRIPCION_TIPO_ISC_NO_TIENE,this.producto.detalle.idTipoPrecio=this._tipos.TIPO_PRECIO_PRECIO_UNITARIO_ID,this.producto.detalle.codigoTipoPrecio=this._tipos.TIPO_PRECIO_PRECIO_UNITARIO_CODIGO,this.producto.detalle.descripcionTipoPrecio=this._tipos.TIPO_PRECIO_PRECIO_UNITARIO_DESCRIPCION,this.producto.detalle.idProducto=null,this.producto.detalle.numeroItem="1",this.producto.detalle.precioUnitarioVenta=this.producto.precioTotal,this.producto.detalle.unidadMedida="-",this.producto.detalle.subtotalVenta=this.producto.precioTotal,this.producto.detalle.subtotalIgv=this.producto.montoImpuesto,this.producto.detalle.subtotalIsc="0.00",this.producto.detalle.descuento="0.00",this.producto.tipoProducto=this._tipos.TIPO_PRODUCTO_SERVICIO,this.producto.idTipoItemFactura=this._tipos.FACTURA_ANTICIPO_IDENTIFICADOR_ITEM,this._persistenciaService.agregarProducto(this.producto),this.factura.tipoItem=this._tipos.TIPO_PRODUCTO_SERVICIO.toString(),a.descripcionParametro=this._tipos.FACTURA_ANTICIPO_DESCRIPCION_PARAMETRO,a.idParametro=this._tipos.FACTURA_ANTICIPO_ID_PARAMETRO,a.jsonn.tipo=this._tipos.FACTURA_ANTICIPO_TIPO_PARAMETRO,a.jsonn.valor=this._tipos.FACTURA_ANTICIPO_TIPO_PARAMETRO_VALOR,a.jsonn.auxiliarEntero=this._tipos.FACTURA_ANTICIPO_ID_DOMINIO,a.jsonn.auxiliarCaracter=this._tipos.FACTURA_ANTICIPO_CODIGO_SUNAT,a.jsonn.auxiliarFecha=null,a.jsonn.auxiliarImporte=this.factura.importeTotal,this.factura.documentoParametro.push(a),this._persistenciaService.setFactura(this.factura),this.calcularMontos(),this.facturaFormGroup.controls.txtDetraccion.disable(),this.facturaFormGroup.controls.txtDetraccion.setValue("0.00"),this.setFlagVistaPrevia()},t.prototype.setMes=function(t){return t/10>1?t.toString():"0"+t.toString()},t.prototype.initFormGroup=function(){var t=new Date,a=this.setMes(t.getDate())+"/"+this.setMes(t.getMonth()+1)+"/"+t.getFullYear().toString();this.facturaFormGroup=new r.FormGroup({txtRuc:new r.FormControl("",[r.Validators.required,r.Validators.pattern("[0-9]+"),r.Validators.maxLength(11),r.Validators.minLength(11)]),txtRazonSocial:new r.FormControl("",[r.Validators.required,r.Validators.pattern("[A-Za-z0-9√°√©√≠√≥√∫√Å√â√ç√ì√ö/%\\s-.;,]+"),r.Validators.maxLength(100),r.Validators.minLength(1)]),txtDetraccion:new r.FormControl("0.00",[r.Validators.required,r.Validators.pattern("[0-9]+[.][0-9]{2}"),r.Validators.maxLength(15),r.Validators.minLength(4)]),cmbSerie:new r.FormControl("",[r.Validators.required]),txtDireccionFiscal:new r.FormControl({value:"",disabled:!0}),txtCorreo:new r.FormControl("",[r.Validators.required,r.Validators.pattern("[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)*@[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)*[.][a-zA-Z]{1,5}")]),txtFechaEmision:new r.FormControl(a,R.a.validarFechaEmision("errorFecha",this._translate,this._datePipe)),txtFechaVencimiento:new r.FormControl(a,[r.Validators.required,R.a.fechaDeberiaSerMayorAHoy("errorFecha")]),cmbMoneda:new r.FormControl("",[r.Validators.required]),chkFacturaAnticipo:new r.FormControl(""),txtObservaciones:new r.FormControl(""),txtOperacionesGrabadas:new r.FormControl({value:"0.00",disabled:!0}),txtOperacionesInafectas:new r.FormControl({value:"0.00",disabled:!0}),txtOperacionesExoneradas:new r.FormControl({value:"0.00",disabled:!0}),txtTotalDescuentos:new r.FormControl({value:"0.00",disabled:!0}),txtSumatoriaOtrosTributos:new r.FormControl("0.00"),txtSumatoriaOtrosCargos:new r.FormControl("0.00"),txtTotalAnticipos:new r.FormControl({value:"0.00",disabled:!0}),txtSumatoriaIsc:new r.FormControl({value:"0.00",disabled:!0}),txtSumatoriaIgv:new r.FormControl({value:"0.00",disabled:!0}),txtSubTotal:new r.FormControl({value:"0.00",disabled:!0}),txtImporteTotal:new r.FormControl({value:"0.00",disabled:!0})},R.a.fechaDeberiaSerMenorEmisionVencimiento("txtFechaEmision","txtFechaVencimiento","errorFecha"))},t.prototype.eliminar=function(t){this.calcularMontos(),this._persistenciaService.setListaProductos(t)},t.prototype.agregarItem=function(t){},t.prototype.ejecutarAccion=function(t){var a=t[0],o=new n.a;switch(o=t[1],a){case u.a.ELIMINAR:this.esFacturaAnticipo&&(this.esFacturaAnticipo=!this.esFacturaAnticipo,this._persistenciaService.setEstadoFacturaAnticipo(this.esFacturaAnticipo)),this._persistenciaService.eliminarItem(o),this.recargarTabla(),this.setFlagVistaPrevia(),this.calcularMontos();break;case u.a.EDITAR:if(this.esFacturaAnticipo)this.editarItemFacturaAnticipo();else switch(o.tipoProducto){case this._tipos.TIPO_PRODUCTO_BIEN:this._persistenciaService.setPersistenciaSimple("idEditarProducto",o.id),this.setFacturaCabeceraDetalle(),this._route.navigateByUrl(this._rutas.URL_COMPROBANTE_FACTURA_BIEN_EDITAR);break;case this._tipos.TIPO_PRODUCTO_SERVICIO:this._persistenciaService.setPersistenciaSimple("idEditarProducto",o.id),this.setFacturaCabeceraDetalle(),this._route.navigateByUrl(this._rutas.URL_COMPROBANTE_FACTURA_SERVICIO_EDITAR)}}},t.prototype.editarItemFacturaAnticipo=function(){var t,a=this,o=this._persistenciaService.getListaProductos()[0],e=this;this._translate.get("formatoMontoSwalLabel").subscribe(function(a){return t=a}),swal({title:"Editar Factura Anticipo",html:'<div class="form-group label-floating" xmlns="http://www.w3.org/1999/html"><label class="control-label">Monto Factura Anticipo (sin IGV)<span class="star">*</span> </label><input type="text" id="montoAnticipo" type="text" class="form-control" value="'+o.precioUnitario+'"/> <label>'+t+"</label></div>",allowOutsideClick:!1,preConfirm:function(){return new Promise(function(t,a){setTimeout(function(){var o=0,e=/([0-9,]{1,9})|([.]([0-9]{2}))/g,r=$("#montoAnticipo").val();r=r.split(",");r.filter(function(t){if(e.test(t)){var a=Number(t);return isNaN(a)?(o=1,!1):a<=0&&(o=2,!0)}return o=1,!0});if(o)switch(o){case 1:swal.showValidationError(),a(new Error("Formato Inv√°lido"));break;case 2:swal.showValidationError(),a(new Error("Monto Inv√°lido"))}else t(r)},500)})},showCancelButton:!0,confirmButtonColor:"#2399e5",cancelButtonColor:"#2399e5",confirmButtonText:"Editar",cancelButtonText:"Regresar"}).catch(function(t){return console.log("CANCEL")}).then(function(t){t&&(e._persistenciaService.removePersistenciaSimple("listaProductos"),a.setFacturaAnticipo(Number(t)),swal({type:"success",title:"Acci√≥n Exitosa",confirmButtonText:e.labelContinuar,confirmButtonColor:"#4caf50"}),e.listaProductos=e._persistenciaService.getListaProductos(),e.tabla.insertarData(e.listaProductos))})},t.prototype.recargarTabla=function(){this.listaProductos=this._persistenciaService.getListaProductos(),this.tabla.insertarData(this.listaProductos)},t.prototype.tipoProductoSeleccionado=function(t){switch(t.codigo){case this._tipos.TIPO_PRODUCTO_BIEN:this.irAgregarBien();break;case this._tipos.TIPO_PRODUCTO_SERVICIO:this.irAgregarServicio()}},t.prototype.probarBotonVistaPrevia=function(){console.log(this.facturaFormGroup.controls),console.log("!( "+this.flagVistaPrevia+" && "+this.facturaFormGroup.valid+" )"),console.log(!(this.flagVistaPrevia&&this.facturaFormGroup.valid))},t.prototype.busquedaruc=function(t){var a=this;if(11==this.facturaFormGroup.get("txtRuc").value.length){var o=this._entidadServices.buscarPorRuc(this.facturaFormGroup.get("txtRuc").value);null!=o&&o.subscribe(function(t){a.entidad_uno=t||new x.a,a.facturaFormGroup.controls.txtRazonSocial.setValue(a.entidad_uno.denominacion),a.facturaFormGroup.controls.txtCorreo.setValue(a.entidad_uno.correoElectronico),a.facturaFormGroup.controls.txtDireccionFiscal.setValue(a.entidad_uno.direccionFiscal),a.entidad_uno.correoElectronico?"-"===a.entidad_uno.correoElectronico?a.facturaFormGroup.controls.txtCorreo.enable():a.facturaFormGroup.controls.txtCorreo.disable():(a.facturaFormGroup.controls.txtCorreo.enable(),a.facturaFormGroup.controls.txtDireccionFiscal.enable()),a._entidadPersistenciaService.setEntidad(a.entidad_uno),setTimeout(function(){$("input").each(function(){$(this.parentElement).removeClass("is-empty")})},200),a.eliminarEstiloInputDosNiveles("txtRazonSocial","is-empty")})}else!this.facturaFormGroup.controls.txtcorreo.enabled&&this.facturaFormGroup.controls.txtRazonSocial.value.toString().length<1&&(this.facturaFormGroup.controls.txtRazonSocial.reset(),this.facturaFormGroup.controls.txtCorreo.reset(),this.facturaFormGroup.controls.txtDireccionFiscal.reset(),this.agregarEstiloInput("txtRazonSocial","is-empty"),this.agregarEstiloInput("txtCorreo","is-empty"),this.agregarEstiloInput("txtDireccionFiscal","is-empty"),this.agregarEstiloInputDosNiveles("txtRazonSocial","is-empty"))},t.prototype.agregarEstiloInputDosNiveles=function(t,a){setTimeout(function(){$("#"+t).parent().parent().addClass(a)},200)},t.prototype.agregarEstiloInput=function(t,a){setTimeout(function(){$("#"+t).parent().addClass(a)},200)},t.prototype.listarrazonsocial=function(){var t=this,a=(new Date).getTime();setTimeout(function(){var o=(new Date).getTime();a+4e3<=o&&t._entidadServices.buscarPorRazonSocial(t.facturaFormGroup.get("txtRazonSocial").value,"6").subscribe(function(a){t.searchData=a})},4e3)},t.prototype.autocompleListFormatter=function(t){return t.denominacion},t.prototype.listarOrganizacionesDeAutcompletado=function(t){return t?this._entidadServices.buscarPorRazonSocial(t,"6"):I.Observable.of([])},t.prototype.cambioAutocomplete=function(){"object"==typeof this.facturaFormGroup.get("txtRazonSocial").value&&this.estadoautocomplete.next(!0)},t.prototype.busqueda=function(){var t=this;1==this.estadoautocomplete.value?this.rucquery=this.cabeceraDatosFactura.ruc:this.rucquery=this.facturaFormGroup.get("txtRazonSocial").value.documento,this.estadoautocomplete.next(!1),void 0!=this.facturaFormGroup.get("txtRazonSocial").value&&""!=this.facturaFormGroup.get("txtRazonSocial").value&&this._entidadServices.buscarPorRuc(this.rucquery).subscribe(function(a){t.entidad_uno=a||new x.a,t.facturaFormGroup.controls.txtRuc.setValue(t.entidad_uno.documento),t.facturaFormGroup.controls.txtDireccionFiscal.setValue(t.entidad_uno.direccionFiscal),t.facturaFormGroup.controls.txtRazonSocial.setValue(t.entidad_uno.denominacion),t.facturaFormGroup.controls.txtCorreo.setValue(t.entidad_uno.correoElectronico),t._entidadPersistenciaService.setEntidad(t.entidad_uno),$("input").each(function(){$(this.parentElement).removeClass("is-empty")})})},t.prototype.validarRangoFechaCreacionVencimiento=function(){new Date(this.facturaFormGroup.controls.txtFechaEmision.value)>new Date(this.facturaFormGroup.controls.txtFechaVencimiento.value)?(this.flagRangoFechas=!0,this.facturaFormGroup.invalid):this.flagRangoFechas=!1},t.prototype.eliminarEstiloInputDosNiveles=function(t,a){setTimeout(function(){$("#"+t).parent().parent().removeClass(a)},200)},t.prototype.guardarOrganizacion=function(){var t=new x.b;t.correo=this.facturaFormGroup.controls.txtCorreo.value,t.direccion=this.facturaFormGroup.controls.txtDireccionFiscal.value,t.nombreComercial=this.facturaFormGroup.controls.txtRazonSocial.value,t.ruc=this.facturaFormGroup.controls.txtRuc.value,t.ruc.toString().length>10&&this._conceptoDocumentoService.guardarOrganizacion(t).subscribe(function(t){console.log("**************************************************"),console.log(t)})},t}();V([o.i(e.ViewChild)("otro"),M("design:type","function"==typeof(k=void 0!==i.a&&i.a)&&k||Object)],B.prototype,"tabla",void 0),V([o.i(e.ViewChild)("inputRazonSocial"),M("design:type","function"==typeof(z=void 0!==e.ElementRef&&e.ElementRef)&&z||Object)],B.prototype,"razonautocomplete",void 0),B=V([o.i(e.Component)({selector:"app-factura",template:o("./src/app/facturacion-electronica/comprobantes/factura/factura.component.html"),styles:[o("./src/app/facturacion-electronica/comprobantes/factura/factura.component.css")]}),M("design:paramtypes",["function"==typeof(L=void 0!==d.a&&d.a)&&L||Object,"function"==typeof(q=void 0!==c.a&&c.a)&&q||Object,"function"==typeof(X=void 0!==s.c&&s.c)&&X||Object,"function"==typeof(Z=void 0!==s.b&&s.b)&&Z||Object,"function"==typeof(H=void 0!==f.a&&f.a)&&H||Object,"function"==typeof(J=void 0!==v.a&&v.a)&&J||Object,"function"==typeof(Y=void 0!==_.a&&_.a)&&Y||Object,"function"==typeof(K=void 0!==O.a&&O.a)&&K||Object,"function"==typeof(Q=void 0!==F.a&&F.a)&&Q||Object,"function"==typeof(W=void 0!==A.a&&A.a)&&W||Object,"function"==typeof(tt=void 0!==T.a&&T.a)&&tt||Object,"function"==typeof(at=void 0!==E.a&&E.a)&&at||Object,"function"==typeof(ot=void 0!==P.c&&P.c)&&ot||Object,"function"==typeof(et=void 0!==y.DatePipe&&y.DatePipe)&&et||Object,"function"==typeof(rt=void 0!==N.a&&N.a)&&rt||Object,"function"==typeof(it=void 0!==G.a&&G.a)&&it||Object])],B);var k,z,L,q,X,Z,H,J,Y,K,Q,W,tt,at,ot,et,rt,it},"./src/app/facturacion-electronica/comprobantes/factura/factura.module.ts":function(t,a,o){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=o("./node_modules/@angular/core/@angular/core.es5.js"),r=o("./node_modules/@angular/common/@angular/common.es5.js"),i=o("./src/app/facturacion-electronica/comprobantes/factura/factura.routing.module.ts"),c=o("./src/app/facturacion-electronica/comprobantes/factura/factura.component.ts"),s=o("./node_modules/@angular/forms/@angular/forms.es5.js"),n=o("./src/app/directives/datepicker.module.ts"),l=o("./src/app/facturacion-electronica/comprobantes/item/item.module.ts"),u=o("./src/app/facturacion-electronica/general/data-table/data-table.module.ts"),p=o("./src/app/facturacion-electronica/comprobantes/comprobante-vista-previa/comprobante-vista-previa.module.ts"),d=o("./src/app/facturacion-electronica/general/consulta/consulta.module.ts"),m=o("./src/app/facturacion-electronica/comprobantes/comprobante-documento-relacionado/comprobante-documento-relacionado.module.ts"),h=o("./src/app/facturacion-electronica/comprobantes/comprobante-item/comprobante-item.module.ts"),f=o("./src/app/facturacion-electronica/comprobantes/comprobante-emitir/comprobante-emitir.module.ts"),b=o("./src/app/facturacion-electronica/general/services/person.service.ts"),v=o("./node_modules/@ngx-translate/core/index.js"),g=o("./node_modules/ng2-auto-complete/dist/index.js"),_=(o.n(g),o("./node_modules/ng2-completer/index.js")),C=o("./src/app/facturacion-electronica/general/directivas/directivas.module.ts"),O=o("./src/app/facturacion-electronica/general/services/documento/tablaMaestra.service.ts"),F=o("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.entidad.service.ts"),I=o("./src/app/facturacion-electronica/comprobantes/factura/factura-anticipo-modal.component.ts"),x=o("./node_modules/@angular/common/@angular/common/http.es5.js"),A=o("./src/app/facturacion-electronica/general/services/tokenInterceptor.service.ts"),T=o("./src/app/facturacion-electronica/general/services/refresh.service.ts"),S=o("./src/app/facturacion-electronica/general/emision-comprobante/emision-comprobante.module.ts");o.d(a,"FacturaModule",function(){return D});var E=this&&this.__decorate||function(t,a,o,e){var r,i=arguments.length,c=i<3?a:null===e?e=Object.getOwnPropertyDescriptor(a,o):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,a,o,e);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(a,o,c):r(a,o))||c);return i>3&&c&&Object.defineProperty(a,o,c),c},D=function(){function t(){}return t}();D=E([o.i(e.NgModule)({imports:[r.CommonModule,i.a,s.ReactiveFormsModule,n.a,l.a,u.a,h.a,p.a,m.a,d.a,f.a,v.a,_.a,g.Ng2AutoCompleteModule,C.a,S.a],declarations:[c.a,I.a],providers:[T.a,b.a,O.a,F.a,{provide:x.c,useClass:A.a,multi:!0}]})],D)},"./src/app/facturacion-electronica/comprobantes/factura/factura.routing.module.ts":function(t,a,o){"use strict";var e=o("./node_modules/@angular/core/@angular/core.es5.js"),r=o("./node_modules/@angular/router/@angular/router.es5.js"),i=o("./src/app/facturacion-electronica/comprobantes/factura/factura.component.ts"),c=o("./src/app/facturacion-electronica/comprobantes/item/item.component.ts"),s=o("./src/app/facturacion-electronica/comprobantes/comprobante-vista-previa/comprobante-vista-previa.component.ts"),n=o("./src/app/facturacion-electronica/comprobantes/comprobante-item/comprobante-item.component.ts"),l=o("./src/app/facturacion-electronica/general/consulta/consulta.component.ts"),u=o("./src/app/facturacion-electronica/comprobantes/comprobante-documento-relacionado/comprobante-documento-relacionado.component.ts"),p=o("./src/app/facturacion-electronica/comprobantes/comprobante-item/comprobante-editar-base.component.ts"),d=o("./src/app/facturacion-electronica/general/emision-comprobante/emision-comprobante.component.ts");o.d(a,"a",function(){return f});var m=this&&this.__decorate||function(t,a,o,e){var r,i=arguments.length,c=i<3?a:null===e?e=Object.getOwnPropertyDescriptor(a,o):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,a,o,e);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(a,o,c):r(a,o))||c);return i>3&&c&&Object.defineProperty(a,o,c),c},h=[{path:"",children:[{path:"",pathMatch:"full",redirectTo:"crear"},{path:"crear",component:i.a,data:{codigo:"01",mostrarCombo:!0}},{path:"emitir/:id",component:d.a,data:{codigo:"01",mostrarCombo:!1,titulo:"Factura Emitida"}},{path:"crear/vistaprevia",component:s.a,data:{codigo:"01",tipoDocumento:"01",titulo:"Factura",mostrarCombo:!1}},{path:"crear/servicio/agregar",component:n.a,data:{codigo:"01",tipoAccion:1,tipoDocumento:"01",mostrarCombo:!1}},{path:"crear/servicio/editar",component:n.a,data:{codigo:"01",tipoAccion:2,tipoDocumento:"01",mostrarCombo:!1}},{path:"crear/bien/agregar",component:n.a,data:{codigo:"01",tipoAccion:3,tipoDocumento:"01",mostrarCombo:!1}},{path:"crear/bien/editar",component:n.a,data:{codigo:"01",tipoAccion:4,tipoDocumento:"01",mostrarCombo:!1}},{path:"crear/docRelacionado/buscar",component:l.a,data:{codigo:"01",tipoConsulta:9,titulo:"consultaDocumentoRelacionadoFactura",mostrarCombo:!1}},{path:"crear/docRelacionado",component:u.a,data:{codigo:"01",tipoDocumento:"01",mostrarCombo:!1}},{path:"editarProducto/:id",component:p.a},{path:":tipoItem",component:c.a}]}],f=function(){function t(){}return t}();f=m([o.i(e.NgModule)({imports:[r.a.forChild(h)],exports:[r.a]})],f)}});