webpackJsonp([3],{"./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/documentoConceptoNotaCredito.ts":function(t,e,o){"use strict";var r=o("./src/app/facturacion-electronica/general/models/comprobantes/documentoConceptoGeneral.ts");o.d(e,"a",function(){return i});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),i=function(t){function e(){var e=t.call(this)||this;return e.idConcepto="",e.codigoConcepto="",e.descripcionConcepto="",e.importe="0.00",e}return a(e,t),e}(r.a)},"./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/documentoParametroNotaCredito.ts":function(t,e,o){"use strict";var r=o("./src/app/facturacion-electronica/general/models/comprobantes/documentoParametroGeneral.ts");o.d(e,"a",function(){return i});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),i=function(t){function e(){var e=t.call(this)||this;return e.idParametro="",e.descripcionParametro="",e.json="",e}return a(e,t),e}(r.a)},"./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/documentoReferenciaNotaCredito.ts":function(t,e,o){"use strict";var r=o("./src/app/facturacion-electronica/general/models/comprobantes/documentoReferenciaGeneral.ts");o.d(e,"a",function(){return i});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),i=function(t){function e(){var e=t.call(this)||this;return e.idDocumentoDestino="",e.tipoDocumentoOrigen="",e.tipoDocumentoDestino="",e.serieDocumentoDestino="",e.correlativoDocumentoDestino="",e.fechaEmisionDestino=0,e.totalImporteDestino="0.00",e.totalImporteAuxiliarDestino="0.00",e.totalPorcentajeAuxiliarDestino="0.00",e.tipoDocumentoOrigenDescripcion="",e.tipoDocumentoDestinoDescripcion="",e.monedaDestino="",e.totalMonedaDestino="0.00",e.auxiliar1="",e.auxiliar2="",e}return a(e,t),e}(r.a)},"./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/entidadNotaCredito.ts":function(t,e,o){"use strict";var r=o("./src/app/facturacion-electronica/general/models/organizacion/entidadGeneral.ts");o.d(e,"a",function(){return i});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),i=function(t){function e(){var e=t.call(this)||this;return e.idTipoEntidad="",e.descripcionTipoEntidad="",e.idEntidad="",e.tipoDocumento="",e.documento="",e.denominacion="",e.nombreComercial="",e.direccionFiscal="",e.ubigeo="",e.correo="",e.notifica="",e}return a(e,t),e}(r.a)},"./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/jsonDocumentoParametroNotaCredito.ts":function(t,e,o){"use strict";o.d(e,"a",function(){return r});var r=function(){function t(){this.tipo=0,this.valor="",this.auxiliarEntero=0,this.auxiliarCaracter="",this.auxiliarFecha=null,this.auxiliarImporte=0}return t}()},"./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/notaCredito.ts":function(t,e,o){"use strict";var r=o("./src/app/facturacion-electronica/general/models/documento/tablaMaestra.ts");o.d(e,"a",function(){return a});var a=function(){function t(){this.numeroComprobante="",this.rucProveedor="",this.rucComprador="",this.idTablaTipoComprobante="",this.idRegistroTipoComprobante="",this.idTipoComprobante="",this.razonSocialProveedor="",this.razonSocialComprador="",this.moneda="",this.fechaEmision=0,this.observacionComprobante="",this.tipoComprobante="",this.montoPagado="",this.igv="",this.isc="",this.otrosTributos="",this.descuento="",this.importeReferencial="",this.subtotalComprobante="",this.totalComprobante="",this.tipoItem="",this.idTablaMoneda="",this.idRegistroMoneda="",this.usuarioCreacion="",this.usuarioModificacion="",this.idSerie="",this.motivoComprobante="",this.detalleEbiz=new Array,this.documentoEntidad=new Array,this.documentoConcepto=new Array,this.documentoParametro=new Array,this.documentoReferencia=new Array,this.auxMonedaTablaMaestra=new r.c}return t}()},"./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.component.css":function(t,e,o){e=t.exports=o("./node_modules/css-loader/lib/css-base.js")(!1),e.push([t.i,".navbar.navbar-info{margin:0 15px 15px}",""]),t.exports=t.exports.toString()},"./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.component.html":function(t,e){t.exports='<div class="card">\r\n  <div class="card-header card-header-text" data-background-color="blue">\r\n    <h4 class="card-title">{{titulo | translate}}</h4>\r\n  </div>\r\n  <div class="card-content">\r\n    <form [formGroup]="notaDeCreditoFormGroup" (ngSubmit)="vistaPrevia()" autocomplete="off">\r\n      <div class="row">\r\n        <div class="col-md-3">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'tipoComprobante\' | translate}}<span class="star">*</span></label>\r\n            <select id="cmbTipoComprobante"\r\n                    name="cmbTipoComprobante"\r\n                    formControlName="cmbTipoComprobante"\r\n                    class="form-control"\r\n                    (change)="cambioTipoComprobante()">\r\n              <option *ngFor="let tipoComprobante of tiposDeComprobantes | async" [value]="tipoComprobante.codigo">\r\n                {{tipoComprobante.descripcionLarga | translate}}\r\n              </option>\r\n            </select>\r\n            <div class="row" *ngIf="!notaDeCreditoFormGroup.get(\'cmbTipoComprobante\').valid && notaDeCreditoFormGroup.get(\'cmbTipoComprobante\').touched">\r\n              <div class="col-md-12">\r\n                <span *ngIf="notaDeCreditoFormGroup.get(\'cmbTipoComprobante\').hasError(\'required\')"\r\n                    class="text-danger">{{\'campoRequerido\' | translate}}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-3">\r\n          <div class="form-group label-floating">\r\n            <label id="lblSerie" class="control-label">{{\'serieComprobante\' | translate}}<span class="star">*</span></label>\r\n            <select type="text"\r\n                    id="cmbSerieComprobante"\r\n                    formControlName="cmbSerieComprobante"\r\n                    (change)="limpiar()"\r\n                    class="form-control">\r\n              <option *ngFor="let serieComprobante of seriesComprobante | async" [ngValue]="serieComprobante.serie">{{serieComprobante.serie}}</option>\r\n            </select>\r\n            <div class="row" *ngIf="!notaDeCreditoFormGroup.get(\'cmbSerieComprobante\').valid && notaDeCreditoFormGroup.get(\'cmbSerieComprobante\').touched">\r\n              <div class="col-md-12">\r\n                <span *ngIf="notaDeCreditoFormGroup.get(\'cmbSerieComprobante\').hasError(\'required\')"\r\n                      class="text-danger">{{\'campoRequerido\' | translate}}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-3">\r\n          <div class="form-group label-floating">\r\n            <label id="lblCorrelativo" class="control-label">{{\'correlativoComprobante\' | translate}}<span class="star">*</span></label>\r\n            <input  type="text"\r\n                    id="txtCorrelativoComprobante"\r\n                    formControlName="txtCorrelativoComprobante"\r\n                    correlativoDirective\r\n                    (change)="limpiar()"\r\n                    class="form-control">\r\n            <div class="row" *ngIf="!notaDeCreditoFormGroup.get(\'txtCorrelativoComprobante\').valid && notaDeCreditoFormGroup.get(\'txtCorrelativoComprobante\').touched">\r\n              <div class="col-md-12">\r\n                <span *ngIf="notaDeCreditoFormGroup.get(\'txtCorrelativoComprobante\').hasError(\'required\')"\r\n                      class="text-danger">{{\'campoRequerido\' | translate}}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-3">\r\n          <div class="form-group">\r\n            <button id="btnBuscar" type="button" class="btn btn-xs btn-default"\r\n                    (click)="buscarComprobante()"\r\n                    [disabled]="!(notaDeCreditoFormGroup.get(\'cmbSerieComprobante\').valid && notaDeCreditoFormGroup.get(\'txtCorrelativoComprobante\').valid)">\r\n              <span class="btn-label">\r\n                  <i class="material-icons">search</i>\r\n              </span>\r\n              {{\'buscar\' | translate}}\r\n            </button>\r\n\r\n            <button id="btnVisualizar" type="button" class="btn btn-xs btn-default"\r\n                    (click)="visualizarComprobanteReferencia()"\r\n                    [disabled]="!(escogioUnComprobante | async)">\r\n              <span class="btn-label ">\r\n                  <i class="material-icons">visibility</i>\r\n              </span>\r\n              {{\'ver\' | translate}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="row">\r\n        <div class="col-md-3">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'serieNotaCredito\' | translate}}<span class="star">*</span></label>\r\n            <select id="cmbSerie"\r\n                    name="cmbSerie"\r\n                    formControlName="cmbSerie"\r\n                    class="form-control">\r\n              <option [value]="-1" disabled>{{\'seleccioneUnaSerie\' | translate}}</option>\r\n              <option *ngFor="let serie of series | async" [value]="serie.idSerie">\r\n                {{serie.serie}}\r\n              </option>\r\n            </select>\r\n            <div class="row" *ngIf="!notaDeCreditoFormGroup.get(\'cmbSerie\').valid && notaDeCreditoFormGroup.get(\'cmbSerie\').touched">\r\n              <div class="col-md-12">\r\n                <span *ngIf="notaDeCreditoFormGroup.get(\'cmbSerie\').hasError(\'required\')"\r\n                      class="text-danger">{{\'campoRequerido\' | translate}}\r\n                </span>\r\n                <span *ngIf="notaDeCreditoFormGroup.get(\'cmbSerie\').hasError(\'seleccioneUnaSerie\')"\r\n                      class="text-danger">{{\'seleccioneUnaSerie\' | translate}}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-3">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'tipoNotaCredito\' | translate}}<span class="star">*</span></label>\r\n            <select id="cmbTipoNotaCredito"\r\n                    name="cmbTipoNotaCredito"\r\n                    formControlName="cmbTipoNotaCredito"\r\n                    class="form-control"\r\n                    (change)="cambioTipoNotaCredito()">\r\n              <option disabled [value]="-1">{{\'seleccioneUnTipoDeNotaDeCredito\' | translate}}</option>\r\n              <option *ngFor="let tipoDeNotaDeCredito of tiposDeNotasDeCreditos | async" [value]="tipoDeNotaDeCredito.codigo_dominio">\r\n                {{tipoDeNotaDeCredito.descripcion_dominio | translate}}\r\n              </option>\r\n            </select>\r\n            <div class="row" *ngIf="!notaDeCreditoFormGroup.get(\'cmbTipoNotaCredito\').valid && notaDeCreditoFormGroup.get(\'cmbTipoNotaCredito\').touched">\r\n              <div class="col-md-12">\r\n                  <span *ngIf="notaDeCreditoFormGroup.get(\'cmbTipoNotaCredito\').hasError(\'required\')"\r\n                        class="text-danger">{{\'campoRequerido\' | translate}}\r\n                  </span>\r\n                <span *ngIf="notaDeCreditoFormGroup.get(\'cmbTipoNotaCredito\').hasError(\'seleccioneUnTipoDeNotaDeCredito\')"\r\n                      class="text-danger">{{\'seleccioneUnTipoDeNotaDeCredito\' | translate}}\r\n                  </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-3">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'documento\' | translate}}</label>\r\n            <input type="text" class="form-control"\r\n                   id="txtDocumento"\r\n                   formControlName="txtDocumento">\r\n          </div>\r\n        </div>\r\n        <div class="col-md-3">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'razonSocial\' | translate}}</label>\r\n            <input type="text" class="form-control"\r\n                   id="txtRazonSocial"\r\n                   formControlName="txtRazonSocial">\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-3">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'tipoMoneda\' | translate}}</label>\r\n            <input type="text" class="form-control"\r\n                   id="txtMoneda"\r\n                   formControlName="txtMoneda">\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-12">\r\n          <div class="form-group label-floating">\r\n            <label id="lblMotivo" class="control-label">{{\'motivoNotaDeCredito\' | translate}}<span class="star">*</span></label>\r\n            <textarea class="form-control" type="text" formControlName="txtMotivoNotaCredito" rows="3"></textarea>\r\n            <div class="row" *ngIf="!notaDeCreditoFormGroup.get(\'txtMotivoNotaCredito\').valid && notaDeCreditoFormGroup.get(\'txtMotivoNotaCredito\').touched">\r\n              <div class="col-md-12">\r\n                <span *ngIf="notaDeCreditoFormGroup.get(\'txtMotivoNotaCredito\').hasError(\'maxlength\')"\r\n                      class="text-danger">{{\'maximoCaracteres\' | translate: {digito: 250} }}\r\n                </span>\r\n                <span *ngIf="notaDeCreditoFormGroup.get(\'txtMotivoNotaCredito\').hasError(\'required\')"\r\n                      class="text-danger">{{\'campoRequerido\' | translate}}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <ng-container [ngSwitch]="habilitarPorTipoDeNotaDeCredito">\r\n        <ng-container *ngSwitchCase="TiposVistasNotaCredito.NORMAL">\r\n          <app-tipo-nota-credito-normal\r\n            #tipoVistaNormalNotaCredito\r\n            [padreFormGroup] = "notaDeCreditoFormGroup"\r\n            [nombreControl] = "controlNameVistaNormal"\r\n          >\r\n          </app-tipo-nota-credito-normal>\r\n        </ng-container>\r\n        <ng-container *ngSwitchCase="TiposVistasNotaCredito.TABLA">\r\n          <div class="card">\r\n            <div class="card-header card-header-icon" data-background-color="blue">\r\n              <i class="material-icons">list</i>\r\n            </div>\r\n            <div class="row"><h3>{{\'listaItems\' | translate}}</h3></div>\r\n            <div class="row"><p>&nbsp;</p></div>\r\n            <nav class="navbar navbar-info" role="navigation"></nav>\r\n            <div class="card-content">\r\n              <app-tipo-nota-credito-datatable\r\n                #tipoVistaTablaNotaCredito\r\n                (estaValidadoNotaCreditoDataTable)="estaValidadoNotaCreditoDataTable($event)"\r\n                (seInicio)="seInicioDataTable($event)"\r\n              >\r\n              </app-tipo-nota-credito-datatable>\r\n            </div>\r\n          </div>\r\n        </ng-container>\r\n      </ng-container>\r\n\r\n      <div class="row">\r\n        <div class="col-md-12">\r\n          <div class="label-floating">\r\n            <label class="control-label">{{\'observaciones\' | translate}}</label>\r\n            <textarea id="txtObservacion" name="txtObservacion" formControlName="txtObservacionesNotaCredito" class="form-control" rows="3"></textarea>\r\n            <div class="row" *ngIf="!notaDeCreditoFormGroup.get(\'txtObservacionesNotaCredito\').valid && notaDeCreditoFormGroup.get(\'txtObservacionesNotaCredito\').touched">\r\n              <div class="col-md-12">\r\n                <span *ngIf="notaDeCreditoFormGroup.get(\'txtObservacionesNotaCredito\').hasError(\'maxlength\')"\r\n                      class="text-danger">{{\'maximoCaracteres\' | translate: {digito: 250} }}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row pull-right">\r\n        <div class="col-md-12">\r\n          <button id="btnVistaPrevia" type="submit" class="btn btn-default"\r\n                  [disabled]="!(notaDeCreditoFormGroup.valid && esValidadoDataTableNotaCredito && (escogioUnComprobante | async))">\r\n            {{\'vistaPrevia\' | translate}}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</div>\r\n'},"./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.component.ts":function(t,e,o){"use strict";var r=o("./node_modules/@angular/core/@angular/core.es5.js"),a=o("./node_modules/@angular/forms/@angular/forms.es5.js"),i=o("./src/app/facturacion-electronica/general/services/comprobantes/comprobantes.service.ts"),n=o("./src/app/facturacion-electronica/general/services/documento/tablaMaestra.service.ts"),s=o("./src/app/facturacion-electronica/general/models/documento/tablaMaestra.ts"),c=o("./node_modules/rxjs/BehaviorSubject.js"),l=(o.n(c),o("./src/app/facturacion-electronica/general/utils/tipos.service.ts")),d=o("./src/app/facturacion-electronica/general/services/configuracionDocumento/parametros.service.ts"),p=o("./src/app/facturacion-electronica/general/services/archivos/archivo.service.ts"),u=o("./src/app/facturacion-electronica/comprobantes/nota-credito/utils/TiposVistaNotaCredito.ts"),m=o("./node_modules/@angular/router/@angular/router.es5.js"),v=o("./src/app/facturacion-electronica/general/services/configuracionDocumento/series.service.ts"),b=o("./src/app/facturacion-electronica/general/utils/estilos.services.ts"),C=o("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/notaCredito.ts"),h=o("./src/app/facturacion-electronica/general/services/documento/conceptoDocumento.service.ts"),f=o("./src/app/facturacion-electronica/comprobantes/nota-credito/servicios/nota-credito.service.ts"),g=o("./src/app/facturacion-electronica/general/services/utils/validadorPersonalizado.ts"),I=o("./src/app/facturacion-electronica/comprobantes/services/padre-comprobante.service.ts"),_=o("./src/app/facturacion-electronica/general/models/comprobantes/comprobante.ts"),D=o("./src/app/facturacion-electronica/comprobantes/services/persistencia.service.ts"),x=o("./node_modules/@ngx-translate/core/index.js");o.d(e,"a",function(){return T});var O=this&&this.__decorate||function(t,e,o,r){var a,i=arguments.length,n=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(e,o,n):a(e,o))||n);return i>3&&n&&Object.defineProperty(e,o,n),n},N=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},T=function(){function t(t,e,o,r,a,i,n,s,c,l,d,p,m,v){this._comprobantesService=t,this._tablaMaestraService=e,this._tiposService=o,this._parametrosServicie=r,this._archivoService=a,this._seriesService=i,this.router=n,this.route=s,this._translateService=c,this._estilosService=l,this._conceptoDocumentoService=d,this._notaCreditoService=p,this._padreComprobanteService=m,this._persistencia=v,this.titulo="notaCreditoElectronica",this.TiposVistasNotaCredito=u.a,this.tiposVistasDeNotaCredito=u.a,this._padreComprobanteService.actualizarComprobante(this.route.snapshot.data.codigo,this.route.snapshot.data.mostrarCombo,!1)}return t.prototype.ngOnInit=function(){this._notaCreditoService.pasoAVistaPrevia.next(!1),this.inicializarVariables(),this.cargarSeries(),this.iniciarNotaDeCreditoFormGroup(),this.cargarTiposDeComprobantes(),this.cargarDatosNotaCreditoPersistencia(),this.cargarPersistencia()},t.prototype.ngOnDestroy=function(){},t.prototype.cargarPersistencia=function(){var t=this,e=new _.a;if(e=this._persistencia.getPersistenciaSimple("comprobanteConsultaSeleccionado")){this.notaDeCreditoFormGroup.controls.cmbTipoComprobante.setValue(e.tipoComprobante),this.cambioTipoComprobante();var o=e.numeroComprobante.split("-");this.notaDeCreditoFormGroup.controls.txtDocumento.setValue(e.vcDocumentoCliente),this.notaDeCreditoFormGroup.controls.txtRazonSocial.setValue(e.vcDenominacionCliente),this.notaDeCreditoFormGroup.controls.txtMoneda.setValue(e.moneda),this.notaDeCreditoFormGroup.controls.cmbSerieComprobante.setValue(o[0]),this.notaDeCreditoFormGroup.controls.txtCorrelativoComprobante.setValue(o[1]),this._estilosService.eliminarEstiloInput("cmbSerieComprobante","is-empty"),this._estilosService.eliminarEstiloInput("txtCorrelativoComprobante","is-empty"),this._estilosService.eliminarEstiloInput("cmbTipoComprobante","is-empty"),this._estilosService.eliminarEstiloInput("txtDocumento","is-empty"),this._estilosService.eliminarEstiloInput("txtRazonSocial","is-empty"),this._estilosService.eliminarEstiloInput("txtMoneda","is-empty"),this._notaCreditoService.buscarComprobanteReferencia(e.inIdcomprobantepago,this.todosTiposUnidades),this._notaCreditoService.comprobanteReferencia.subscribe(function(e){t.escogioUnComprobante.next(null!=e)}),this._persistencia.removePersistenciaSimple("comprobanteConsultaseleccionedo")}},t.prototype.inicializarVariables=function(){this.escogioUnComprobante=new c.BehaviorSubject(!1),this.habilitarPorTipoDeNotaDeCredito=-1,this.esValidadoDataTableNotaCredito=!0,this.controlNameVistaNormal="vistaNormal",this.controlNameVistaDataTable="vistaDataTable",this.notaCredito=new C.a,this.todosTiposDeNotasDeCreditos=this._parametrosServicie.obtenerParametrosPorId(this._tiposService.PARAMETRO_TIPO_NOTA_CREDITO_ELECTRONICA),this.todosTipoConceptos=this._conceptoDocumentoService.obtenerTodosConceptosDocumentos();var t=[this._tiposService.CONCEPTO_OPERACION_GRAVADA_CODIGO,this._tiposService.CONCEPTO_OPERACION_INAFECTAS_CODIGO,this._tiposService.CONCEPTO_OPERACION_EXONERADO_CODIGO,this._tiposService.CONCEPTO_OPERACION_GRATUITA_CODIGO,this._tiposService.CONCEPTO_OPERACION_SUB_TOTAL_VENTA_CODIGO,this._tiposService.CONCEPTO_OPERACION_TOTAL_DESCUENTOS_CODIGO];this.tiposConceptos=this._conceptoDocumentoService.obtenerPorCodigos(this.todosTipoConceptos,t),this.todosTiposMonedas=this._tablaMaestraService.obtenerPorIdTabla(s.e),this.todosTiposUnidades=this._tablaMaestraService.obtenerPorIdTabla(s.f)},t.prototype.cargarSeries=function(){this.todasSeries=this._seriesService.filtroSeries(localStorage.getItem("id_entidad"),this._tiposService.TIPO_DOCUMENTO_NOTA_CREDITO,this._tiposService.TIPO_SERIE_ONLINE.toString()),this.seriesComprobante=new c.BehaviorSubject([])},t.prototype.filtrarSeriesComprobante=function(){this.seriesComprobante=this._seriesService.filtroSeries(localStorage.getItem("id_entidad"),this.notaDeCreditoFormGroup.controls.cmbTipoComprobante.value,this._tiposService.TIPO_SERIE_ONLINE.toString())},t.prototype.filtrarSeries=function(t){var e=this;void 0===t&&(t=!1);var o=this.notaDeCreditoFormGroup.controls.cmbTipoComprobante.value;this.notaDeCreditoFormGroup.controls.cmbSerie.reset("-1"),this.notaDeCreditoFormGroup.controls.cmbSerie.enable(),this._estilosService.eliminarEstiloInput("cmbSerie","is-empty"),this.series=this._seriesService.filtrarSeriesPorIdTipoComprobante(this.todasSeries,o),t&&this.series.subscribe(function(t){if(t.length>0){var o=t.find(function(t){return t.serie===e.notaCredito.numeroComprobante});e.notaDeCreditoFormGroup.controls.cmbSerie.setValue(o.idSerie)}})},t.prototype.cargarDatosNotaCreditoPersistencia=function(){this._notaCreditoService.obtenerNotaCreditoPersistencia(),this._notaCreditoService.estaUsandoPersistencia.value&&(this.notaCredito=this._notaCreditoService.notaCredito.value,this.cargarCabecera(),this.cargarDocumentoReferencia(),this.cargarDocumentoParametro(),this._notaCreditoService.eliminarNotaCreditoPersistencia())},t.prototype.cargarDocumentoReferencia=function(){void 0!==this.notaCredito.documentoReferencia[0]&&(this.notaDeCreditoFormGroup.controls.cmbTipoComprobante.setValue(this.notaCredito.documentoReferencia[0].tipoDocumentoDestino),this.filtrarSeries(!0),this.filtrarSeriesComprobante(),this.notaDeCreditoFormGroup.controls.cmbSerieComprobante.setValue(this.notaCredito.documentoReferencia[0].serieDocumentoDestino),this.notaDeCreditoFormGroup.controls.txtCorrelativoComprobante.setValue(this.notaCredito.documentoReferencia[0].correlativoDocumentoDestino),this.escogioUnComprobante.next(!0),this._estilosService.eliminarEstiloInput("cmbSerieComprobante","is-empty"),this._estilosService.eliminarEstiloInput("cmbTipoComprobante","is-empty"),this._estilosService.eliminarEstiloInput("txtCorrelativoComprobante","is-empty"),this.notaDeCreditoFormGroup.controls.cmbSerieComprobante.enable(),this.notaDeCreditoFormGroup.controls.txtCorrelativoComprobante.enable())},t.prototype.cargarDocumentoParametro=function(){void 0!==this.notaCredito.documentoParametro[0]&&this.cargarTiposDeNotasDeCredito(!0)},t.prototype.cargarCabecera=function(){this.notaDeCreditoFormGroup.controls.txtMotivoNotaCredito.setValue(this.notaCredito.motivoComprobante),this.notaDeCreditoFormGroup.controls.txtObservacionesNotaCredito.setValue(this.notaCredito.observacionComprobante),this.notaDeCreditoFormGroup.controls.txtDocumento.setValue(this.notaCredito.rucComprador),this.notaDeCreditoFormGroup.controls.txtRazonSocial.setValue(this.notaCredito.razonSocialComprador),this.notaDeCreditoFormGroup.controls.txtMoneda.setValue(this.notaCredito.moneda),this._estilosService.eliminarEstiloInput("txtMotivoNotaCredito","is-empty"),this._estilosService.eliminarEstiloInput("txtObservacionesNotaCredito","is-empty"),this._estilosService.eliminarEstiloInput("txtDocumento","is-empty"),this._estilosService.eliminarEstiloInput("txtRazonSocial","is-empty"),this._estilosService.eliminarEstiloInput("txtMoneda","is-empty")},t.prototype.cargarTiposDeNotasDeCredito=function(t){var e=this;void 0===t&&(t=!1);var o=[];switch(this.notaDeCreditoFormGroup.get("cmbTipoComprobante").value){case this._tiposService.TIPO_DOCUMENTO_FACTURA:o=[this._tiposService.TIPO_NOTA_CREDITO_ANULACION_DE_OPERACION,this._tiposService.TIPO_NOTA_CREDITO_ANULACION_POR_ERROR_RUC,this._tiposService.TIPO_NOTA_CREDITO_CORRECCION_DE_LA_DESCRIPCION,this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_GLOBAL,this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_POR_ITEM,this._tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_TOTAL,this._tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_POR_ITEM,this._tiposService.TIPO_NOTA_CREDITO_BONIFICACION,this._tiposService.TIPO_NOTA_CREDITO_DISMINUCION_EN_EL_VALOR];break;case this._tiposService.TIPO_DOCUMENTO_BOLETA:o=[this._tiposService.TIPO_NOTA_CREDITO_ANULACION_DE_OPERACION,this._tiposService.TIPO_NOTA_CREDITO_ANULACION_POR_ERROR_RUC,this._tiposService.TIPO_NOTA_CREDITO_CORRECCION_DE_LA_DESCRIPCION,this._tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_TOTAL,this._tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_POR_ITEM,this._tiposService.TIPO_NOTA_CREDITO_DISMINUCION_EN_EL_VALOR]}this.notaDeCreditoFormGroup.controls.cmbTipoNotaCredito.reset("-1"),this._estilosService.eliminarEstiloInput("cmbTipoNotaCredito","is-empty"),this.escogioUnComprobante.subscribe(function(r){if(r){if(e.tiposDeNotasDeCreditos=e._parametrosServicie.obtenerPorCodigoDeTipoDeComprobante(e.todosTiposDeNotasDeCreditos,o),e.notaDeCreditoFormGroup.controls.cmbTipoNotaCredito.enable(),t&&void 0!==e.notaCredito.documentoParametro[0]){var a=JSON.parse(e.notaCredito.documentoParametro[0].json);e.tiposDeNotasDeCreditos.subscribe(function(t){t.length>0&&(e.notaDeCreditoFormGroup.controls.cmbTipoNotaCredito.setValue(a.auxiliarCaracter),e.cambioTipoNotaCredito())})}}else e.notaDeCreditoFormGroup.get("cmbTipoNotaCredito").disable()})},t.prototype.cargarTiposDeComprobantes=function(){this.todosTiposComprobantes=this._tablaMaestraService.obtenerPorIdTabla(s.a);var t=[this._tiposService.TIPO_DOCUMENTO_FACTURA,this._tiposService.TIPO_DOCUMENTO_BOLETA];this.tiposDeComprobantes=this._tablaMaestraService.obtenerPorCodigosDeTablaMaestra(this.todosTiposComprobantes,t)},t.prototype.iniciarNotaDeCreditoFormGroup=function(){this.notaDeCreditoFormGroup=new a.FormGroup({cmbSerie:new a.FormControl({value:"",disabled:!0},[a.Validators.required,g.a.validarSelectForm("seleccioneUnaSerie")]),cmbTipoComprobante:new a.FormControl("",[a.Validators.required]),cmbSerieComprobante:new a.FormControl({value:"",disabled:!0},[a.Validators.required]),txtCorrelativoComprobante:new a.FormControl({value:"",disabled:!0},[a.Validators.required]),cmbTipoNotaCredito:new a.FormControl({value:"",disabled:!0},[a.Validators.required,g.a.validarSelectForm("seleccioneUnTipoDeNotaDeCredito")]),txtMotivoNotaCredito:new a.FormControl("",[a.Validators.required,a.Validators.maxLength(250)]),txtObservacionesNotaCredito:new a.FormControl("",[a.Validators.maxLength(250)]),txtDocumento:new a.FormControl({value:"",disabled:!0},[a.Validators.required]),txtRazonSocial:new a.FormControl({value:"",disabled:!0},[a.Validators.required]),txtMoneda:new a.FormControl({value:"",disabled:!0},[a.Validators.required])})},t.prototype.verificarEstadoComprobante=function(t){var e=[this._tiposService.TIPO_ESTADO_AUTORIZADO,this._tiposService.TIPO_ESTADO_AUTORIZADO_CON_OBSERVACIONES];return console.log(t),console.log(-1!==e.findIndex(function(e){return e===Number(t)})),-1!==e.findIndex(function(e){return e===Number(t)})},t.prototype.buscarComprobante=function(){var t=this;this._comprobantesService.buscarPorTipoComprobanteSerieCorrelativo(this.notaDeCreditoFormGroup.controls.cmbTipoComprobante.value,this.notaDeCreditoFormGroup.controls.cmbSerieComprobante.value,this.notaDeCreditoFormGroup.controls.txtCorrelativoComprobante.value).subscribe(function(e){if(e){var o="";t._translateService.get("mensajeErrorBusquedaComprobanteEnNotaCredito").take(1).subscribe(function(t){return o=t}),t.verificarEstadoComprobante(e.chEstadocomprobantepago)?(t.escogioUnComprobante.next(!0),t._notaCreditoService.cargandoDetalleComprobante(e,t.todosTiposUnidades),t.notaDeCreditoFormGroup.get("txtDocumento").setValue(e.entidadcompradora.vcDocumento),t.notaDeCreditoFormGroup.get("txtRazonSocial").setValue(e.entidadcompradora.vcDenominacion),t.notaDeCreditoFormGroup.get("txtMoneda").setValue(e.chMonedacomprobantepago),t._estilosService.eliminarEstiloInput("txtDocumento","is-empty"),t._estilosService.eliminarEstiloInput("txtRazonSocial","is-empty"),t._estilosService.eliminarEstiloInput("txtMoneda","is-empty")):(t.escogioUnComprobante.next(!1),swal({type:"error",title:o,confirmButtonClass:"btn btn-danger",buttonsStyling:!1}))}else t.limpiar(),t.escogioUnComprobante.next(!1)})},t.prototype.visualizarComprobanteReferencia=function(){this._archivoService.retornarArchivoRetencionPercepcionbase(this._notaCreditoService.comprobanteReferencia.value.inIdcomprobantepago).subscribe(function(t){if(t){var e='<embed width=100% height=100% type="application/pdf" src="data:application/pdf;base64,'+t+'"> </embed>';window.open("","PDF","dependent = yes, locationbar = no, menubar = yes, resizable, screenX = 50, screenY = 50, width = 800, height = 800").document.write(e)}})},t.prototype.limpiar=function(){this.habilitarPorTipoDeNotaDeCredito=-1,this.notaDeCreditoFormGroup.get("txtDocumento").reset(),this._estilosService.agregarEstiloInput("txtDocumento","is-empty"),this.notaDeCreditoFormGroup.get("txtRazonSocial").reset(),this._estilosService.agregarEstiloInput("txtRazonSocial","is-empty"),this.notaDeCreditoFormGroup.get("txtMoneda").reset(),this._estilosService.agregarEstiloInput("txtMoneda","is-empty"),this.notaDeCreditoFormGroup.get("txtMotivoNotaCredito").reset(),this._estilosService.agregarEstiloInput("txtMotivoNotaCredito","is-empty"),this.notaDeCreditoFormGroup.get("txtObservacionesNotaCredito").reset(),this._estilosService.agregarEstiloInput("txtObservacionesNotaCredito","is-empty"),this.notaDeCreditoFormGroup.controls.cmbTipoNotaCredito.reset("-1"),this._estilosService.eliminarEstiloInput("cmbTipoNotaCredito","is-empty"),this.notaCredito=new C.a},t.prototype.cambioTipoNotaCredito=function(){this._notaCreditoService.estaUsandoPersistencia||(this.notaDeCreditoFormGroup.get("txtMotivoNotaCredito").reset(),this._estilosService.agregarEstiloInput("txtMotivoNotaCredito","is-empty"),this.notaDeCreditoFormGroup.get("txtObservacionesNotaCredito").reset(),this._estilosService.agregarEstiloInput("txtObservacionesNotaCredito","is-empty"));var t=this.notaDeCreditoFormGroup.get("cmbTipoNotaCredito").value;switch(this._notaCreditoService.ponerTipoNotaCredito(t),t){case this._tiposService.TIPO_NOTA_CREDITO_ANULACION_DE_OPERACION:this.cargarAnulacionOperacion();break;case this._tiposService.TIPO_NOTA_CREDITO_ANULACION_POR_ERROR_RUC:this.cargarErrorRuc();break;case this._tiposService.TIPO_NOTA_CREDITO_CORRECCION_DE_LA_DESCRIPCION:this.cargarCoreccionDescripcion();break;case this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_GLOBAL:this.cargarDescuentoGlobal();break;case this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_POR_ITEM:this.cargarDescuentoItem();break;case this._tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_TOTAL:this.cargarDevolucionTotal();break;case this._tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_POR_ITEM:this.cargarDevolucionItem();break;case this._tiposService.TIPO_NOTA_CREDITO_BONIFICACION:this.cargarBonificacion();break;case this._tiposService.TIPO_NOTA_CREDITO_DISMINUCION_EN_EL_VALOR:this.cargarDisminucionValor()}},t.prototype.cargarAnulacionOperacion=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.NORMAL},t.prototype.cargarErrorRuc=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.NORMAL},t.prototype.cargarCoreccionDescripcion=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.TABLA},t.prototype.cargarDescuentoGlobal=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.NORMAL},t.prototype.cargarDescuentoItem=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.TABLA},t.prototype.cargarDevolucionTotal=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.NORMAL},t.prototype.cargarDevolucionItem=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.TABLA},t.prototype.cargarBonificacion=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.NORMAL},t.prototype.cargarDisminucionValor=function(){this.habilitarPorTipoDeNotaDeCredito=this.tiposVistasDeNotaCredito.TABLA},t.prototype.cambioTipoComprobante=function(){this.notaDeCreditoFormGroup.get("txtDocumento").reset(),this.notaDeCreditoFormGroup.get("txtRazonSocial").reset(),this.notaDeCreditoFormGroup.get("txtMoneda").reset(),this.notaDeCreditoFormGroup.get("cmbSerieComprobante").reset(),this.notaDeCreditoFormGroup.get("txtCorrelativoComprobante").reset(),this._estilosService.agregarEstiloInput("txtDocumento","is-empty"),this._estilosService.agregarEstiloInput("txtRazonSocial","is-empty"),this._estilosService.agregarEstiloInput("txtMoneda","is-empty"),this._estilosService.agregarEstiloInput("cmbSerieComprobante","is-empty"),this._estilosService.agregarEstiloInput("txtCorrelativoComprobante","is-empty"),this.habilitarPorTipoDeNotaDeCredito=-1,this.escogioUnComprobante.next(!1),this.filtrarSeries(),this.cargarTiposDeNotasDeCredito(),this.notaDeCreditoFormGroup.get("cmbSerieComprobante").enable(),this.notaDeCreditoFormGroup.get("txtCorrelativoComprobante").enable(),this.filtrarSeriesComprobante()},t.prototype.vistaPrevia=function(){this._notaCreditoService.notaCredito.value.motivoComprobante=this.notaDeCreditoFormGroup.controls.txtMotivoNotaCredito.value,this._notaCreditoService.notaCredito.value.observacionComprobante=this.notaDeCreditoFormGroup.controls.txtObservacionesNotaCredito.value,this._notaCreditoService.setDatosPersistencia(this.tiposConceptos,this.tiposDeNotasDeCreditos,this.notaDeCreditoFormGroup.controls.cmbTipoNotaCredito.value,this.series,this.notaDeCreditoFormGroup.controls.cmbSerie.value,this.notaDeCreditoFormGroup.controls.txtMotivoNotaCredito.value,this.notaDeCreditoFormGroup.controls.txtObservacionesNotaCredito.value),this._notaCreditoService.notaCredito.value.auxMonedaTablaMaestra=this._tablaMaestraService.obtenerPorCodigosDeTablaMaestra(this.todosTiposMonedas,[this._notaCreditoService.comprobanteReferencia.value.vcIdregistromoneda]).value[0],this._notaCreditoService.pasoAVistaPrevia.next(!0),this.router.navigate(["./vistaPrevia"],{relativeTo:this.route})},t.prototype.estaValidadoNotaCreditoDataTable=function(t){this.esValidadoDataTableNotaCredito=t},t.prototype.seInicioDataTable=function(t){t||(this.esValidadoDataTableNotaCredito=!0)},t}();T=O([o.i(r.Component)({selector:"app-nota-credito",template:o("./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.component.html"),styles:[o("./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.component.css")]}),N("design:paramtypes",["function"==typeof(E=void 0!==i.a&&i.a)&&E||Object,"function"==typeof(S=void 0!==n.a&&n.a)&&S||Object,"function"==typeof(F=void 0!==l.a&&l.a)&&F||Object,"function"==typeof(y=void 0!==d.a&&d.a)&&y||Object,"function"==typeof(R=void 0!==p.a&&p.a)&&R||Object,"function"==typeof(P=void 0!==v.a&&v.a)&&P||Object,"function"==typeof(G=void 0!==m.c&&m.c)&&G||Object,"function"==typeof(V=void 0!==m.b&&m.b)&&V||Object,"function"==typeof(A=void 0!==x.c&&x.c)&&A||Object,"function"==typeof(M=void 0!==b.a&&b.a)&&M||Object,"function"==typeof(w=void 0!==h.a&&h.a)&&w||Object,"function"==typeof(U=void 0!==f.a&&f.a)&&U||Object,"function"==typeof(j=void 0!==I.a&&I.a)&&j||Object,"function"==typeof(L=void 0!==D.a&&D.a)&&L||Object])],T);var E,S,F,y,R,P,G,V,A,M,w,U,j,L},"./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.module.ts":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o("./node_modules/@angular/core/@angular/core.es5.js"),a=o("./node_modules/@angular/common/@angular/common.es5.js"),i=o("./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.routing.module.ts"),n=o("./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.component.ts"),s=o("./node_modules/@ngx-translate/core/index.js"),c=o("./node_modules/@angular/forms/@angular/forms.es5.js"),l=o("./src/app/facturacion-electronica/general/services/comprobantes/comprobantes.service.ts"),d=o("./src/app/facturacion-electronica/general/services/servidores.ts"),p=o("./src/app/facturacion-electronica/general/services/documento/tablaMaestra.service.ts"),u=o("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),m=o("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-normal/tipo-nota-credito-normal.module.ts"),v=o("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-datatable/tipo-nota-credito-datatable.module.ts"),b=o("./src/app/facturacion-electronica/general/services/configuracionDocumento/parametros.service.ts"),C=o("./src/app/facturacion-electronica/general/services/archivos/archivo.service.ts"),h=o("./src/app/facturacion-electronica/general/services/configuracionDocumento/series.service.ts"),f=o("./src/app/facturacion-electronica/general/services/utils/persistenciaDatos.service.ts"),g=o("./src/app/facturacion-electronica/general/utils/estilos.services.ts"),I=o("./src/app/facturacion-electronica/general/services/documento/conceptoDocumento.service.ts"),_=o("./src/app/facturacion-electronica/comprobantes/nota-credito/servicios/nota-credito.service.ts"),D=o("./src/app/facturacion-electronica/comprobantes/nota-credito/vista-previa-nota-credito/vista-previa-nota-credito.module.ts"),x=o("./src/app/facturacion-electronica/general/directivas/directivas.module.ts"),O=o("./src/app/facturacion-electronica/comprobantes/services/persistencia.service.ts");o.d(e,"NotaCreditoModule",function(){return T});var N=this&&this.__decorate||function(t,e,o,r){var a,i=arguments.length,n=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(e,o,n):a(e,o))||n);return i>3&&n&&Object.defineProperty(e,o,n),n},T=function(){function t(){}return t}();T=N([o.i(r.NgModule)({imports:[a.CommonModule,c.ReactiveFormsModule,i.a,s.a,m.a,v.a,D.a,x.a],declarations:[n.a],providers:[l.a,d.a,p.a,u.a,b.a,C.a,f.a,h.a,g.a,I.a,_.a,O.a]})],T)},"./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.routing.module.ts":function(t,e,o){"use strict";var r=o("./node_modules/@angular/core/@angular/core.es5.js"),a=o("./node_modules/@angular/router/@angular/router.es5.js"),i=o("./src/app/facturacion-electronica/comprobantes/nota-credito/nota-credito.component.ts"),n=o("./src/app/facturacion-electronica/general/emision-comprobante/emision-comprobante.component.ts"),s=o("./src/app/facturacion-electronica/comprobantes/nota-credito/vista-previa-nota-credito/vista-previa-nota-credito.component.ts");o.d(e,"a",function(){return d});var c=this&&this.__decorate||function(t,e,o,r){var a,i=arguments.length,n=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(e,o,n):a(e,o))||n);return i>3&&n&&Object.defineProperty(e,o,n),n},l=[{path:"",children:[{path:"",pathMatch:"full",redirectTo:"crear"},{path:"crear",component:i.a,data:{codigo:"07",mostrarCombo:!0}},{path:"crear/vistaPrevia",component:s.a,data:{codigo:"07",mostrarCombo:!1,titulo:"notaCreditoElectronica"}},{path:"emision/:id",component:n.a,data:{codigo:"07",mostrarCombo:!1,titulo:"emisionNotaCredito"}}]}],d=function(){function t(){}return t}();d=c([o.i(r.NgModule)({imports:[a.a.forChild(l)],exports:[a.a]})],d)},"./src/app/facturacion-electronica/comprobantes/nota-credito/servicios/nota-credito.service.ts":function(t,e,o){"use strict";var r=o("./node_modules/@angular/core/@angular/core.es5.js"),a=o("./node_modules/rxjs/BehaviorSubject.js"),i=(o.n(a),o("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/detalleNotaCredito.ts")),n=o("./src/app/facturacion-electronica/general/services/comprobantes/comprobantes.service.ts"),s=o("./node_modules/rxjs/Subscription.js"),c=(o.n(s),o("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/detalleDetalleNotaCredito.ts")),l=o("./src/app/facturacion-electronica/general/services/documento/tablaMaestra.service.ts"),d=o("./src/app/facturacion-electronica/general/services/utils/persistenciaDatos.service.ts"),p=o("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/notaCredito.ts"),u=o("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/jsonDocumentoParametroNotaCredito.ts"),m=o("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/documentoParametroNotaCredito.ts"),v=o("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/entidadNotaCredito.ts"),b=o("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/documentoConceptoNotaCredito.ts"),C=o("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/documentoReferenciaNotaCredito.ts"),h=o("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),f=o("./src/app/service/spinner.service.ts"),g=o("./src/app/facturacion-electronica/general/pipes/precio.pipe.ts");o.d(e,"a",function(){return D});var I=this&&this.__decorate||function(t,e,o,r){var a,i=arguments.length,n=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(e,o,n):a(e,o))||n);return i>3&&n&&Object.defineProperty(e,o,n),n},_=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},D=function(){function t(t,e,o,r,i,n){this._comprobanteService=t,this._tablaMaestraService=e,this._notaCreditoPersistenciaService=o,this._tiposService=r,this._spinnerService=i,this._precioPipe=n,this.tipoNotaCredito=new a.BehaviorSubject(""),this.detalleModificadoLista=new a.BehaviorSubject([]),this.detalleOriginalLista=[],this.comprobanteReferencia=new a.BehaviorSubject(null),this.comprobanteReferenciaSubscription=new s.Subscription,this.notaCredito=new a.BehaviorSubject(new p.a),this.pasoAVistaPrevia=new a.BehaviorSubject(!1),this.estaUsandoPersistencia=new a.BehaviorSubject(!1),this._notaCreditoPersistenciaService.nombrePersistencia="notaCreditoPersistencia",this.padreFormGroup=new a.BehaviorSubject(null),this.itemAEditar=new a.BehaviorSubject(null),this.tiposConcepto=new a.BehaviorSubject([])}return t.prototype.ngOnDestroy=function(){this.comprobanteReferenciaSubscription.unsubscribe()},t.prototype.cargandoDetalleComprobante=function(t,e){this.cargarDetalleDecomprobanteReferencia(t,e),this.comprobanteReferencia.next(t)},t.prototype.buscarComprobanteReferencia=function(t,e){var o=this;this._spinnerService.set(!0),this.comprobanteReferenciaSubscription=this._comprobanteService.buscarPorUuid(t).subscribe(function(t){null!==t&&(o.cargarDetalleDecomprobanteReferencia(t,e),o._spinnerService.set(!1),o.comprobanteReferencia.next(t))})},t.prototype.obtenerNotaCreditoPersistencia=function(){var t=this._notaCreditoPersistenciaService.obtener();if(t){var e=t[0],o=t[1],r=t[2];return null!==e?(this.estaUsandoPersistencia.next(!0),this.comprobanteReferencia.next(o),this.notaCredito.next(e),this.detalleOriginalLista=r,this.detalleModificadoLista.next(e.detalleEbiz),e):(this.estaUsandoPersistencia.next(!1),null)}return this.estaUsandoPersistencia.next(!1),null},t.prototype.eliminarNotaCreditoPersistencia=function(){this._notaCreditoPersistenciaService.eliminar()},t.prototype.cargarDetalleDecomprobanteReferencia=function(t,e){for(var o=[],r=[],a=this,n=0,s=t.detalle;n<s.length;n++){var l=s[n];!function(t){var n=new i.a;n.codigoItem=t.vcCodigoProducto,n.cantidad=a._precioPipe.transform(t.deCantidaddespachada),n.codigoUnidadMedida=t.vcUnidadmedida,n.descripcionItem=t.vcDescripcionitem;var s=new c.a;s.idTipoIgv=t.inItipoAfectacionigv,s.codigoTipoIgv=t.inCodigoAfectacionigv,s.descripcionTipoIgv=t.vcDescAfectacionigv,s.idTipoIsc=t.inItipoCalculoisc,s.codigoTipoIsc=t.inCodigoCalculoisc,s.descripcionTipoIsc=t.vcDescCalculoisc,s.idTipoPrecio=t.inItipoPrecioventa,s.codigoTipoPrecio=t.inCodigoPrecioventa,s.descripcionTipoPrecio=t.vcDescPrecioventa,s.idProducto=t.inIproducto,s.numeroItem=t.deCantidaddespachada,s.precioUnitarioVenta=a._precioPipe.transform(t.dePreciounitarioitem),s.subtotalIsc=a._precioPipe.transform(t.nuSubtotalIsc),s.subtotalVenta=a._precioPipe.transform(t.dePreciototalitem),s.subtotalIgv=a._precioPipe.transform(t.nuSubtotalIgv),s.unidadMedida=t.vcUnidadmedida,s.descuento="0.00",s.descuentoOriginal=a._precioPipe.transform(t.nuDescuento.toString()),n.detalle=s,n.montoImpuesto=a._precioPipe.transform(t.deMontoimpuesto),n.posicion=t.vcPosicion,n.precioTotal=a._precioPipe.transform(t.dePreciototalitem),n.precioUnitario=a._precioPipe.transform(t.dePreciounitarioitem),a._tablaMaestraService.obtenerPorAtributoDeTablaMaestra(e,[t.vcUnidadmedida],"iso").take(1).subscribe(function(t){1===t.length&&(n.idRegistroUnidad=t[0].codigo,n.idTablaUnidad=t[0].tabla.toString())}),o.push(n),r.push(n.copiar())}(l)}this.ponerDetalle(o),this.detalleOriginalLista=r},t.prototype.ponerTipoNotaCredito=function(t){this.tipoNotaCredito.next(t)},t.prototype.ponerDetalle=function(t){this.detalleModificadoLista.next(t)},t.prototype.obtenerDetalleOriginal=function(){for(var t=[],e=0,o=this.detalleOriginalLista;e<o.length;e++){var r=o[e],a=new i.a;a.copiarDetalle(r),t.push(a)}return t},t.prototype.setDatosPersistencia=function(t,e,o,r,a,i,n){var s=this;this.notaCredito.next(new p.a),this.setEntidadPersistencia(),this.setDocumentoParametro(e,o),this.setDocumentoReferencia(),this.setCabeceraPersistencia(r,a,i,n),this.tiposConcepto=t,this.pasoAVistaPrevia.subscribe(function(t){t&&(s._notaCreditoPersistenciaService.agregar([s.notaCredito.value,s.comprobanteReferencia.value,s.detalleOriginalLista]),s.estaUsandoPersistencia.next(!0),s.pasoAVistaPrevia.next(!1))})},t.prototype.setEntidadPersistencia=function(){if(null!==this.comprobanteReferencia.value){var t=new v.a,e=new v.a;t.idTipoEntidad="1",t.descripcionTipoEntidad="Emisor",t.idEntidad=this.comprobanteReferencia.value.entidadproveedora.seIentidad,t.tipoDocumento=this.comprobanteReferencia.value.entidadproveedora.inTipoDocumento,t.denominacion=this.comprobanteReferencia.value.entidadproveedora.vcDenominacion,t.direccionFiscal=this.comprobanteReferencia.value.entidadproveedora.vcDirFiscal,t.documento=this.comprobanteReferencia.value.entidadproveedora.vcDocumento,t.nombreComercial=this.comprobanteReferencia.value.entidadproveedora.vcNomComercia,t.notifica="N",t.ubigeo=this.comprobanteReferencia.value.entidadproveedora.vcUbigeo,t.correo=this.comprobanteReferencia.value.entidadproveedora.vcCorreo,e.idTipoEntidad="2",e.descripcionTipoEntidad="Receptor",e.idEntidad=this.comprobanteReferencia.value.entidadcompradora.seIentidad,e.tipoDocumento=this.comprobanteReferencia.value.entidadcompradora.inTipoDocumento,e.denominacion=this.comprobanteReferencia.value.entidadcompradora.vcDenominacion,e.direccionFiscal=this.comprobanteReferencia.value.entidadcompradora.vcDirFiscal,e.documento=this.comprobanteReferencia.value.entidadcompradora.vcDocumento,e.nombreComercial=this.comprobanteReferencia.value.entidadcompradora.vcNomComercia,e.notifica="S",e.ubigeo=this.comprobanteReferencia.value.entidadcompradora.vcUbigeo,e.correo=this.comprobanteReferencia.value.entidadcompradora.vcCorreo,this.notaCredito.value.documentoEntidad.push(t),this.notaCredito.value.documentoEntidad.push(e)}},t.prototype.setDocumentoConcepto=function(t){var e=this,o=new b.a,r=new b.a,a=new b.a,i=new b.a,n=new b.a,s=new b.a;this.notaCredito.value.documentoConcepto=[],t.subscribe(function(t){for(var c=0,l=t;c<l.length;c++){var d=l[c];switch(d.codigo){case e._tiposService.CONCEPTO_OPERACION_GRAVADA_CODIGO:o.idConcepto=d.idConcepto,o.descripcionConcepto=d.descripcion,o.codigoConcepto=d.codigo;break;case e._tiposService.CONCEPTO_OPERACION_INAFECTAS_CODIGO:r.idConcepto=d.idConcepto,r.descripcionConcepto=d.descripcion,r.codigoConcepto=d.codigo;break;case e._tiposService.CONCEPTO_OPERACION_EXONERADO_CODIGO:a.idConcepto=d.idConcepto,a.descripcionConcepto=d.descripcion,a.codigoConcepto=d.codigo;break;case e._tiposService.CONCEPTO_OPERACION_GRATUITA_CODIGO:i.idConcepto=d.idConcepto,i.descripcionConcepto=d.descripcion,i.codigoConcepto=d.codigo;break;case e._tiposService.CONCEPTO_OPERACION_SUB_TOTAL_VENTA_CODIGO:n.idConcepto=d.idConcepto,n.descripcionConcepto=d.descripcion,n.codigoConcepto=d.codigo,n.importe=e.notaCredito.value.subtotalComprobante;break;case e._tiposService.CONCEPTO_OPERACION_TOTAL_DESCUENTOS_CODIGO:s.idConcepto=d.idConcepto,s.descripcionConcepto=d.descripcion,s.codigoConcepto=d.codigo}}e.notaCredito.value.documentoConcepto.push(o),e.notaCredito.value.documentoConcepto.push(r),e.notaCredito.value.documentoConcepto.push(a),e.notaCredito.value.documentoConcepto.push(i),e.notaCredito.value.documentoConcepto.push(s)})},t.prototype.setDocumentoParametro=function(t,e){var o=this;t.subscribe(function(t){var r=t.find(function(t){return t.codigo_dominio===e}),a=new m.a;a.idParametro=r.idparametro.toString(),a.descripcionParametro=r.parametro_descripcion;var i=new u.a;i.tipo=3,i.valor=r.descripcion_dominio,i.auxiliarCaracter=r.codigo_dominio,a.json=JSON.stringify(i),o.notaCredito.value.documentoParametro.push(a)})},t.prototype.setDocumentoReferencia=function(){var t=new C.a;if(t.tipoDocumentoOrigen=this._tiposService.TIPO_DOCUMENTO_NOTA_CREDITO,t.tipoDocumentoOrigenDescripcion=this._tiposService.TIPO_DOCUMENTO_NOTA_CREDITO_NOMBRE,null!==this.comprobanteReferencia.value){t.idDocumentoDestino=this.comprobanteReferencia.value.inIdcomprobantepago,t.tipoDocumentoDestino=this.comprobanteReferencia.value.vcIdregistrotipocomprobante,t.correlativoDocumentoDestino=this.comprobanteReferencia.value.vcCorrelativo,t.serieDocumentoDestino=this.comprobanteReferencia.value.vcSerie,t.fechaEmisionDestino=this.comprobanteReferencia.value.tsFechaemision,t.totalImporteDestino=Number(this.comprobanteReferencia.value.deTotalcomprobantepago).toFixed(2);for(var e=0,o=0,r=this.comprobanteReferencia.value.detalle;o<r.length;o++){e+=r[o].nuSubtotalIgv}t.totalImporteAuxiliarDestino=Number(e).toFixed(2),t.monedaDestino=this.comprobanteReferencia.value.chMonedacomprobantepago.toString(),t.tipoDocumentoDestinoDescripcion=this.comprobanteReferencia.value.vcTipocomprobante,t.totalMonedaDestino=this.comprobanteReferencia.value.deTotalcomprobantepago,t.totalPorcentajeAuxiliarDestino=Number(0).toFixed(2)}this.notaCredito.value.documentoReferencia.push(t)},t.prototype.setCabeceraPersistencia=function(t,e,o,r){var a=this;t.subscribe(function(t){if(t.length>0){var o=t.find(function(t){return t.idSerie===Number(e)});null!=o&&(a.notaCredito.value.numeroComprobante=o.serie)}}),null!=this.comprobanteReferencia.value&&(this.notaCredito.value.rucProveedor=this.comprobanteReferencia.value.entidadproveedora.vcDocumento,this.notaCredito.value.razonSocialProveedor=this.comprobanteReferencia.value.entidadproveedora.vcDenominacion,this.notaCredito.value.idTablaMoneda=this.comprobanteReferencia.value.vcIdtablamoneda,this.notaCredito.value.idRegistroMoneda=this.comprobanteReferencia.value.vcIdregistromoneda,this.notaCredito.value.idTablaTipoComprobante=this.comprobanteReferencia.value.vcIdtablatipocomprobante,this.notaCredito.value.moneda=this.comprobanteReferencia.value.chMonedacomprobantepago.toString(),this.notaCredito.value.rucComprador=this.comprobanteReferencia.value.entidadcompradora.vcDocumento,this.notaCredito.value.razonSocialComprador=this.comprobanteReferencia.value.entidadcompradora.vcDenominacion),this.notaCredito.value.idRegistroTipoComprobante=this._tiposService.TIPO_DOCUMENTO_NOTA_CREDITO,this.notaCredito.value.idTipoComprobante=this._tiposService.TIPO_DOCUMENTO_NOTA_CREDITO,this.notaCredito.value.tipoComprobante=this._tiposService.TIPO_DOCUMENTO_NOTA_CREDITO,this.notaCredito.value.observacionComprobante=r,this.notaCredito.value.tipoComprobante=this._tiposService.TIPO_DOCUMENTO_NOTA_CREDITO_NOMBRE,this.notaCredito.value.motivoComprobante=o,this.notaCredito.value.usuarioCreacion=localStorage.getItem("username"),this.notaCredito.value.usuarioModificacion=localStorage.getItem("username"),this.notaCredito.value.idSerie=e},t.prototype.setCabeceraNormal=function(t){this.notaCredito.value.montoPagado=Number(t.montoPagado).toFixed(2),this.notaCredito.value.igv=Number(t.igv).toFixed(2),this.notaCredito.value.isc=Number(t.isc).toFixed(2),this.notaCredito.value.totalComprobante=Number(t.total).toFixed(2),this.notaCredito.value.descuento=Number(t.descuentos).toFixed(2),this.notaCredito.value.subtotalComprobante=Number(t.subTotal).toFixed(2),this.notaCredito.value.importeReferencial=Number(t.importeReferencial).toFixed(2),this.notaCredito.value.otrosTributos=Number(t.otrosTributos).toFixed(2),this.setDocumentoConcepto(this.tiposConcepto)},t.prototype.setDetalleNormal=function(t){this.notaCredito.value.detalleEbiz=null!==t?[t]:this.detalleModificadoLista.value},t.prototype.setCabeceraDataTable=function(t){t?this.ponerValoresEnCabecera(0,0,0,0,0,0,0,0):this.reCalcularTotalesDeDetalle(),this.setDocumentoConcepto(this.tiposConcepto)},t.prototype.ponerValoresEnCabecera=function(t,e,o,r,a,i,n,s){this.notaCredito.value.montoPagado=Number(t).toFixed(2),this.notaCredito.value.igv=Number(e).toFixed(2),this.notaCredito.value.isc=Number(o).toFixed(2),this.notaCredito.value.otrosTributos=Number(r).toFixed(2),this.notaCredito.value.importeReferencial=Number(a).toFixed(2),this.notaCredito.value.subtotalComprobante=Number(i).toFixed(2),this.notaCredito.value.totalComprobante=Number(s).toFixed(2),this.notaCredito.value.descuento=Number(n).toFixed(2)},t.prototype.reCalcularTotalesDeDetalle=function(){for(var t=0,e=0,o=0,r=0,a=0,i=0,n=0,s=0,c=this.notaCredito.value.detalleEbiz;s<c.length;s++){var l=c[s];l.montoImpuesto=l.detalle.subtotalIgv,t+=Number(l.precioTotal),e+=Number(l.detalle.subtotalIgv),o+=Number(l.detalle.subtotalIsc),r+=Number(l.montoImpuesto),a+=Number(l.detalle.subtotalVenta),i+=Number(l.precioTotal),n+=Number(l.detalle.descuento)}this.ponerValoresEnCabecera(t,e,o,0,r,a,n,i)},t.prototype.setDetalleDataTable=function(t){if(this.tipoNotaCredito.value===this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_POR_ITEM||this.tipoNotaCredito.value===this._tiposService.TIPO_NOTA_CREDITO_DISMINUCION_EN_EL_VALOR||this.tipoNotaCredito.value===this._tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_POR_ITEM)for(var e in t)this.tipoNotaCredito.value===this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_POR_ITEM&&(t[e].detalle.descuento="0.00"),t[e].posicion=e,t[e].detalle.numeroItem=e,t[e].detalle.precioUnitarioVenta=t[e].precioTotal,t[e].detalle.subtotalVenta=(Number(t[e].detalle.precioUnitarioVenta)-Number(t[e].detalle.subtotalIgv)).toFixed(2);this.notaCredito.value.detalleEbiz=t},t}();D=I([o.i(r.Injectable)(),_("design:paramtypes",["function"==typeof(x=void 0!==n.a&&n.a)&&x||Object,"function"==typeof(O=void 0!==l.a&&l.a)&&O||Object,"function"==typeof(N=void 0!==d.a&&d.a)&&N||Object,"function"==typeof(T=void 0!==h.a&&h.a)&&T||Object,"function"==typeof(E=void 0!==f.a&&f.a)&&E||Object,"function"==typeof(S=void 0!==g.a&&g.a)&&S||Object])],D);var x,O,N,T,E,S},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-datatable/tipo-nota-credito-datatable.component.css":function(t,e,o){e=t.exports=o("./node_modules/css-loader/lib/css-base.js")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-datatable/tipo-nota-credito-datatable.component.html":function(t,e){t.exports='<div class="row">\r\n  <div class="col-md-12">\r\n    <app-data-table\r\n      #tablaDetalle\r\n      [idTabla]="\'tablaDetalle\'"\r\n      [columnas]="columnasTabla"\r\n      [ordenarPorElCampo]="ordenarPorElCampo"\r\n      [nombreIdDelItem]="nombreIdDelItem"\r\n\r\n      [acciones]="acciones"\r\n      [tipoAccion]="tipoAccion"\r\n      [habilitarAcciones]="true"\r\n      (iniciarData)="iniciarData($event)"\r\n      (accion)="ejecutarAccion($event)"\r\n      [pintarFilas]="pintarFilas"\r\n      [nombreCampoParaPintarFilas]="nombreCampoParaPintarFilas"\r\n      >\r\n    </app-data-table>\r\n  </div>\r\n</div>\r\n<app-tipo-nota-credito-editar-item\r\n  #editarItemComponent\r\n  [idModal]="idModal"\r\n>\r\n</app-tipo-nota-credito-editar-item>\r\n'},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-datatable/tipo-nota-credito-datatable.component.ts":function(t,e,o){"use strict";var r=o("./node_modules/@angular/core/@angular/core.es5.js"),a=o("./src/app/facturacion-electronica/general/data-table/utils/accion.ts"),i=o("./src/app/facturacion-electronica/general/data-table/utils/tipo-accion.ts"),n=o("./src/app/facturacion-electronica/general/data-table/utils/modo-vista-accion.ts"),s=o("./src/app/facturacion-electronica/general/data-table/data-table.component.ts"),c=o("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.component.ts"),l=o("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),d=o("./src/app/facturacion-electronica/comprobantes/nota-credito/servicios/nota-credito.service.ts"),p=o("./node_modules/rxjs/Subscription.js"),u=(o.n(p),o("./src/app/facturacion-electronica/general/data-table/utils/columna-data-table.ts"));o.d(e,"a",function(){return b});var m=this&&this.__decorate||function(t,e,o,r){var a,i=arguments.length,n=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(e,o,n):a(e,o))||n);return i>3&&n&&Object.defineProperty(e,o,n),n},v=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},b=function(){function t(t,e){this._tiposService=t,this._notaCreditoService=e,this.estaValidadoNotaCreditoDataTable=new r.EventEmitter,this.seInicio=new r.EventEmitter,this.idModal="modal",this.columnasTabla=[new u.a("codigo","codigoItem"),new u.a("descripcion","descripcionItem",{"text-align":"left"}),new u.a("cantidad","cantidad",{"text-align":"right"}),new u.a("unidadMedida","detalle.unidadMedida"),new u.a("valorUnitario","precioUnitario",{"text-align":"right"}),new u.a("igv","detalle.subtotalIgv",{"text-align":"right"}),new u.a("isc","detalle.subtotalIsc",{"text-align":"right"}),new u.a("descuento","detalle.descuentoOriginal",{"text-align":"right"})],this.ordenarPorElCampo="codigoItem",this.acciones=[new a.a("editar",new a.b("edit","btn-info"),i.a.EDITAR),new a.a("limpiar",new a.b("clear","btn-info"),i.a.LIMPIAR)],this.pintarFilas=!0,this.nombreCampoParaPintarFilas="cambioDetalle",this.nombreIdDelItem="posicion",this.tipoAccion=n.a.ICONOS,this.detalleLista=[]}return t.prototype.ngOnInit=function(){var t=this;this.detalleListaSubscription=new p.Subscription,this.seInicio.next(!0),this.pasoAVistaPreviaSubscription=this._notaCreditoService.pasoAVistaPrevia.subscribe(function(e){e&&(t.enviarDetalle(),t.enviarCabecera())})},t.prototype.ngDoCheck=function(){this.estaValidadoDataTable()},t.prototype.ngOnDestroy=function(){this.seInicio.next(!1),this.tipoNotaCreditoSubscription.unsubscribe(),this.detalleListaSubscription.unsubscribe()},t.prototype.verificarNotaCreditoPermitidos=function(t){return-1!==[this._tiposService.TIPO_NOTA_CREDITO_CORRECCION_DE_LA_DESCRIPCION,this._tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_POR_ITEM,this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_POR_ITEM,this._tiposService.TIPO_NOTA_CREDITO_DISMINUCION_EN_EL_VALOR].findIndex(function(e){return e===t})},t.prototype.verificarColumnas=function(){var t=this.columnasTabla.findIndex(function(t){return"descuentoNotaCredito"===t.cabecera});-1!==this.columnasTabla.findIndex(function(t){return"valorVenta"===t.cabecera})&&this.columnasTabla.pop(),-1!==t&&this.columnasTabla.pop(),this.tipoNotaCredito===this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_POR_ITEM?(this.columnasTabla.push(new u.a("descuentoNotaCredito","detalle.descuento",{"text-align":"right"})),this.columnasTabla.push(new u.a("valorVenta","precioTotal",{"text-align":"right"}))):this.columnasTabla.push(new u.a("valorVenta","precioTotal",{"text-align":"right"})),this.tablaDetalle.actualizarColumnas(this.columnasTabla)},t.prototype.iniciarData=function(t){var e=this;this.tipoNotaCreditoSubscription=this._notaCreditoService.tipoNotaCredito.subscribe(function(t){e.verificarNotaCreditoPermitidos(t)&&(e.tipoNotaCredito=t,e._notaCreditoService.estaUsandoPersistencia.value||(e.detalleLista=e._notaCreditoService.obtenerDetalleOriginal(),e.verificarColumnas(),e.tablaDetalle.insertarData(e.detalleLista)))}),this._notaCreditoService.estaUsandoPersistencia.value&&(this.detalleListaSubscription=this._notaCreditoService.detalleModificadoLista.subscribe(function(t){if(e.verificarNotaCreditoPermitidos(e.tipoNotaCredito)){if(e.detalleLista=e._notaCreditoService.obtenerDetalleOriginal(),null!==e.detalleLista)for(var o=0,r=t;o<r.length;o++){var a=r[o];!function(t){var o=e.detalleLista.findIndex(function(e){return e.posicion===t.posicion});-1!==o&&(e.detalleLista[o]=t)}(a)}e.tablaDetalle.insertarData(e.detalleLista),e._notaCreditoService.estaUsandoPersistencia.next(!1)}}))},t.prototype.enviarDetalle=function(){this.filtrarDetallesModificados(),this._notaCreditoService.setDetalleDataTable(this.detalleLista)},t.prototype.enviarCabecera=function(){var t=!1;this.tipoNotaCredito===this._tiposService.TIPO_NOTA_CREDITO_CORRECCION_DE_LA_DESCRIPCION&&(t=!0),this._notaCreditoService.setCabeceraDataTable(t)},t.prototype.filtrarDetallesModificados=function(){this.detalleLista=this.detalleLista.filter(function(t){return t.cambioDetalle})},t.prototype.ejecutarAccion=function(t){var e=t[0];switch(this.itemAEditar=t[1],e){case i.a.EDITAR:this.abrirEditarModal();break;case i.a.LIMPIAR:this.regresarADetalleOriginal()}},t.prototype.regresarADetalleOriginal=function(){var t=this,e=this._notaCreditoService.obtenerDetalleOriginal().find(function(e){return e.posicion===t.itemAEditar.posicion});this.itemAEditar.copiarDetalle(e)},t.prototype.estaValidadoDataTable=function(){for(var t=0,e=this.detalleLista;t<e.length;t++){if(e[t].cambioDetalle)return void this.estaValidadoNotaCreditoDataTable.next(!0)}this.estaValidadoNotaCreditoDataTable.next(!1)},t.prototype.abrirEditarModal=function(){this.editarItemComponent.llenarDatosItem(this.itemAEditar),this.editarItemComponent.abrirModal(),this.tipoNotaCredito===this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_POR_ITEM&&0===Number(this.itemAEditar.detalle.descuento)&&this.regresarADetalleOriginal()},t}();m([o.i(r.ViewChild)("tablaDetalle"),v("design:type","function"==typeof(C=void 0!==s.a&&s.a)&&C||Object)],b.prototype,"tablaDetalle",void 0),m([o.i(r.ViewChild)("editarItemComponent"),v("design:type","function"==typeof(h=void 0!==c.a&&c.a)&&h||Object)],b.prototype,"editarItemComponent",void 0),m([o.i(r.Output)(),v("design:type",Object)],b.prototype,"estaValidadoNotaCreditoDataTable",void 0),m([o.i(r.Output)(),v("design:type",Object)],b.prototype,"seInicio",void 0),b=m([o.i(r.Component)({selector:"app-tipo-nota-credito-datatable",template:o("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-datatable/tipo-nota-credito-datatable.component.html"),styles:[o("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-datatable/tipo-nota-credito-datatable.component.css")]}),v("design:paramtypes",["function"==typeof(f=void 0!==l.a&&l.a)&&f||Object,"function"==typeof(g=void 0!==d.a&&d.a)&&g||Object])],b);var C,h,f,g},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-datatable/tipo-nota-credito-datatable.module.ts":function(t,e,o){"use strict";var r=o("./node_modules/@angular/core/@angular/core.es5.js"),a=o("./node_modules/@angular/common/@angular/common.es5.js"),i=o("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-datatable/tipo-nota-credito-datatable.component.ts"),n=o("./node_modules/@ngx-translate/core/index.js"),s=o("./src/app/facturacion-electronica/general/data-table/data-table.module.ts"),c=o("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.module.ts");o.d(e,"a",function(){return d});var l=this&&this.__decorate||function(t,e,o,r){var a,i=arguments.length,n=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(e,o,n):a(e,o))||n);return i>3&&n&&Object.defineProperty(e,o,n),n},d=function(){function t(){}return t}();d=l([o.i(r.NgModule)({imports:[a.CommonModule,n.a,s.a,c.a],declarations:[i.a],exports:[i.a],providers:[]})],d)},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.component.css":function(t,e,o){e=t.exports=o("./node_modules/css-loader/lib/css-base.js")(!1),e.push([t.i,".modal-title{background:#0079bf;box-shadow:none;border-radius:3px;color:#fff;padding:1rem}",""]),t.exports=t.exports.toString()},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.component.html":function(t,e){t.exports='<div class="modal fade" #modalEditar [id]="idModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n  <div class="modal-dialog">\r\n    <div class="modal-content">\r\n      <div class="modal-header">\r\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="material-icons">clear</i></button>\r\n        <div class="row">\r\n          <div class="col-md-4">\r\n            <h5 class="modal-title" id="myModalLabel">{{\'editarItem\' | translate}}</h5>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <form [formGroup]="editarItemFormGroup" autocomplete="off">\r\n        <div class="modal-body">\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblCantidad" class="control-label">{{\'cantidad\' | translate}}</label>\r\n                <input class="form-control" id="txtCantidad" formControlName="txtCantidad" type="text" precioDirectiva>\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtCantidad\').valid && tipoNotaCredito === _tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_POR_ITEM">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtCantidad\').hasError(\'maxlength\')"\r\n                                 class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtCantidad} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtCantidad\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtCantidad\').hasError(\'max\')"\r\n                          class="text-danger">{{\'debeSerMenorA\' | translate: {digito: detalleEbizSinModificar.cantidad} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtCantidad\').hasError(\'min\')"\r\n                          class="text-danger">{{\'debeSerMayorA\' | translate: {digito: \'0.00\'} }}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblCodigo" class="control-label">{{\'codigo\' | translate}}</label>\r\n                <input class="form-control" id="txtCodigo" formControlName="txtCodigo" type="text">\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtCodigo\').valid">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtCodigo\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtCodigo} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtCodigo\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblDescripcion" class="control-label">{{\'descripcion\' | translate}}</label>\r\n                <textarea class="form-control" id="txtDescripcion" formControlName="txtDescripcion" type="text" rows="3"></textarea>\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtDescripcion\').valid && tipoNotaCredito == _tiposService.TIPO_NOTA_CREDITO_CORRECCION_DE_LA_DESCRIPCION">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtDescripcion\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtDescripcion} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtDescripcion\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtDescripcion\').hasError(\'debeSerDiferenteDe\')"\r\n                          class="text-danger">{{\'debeSerDiferenteDe\' | translate: {valor: detalleEbizSinModificar.descripcionItem} }}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblUnidadMedida" class="control-label">{{\'unidadMedida\' | translate}}</label>\r\n                <input class="form-control" id="txtUnidadMedida" formControlName="txtUnidadMedida" type="text">\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtUnidadMedida\').valid">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtUnidadMedida\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtUnidadMedida} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtUnidadMedida\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblValorUnitario" class="control-label">{{\'valorUnitario\' | translate}}</label>\r\n                <input class="form-control" id="txtValorUnitario" formControlName="txtValorUnitario" type="text" precioDirectiva>\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtValorUnitario\').valid && tipoNotaCredito === _tiposService.TIPO_NOTA_CREDITO_DISMINUCION_EN_EL_VALOR">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtValorUnitario\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtValorUnitario} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtValorUnitario\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtValorUnitario\').hasError(\'max\')"\r\n                          class="text-danger">{{\'debeSerMenorA\' | translate: {digito: detalleEbizSinModificar.precioUnitario} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtValorUnitario\').hasError(\'min\')"\r\n                          class="text-danger">{{\'debeSerMayorA\' | translate: {digito: \'0.00\'} }}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblIgv" class="control-label">{{\'igv\' | translate}}</label>\r\n                <input class="form-control" id="txtIgv" formControlName="txtIgv" type="text" precioDirectiva>\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtIgv\').valid">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtIgv\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtIgv} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtIgv\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtIgv\').hasError(\'max\')"\r\n                          class="text-danger">{{\'debeSerMenorA\' | translate: {digito: detalleEbizSinModificar.detalle.subtotalIgv} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtIgv\').hasError(\'min\')"\r\n                          class="text-danger">{{\'debeSerMayorA\' | translate: {digito: \'0.00\'} }}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblIsc" class="control-label">{{\'isc\' | translate}}</label>\r\n                <input class="form-control" id="txtIsc" formControlName="txtIsc" type="text" precioDirectiva>\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtIsc\').valid">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtIsc\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtIsc} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtIsc\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtIsc\').hasError(\'max\')"\r\n                          class="text-danger">{{\'debeSerMenorA\' | translate: {digito: detalleEbizSinModificar.detalle.subtotalIsc} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtIsc\').hasError(\'min\')"\r\n                          class="text-danger">{{\'debeSerMayorA\' | translate: {digito: \'0.00\'} }}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblDescuento" class="control-label">{{\'descuento\' | translate}}</label>\r\n                <input class="form-control" id="txtDescuento" formControlName="txtDescuento" type="text" precioDirectiva>\r\n                <div class="row">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtDescuento\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtDescuento} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtDescuento\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtDescuento\').hasError(\'max\')"\r\n                          class="text-danger">{{\'debeSerMenorA\' | translate: {digito: descuentoLimite} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtDescuento\').hasError(\'min\')"\r\n                          class="text-danger">{{\'debeSerMayorA\' | translate: {digito: \'0.00\'} }}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row" *ngIf="tipoNotaCredito === _tiposService.TIPO_NOTA_CREDITO_DESCUENTO_POR_ITEM">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblDescuentoNotaCredito" class="control-label">{{\'descuentoNotaCredito\' | translate}}</label>\r\n                <input class="form-control" id="txtDescuentoNotaCredito" formControlName="txtDescuentoNotaCredito" type="text" precioDirectiva>\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtDescuentoNotaCredito\').valid && tipoNotaCredito === _tiposService.TIPO_NOTA_CREDITO_DESCUENTO_POR_ITEM">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtDescuentoNotaCredito\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtDescuento} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtDescuentoNotaCredito\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtDescuentoNotaCredito\').hasError(\'max\')"\r\n                          class="text-danger">{{\'debeSerMenorA\' | translate: {digito: descuentoLimite} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtDescuentoNotaCredito\').hasError(\'min\')"\r\n                          class="text-danger">{{\'debeSerMayorA\' | translate: {digito: \'0.00\'} }}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-md-12">\r\n              <div class="form-group label-floating">\r\n                <label id="lblValorVenta" class="control-label">{{\'valorVenta\' | translate}}</label>\r\n                <input class="form-control" id="txtValorVenta" formControlName="txtValorVenta" type="text" precioDirectiva>\r\n                <div class="row" *ngIf="!editarItemFormGroup.get(\'txtValorVenta\').valid">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtValorVenta\').hasError(\'maxlength\')"\r\n                          class="text-danger">{{\'maximoCaracteres\' | translate: {digito: tamanioTxtValorVenta} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtValorVenta\').hasError(\'required\')"\r\n                          class="text-danger">{{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtValorVenta\').hasError(\'max\')"\r\n                          class="text-danger">{{\'debeSerMenorA\' | translate: {digito: detalleEbizSinModificar.precioTotal} }}\r\n                    </span>\r\n                    <span *ngIf="editarItemFormGroup.get(\'txtValorVenta\').hasError(\'min\')"\r\n                          class="text-danger">{{\'debeSerMayorA\' | translate: {digito: \'0.00\'} }}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="modal-footer text-center">\r\n          <button type="submit" class="btn btn-default" data-dismiss="modal" [disabled]="!(editarItemFormGroup.valid && estaValidadoFormGroup)" (click)="guardarItem()">{{\'guardar\' | translate}}</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n'},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.component.ts":function(t,e,o){"use strict";var r=o("./node_modules/@angular/core/@angular/core.es5.js"),a=o("./node_modules/@angular/forms/@angular/forms.es5.js"),i=o("./src/app/facturacion-electronica/general/utils/estilos.services.ts"),n=o("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),s=o("./src/app/facturacion-electronica/comprobantes/nota-credito/servicios/nota-credito.service.ts"),c=o("./node_modules/@ngx-translate/core/index.js");o.d(e,"a",function(){return p});var l=this&&this.__decorate||function(t,e,o,r){var a,i=arguments.length,n=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(e,o,n):a(e,o))||n);return i>3&&n&&Object.defineProperty(e,o,n),n},d=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=function(){function t(t,e,o,r){this._estilosService=t,this._tiposService=e,this._notaCreditoService=o,this._translateService=r,this.iniciarTamanios()}return t.prototype.iniciarTamanios=function(){this.tamanioTxtCantidad=16,this.tamanioTxtCodigo=30,this.tamanioTxtDescripcion=250,this.tamanioTxtUnidadMedida=3,this.tamanioTxtValorUnitario=15,this.tamanioTxtIgv=15,this.tamanioTxtIsc=15,this.tamanioTxtDescuento=15,this.tamanioTxtValorVenta=15,this.estaValidadoFormGroup=!1},t.prototype.iniciarFormGroup=function(){this.editarItemFormGroup=new a.FormGroup({txtCantidad:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtCantidad)]),txtCodigo:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtCodigo)]),txtDescripcion:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtDescripcion)]),txtUnidadMedida:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtUnidadMedida)]),txtValorUnitario:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtValorUnitario)]),txtIgv:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtIgv)]),txtIsc:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtIsc)]),txtDescuento:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtDescuento)]),txtDescuentoNotaCredito:new a.FormControl({value:"0.00",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtDescuento)]),txtValorVenta:new a.FormControl({value:"",disabled:!0},[a.Validators.required,a.Validators.maxLength(this.tamanioTxtValorVenta)])})},t.prototype.ngOnInit=function(){var t=this;this.iniciarFormGroup(),this.detalleLista=this._notaCreditoService.obtenerDetalleOriginal(),this.tipoNotaCreditoSubscription=this._notaCreditoService.tipoNotaCredito.subscribe(function(e){t.tipoNotaCredito=e})},t.prototype.ngOnDestroy=function(){this.tipoNotaCreditoSubscription.unsubscribe()},t.prototype.recalcularDetalleEbiz=function(t,e,o,r,a,i,n,s){var c=this;void 0===s&&(s=!1),this.editarItemFormGroup.controls[t].valueChanges.subscribe(function(t){if(t&&c.editarItemFormGroup.valid){var l=Number(c.editarItemFormGroup.controls[e].value),d=Number(c.editarItemFormGroup.controls[o].value),p=Number(c.editarItemFormGroup.controls[a].value),u=l*d+p,m=.18*u,v=Number(c.editarItemFormGroup.controls[i].value),b=u+m-v;s&&(m=.18*v,b=v+m),c.editarItemFormGroup.controls[r].setValue(Number(m).toFixed(2)),c.editarItemFormGroup.controls[n].setValue(Number(b).toFixed(2))}})},t.prototype.abrirModal=function(){$("#"+this.idModal).modal("show")},t.prototype.habilitarFormsControl=function(t,e){for(var o=0,r=e;o<r.length;o++){var a=r[o];this.editarItemFormGroup.controls[a].disable(),$("#"+a).parent().children("label").children("span").remove()}for(var i=0,n=t;i<n.length;i++){var s=n[i];this.editarItemFormGroup.controls[s].enable(),$("#"+s).parent().children("label").children("span").remove(),$("#"+s).parent().children("label").append("<span class='star'>*</span>")}},t.prototype.guardarItem=function(){this.tipoNotaCredito===this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_POR_ITEM?(this.detalleEbiz.cantidad="1.00",this.detalleEbiz.codigoItem=this.editarItemFormGroup.controls.txtCodigo.value,this.detalleEbiz.detalle.unidadMedida=this.editarItemFormGroup.controls.txtUnidadMedida.value,this.detalleEbiz.precioUnitario=this.editarItemFormGroup.controls.txtDescuentoNotaCredito.value,this.detalleEbiz.detalle.subtotalIgv=this.editarItemFormGroup.controls.txtIgv.value,this.detalleEbiz.detalle.subtotalIsc="0.00",this.detalleEbiz.detalle.descuento=this.editarItemFormGroup.controls.txtDescuentoNotaCredito.value,this.detalleEbiz.precioTotal=this.editarItemFormGroup.controls.txtValorVenta.value):(this.detalleEbiz.cantidad=this.editarItemFormGroup.controls.txtCantidad.value,this.detalleEbiz.codigoItem=this.editarItemFormGroup.controls.txtCodigo.value,this.detalleEbiz.descripcionItem=this.editarItemFormGroup.controls.txtDescripcion.value,this.detalleEbiz.detalle.unidadMedida=this.editarItemFormGroup.controls.txtUnidadMedida.value,this.detalleEbiz.precioUnitario=this.editarItemFormGroup.controls.txtValorUnitario.value,this.detalleEbiz.detalle.subtotalIgv=this.editarItemFormGroup.controls.txtIgv.value,this.detalleEbiz.detalle.subtotalIsc=this.editarItemFormGroup.controls.txtIsc.value,this.detalleEbiz.detalle.descuento=this.editarItemFormGroup.controls.txtDescuento.value,this.detalleEbiz.precioTotal=this.editarItemFormGroup.controls.txtValorVenta.value),this.verificarSiCambioItem()},t.prototype.verificarSiCambioItem=function(){Number(this.detalleEbiz.cantidad)!==Number(this.detalleEbizSinModificar.cantidad)||Number(this.detalleEbiz.precioUnitario)!==Number(this.detalleEbizSinModificar.precioUnitario)||0!==this.detalleEbiz.descripcionItem.localeCompare(this.detalleEbizSinModificar.descripcionItem)||Number(this.detalleEbiz.detalle.descuento)!==Number(this.detalleEbizSinModificar.detalle.descuento)?this.detalleEbiz.cambioDetalle=!0:this.detalleEbiz.cambioDetalle=!1},t.prototype.llenarDatosItem=function(t){var e=this;this.editarItemFormGroup.reset(),this.detalleEbiz=t,this.detalleEbizSinModificar=this.detalleLista.find(function(t){return t.posicion===e.detalleEbiz.posicion}),this.descuentoLimite=Number(Number(this.detalleEbizSinModificar.cantidad)*Number(this.detalleEbizSinModificar.precioUnitario)).toFixed(2),this.verificarTipoNotaCredito(),this.editarItemFormGroup.controls.txtCantidad.setValue(this.detalleEbiz.cantidad),this.editarItemFormGroup.controls.txtCodigo.setValue(this.detalleEbiz.codigoItem),this.editarItemFormGroup.controls.txtDescripcion.setValue(this.detalleEbiz.descripcionItem),this.editarItemFormGroup.controls.txtUnidadMedida.setValue(this.detalleEbiz.detalle.unidadMedida),this.editarItemFormGroup.controls.txtValorUnitario.setValue(this.detalleEbiz.precioUnitario),this.editarItemFormGroup.controls.txtIgv.setValue(this.detalleEbiz.detalle.subtotalIgv),this.editarItemFormGroup.controls.txtIsc.setValue(this.detalleEbiz.detalle.subtotalIsc),this.editarItemFormGroup.controls.txtDescuento.setValue(this.detalleEbiz.detalle.descuentoOriginal),this.editarItemFormGroup.controls.txtDescuentoNotaCredito.setValue(this.detalleEbiz.detalle.descuento),this.editarItemFormGroup.controls.txtValorVenta.setValue(this.detalleEbiz.precioTotal),this._estilosService.eliminarEstilosTodosTag("is-empty","input"),this._estilosService.eliminarEstilosTodosTag("is-empty","textarea")},t.prototype.verificarTipoNotaCredito=function(){var t=this;switch(this.tipoNotaCredito){case this._tiposService.TIPO_NOTA_CREDITO_CORRECCION_DE_LA_DESCRIPCION:this.habilitarFormsControl(["txtDescripcion"],["txtCantidad","txtDescuento","txtDescuentoNotaCredito","txtValorUnitario","txtValorVenta"]),this.editarItemFormGroup.controls.txtDescripcion.valueChanges.subscribe(function(e){e&&(0!==t.detalleEbizSinModificar.descripcionItem.localeCompare(t.editarItemFormGroup.controls.txtDescripcion.value)?t.estaValidadoFormGroup=!0:(t.editarItemFormGroup.controls.txtDescripcion.setErrors({debeSerDiferenteDe:!0}),t.estaValidadoFormGroup=!1))});break;case this._tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_POR_ITEM:this.habilitarFormsControl(["txtCantidad"],["txtDescripcion","txtDescuento","txtDescuentoNotaCredito","txtValorUnitario","txtValorVenta"]),this.recalcularDetalleEbiz("txtCantidad","txtCantidad","txtValorUnitario","txtIgv","txtIsc","txtDescuento","txtValorVenta"),this.editarItemFormGroup.controls.txtCantidad.valueChanges.subscribe(function(e){if(e){var o=Number(t.editarItemFormGroup.controls.txtCantidad.value);o<=0?(t.editarItemFormGroup.controls.txtCantidad.setErrors({min:!0}),t.estaValidadoFormGroup=!1):o>=Number(t.detalleEbizSinModificar.cantidad)?(t.editarItemFormGroup.controls.txtCantidad.setErrors({max:!0}),t.estaValidadoFormGroup=!1):(t.editarItemFormGroup.controls.txtCantidad.setErrors(null),t.estaValidadoFormGroup=!0)}});break;case this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_POR_ITEM:this.detalleEbiz.detalle.descuento="0.00",this.habilitarFormsControl(["txtDescuentoNotaCredito"],["txtDescripcion","txtCantidad","txtDescuento","txtValorUnitario","txtValorVenta"]),this.recalcularDetalleEbiz("txtDescuentoNotaCredito","txtCantidad","txtValorUnitario","txtIgv","txtIsc","txtDescuentoNotaCredito","txtValorVenta",!0),this.editarItemFormGroup.controls.txtValorVenta.valueChanges.subscribe(function(e){if(e){var o=Number(t.editarItemFormGroup.controls.txtValorVenta.value);o<=0?(t.editarItemFormGroup.controls.txtValorVenta.setErrors({min:!0}),t.estaValidadoFormGroup=!1):o>=Number(t.detalleEbizSinModificar.precioTotal)?(t.editarItemFormGroup.controls.txtValorVenta.setErrors({max:!0}),t.estaValidadoFormGroup=!1):(t.editarItemFormGroup.controls.txtValorVenta.setErrors(null),t.estaValidadoFormGroup=!0)}}),this.editarItemFormGroup.controls.txtDescuentoNotaCredito.valueChanges.subscribe(function(e){if(e){var o=Number(t.editarItemFormGroup.controls.txtDescuentoNotaCredito.value),r=Number(t.detalleEbizSinModificar.precioUnitario)*Number(t.detalleEbiz.cantidad);o<=0?(t.editarItemFormGroup.controls.txtDescuentoNotaCredito.setErrors({min:!0}),t.estaValidadoFormGroup=!1):o>=r?(t.editarItemFormGroup.controls.txtDescuentoNotaCredito.setErrors({max:!0}),t.estaValidadoFormGroup=!1):(t.editarItemFormGroup.controls.txtDescuentoNotaCredito.setErrors(null),t.estaValidadoFormGroup=!0)}});break;case this._tiposService.TIPO_NOTA_CREDITO_BONIFICACION:this.habilitarFormsControl(["txtCantidad","txtValorUnitario"],["txtDescripcion","txtDescuento","txtDescuentoNotaCredito","txtValorVenta"]),this.recalcularDetalleEbiz("txtCantidad","txtCantidad","txtValorUnitario","txtIgv","txtIsc","txtDescuento","txtValorVenta"),this.recalcularDetalleEbiz("txtValorUnitario","txtCantidad","txtValorUnitario","txtIgv","txtIsc","txtDescuento","txtValorVenta");break;case this._tiposService.TIPO_NOTA_CREDITO_DISMINUCION_EN_EL_VALOR:this.habilitarFormsControl(["txtValorUnitario"],["txtDescripcion","txtDescuento","txtDescuentoNotaCredito","txtCantidad","txtValorVenta"]),this.recalcularDetalleEbiz("txtValorUnitario","txtCantidad","txtValorUnitario","txtIgv","txtIsc","txtDescuento","txtValorVenta"),this.editarItemFormGroup.controls.txtValorUnitario.valueChanges.subscribe(function(e){if(e){var o=Number(t.editarItemFormGroup.controls.txtValorUnitario.value);o<=0?(t.editarItemFormGroup.controls.txtValorUnitario.setErrors({min:!0}),t.estaValidadoFormGroup=!1):o>=Number(t.detalleEbizSinModificar.precioUnitario)?(t.editarItemFormGroup.controls.txtValorUnitario.setErrors({max:!0}),t.estaValidadoFormGroup=!1):(t.editarItemFormGroup.controls.txtValorUnitario.setErrors(null),t.estaValidadoFormGroup=!0)}})}},t}();l([o.i(r.Input)(),d("design:type",String)],p.prototype,"idModal",void 0),l([o.i(r.ViewChild)("modalEditar"),d("design:type","function"==typeof(u=void 0!==r.ElementRef&&r.ElementRef)&&u||Object)],p.prototype,"modalEditar",void 0),p=l([o.i(r.Component)({selector:"app-tipo-nota-credito-editar-item",template:o("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.component.html"),styles:[o("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.component.css")]}),d("design:paramtypes",["function"==typeof(m=void 0!==i.a&&i.a)&&m||Object,"function"==typeof(v=void 0!==n.a&&n.a)&&v||Object,"function"==typeof(b=void 0!==s.a&&s.a)&&b||Object,"function"==typeof(C=void 0!==c.c&&c.c)&&C||Object])],p);var u,m,v,b,C},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.module.ts":function(t,e,o){"use strict";var r=o("./node_modules/@angular/core/@angular/core.es5.js"),a=o("./node_modules/@angular/common/@angular/common.es5.js"),i=o("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-editar-item/tipo-nota-credito-editar-item.component.ts"),n=o("./node_modules/@ngx-translate/core/index.js"),s=o("./node_modules/@angular/forms/@angular/forms.es5.js"),c=o("./src/app/facturacion-electronica/general/directivas/directivas.module.ts");o.d(e,"a",function(){return d});var l=this&&this.__decorate||function(t,e,o,r){var a,i=arguments.length,n=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(e,o,n):a(e,o))||n);return i>3&&n&&Object.defineProperty(e,o,n),n},d=function(){function t(){}return t}();d=l([o.i(r.NgModule)({imports:[a.CommonModule,n.a,s.ReactiveFormsModule,c.a],declarations:[i.a],exports:[i.a],providers:[]})],d)},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-normal/tipo-nota-credito-normal.component.css":function(t,e,o){e=t.exports=o("./node_modules/css-loader/lib/css-base.js")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-normal/tipo-nota-credito-normal.component.html":function(t,e){t.exports='<form [formGroup]="notaCreditoNormalFormGroup" autocomplete="off">\r\n  <div class="row">\r\n    <div class="col-md-3">\r\n      <div class="form-group label-floating">\r\n        <label id="lblDescuentos" class="control-label">\r\n          {{nombreDescuento | translate}}\r\n        </label>\r\n        <input class="form-control" id="txtDescuentos" formControlName="txtDescuentos" type="text"\r\n               (change)="reCalcularImporteTotal()" precioDirectiva>\r\n        <div class="row" *ngIf="notaCreditoNormalFormGroup.errors">\r\n          <div class="col-md-12">\r\n            <span class="text-danger"\r\n                *ngIf="notaCreditoNormalFormGroup.errors[\'txtDescuentosMenorQue\']">\r\n                {{notaCreditoNormalFormGroup.errors[\'txtDescuentosMenorQue\'] | translate: {digito: notaCreditoNormalFormGroup.errors[\'valortxtDescuentosMenorQue\']} }}\r\n            </span>\r\n            <span class="text-danger"\r\n                  *ngIf="notaCreditoNormalFormGroup.errors[\'txtDescuentosMayorQue\']">\r\n                {{notaCreditoNormalFormGroup.errors[\'txtDescuentosMayorQue\'] | translate: {digito: notaCreditoNormalFormGroup.errors[\'valortxtDescuentosMayorQue\']} }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="col-md-3">\r\n      <div class="form-group label-floating">\r\n        <label id="lblIsc" class="control-label">{{\'isc\' | translate}}</label>\r\n        <input class="form-control" id="txtIsc" formControlName="txtIsc" type="text"\r\n               (change)="reCalcularImporteTotal()" precioDirectiva>\r\n        <div class="row" *ngIf="notaCreditoNormalFormGroup.errors">\r\n          <div class="col-md-12">\r\n            <span class="text-danger"\r\n                  *ngIf="notaCreditoNormalFormGroup.errors[\'txtIscMenorQue\']">\r\n              {{notaCreditoNormalFormGroup.errors[\'txtIscMenorQue\'] | translate: {digito: notaCreditoNormalFormGroup.errors[\'valortxtIscMenorQue\']} }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="col-md-3">\r\n      <div class="form-group label-floating">\r\n        <label id="lblIgv" class="control-label">{{\'igv\' | translate}}</label>\r\n        <input class="form-control" id="txtIgv" formControlName="txtIgv" type="text" precioDirectiva>\r\n      </div>\r\n    </div>\r\n    <div class="col-md-3">\r\n      <div class="form-group label-floating">\r\n        <label id="lblImporteTotal" class="control-label">\r\n          {{\'importeTotal\' | translate}}\r\n        </label>\r\n        <input class="form-control" id="txtImporteTotal" formControlName="txtImporteTotal" type="text" precioDirectiva>\r\n        <div class="row" *ngIf="notaCreditoNormalFormGroup.errors">\r\n          <div class="col-md-12">\r\n            <span class="text-danger"\r\n                  *ngIf="notaCreditoNormalFormGroup.errors[\'txtImporteTotalMenorQue\']">\r\n              {{notaCreditoNormalFormGroup.errors[\'txtImporteTotalMenorQue\'] | translate: {digito: notaCreditoNormalFormGroup.errors[\'valortxtImporteTotalMenorQue\']} }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</form>\r\n'},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-normal/tipo-nota-credito-normal.component.ts":function(t,e,o){"use strict";var r=o("./node_modules/@angular/core/@angular/core.es5.js"),a=o("./node_modules/@angular/forms/@angular/forms.es5.js"),i=o("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),n=o("./src/app/facturacion-electronica/general/utils/estilos.services.ts"),s=o("./src/app/facturacion-electronica/general/services/utils/validadorPersonalizado.ts"),c=o("./node_modules/rxjs/BehaviorSubject.js"),l=(o.n(c),o("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/detalleNotaCredito.ts")),d=o("./src/app/facturacion-electronica/comprobantes/nota-credito/servicios/nota-credito.service.ts"),p=o("./src/app/facturacion-electronica/general/models/leyendaComprobante.ts");o.d(e,"a",function(){return v});var u=this&&this.__decorate||function(t,e,o,r){var a,i=arguments.length,n=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(e,o,n):a(e,o))||n);return i>3&&n&&Object.defineProperty(e,o,n),n},m=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},v=function(){function t(t,e,o){this._tiposService=t,this._estilosServices=e,this._notaCreditoService=o}return t.prototype.verificarNotaCreditoPermitidos=function(t){return-1!==[this._tiposService.TIPO_NOTA_CREDITO_ANULACION_DE_OPERACION,this._tiposService.TIPO_NOTA_CREDITO_ANULACION_POR_ERROR_RUC,this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_GLOBAL,this._tiposService.TIPO_NOTA_CREDITO_BONIFICACION,this._tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_TOTAL].findIndex(function(e){return e===t})},t.prototype.ngOnInit=function(){var t=this;this.leyendaComprobante=new c.BehaviorSubject(new p.a),this.leyendaCambiada=new p.a,this.nombreDescuento="descuento",this.estaModificandoDetalle=!1,this.iniciarFormGroup(),this.tipoNotaCreditoSubscription=this._notaCreditoService.tipoNotaCredito.subscribe(function(e){t.verificarNotaCreditoPermitidos(e)&&(t.tipoNotaCredito=e,t.notaCreditoNormalFormGroup.reset(),t._notaCreditoService.detalleModificadoLista.next(t._notaCreditoService.obtenerDetalleOriginal()),t.comprobanteReferenciaSubscription=t._notaCreditoService.comprobanteReferencia.subscribe(function(e){t.comprobanteReferencia=e,null!==t.comprobanteReferencia&&t.verificarNotaCreditoPermitidos(t.tipoNotaCredito)&&(t.cargarDatosLeyenda(t.comprobanteReferencia.dePagomontopagado,t.comprobanteReferencia.deTotalcomprobantepago,t.comprobanteReferencia.deImportereferencial,t.comprobanteReferencia.deSubtotalcomprobantepago,t.comprobanteReferencia.deDescuento,t.comprobanteReferencia.deImpuesto1,t.comprobanteReferencia.deImpuesto2,t.comprobanteReferencia.deImpuesto3),t.verificarTipoNotaCredito())}),t.reCargarDatos())}),this.pasoAVistaPreviaSubscription=this._notaCreditoService.pasoAVistaPrevia.subscribe(function(e){e&&(t._notaCreditoService.setCabeceraNormal(t.leyendaCambiada),t._notaCreditoService.setDetalleNormal(t.obtenerDetalle()))})},t.prototype.ngOnDestroy=function(){this.tipoNotaCreditoSubscription.unsubscribe(),this.comprobanteReferenciaSubscription.unsubscribe(),this.pasoAVistaPreviaSubscription.unsubscribe(),this.padreFormGroup.removeControl(this.nombreControl)},t.prototype.cargarDatosEnForm=function(t,e,o,r){var a=new p.a;a.total=Number(t).toFixed(2),a.descuentos=Number(e).toFixed(2),a.isc=Number(o).toFixed(2),a.subTotal=a.descuentos,a.importeReferencial=a.subTotal,a.igv=Number(r).toFixed(2),this.leyendaCambiada=a,this.notaCreditoNormalFormGroup.controls.txtImporteTotal.setValue(a.total),this.notaCreditoNormalFormGroup.controls.txtDescuentos.setValue(a.descuentos),this.notaCreditoNormalFormGroup.controls.txtIsc.setValue(a.isc),this.notaCreditoNormalFormGroup.controls.txtIgv.setValue(a.igv),this._estilosServices.eliminarEstiloInput("txtImporteTotal","is-empty"),this._estilosServices.eliminarEstiloInput("txtDescuentos","is-empty"),this._estilosServices.eliminarEstiloInput("txtIsc","is-empty"),this._estilosServices.eliminarEstiloInput("txtIgv","is-empty")},t.prototype.cargarDatosLeyenda=function(t,e,o,r,a,i,n,s){var c=new p.a;c.montoPagado=Number(t).toFixed(2),c.total=Number(e).toFixed(2),c.importeReferencial=Number(o).toFixed(2),c.descuentos=Number(a).toFixed(2),c.isc=Number(n).toFixed(2),c.igv=Number(i).toFixed(2),c.subTotal=Number(r).toFixed(2),c.otrosTributos=Number(s).toFixed(2),this.leyendaComprobante.next(c)},t.prototype.obtenerDetalle=function(){if(this.estaModificandoDetalle){var t=new l.a,e=this._notaCreditoService.comprobanteReferencia.value;t.detalle.idProducto=null;for(var o=!1,r=0,a=e.detalle;r<a.length;r++){var i=a[r];if(i.inItipoAfectacionigv&&i.inItipoCalculoisc&&i.inItipoPrecioventa&&i.inCodigoAfectacionigv&&i.inCodigoCalculoisc&&i.inCodigoPrecioventa&&i.vcDescAfectacionigv&&i.vcDescCalculoisc&&i.vcDescPrecioventa){o=!0,t.detalle.idTipoIgv=i.inItipoAfectacionigv,t.detalle.idTipoIsc=i.inItipoCalculoisc,t.detalle.idTipoPrecio=i.inItipoPrecioventa,t.detalle.codigoTipoIgv=i.inCodigoAfectacionigv,t.detalle.codigoTipoIsc=i.inCodigoCalculoisc,t.detalle.codigoTipoPrecio=i.inCodigoPrecioventa,t.detalle.descripcionTipoIgv=i.vcDescAfectacionigv,t.detalle.descripcionTipoIsc=i.vcDescCalculoisc,t.detalle.descripcionTipoPrecio=i.vcDescPrecioventa;break}}var n=e.detalle[0];return o||(t.detalle.idTipoIgv=n.inItipoAfectacionigv,t.detalle.idTipoIsc=n.inItipoCalculoisc,t.detalle.idTipoPrecio=n.inItipoPrecioventa,t.detalle.codigoTipoIgv=n.inCodigoAfectacionigv,t.detalle.codigoTipoIsc=n.inCodigoCalculoisc,t.detalle.codigoTipoPrecio=n.inCodigoPrecioventa,t.detalle.descripcionTipoIgv=n.vcDescAfectacionigv,t.detalle.descripcionTipoIsc=n.vcDescCalculoisc,t.detalle.descripcionTipoPrecio=n.vcDescPrecioventa),t.posicion="1",t.detalle.numeroItem="1",t.precioUnitario=Number(this.notaCreditoNormalFormGroup.controls.txtDescuentos.value).toFixed(2),t.detalle.subtotalVenta=t.precioUnitario,t.detalle.subtotalIsc=Number(this.notaCreditoNormalFormGroup.controls.txtIsc.value).toFixed(2),t.detalle.subtotalIgv=Number(this.notaCreditoNormalFormGroup.controls.txtIgv.value).toFixed(2),t.montoImpuesto=t.detalle.subtotalIgv,t.precioTotal=Number(this.notaCreditoNormalFormGroup.controls.txtImporteTotal.value).toFixed(2),t.detalle.precioUnitarioVenta=t.precioTotal,t.descripcionItem=this._notaCreditoService.notaCredito.value.motivoComprobante,t}return null},t.prototype.reCargarDatos=function(){var t=this;this.estaModificandoDetalle?this._notaCreditoService.estaUsandoPersistencia.value?(this.cargarDatosEnForm(Number(this._notaCreditoService.notaCredito.value.totalComprobante),Number(this._notaCreditoService.notaCredito.value.subtotalComprobante),Number(this._notaCreditoService.notaCredito.value.isc),Number(this._notaCreditoService.notaCredito.value.igv)),this._notaCreditoService.estaUsandoPersistencia.next(!1)):this.limpiar():this.leyendaComprobante.subscribe(function(e){t.notaCreditoNormalFormGroup.controls.txtDescuentos.setValue(e.descuentos),t.notaCreditoNormalFormGroup.controls.txtImporteTotal.setValue(e.total),t.notaCreditoNormalFormGroup.controls.txtIsc.setValue(e.isc),t.notaCreditoNormalFormGroup.controls.txtIgv.setValue(e.igv),t.leyendaCambiada=e})},t.prototype.reCalcularImporteTotal=function(){var t=Number(this.notaCreditoNormalFormGroup.controls.txtDescuentos.value),e=Number(this.notaCreditoNormalFormGroup.controls.txtIsc.value),o=t+e,r=.18*o;if(this.notaCreditoNormalFormGroup.controls.txtIgv.setValue(Number(r).toFixed(2)),o+=r,this.notaCreditoNormalFormGroup.controls.txtImporteTotal.setValue(Number(o).toFixed(2)),this.estaModificandoDetalle){var a=new p.a;a.total=this.notaCreditoNormalFormGroup.controls.txtImporteTotal.value,a.isc=this.notaCreditoNormalFormGroup.controls.txtIsc.value,a.igv=this.notaCreditoNormalFormGroup.controls.txtIgv.value,a.montoPagado=a.total,a.subTotal=this.notaCreditoNormalFormGroup.controls.txtDescuentos.value,this.leyendaCambiada=a}},t.prototype.limpiar=function(){this.notaCreditoNormalFormGroup.controls.txtDescuentos.setValue("0.00"),this.notaCreditoNormalFormGroup.controls.txtIsc.setValue("0.00"),this.notaCreditoNormalFormGroup.controls.txtIgv.setValue("0.00"),this.notaCreditoNormalFormGroup.controls.txtImporteTotal.setValue("0.00")},t.prototype.habilitarFormsControl=function(t,e){for(var o=0,r=e;o<r.length;o++){var a=r[o];this.notaCreditoNormalFormGroup.controls[a].disable(),$("#"+a).parent().children("label").children("span").remove()}for(var i=0,n=t;i<n.length;i++){var s=n[i];this.notaCreditoNormalFormGroup.controls[s].enable(),$("#"+s).parent().children("label").children("span").remove(),$("#"+s).parent().children("label").append("<span class='star'>*</span>")}},t.prototype.iniciarFormGroup=function(){this.notaCreditoNormalFormGroup=new a.FormGroup({txtImporteTotal:new a.FormControl({value:"0.00",disabled:!0},[a.Validators.required]),txtIsc:new a.FormControl({value:"0.00",disabled:!0},[a.Validators.required]),txtIgv:new a.FormControl({value:"0.00",disabled:!0},[a.Validators.required]),txtDescuentos:new a.FormControl({value:"0.00",disabled:!0},[a.Validators.required])},a.Validators.compose([s.a.formGroupAsyncMenorQue("txtDescuentos",this.leyendaComprobante,"subTotal",!0,this._notaCreditoService.tipoNotaCredito,[this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_GLOBAL,this._tiposService.TIPO_NOTA_CREDITO_BONIFICACION]),s.a.formGroupAsyncMenorQue("txtIsc",this.leyendaComprobante,"isc",!0,this._notaCreditoService.tipoNotaCredito,[this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_GLOBAL,this._tiposService.TIPO_NOTA_CREDITO_BONIFICACION]),s.a.formGroupAsyncMenorQue("txtImporteTotal",this.leyendaComprobante,"total")])),this.padreFormGroup.addControl(this.nombreControl,this.notaCreditoNormalFormGroup)},t.prototype.verificarTipoNotaCredito=function(){switch(this.tipoNotaCredito){case this._tiposService.TIPO_NOTA_CREDITO_ANULACION_DE_OPERACION:case this._tiposService.TIPO_NOTA_CREDITO_ANULACION_POR_ERROR_RUC:this.estaModificandoDetalle=!1,this.nombreDescuento="descuento",this.habilitarFormsControl([],["txtDescuentos","txtImporteTotal","txtIsc","txtIgv"]);break;case this._tiposService.TIPO_NOTA_CREDITO_DESCUENTO_GLOBAL:this.estaModificandoDetalle=!0,this.nombreDescuento="descuentoGlobal";var t=["txtDescuentos"],e=["txtImporteTotal","txtIsc","txtIgv"];Number(this.leyendaComprobante.value.isc)>0&&(t=["txtDescuentos","txtIsc"],e=["txtImporteTotal","txtIgv"]),this.habilitarFormsControl(t,e);break;case this._tiposService.TIPO_NOTA_CREDITO_BONIFICACION:this.estaModificandoDetalle=!0,this.nombreDescuento="descuentoGlobal";var o=["txtDescuentos"],r=["txtImporteTotal","txtIsc","txtIgv"];Number(this.leyendaComprobante.value.isc)>0&&(o=["txtDescuentos","txtIsc"],r=["txtImporteTotal","txtIgv"]),this.habilitarFormsControl(o,r);break;case this._tiposService.TIPO_NOTA_CREDITO_DEVOLUCION_TOTAL:this.estaModificandoDetalle=!1,this.nombreDescuento="descuento",this.habilitarFormsControl([],["txtDescuentos","txtImporteTotal","txtIsc","txtIgv"])}},t}();u([o.i(r.Input)("padreFormGroup"),m("design:type","function"==typeof(b=void 0!==a.FormGroup&&a.FormGroup)&&b||Object)],v.prototype,"padreFormGroup",void 0),u([o.i(r.Input)("nombreControl"),m("design:type",String)],v.prototype,"nombreControl",void 0),v=u([o.i(r.Component)({selector:"app-tipo-nota-credito-normal",template:o("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-normal/tipo-nota-credito-normal.component.html"),styles:[o("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-normal/tipo-nota-credito-normal.component.css")]}),m("design:paramtypes",["function"==typeof(C=void 0!==i.a&&i.a)&&C||Object,"function"==typeof(h=void 0!==n.a&&n.a)&&h||Object,"function"==typeof(f=void 0!==d.a&&d.a)&&f||Object])],v);var b,C,h,f},"./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-normal/tipo-nota-credito-normal.module.ts":function(t,e,o){"use strict";var r=o("./node_modules/@angular/core/@angular/core.es5.js"),a=o("./node_modules/@angular/common/@angular/common.es5.js"),i=o("./src/app/facturacion-electronica/comprobantes/nota-credito/tipo-nota-credito-normal/tipo-nota-credito-normal.component.ts"),n=o("./node_modules/@ngx-translate/core/index.js"),s=o("./node_modules/@angular/forms/@angular/forms.es5.js"),c=o("./src/app/facturacion-electronica/general/directivas/directivas.module.ts");o.d(e,"a",function(){return d});var l=this&&this.__decorate||function(t,e,o,r){var a,i=arguments.length,n=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(e,o,n):a(e,o))||n);return i>3&&n&&Object.defineProperty(e,o,n),n},d=function(){function t(){}return t}();d=l([o.i(r.NgModule)({imports:[a.CommonModule,n.a,s.ReactiveFormsModule,c.a],declarations:[i.a],exports:[i.a],providers:[]})],d)},"./src/app/facturacion-electronica/comprobantes/nota-credito/utils/TiposVistaNotaCredito.ts":function(t,e,o){"use strict";o.d(e,"a",function(){return r});var r;!function(t){t[t.NORMAL=0]="NORMAL",t[t.TABLA=1]="TABLA"}(r||(r={}))},"./src/app/facturacion-electronica/comprobantes/nota-credito/vista-previa-nota-credito/vista-previa-nota-credito.component.css":function(t,e,o){e=t.exports=o("./node_modules/css-loader/lib/css-base.js")(!1),e.push([t.i,".center{text-align:center}.left{text-align:left}.borde-simple{border-style:solid;border-radius:2px;border-color:#aaa}.logoVisualizar{width:100%;height:45px;overflow:hidden;border-radius:5px;background-color:#fff;left:70px;z-index:5}.card img{max-width:100%;max-height:100%;width:auto;height:auto}",""]),t.exports=t.exports.toString()},"./src/app/facturacion-electronica/comprobantes/nota-credito/vista-previa-nota-credito/vista-previa-nota-credito.component.html":function(t,e){t.exports='<div class="card">\r\n  <div class="card-header card-header-text" data-background-color="blue">\r\n    <h4 class="card-title">{{\'vistaPrevia\' | translate}}</h4>\r\n  </div>\r\n  <div class="card-content">\r\n    \x3c!-- <div class="row">\r\n      <div class="col-md-4">\r\n        <label>\r\n          <h5>\r\n            <b *ngIf="notaCredito.documentoEntidad[0]">{{notaCredito.documentoEntidad[0].denominacion}}</b>\r\n          </h5>\r\n        </label>\r\n      </div>\r\n      <div class="col-md-4 col-md-offset-4">\r\n        <div class="row">\r\n          <div class="col-md-4">\r\n            <label>\r\n              <h4>\r\n                <b>{{\'ruc\' | translate}}:</b>\r\n              </h4>\r\n            </label>\r\n          </div>\r\n          <div class="col-md-8">\r\n            <label>\r\n              <h5 *ngIf="notaCredito.documentoEntidad[0]">{{notaCredito.documentoEntidad[0].documento}}</h5>\r\n            </label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="row">\r\n      <div class="col-md-4">\r\n        <label>\r\n          <h5>\r\n            <b *ngIf="notaCredito.documentoEntidad[0]">{{notaCredito.documentoEntidad[0].direccionFiscal}}</b>\r\n          </h5>\r\n        </label>\r\n      </div>\r\n      <div class="col-md-4 col-md-offset-4">\r\n        <label>\r\n          <h3>\r\n            <b>{{tituloComprobante | translate | uppercase}}</b>\r\n          </h3>\r\n        </label>\r\n      </div>\r\n    </div> --\x3e\r\n    <div class="row">\r\n        <div class="col-md-4 left">\r\n              \x3c!-- <div *ngIf="urlLogo != \'\'" class="logoVisualizar">\r\n                <img src="{{urlLogo}}">\r\n              </div> --\x3e\r\n          <label>\r\n            \x3c!-- Razon Social Proveedor --\x3e\r\n            <b *ngIf="notaCredito.documentoEntidad[0]">{{notaCredito.documentoEntidad[0].denominacion}}</b>\r\n          </label>\r\n          <br>\r\n          <label>\r\n            \x3c!-- Direccion Proveedor --\x3e\r\n            <b>{{notaCredito.documentoEntidad[0].direccionFiscal}}</b>\r\n          </label>\r\n        </div>\r\n        <div class="col-md-4 col-md-offset-4 center">\r\n          <div class="col-md-12 borde-simple">\r\n            <label>\r\n              \x3c!-- RUC + Número de Ruc --\x3e\r\n              <b>{{\'rucNumero\'| translate}}: {{notaCredito.documentoEntidad[0].documento}}</b>\r\n            </label>\r\n            <br>\r\n            <label>\r\n              \x3c!-- Comprobante Electronico --\x3e\r\n              <b>{{\'notaCredito\' | translate | uppercase}} {{\'baseComprobanteElectronica\' | translate | uppercase}}</b>\r\n            </label>\r\n            <br>\r\n            <label>\r\n              \x3c!-- Serie Label + Serie --\x3e\r\n              <b>{{\'serie\'| translate}}: {{notaCredito.numeroComprobante}}</b>\r\n            </label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    <br>\r\n    \x3c!-- <div class="row">\r\n      <div class="col-md-4 col-md-offset-8">\r\n        <div class="row">\r\n          <div class="col-md-4">\r\n            <label>\r\n              <h3>\r\n                <b>{{\'serie\' | translate}}:</b>\r\n              </h3>\r\n            </label>\r\n          </div>\r\n          <div class="col-md-8">\r\n            <label>\r\n              <h3>{{notaCredito.numeroComprobante}}</h3>\r\n            </label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div> --\x3e\r\n    <br>\r\n    <div class="row">\r\n      <div class="col-md-6">\r\n        <div class="row">\r\n          <div class="col-md-6">\r\n            <label>\r\n              <b>{{\'seniorSeniors\' | translate}}:</b>\r\n            </label>\r\n          </div>\r\n          <div class="col-md-6">\r\n            <label *ngIf="notaCredito.documentoEntidad[1]">{{notaCredito.documentoEntidad[1].denominacion}}</label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="row">\r\n      <div class="col-md-6">\r\n        <div class="row">\r\n          <div class="col-md-6">\r\n            <label>\r\n              <b>{{\'ruc\' | translate}}:</b>\r\n            </label>\r\n          </div>\r\n          <div class="col-md-6">\r\n            <label *ngIf="notaCredito.documentoEntidad[1]">{{notaCredito.documentoEntidad[1].documento}}</label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="row">\r\n      <div class="col-md-6">\r\n        <div class="row">\r\n          <div class="col-md-6">\r\n            <label>\r\n              <b>{{\'domicilioFiscal\' | translate}}:</b>\r\n            </label>\r\n          </div>\r\n          <div class="col-md-6">\r\n            <label *ngIf="notaCredito.documentoEntidad[1]">{{notaCredito.documentoEntidad[1].direccionFiscal}}</label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="row">\r\n      <div class="col-md-6">\r\n        <div class="row">\r\n          <div class="col-md-6">\r\n            <label>\r\n              <b>{{\'fechaEmision\' | translate}}:</b>\r\n            </label>\r\n          </div>\r\n          <div class="col-md-6">\r\n            <label>{{formatoFechaEmision}}</label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="row">\r\n      <div class="col-md-6">\r\n        <div class="row">\r\n          <div class="col-md-6">\r\n            <label>\r\n              <b>{{\'tipoMoneda\' | translate}}:</b>\r\n            </label>\r\n          </div>\r\n          <div class="col-md-6">\r\n            <label>{{notaCredito.moneda}}</label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="row">\r\n      <div class="col-md-6">\r\n        <div class="row">\r\n          <div class="col-md-6">\r\n            <label>\r\n              <b>{{\'tipoNotaCredito\' | translate}}:</b>\r\n            </label>\r\n          </div>\r\n          <div class="col-md-6">\r\n            <label>{{tipoNotaComprobante | uppercase}}</label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="row">\r\n      <div class="col-md-6">\r\n        <div class="row">\r\n          <div class="col-md-6">\r\n            <label>\r\n              <b>{{\'motivoSustento\' | translate}}:</b>\r\n            </label>\r\n          </div>\r\n          <div class="col-md-6">\r\n            <label>{{notaCredito.motivoComprobante}}</label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <br>\r\n    <app-data-table\r\n      #tablaVistaPrevia\r\n      (iniciarData)="iniciarDataTable($event)"\r\n      [idTabla]="\'tablaVistaPrevia\'"\r\n      [columnas]="columnasTabla"\r\n      [ordenarPorElCampo]="ordenarPorElCampo"\r\n    ></app-data-table>\r\n    <br>\r\n    <div class="row">\r\n      <div class="col-md-6">\r\n        <div class="row">\r\n          <div class="col-md-6">\r\n            <label>\r\n              <b>{{\'observaciones\' | translate}}:</b>\r\n            </label>\r\n          </div>\r\n          <div class="col-md-6">\r\n            <label>{{notaCredito.observacionComprobante}}</label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <br>\r\n    <div class="row">\r\n      <div class="col-md-2 col-md-offset-5">\r\n        <label>\r\n          <b>{{\'importeTotal\' | translate}}:</b>\r\n        </label>\r\n      </div>\r\n      <div class="col-md-5">\r\n        <label>{{notaCredito.totalComprobante}}</label>\r\n      </div>\r\n    </div>\r\n    <div class="row">\r\n      <div class="col-md-2 col-md-offset-5">\r\n        <label>\r\n          <b>{{\'montoEnLetras\' | translate}}:</b>\r\n        </label>\r\n      </div>\r\n      <div class="col-md-5">\r\n        <label>{{totalEnPalabras | uppercase}}</label>\r\n      </div>\r\n    </div>\r\n    <br>\r\n    <br>\r\n  </div>\r\n  <div class="row">\r\n    <div class="col-md-12" align="right">\r\n      <button name="btnRegresar" type="button" class="btn btn-default" style="right: 15px;" (click)="regresar()">\r\n        {{\'regresar\' | translate}}\r\n      </button>\r\n      <button name="btnEmitir" type="button" class="btn btn-default" style="right: 15px;" (click)="emitir()">\r\n        {{\'emitir\' | translate}}\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n'},"./src/app/facturacion-electronica/comprobantes/nota-credito/vista-previa-nota-credito/vista-previa-nota-credito.component.ts":function(t,e,o){"use strict";var r=o("./node_modules/@angular/core/@angular/core.es5.js"),a=o("./src/app/facturacion-electronica/comprobantes/nota-credito/modelos/notaCredito.ts"),i=o("./node_modules/@angular/router/@angular/router.es5.js"),n=o("./src/app/facturacion-electronica/general/services/comprobantes/creacionComprobantes.ts"),s=o("./src/app/facturacion-electronica/general/data-table/data-table.component.ts"),c=o("./node_modules/written-number/lib/index.js"),l=(o.n(c),o("./src/app/facturacion-electronica/comprobantes/nota-credito/servicios/nota-credito.service.ts")),d=o("./node_modules/@ngx-translate/core/index.js"),p=o("./src/app/facturacion-electronica/comprobantes/services/padre-comprobante.service.ts"),u=o("./src/app/facturacion-electronica/general/data-table/utils/columna-data-table.ts");o.d(e,"a",function(){return b});var m=this&&this.__decorate||function(t,e,o,r){var a,i=arguments.length,n=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(e,o,n):a(e,o))||n);return i>3&&n&&Object.defineProperty(e,o,n),n},v=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},b=function(){function t(t,e,o,r,a,i){this.route=t,this._notaCreditoService=e,this.router=o,this._creacionComprobantes=r,this._translateService=a,this._padreComprobanteService=i,this._padreComprobanteService.actualizarComprobante(this.route.snapshot.data.codigo,this.route.snapshot.data.mostrarCombo),this.notaCredito=this._notaCreditoService.obtenerNotaCreditoPersistencia(),this.eliminarPersistencia=!0,this._notaCreditoService.estaUsandoPersistencia.value?(this.tituloComprobante="",this.columnasTabla=[new u.a("codigo","codigoItem"),new u.a("descripcion","descripcionItem",{"text-align":"left"}),new u.a("cantidad","cantidad",{"text-align":"right"}),new u.a("unidadMedida","detalle.unidadMedida"),new u.a("valorUnitario","precioUnitario",{"text-align":"right"}),new u.a("igv","detalle.subtotalIgv",{"text-align":"right"}),new u.a("isc","detalle.subtotalIsc",{"text-align":"right"}),new u.a("valorVenta","precioTotal",{"text-align":"right"})],this.ordenarPorElCampo="codigoItem",this.fechaEmision=new Date,this.formatoFechaEmision=this.obtenerFecha(),this.leerParametrosUrl()):this.regresar()}return t.prototype.obtenerFecha=function(){var t=new Date,e=t.getDate(),o=t.getMonth()+1;return t.getFullYear()+"-"+this.ponerCeros(o,2)+o+"-"+this.ponerCeros(e,2)+e},t.prototype.ponerCeros=function(t,e){return"0".repeat(e-t.toString().length)},t.prototype.leerParametrosUrl=function(){var t=this;this.route.queryParams.subscribe(function(e){t.pathRegresarA=e.regresarA})},t.prototype.ngOnInit=function(){var t=this;this.getRUCOrganizacion(),this.route.data.subscribe(function(e){t.tituloComprobante=e.titulo});var e=this.notaCredito.documentoParametro[0];if(e){var o=JSON.parse(e.json);this.tipoNotaComprobante=o.valor}var r=this.notaCredito.totalComprobante.toString().split("."),a=r[0],i=r[1],n="";this._translateService.get("con").take(1).subscribe(function(t){return n=t}),this.totalEnPalabras=c(Number(a),{lang:"es"})+" "+n+" "+i+"/100 "+this.notaCredito.auxMonedaTablaMaestra.descripcionLarga},t.prototype.ngOnDestroy=function(){this.eliminarPersistencia&&this._notaCreditoService.eliminarNotaCreditoPersistencia()},t.prototype.getRUCOrganizacion=function(){var t=JSON.parse(localStorage.getItem("usuarioActual"));this.urlLogo=null!=t.org_url_image?t.org_url_image:""},t.prototype.iniciarDataTable=function(t){var e=this.notaCredito.detalleEbiz;e.map(function(t){""===t.codigoItem&&(t.codigoItem="-"),""===t.descripcionItem&&(t.descripcionItem="-"),""===t.detalle.unidadMedida&&(t.detalle.unidadMedida="-")}),this.dataTable.insertarData(e)},t.prototype.emitir=function(){var t=this;this.fechaEmision=new Date,this.notaCredito.fechaEmision=this.fechaEmision.getTime(),this._creacionComprobantes.crearNotaCredito(this.notaCredito).subscribe(function(e){null!==e&&(t._notaCreditoService.notaCredito.next(new a.a),t._notaCreditoService.eliminarNotaCreditoPersistencia(),t._notaCreditoService.estaUsandoPersistencia.next(!1),t.router.navigate(["../../emision",e.id],{relativeTo:t.route}))})},t.prototype.regresar=function(){this.eliminarPersistencia=!1,this.router.navigate(["../"],{relativeTo:this.route})},t}();m([o.i(r.ViewChild)(s.a),v("design:type","function"==typeof(C=void 0!==s.a&&s.a)&&C||Object)],b.prototype,"dataTable",void 0),b=m([o.i(r.Component)({selector:"app-vista-previa-nota-credito",template:o("./src/app/facturacion-electronica/comprobantes/nota-credito/vista-previa-nota-credito/vista-previa-nota-credito.component.html"),styles:[o("./src/app/facturacion-electronica/comprobantes/nota-credito/vista-previa-nota-credito/vista-previa-nota-credito.component.css")]}),v("design:paramtypes",["function"==typeof(h=void 0!==i.b&&i.b)&&h||Object,"function"==typeof(f=void 0!==l.a&&l.a)&&f||Object,"function"==typeof(g=void 0!==i.c&&i.c)&&g||Object,"function"==typeof(I=void 0!==n.a&&n.a)&&I||Object,"function"==typeof(_=void 0!==d.c&&d.c)&&_||Object,"function"==typeof(D=void 0!==p.a&&p.a)&&D||Object])],b);var C,h,f,g,I,_,D},"./src/app/facturacion-electronica/comprobantes/nota-credito/vista-previa-nota-credito/vista-previa-nota-credito.module.ts":function(t,e,o){"use strict";var r=o("./node_modules/@angular/core/@angular/core.es5.js"),a=o("./node_modules/@angular/common/@angular/common.es5.js"),i=o("./src/app/facturacion-electronica/comprobantes/nota-credito/vista-previa-nota-credito/vista-previa-nota-credito.component.ts"),n=o("./node_modules/@ngx-translate/core/index.js"),s=o("./node_modules/@angular/common/@angular/common/http.es5.js"),c=o("./src/app/facturacion-electronica/general/services/comprobantes/creacionComprobantes.ts"),l=o("./src/app/facturacion-electronica/general/data-table/data-table.module.ts"),d=o("./src/app/facturacion-electronica/general/emision-comprobante/emision-comprobante.module.ts"),p=o("./src/app/facturacion-electronica/general/services/tokenInterceptor.service.ts");o.d(e,"a",function(){return m});var u=this&&this.__decorate||function(t,e,o,r){var a,i=arguments.length,n=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(i<3?a(n):i>3?a(e,o,n):a(e,o))||n);return i>3&&n&&Object.defineProperty(e,o,n),n},m=function(){function t(){}return t}();m=u([o.i(r.NgModule)({imports:[a.CommonModule,n.a,l.a,s.a,d.a],declarations:[i.a],exports:[i.a],providers:[c.a,{provide:s.c,useClass:p.a,multi:!0}]})],m)}});