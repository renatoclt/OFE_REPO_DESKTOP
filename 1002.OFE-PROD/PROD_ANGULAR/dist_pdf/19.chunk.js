webpackJsonp([19],{"./src/app/login/login.component.css":function(e,n,r){n=e.exports=r("./node_modules/css-loader/lib/css-base.js")(!1),n.push([e.i,".cursorHover :hover{cursor:pointer}",""]),e.exports=e.exports.toString()},"./src/app/login/login.component.html":function(e,n){e.exports='<div class="wrapper wrapper-full-page login">\r\n    <nav class="navbar navbar-primary navbar-transparent navbar-fixed-top">\r\n        <div class="container">\r\n            <div class="navbar-header">\r\n                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#menu-example">\r\n                    <span class="sr-only">Toggle navigation</span>\r\n                    <span class="icon-bar"></span>\r\n                    <span class="icon-bar"></span>\r\n                    <span class="icon-bar"></span>\r\n                </button>\r\n                <a class="navbar-brand" href="/#/dashboard"></a>\r\n            </div>\r\n        </div>\r\n    </nav>\r\n    <div class="full-page login-page" filter-color="black" data-image="./assets/img/login2.jpg">\r\n        \x3c!--   you can change the color of the filter page using: data-color="blue | purple | green | orange | red | rose " --\x3e\r\n        <div class="content">\r\n            <div class="container">\r\n                <div class="row">\r\n                    <div class="col-md-4 col-sm-6 col-md-offset-4 col-sm-offset-3">\r\n                        <form method="#" action="#">\r\n                            <div class="card card-login card-hidden">\r\n                                <div class="card-header text-center" data-background-color="blue">\r\n                                    <h4 class="card-title">Iniciar Sesión</h4>\r\n                                </div>\r\n                                <p class="category text-center">\r\n                                   Bienvenido a B2Mining Data\r\n                                </p>\r\n                                <div class="card-content">\r\n                                    <div class="input-group">\r\n                                        <span class="input-group-addon" style="background: transparent;">\r\n                                            \x3c!-- Usuario  : --\x3e\r\n                                            <i class="material-icons">email</i>\r\n                                        </span>\r\n                                        <div class="form-group label-floating">\r\n                                            <label class="control-label">Usuario</label>\r\n                                            <input type="text" id="txtUsuario" class="form-control" name="username" [(ngModel)]="loginModel.username"/>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="input-group">\r\n                                        <span class="input-group-addon" style="background: transparent;">\r\n                                            \x3c!-- Clave  : --\x3e\r\n                                            <i class="material-icons">lock_outline</i>\r\n                                        </span>\r\n                                        <div class="form-group label-floating">\r\n                                            <label class="control-label">Clave</label>\r\n                                            <input type="password" id="txtClave" class="form-control" name="password" [(ngModel)]="loginModel.password"/>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="input-group" *ngIf="this.loginModel.inicio == \'false\' ">\r\n                                    \x3c!-- <div class="input-group"> --\x3e\r\n                                        <span class="input-group-addon" style="background: transparent;">\r\n                                            \x3c!-- Ruc : --\x3e\r\n                                            <i class="material-icons">power_input</i>\r\n                                        </span>\r\n                                        <div class="form-group label-floating">\r\n                                            <label class="control-label">Ruc</label>\r\n                                            <input rucDirective type="text" id="txtRuc" class="form-control" name="ruc"  [(ngModel)]="loginModel.ruc"/>\r\n                                            \x3c!-- <input tipoDocumentoDirective [size]="11" [formato]="0" type="text" id="txtRuc" class="form-control" name="password"  [(ngModel)]="loginModel.ruc"/> --\x3e\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <p class="category text-center cursorHover">\r\n                                    <b>\r\n                                        <a class="category text-center control-label" style="color: #000" (click)="verMac()">Ver MAC</a>\r\n                                    </b>\r\n                                </p>\r\n                                <div class="footer text-right">\r\n                                    <button type="button" (click)="iniciarSesion()" class="btn btn-info btn-simple btn-wd btn-lg" id="btnLogin">Iniciar Sesión</button>\r\n                                    \x3c!-- <button type="button" (click)="iniciarSesion()" class="btn btn-info btn-simple btn-wd btn-lg col-xs-6 col-md-6" id="btnLogin">Iniciar Sesión</button> --\x3e\r\n                                </div>\r\n                                \x3c!--\r\n                                <div class="input-group">\r\n                                        <span class="input-group-addon" style="background: transparent;">\r\n                                        </span>\r\n                                        <div class="form-group label-floating">\r\n                                            <a href="#pablo">¿Olvidó su contraseña?</a>\r\n                                        </div>\r\n                                </div>\r\n                                --\x3e\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <footer class="footer">\r\n            <div class="container">\r\n                \x3c!--<nav class="pull-left">\r\n                    <ul>\r\n                        <li>\r\n                            <a href="#">\r\n                                Inicio\r\n                            </a>\r\n                        </li>\r\n                        <li>\r\n                            <a href="#">\r\n                                Compañía\r\n                            </a>\r\n                        </li>\r\n                        <li>\r\n                            <a href="#">\r\n                                Portafolio\r\n                            </a>\r\n                        </li>\r\n                        <li>\r\n                            <a href="#">\r\n                                Blog\r\n                            </a>\r\n                        </li>\r\n                    </ul>\r\n                </nav>--\x3e\r\n                <p class="copyright text-center">\r\n                    &copy;\r\n                    {{test | date: \'yyyy\'}}\r\n                    <a href="https://www.creative-tim.com">Ebiz</a>, Latin Todos los derechos reservados.<br />\r\n                    Contáctenos: 518 - 3360 | soluciones@ebizlatin.com | Chat en línea\r\n                </p>\r\n            </div>\r\n        </footer>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n<div id="mdlOrganizacion" class="modal fade" tabindex="-1" role="dialog">\r\n        <div class="modal-dialog" role="document">\r\n          <div class="modal-content">\r\n            <div class="modal-header">\r\n              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n\r\n              <table>\r\n                <tr>\r\n                  <td>\r\n                    <div class="card-header card-header-icon" data-background-color="blue">\r\n                      <i class="material-icons"></i>\r\n                    </div>\r\n                  </td>\r\n                  <td class="cell-title">\r\n                    <div class="card-content">\r\n                      <h4 class="card-title modal-title">Escoger Organización</h4>\r\n\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              </table>\r\n            </div>\r\n            <div class="modal-body">\r\n\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-12">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Organización\r\n                            <span class="star"></span>\r\n                          </label>\r\n                          <select id="org_id" name="org_id" class="form-control" [(ngModel)]="usuario.org_id" >\r\n\r\n                                <option *ngFor="let option of organizaciones" value="{{option.id}}"> {{option.nombre}} </option>\r\n\r\n\r\n                            </select>\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n            <div class="modal-footer">\r\n              <button type="button" class="btn btn-default"  (click)="AceptarOrganizacion($event)">Aceptar</button>\r\n\r\n            </div>\r\n          </div>\r\n          \x3c!-- /.modal-content --\x3e\r\n        </div>\r\n        \x3c!-- /.modal-dialog --\x3e\r\n      </div>\r\n'},"./src/app/login/login.component.ts":function(e,n,r){"use strict";var t=r("./node_modules/@angular/core/@angular/core.es5.js"),o=r("./src/app/utils/app.constants.ts"),i=r("./node_modules/@angular/router/@angular/router.es5.js"),a=r("./src/app/model/usuario.ts"),s=r("./src/app/base/base.component.ts"),c=r("./src/app/service/login.service.ts"),l=r("./src/app/service/adjuntoservice.ts"),u=r("./src/app/model/login.ts"),d=r("./src/app/service/loginConstantes.ts"),g=r("./src/app/facturacion-electronica/general/services/sincronizacion/sincronizacion.service.ts"),p=r("./node_modules/@angular/common/@angular/common/http.es5.js");r.d(n,"a",function(){return S});var m,f=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])};return function(n,r){function t(){this.constructor=n}e(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}}(),v=this&&this.__decorate||function(e,n,r,t){var o,i=arguments.length,a=i<3?n:null===t?t=Object.getOwnPropertyDescriptor(n,r):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,t);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(n,r,a):o(n,r))||a);return i>3&&a&&Object.defineProperty(n,r,a),a},b=this&&this.__metadata||function(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)},h=this&&this.__awaiter||function(e,n,r,t){return new(r||(r=Promise))(function(o,i){function a(e){try{c(t.next(e))}catch(e){i(e)}}function s(e){try{c(t.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new r(function(n){n(e.value)}).then(a,s)}c((t=t.apply(e,n||[])).next())})},y=this&&this.__generator||function(e,n){function r(e){return function(n){return t([e,n])}}function t(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,i=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){c.label=r[1];break}if(6===r[0]&&c.label<a[1]){c.label=a[1],a=r;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(r);break}a[2]&&c.ops.pop(),c.trys.pop();continue}r=n.call(e,c)}catch(e){r=[6,e],i=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},S=function(e){function n(n,r,t,i,s,c,l,d){var g=e.call(this,n)||this;return g.router=r,g.route=t,g.loginService=i,g.adjuntoService=s,g.constantesLoginService=c,g.sincronizacionService=l,g.httpClient=d,g.test=new Date,g.loading=!1,g.loginModel=new u.a,g.organizaciones=[],g.usuario=new a.a,i.logout(),g.base_url=o.b,m=g,g}return f(n,e),n.prototype.AceptarOrganizacion=function(e){var n=this;e&&e.preventDefault(),$("#mdlOrganizacion").modal("toggle");var r=this.usuario.organizaciones.find(function(e){return e.id==n.usuario.org_id});r.nombre.toLowerCase().indexOf("wong")>-1?r.url_image="wong.png":r.nombre.toLowerCase().indexOf("centenario")>-1?r.url_image="centenario.png":r.nombre.toLowerCase().indexOf("abinbev")>-1&&(r.url_image="abinbev.png"),this.usuario.org_url_image=r.url_image,this.usuario.tipo_empresa=r.tipo_empresa,this.usuario.ruc_org=r.ruc,this.usuario.isopais_org=r.isoPais,setTimeout(function(){m.GuardarSession()},100)},n.prototype.checkFullPageBackgroundImage=function(){var e=$(".full-page"),n=e.data("image");if(void 0!==n){var r='<div class="full-page-background" style="background-image: url('+n+') "/>';e.append(r)}},n.prototype.GuardarSession=function(){return h(this,void 0,void 0,function(){var e,n,r,t,o,i,a,s,c,l,u,d,g,p,m,f,v,b,h,S,_,w,x,O,I,C,P=this;return y(this,function(y){switch(y.label){case 0:return localStorage.setItem("org_id",this.usuario.org_id),(localStorage.setItem("username",this.usuario.nombreusuario),localStorage.setItem("tipo_empresa",this.usuario.tipo_empresa),e=this.usuario.organizaciones.find(function(e){return e.id==P.usuario.org_id}),localStorage.setItem("Ocp_Apim_Subscription_Key",e.keySuscripcion),localStorage.setItem("org_nombre",e.nombre),localStorage.setItem("org_ruc",e.ruc),localStorage.setItem("usuarioActual",JSON.stringify(this.usuario)),localStorage.setItem("passwordActual",this.loginModel.password),console.log("--------consume------"),console.log(this.loginModel.inicio),"false"!=this.loginModel.inicio)?[3,40]:(r=(n=this.loginService).guardarUsuariosOffline,[4,this.loginService.obtenerUsuariosOffline(this.loginModel.ruc).toPromise()]);case 1:return[4,r.apply(n,[y.sent()]).toPromise()];case 2:return y.sent(),[4,this.loginService.guardarIdioma().toPromise()];case 3:return y.sent(),[4,this.loginService.guardarIdiomaQuery().toPromise()];case 4:return y.sent(),[4,this.loginService.guardarEvento().toPromise()];case 5:return y.sent(),[4,this.loginService.obtenerMaestra().toPromise()];case 6:return t=y.sent(),[4,this.loginService.guardarMaestra(t).toPromise()];case 7:return y.sent(),[4,this.loginService.guardarParemetroEntidad().toPromise()];case 8:return y.sent(),[4,this.loginService.guardarTipoEntidad().toPromise()];case 9:return y.sent(),[4,this.loginService.guardarQueryEstado().toPromise()];case 10:y.sent(),y.label=11;case 11:return y.trys.push([11,26,,27]),[4,this.loginService.obtenerEntidad().toPromise()];case 12:return o=y.sent(),[4,this.loginService.guardarEntidad(o).toPromise()];case 13:return y.sent(),[4,this.loginService.obtenerAzure("logo_ebiz.png").toPromise()];case 14:return i=y.sent(),[4,this.loginService.obtenerAzure(o.logoCloud).toPromise()];case 15:return a=y.sent(),[4,this.loginService.obtenerAzure("retenciones-final.xml").toPromise()];case 16:return s=y.sent(),[4,this.loginService.guardarDocumentoAzure("1",o.id,"20",i,a,s)];case 17:return y.sent(),[4,this.loginService.obtenerAzure("facturas.xml").toPromise()];case 18:return c=y.sent(),[4,this.loginService.guardarDocumentoAzure("2",o.id,"01",i,a,c)];case 19:return y.sent(),[4,this.loginService.obtenerAzure("percepcion.xml").toPromise()];case 20:return l=y.sent(),[4,this.loginService.guardarDocumentoAzure("3",o.id,"40",i,a,l)];case 21:return y.sent(),[4,this.loginService.obtenerAzure("facturas.xml").toPromise()];case 22:return u=y.sent(),[4,this.loginService.guardarDocumentoAzure("4",o.id,"03",i,a,u)];case 23:return y.sent(),g=(d=this.loginService).guardarSerie,[4,this.loginService.obtenerSerie().toPromise()];case 24:return[4,g.apply(d,[y.sent()]).toPromise()];case 25:return y.sent(),[3,27];case 26:return p=y.sent(),swal({text:"Error al intentar sincronizar.",type:"error",buttonsStyling:!1,confirmButtonClass:"btn btn-error",confirmButtonText:"CONTINUAR"}),[3,27];case 27:return y.trys.push([27,39,,40]),f=(m=this.loginService).guardarParametro,[4,this.loginService.obtenerParametros().toPromise()];case 28:return[4,f.apply(m,[y.sent()]).toPromise()];case 29:return y.sent(),b=(v=this.loginService).guardarTipoPrecioVenta,[4,this.loginService.obtenerTipoPrecioVenta().toPromise()];case 30:return[4,b.apply(v,[y.sent()]).toPromise()];case 31:return y.sent(),S=(h=this.loginService).guardarTipoAfectacionIgv,[4,this.loginService.obtenerTipoAfectacionIgv().toPromise()];case 32:return[4,S.apply(h,[y.sent()]).toPromise()];case 33:return y.sent(),w=(_=this.loginService).guardarTipoCalculoIsc,[4,this.loginService.obtenerTipoCalculoIsc().toPromise()];case 34:return[4,w.apply(_,[y.sent()]).toPromise()];case 35:return y.sent(),O=(x=this.loginService).guardarConcepto,[4,this.loginService.obtenerConceptos().toPromise()];case 36:return[4,O.apply(x,[y.sent()]).toPromise()];case 37:return y.sent(),[4,this.loginService.guardarEmpresaLocal(this.loginModel.ruc).toPromise()];case 38:return y.sent(),[3,40];case 39:return I=y.sent(),swal({text:"Error al intentar sincronizarN.",type:"error",buttonsStyling:!1,confirmButtonClass:"btn btn-error",confirmButtonText:"CONTINUAR"}),[3,40];case 40:return this.loginService.obtenerIdEntidad(localStorage.getItem("org_ruc")),C=this,[4,this.loginService.obtenerMenuOffline().toPromise()];case 41:return C.menuOffline=y.sent(),this.loginService.obtenerMenu().subscribe(function(e){localStorage.setItem("menuLateral",JSON.stringify(P.menuOffline)),P.router.navigate([e.moduloUriDefault],{relativeTo:P.route})},function(e){P.messageUtils.showError(e)},function(){}),[2]}})})},n.prototype.ObtenerUsuario=function(){return h(this,void 0,void 0,function(){var e,n;return y(this,function(r){switch(r.label){case 0:return e=this,[4,this.loginService.obtenerUser().toPromise()];case 1:return e.usuario=r.sent(),(this.organizaciones=this.usuario.organizaciones,this.organizaciones.length<=0)?(this.finishLoading(),swal({text:"El usuario debe tener asignado al menos una organización.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1]):(this.organizaciones.length>1?(this.finishLoading(),$("#mdlOrganizacion").modal("show")):(n=this.organizaciones[0],this.usuario.org_url_image=n.url_image,this.usuario.ruc_org=n.ruc,this.usuario.isopais_org=n.isoPais,this.GuardarSession()),[2])}})})},n.prototype.verMac=function(){var e;e="",this.httpClient.get("http://localhost:3000/v1/sincronizacion/consultarMac",{params:null}).subscribe(function(n){console.log(n.mac),e=n.mac.toString(),swal({title:"Dirección Mac",html:"<p class='text-center'>"+e+"</p>",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"})})},n.prototype.iniciarSesion=function(){var e=this;if(""==this.loginModel.username)return swal({html:'<div class="text-center"> El usuario es un campo requerido.</div>',type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning",confirmButtonText:"CONTINUAR"}),!1;if(""==this.loginModel.password)return swal({html:'<div class="text-center"> El password es un campo requerido.</div>',type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning",confirmButtonText:"CONTINUAR"}),!1;if(console.log("this.loginModel.inicio"),console.log(this.loginModel.inicio),"false"==this.loginModel.inicio){if(console.log("VALIDACION DE RUC"),""==this.loginModel.ruc)return swal({html:'<div class="text-center"> El ruc es un campo requerido.</div>',type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning",confirmButtonText:"CONTINUAR"}),!1;if(void 0==this.loginModel.ruc)return swal({html:'<div class="text-center"> El ruc es un campo requerido.</div>',type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning",confirmButtonText:"CONTINUAR"}),!1;if(this.loginModel.ruc.length<11)return swal({html:'<div class="text-center"> Tamaño de Ruc Inválido, Formato 11 dígitos. </div>',type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning",confirmButtonText:"CONTINUAR"}),!1}this.loading=!0,this.uiUtils.showOrHideLoadingScreen(this.loading),this.loginService.login(this.loginModel.username.toUpperCase(),this.loginModel.password).subscribe(function(n){localStorage.setItem("access_token",n.access_token);var r=new Date((new Date).getTime()+864e5);r.setDate(r.getDate()+1),localStorage.setItem("expires",r.getTime().toString()),localStorage.setItem("expires_in",n.expires_in),e.ObtenerUsuario(),window.setup(!0)},function(n){e.loginService.loginOffline(e.loginModel.username.toUpperCase(),e.loginModel.password).subscribe(function(r){if(null!==r){localStorage.setItem("access_token","cdf1fe11-b36c-4be4-8434-557c143341a6");var t=new Date((new Date).getTime()+864e5);t.setDate(t.getDate()+1),localStorage.setItem("expires",t.getTime().toString()),localStorage.setItem("expires_in","1728000"),e.ObtenerUsuarioOffline(r),swal.close()}else e.finishLoading(),e.messageUtils.showError(n),swal({text:"El usuario o clave ingresado no son los correctos!",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"})},function(n){e.finishLoading(),e.messageUtils.showError(n),swal({text:"El usuario o clave ingresado no son los correctos!",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"})})},function(){})},n.prototype.ngOnInit=function(){this.checkFullPageBackgroundImage(),this.obtenerEmpresaLocal(),setTimeout(function(){$(".card").removeClass("card-hidden")},700),setTimeout(function(){$("select").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")})},100)},n.prototype.obtenerEmpresaLocal=function(){return h(this,void 0,void 0,function(){var e;return y(this,function(n){switch(n.label){case 0:return[4,this.loginService.obtenerEmpresaOffline().toPromise()];case 1:return e=n.sent(),console.log(e),this.loginModel.ruc=e.ruc,this.loginModel.inicio=e.inicio,console.log(this.loginModel),[2]}})})},n.prototype.ngAfterViewInit=function(){DatatableFunctions.ModalSettings(),this.uiUtils.addOrRemoveBodyBackGround(!0,"bckgrd-50percent-login"),this.uiUtils.addOrRemoveStyleFooter(!0,"fixed_full"),$("#txtUsuario").focus()},n.prototype.ngOnDestroy=function(){this.uiUtils.addOrRemoveBodyBackGround(!1,"bckgrd-50percent-login"),this.uiUtils.addOrRemoveStyleFooter(!1,"fixed_full")},n.prototype.finishLoading=function(){this.loading=!1,this.uiUtils.showOrHideLoadingScreen(this.loading)},n.prototype.manejador=function(e){13==e.keyCode&&($("#txtUsuario").is(":focus")||$("#txtClave").is(":focus"))&&$("#btnLogin").focus()},n.prototype.ObtenerUsuarioOffline=function(e){var n={};if(n.id=e.id,n.nombreusuario=e.nombreusuario.toUpperCase(),n.nombrecompleto=e.nombrecompleto,n.perfil=e.perfil,n.url_image=e.url_image,n.token=e.token,n.org_id=e.org_id,n.tipo_empresa=e.tipo_empresa,n.organizaciones=JSON.parse(e.organizaciones),this.usuario=n,this.organizaciones=this.usuario.organizaciones,this.organizaciones.length<=0)return this.finishLoading(),swal({text:"El usuario debe tener asignado al menos una orgamización.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(this.organizaciones.length>1)this.finishLoading(),$("#mdlOrganizacion").modal("show");else{var r=this.organizaciones[0];r.nombre.toLowerCase().indexOf("wong")>-1?r.url_image="wong.png":r.nombre.toLowerCase().indexOf("centenario")>-1?r.url_image="centenario.png":r.nombre.toLowerCase().indexOf("abinbev")>-1&&(r.url_image="abinbev.png"),this.usuario.org_url_image=r.url_image,this.usuario.ruc_org=r.ruc,this.usuario.isopais_org="pprueba",this.GuardarSessionOffline(this.usuario)}},n.prototype.GuardarSessionOffline=function(e){return h(this,void 0,void 0,function(){var n,r;return y(this,function(t){switch(t.label){case 0:return localStorage.setItem("org_id",e.org_id),localStorage.setItem("username",e.nombreusuario),localStorage.setItem("passwordActual",this.loginModel.password),n=e.organizaciones.find(function(n){return n.id==e.org_id}),localStorage.setItem("tipo_empresa",e.tipo_empresa),localStorage.setItem("Ocp_Apim_Subscription_Key",this.constantesLoginService.Ocp_Apim_Subscription_Key),localStorage.setItem("org_nombre",n.nombre),localStorage.setItem("org_ruc",n.ruc),localStorage.setItem("usuarioActual",JSON.stringify(e)),this.loginService.obtenerIdEntidadOFE(localStorage.getItem("org_ruc")),r=this,[4,this.loginService.obtenerMenuOffline().toPromise()];case 1:return r.menuOffline=t.sent(),null!=e&&(localStorage.setItem("menuLateral",JSON.stringify(this.menuOffline)),this.router.navigate(["/comprobantes/factura/crear"],{relativeTo:this.route})),[2]}})})},n}(s.a);v([r.i(t.HostListener)("document:keydown",["$event"]),b("design:type",Function),b("design:paramtypes",[Object]),b("design:returntype",void 0)],S.prototype,"manejador",null),S=v([r.i(t.Component)({selector:"login-cmp",template:r("./src/app/login/login.component.html"),styles:[r("./src/app/login/login.component.css")],providers:[c.a,l.a,d.a,g.a,p.b]}),b("design:paramtypes",["function"==typeof(_=void 0!==t.Injector&&t.Injector)&&_||Object,"function"==typeof(w=void 0!==i.c&&i.c)&&w||Object,"function"==typeof(x=void 0!==i.b&&i.b)&&x||Object,"function"==typeof(O=void 0!==c.a&&c.a)&&O||Object,"function"==typeof(I=void 0!==l.a&&l.a)&&I||Object,"function"==typeof(C=void 0!==d.a&&d.a)&&C||Object,"function"==typeof(P=void 0!==g.a&&g.a)&&P||Object,"function"==typeof(M=void 0!==p.b&&p.b)&&M||Object])],S);var _,w,x,O,I,C,P,M},"./src/app/login/login.module.ts":function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=r("./node_modules/@angular/core/@angular/core.es5.js"),o=r("./node_modules/@angular/router/@angular/router.es5.js"),i=r("./node_modules/@angular/common/@angular/common.es5.js"),a=r("./node_modules/@angular/forms/@angular/forms.es5.js"),s=r("./src/app/login/login.component.ts"),c=r("./src/app/login/login.routing.ts"),l=r("./src/app/facturacion-electronica/general/services/tokenInterceptor.service.ts"),u=r("./node_modules/@angular/common/@angular/common/http.es5.js"),d=r("./src/app/facturacion-electronica/general/directivas/directivas.module.ts");r.d(n,"LoginModule",function(){return p});var g=this&&this.__decorate||function(e,n,r,t){var o,i=arguments.length,a=i<3?n:null===t?t=Object.getOwnPropertyDescriptor(n,r):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,t);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(n,r,a):o(n,r))||a);return i>3&&a&&Object.defineProperty(n,r,a),a},p=function(){function e(){}return e}();p=g([r.i(t.NgModule)({imports:[d.a,i.CommonModule,o.a.forChild(c.a),a.FormsModule],declarations:[s.a],providers:[{provide:u.c,useClass:l.a,multi:!0}]})],p)},"./src/app/login/login.routing.ts":function(e,n,r){"use strict";var t=r("./src/app/login/login.component.ts");r.d(n,"a",function(){return o});var o=[{path:"",children:[{path:"login",component:t.a}]}]},"./src/app/model/login.ts":function(e,n,r){"use strict";r.d(n,"a",function(){return t});var t=function(){function e(){this.ruc=""}return e}()},"./src/app/service/loginConstantes.ts":function(e,n,r){"use strict";var t=r("./node_modules/@angular/core/@angular/core.es5.js");r.d(n,"a",function(){return i});var o=this&&this.__decorate||function(e,n,r,t){var o,i=arguments.length,a=i<3?n:null===t?t=Object.getOwnPropertyDescriptor(n,r):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,t);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(n,r,a):o(n,r))||a);return i>3&&a&&Object.defineProperty(n,r,a),a},i=function(){function e(){this.Ocp_Apim_Subscription_Key="07a12d074c714f62ab037bb2f88e30d3"}return e}();i=o([r.i(t.Injectable)()],i)}});