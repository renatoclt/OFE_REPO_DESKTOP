webpackJsonp([25],{"./src/app/facturacion-electronica/comprobantes/boleta/boleta.component.css":function(t,o,e){o=t.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),o.push([t.i,".material-icons{font-size:1.5rem;margin-right:.5rem}.blue{background:#0079bf}.input-group-addon{background:transparent;border:0;padding:0}.card .card-header.card-header-icon{width:60px}.navbar.navbar-info{margin:0 15px}.align-right{text-align:center}.float-right{float:right}.pull-right{float:right!important}input.ng-invalid.ng-touched,mat-select.ng-invalid.ng-touched{border-bottom:1px solid red}mat-select{border-bottom:1px solid #aaa}.control-label{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.text-danger{font-size:11px;font-weight:700}.navbar.navbar-info{margin:0 15px 15px}.btn.btn-default.btn-simple{color:#0079bf}.dt-buttons .pull-right{margin-right:15px}",""]),t.exports=t.exports.toString()},"./src/app/facturacion-electronica/comprobantes/boleta/boleta.component.html":function(t,o){t.exports='<div class="container-fluid">\r\n    <div class="row">\r\n      <div >\r\n        <div class="card">\r\n          <div class="card-header card-header-text" data-background-color="blue">\r\n            <h4 class="card-title">{{\'crearBoleta\' | translate}}</h4>\r\n          </div>\r\n          <div class="card-content">\r\n            <form [formGroup]="boletaFormGroup" (ngSubmit)="irVistaPrevia()" novalidate autocomplete="off">\r\n              <div class="row">\r\n                <div class="col-xs-12 col-sm-6 col-md-4">\r\n                  <div class="form-group label-floating">\r\n                    <label id="lblSerie" class="control-label">{{\'serie\' | translate}}\r\n                      <span class="star">*</span>\r\n                    </label>\r\n                    <select id="cmbSerie" name="cmbSerie" formControlName="cmbSerie" class="form-control">\r\n                      <option *ngFor="let serie of series" [value]="serie.idSerie">\r\n                        {{serie.serie}}\r\n                      </option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n                \x3c!-- <div class="col-xs-12 col-sm-6 col-md-4">\r\n                  <div class="form-group label-floating">\r\n                    <label id="lblRuc" name="lblRuc" class="control-label">\r\n                      <i class="material-icons">search</i>{{\'ruc\' | translate}}\r\n                      <span class="star">*</span>\r\n                    </label>\r\n                    <input rucDirective type="text" name="txtRuc" id="txtRuc" formControlName="txtRuc"\r\n                    autocomplete="off" class="form-control" (keyup)="busquedaruc($event)">\r\n                  </div>\r\n                </div> --\x3e\r\n                <div class="col-xs-12 col-sm-6 col-md-4">\r\n                  <div class="form-group label-floating">\r\n                    <label id="lblSerie" class="control-label">{{\'tipoDocumento\' | translate}}\r\n                      <span class="star">*</span>\r\n                    </label>\r\n                    <select id="cmbTipoDocumento"\r\n                          name="cmbTipoDocumento"\r\n                          formControlName="cmbTipoDocumento"\r\n                          class="form-control"\r\n                          (change)="setFormatoDocumento()">\r\n                    <option *ngFor="let tipoDocumento of tiposDocumentos | async" [value]="tipoDocumento.codigo">\r\n                      {{tipoDocumento.descripcionLarga}}\r\n                    </option>\r\n                  </select>\r\n                  </div>\r\n                </div>\r\n\r\n                \x3c!-- <div class="col-sm-3" *ngIf="flagTipoDocumento"> --\x3e\r\n                <div class="col-sm-3">\r\n                  <div class="form-group label-floating">\r\n                    <label class="control-label"><i class="material-icons">search</i>{{\'numeroDocumento\' | translate}}</label>\r\n                    <input tipoDocumentoDirective \r\n                            [size]="tamanioTipoDocumento" [formato]="formatoTipoDocumento"\r\n                            id="txtNumeroDocumento" type="text" name="txtNumeroDocumento"\r\n                            formControlName="txtNumeroDocumento" class="form-control"\r\n                            autocomplete="off" (keyup)="busquedaruc($event)"\r\n                            >\r\n                  </div>\r\n                </div>\r\n\r\n                \x3c!-- <div class="col-sm-3" *ngIf="!flagTipoDocumento">\r\n                  <div class="form-group label-floating">\r\n                    <label class="control-label"><i class="material-icons">search</i>{{\'numeroDocumento\' | translate}}</label>\r\n                    <input tipoDocumentoDirective \r\n                            [size]="tamanioTipoDocumento" [formato]="formatoTipoDocumento"\r\n                            id="txtNumeroDocumento" type="text" name="txtNumeroDocumento"\r\n                            formControlName="txtNumeroDocumento" class="form-control"\r\n                            >\r\n                  </div>\r\n                </div> --\x3e\r\n              </div>\r\n\r\n              <div class="row">\r\n                <div class="col-xs-12 col-sm-12 col-md-4">\r\n                  <div class="form-group label-floating">\r\n                    <label id="lblRazonSocial" name="lblRazonSocial" class="control-label">{{\'razonSocial\' | translate}}\r\n                      <span class="star">*</span>\r\n                    </label>\r\n                    <input #inputRazonSocial type="text" id="txtRazonSocial" name="txtRazonSocial" formControlName="txtRazonSocial" class="form-control">\r\n                  </div>\r\n                </div>\r\n                <div class="col-xs-12 col-sm-12 col-md-4">\r\n                  <div class="form-group label-floating">\r\n                    <label id="lblDireccionFiscal" name="lblDireccionFiscal" class="control-label">{{\'txtdireccionfiscal\' | translate}}\r\n                      <span class="star">*</span></label>\r\n                    <input type="text" id="txtDireccionFiscal" name="txtDireccionFiscal" formControlName="txtDireccionFiscal" class="form-control">\r\n                  </div>\r\n                </div>\r\n                <div class="col-xs-12 col-sm-6 col-md-4">\r\n                  <div class="form-group label-floating">\r\n                    <label id="lblCorreo" name="lblCorreo" class="control-label">{{\'txtcorreo\' | translate}}\r\n                      <span class="star">*</span>\r\n                    </label>\r\n                    <input type="email" id="txtCorreo" name="txtCorreo" formControlName="txtCorreo" class="form-control"\r\n                    title="Please provide only a Best Startup Ever corporate email address">\r\n                    <span *ngIf="!boletaFormGroup.get(\'txtCorreo\').valid && (boletaFormGroup.get(\'txtCorreo\').touched)">\r\n                        <span *ngIf="boletaFormGroup.controls[\'txtCorreo\'].hasError(\'required\')" class="text-danger">Correo es requerido.</span>\r\n                        <span *ngIf="boletaFormGroup.controls[\'txtCorreo\'].hasError(\'pattern\')" class="text-danger">Formato correo inv√°lido.</span>\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                \x3c!-- <div class="col-xs-12 col-sm-6 col-md-4">\r\n                  <div class="form-group label-floating">\r\n                    <label id="lblDetraccion" name="lblDetraccion" class="control-label">{{\'detraccion\' | translate}}</label>\r\n                    <input precioDirectiva type="text" id="txtDetraccion" name="txtDetraccion" formControlName="txtDetraccion" class="form-control"\r\n                      (blur)="calcularMontos()">\r\n                  </div>\r\n                </div> --\x3e\r\n              </div>\r\n              <div class="row">\r\n                <div class="col-xs-12 col-sm-6 col-md-4">\r\n                  <div class="form-group label-floating">\r\n                    <label id="lblFechaEmision" name="lblFechaEmision" class="control-label">{{\'fechaEmision\' | translate}}\r\n                      <span class="star">*</span>\r\n                    </label>\r\n                    <input type="text" id="txtFechaEmision" name="txtFechaEmision" formControlName="txtFechaEmision" class="form-control" datepicker\r\n                      minlength="10" min="10" maxlength="10" max="10" />\r\n                      <span *ngIf="boletaFormGroup.controls[\'txtFechaEmision\'].hasError(\'errorFecha\')" class="text-danger">{{boletaFormGroup.controls[\'txtFechaEmision\'].getError(\'errorFecha\') | translate}}</span>\r\n                      \x3c!-- <span class="text-danger" *ngIf="boletaFormGroup.errors && boletaFormGroup.errors.errorFecha">{{boletaFormGroup.errors.errorFecha | translate}}</span> --\x3e\r\n                    </div>\r\n                </div>\r\n                <div class="col-xs-12 col-sm-6 col-md-4">\r\n                  <div class="form-group label-floating">\r\n                    <label id="lblFechaVencimiento" name="lblFechaVencimiento" class="control-label">{{\'fechaVencimiento\' | translate}}\r\n                      <span class="star">*</span>\r\n                    </label>\r\n                    <input type="text" id="txtFechaVencimiento" name="txtFechaVencimiento" formControlName="txtFechaVencimiento" class="form-control"\r\n                      datepicker minlength="10" min="10" maxlength="10" max="10" />\r\n                    <span *ngIf="boletaFormGroup.controls[\'txtFechaVencimiento\'].hasError(\'errorFechaMayorAHoy\')" class="text-danger">{{boletaFormGroup.controls[\'txtFechaVencimiento\'].getError(\'errorFechaMayorAHoy\') | translate}}</span>\r\n                    <span *ngIf="flagRangoFechas" class="text-danger">{{errorRangoFecha}}</span>\r\n                    <span class="text-danger" *ngIf="boletaFormGroup.errors && boletaFormGroup.errors.errorFecha">{{boletaFormGroup.errors.errorFecha | translate}}</span>\r\n                  </div>\r\n                </div>\r\n                <div class="col-xs-12 col-sm-6 col-md-4">\r\n                  <div class="form-group label-floating">\r\n                    <label id="lblMoneda" name="lblMoneda" class="control-label">{{\'tipoMoneda\' | translate}}\r\n                      <span class="star">*</span>\r\n                    </label>\r\n                    <select id="cmbMoneda" name="cmbMoneda" formControlName="cmbMoneda" class="form-control">\r\n                      <option *ngFor="let moneda of monedas | async" [value]="moneda.codigo">{{moneda.descripcionCorta}}</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="row">\r\n                <div class="col-xs-12 col-sm-6 col-md-4">\r\n                  <div class="form-group">\r\n                    <div class="checkbox">\r\n                      <label>\r\n                        <input type="checkbox" name="chkBoletaAnticipo" id="chkBoletaAnticipo" formControlName="chkBoletaAnticipo" [checked]="esBoletaAnticipo"\r\n                          (click)="seleccionBoletaAnticipo($event.target.checked)">{{\'boletaAnticipo\' | translate}}\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="row ">\r\n                \x3c!-- <div class="col-md-12 float-right"> --\x3e\r\n                  <div class="col-xs-12 col-sm-12 col-md-6 col-lg-3 float-right">\r\n                    <button class="btn btn-default float-right" type="button" (click)="irDocumentoRelacionado()" [disabled]="esBoletaAnticipo">{{\'documentoRelacionado\' | translate}}</button>\r\n                  \x3c!-- </div> --\x3e\r\n                </div>\r\n              </div>\r\n\r\n\r\n                <div class="card">\r\n                  <div class="card-header card-header-icon" data-background-color="blue">\r\n                      <i class="material-icons">list</i>\r\n                  </div>\r\n                  <div class="row"><h3>{{\'listaItems\' | translate}}</h3></div>\r\n                  <div class="row"><p>&nbsp;</p></div>\r\n                  <nav class="navbar navbar-info" role="navigation"></nav>\r\n                  <div class="card-content">\r\n                    <app-data-table\r\n                      (iniciarData)="iniciarData($event)"\r\n                      (accion)="ejecutarAccion($event)"\r\n                      (eliminar)="eliminar($event)"\r\n                      (tipoProductoSeleccionado)="tipoProductoSeleccionado($event)"\r\n                      #otro\r\n                      [tipoBotonAgregar]="tipoBotonAgregar"\r\n                      [idTabla]="\'tabla2\'"\r\n                      [columnas]="columnasTabla"\r\n                      [acciones]="AccionesPrueba"\r\n                      [tipoAccion]="tipo"\r\n                      [habilitarAgregar]="true"\r\n                      [habilitarAcciones]="true"\r\n                      [habilitarCheckBox]="true"\r\n                      [habilitarFuncionalidadAgregar]="esBoletaAnticipo">\r\n                    </app-data-table>\r\n                  </div>\r\n\r\n                </div>\r\n\r\n              \x3c!-- <div class="row" *ngIf="boleta.documentoReferencia">\r\n                <div class="col-md-12">\r\n                  <table class="table table-striped">\r\n                    <tbody>\r\n                      <tr *ngFor="let item of boleta.documentoReferencia">\r\n                        <td>\r\n                          {{item.nombreTipoDocumento + \' \' + item.serieDocumentoDestino + \'-\' + item.correlativoDocumentoDestino}}\r\n                        </td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div> --\x3e\r\n\r\n              <div class="row">\r\n                <div class="col-md-12">\r\n                  <div class="form-group label-floating">\r\n                    <label class="control-label">{{\'observaciones\' | translate}}</label>\r\n                    <textarea class="form-control" id="txtObservaciones" name="txtObservaciones" formControlName="txtObservaciones" rows="3"></textarea>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class="row align-right">\r\n                <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                  <div class="form-group label-floating">\r\n                    <label id="lblOperacionesGrabadas" name="lblOperacionesGrabadas" class="control-label">{{\'operacionesGravadas\' | translate}}</label>\r\n                    <input type="text" id="txtOperacionesGrabadas" name="txtOperacionesGrabadas" formControlName="txtOperacionesGrabadas" class="form-control">\r\n                  </div>\r\n                </div>\r\n                <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                  <div class="form-group label-floating">\r\n                    <label id="lblOperacionesInafectas" name="lblOperacionesInafectas" class="control-label">{{\'operacionesInafectas\' | translate}}</label>\r\n                    <input type="text" id="txtOperacionesInafectas" name="txtOperacionesInafectas" formControlName="txtOperacionesInafectas"\r\n                      class="form-control">\r\n                  </div>\r\n                </div>\r\n                <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                  <div class="form-group label-floating">\r\n                    <label id="lblOperacionesExoneradas" name="lblOperacionesExoneradas" class="control-label">{{\'operacionesExoneradas\' | translate}}</label>\r\n                    <input type="text" id="txtOperacionesExoneradas" name="txtOperacionesExoneradas" formControlName="txtOperacionesExoneradas"\r\n                      class="form-control">\r\n                  </div>\r\n                </div>\r\n                <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                  <div class="form-group label-floating">\r\n                    <label id="lblTotalDescuentos" name="lblTotalDescuentos" class="control-label">{{\'totalDescuentos\' | translate}}</label>\r\n                    <input type="text" id="txtTotalDescuentos" name="txtTotalDescuentos" formControlName="txtTotalDescuentos" class="form-control">\r\n                  </div>\r\n                </div>\r\n                <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                  <div class="form-group label-floating">\r\n                    <label id="lblSumatoriaOtrosTributos" name="lblSumatoriaOtrosTributos" class="control-label">{{\'sumatoriaOtrosTributos\' | translate}}</label>\r\n                    <input precioDirectiva type="text" id="txtSumatoriaOtrosTributos" name="txtSumatoriaOtrosTributos" formControlName="txtSumatoriaOtrosTributos"\r\n                      class="form-control" (blur)="calcularMontos()">\r\n                  </div>\r\n                </div>\r\n                <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                  <div class="form-group label-floating">\r\n                    <label id="lblSumatoriaOtrosCargos" name="lblSumatoriaOtrosCargos" class="control-label">{{\'sumatoriaOtrosCargos\' | translate}}</label>\r\n                    <input precioDirectiva type="text" id="txtSumatoriaOtrosCargos" name="txtSumatoriaOtrosCargos" formControlName="txtSumatoriaOtrosCargos"\r\n                      class="form-control" (blur)="calcularMontos()">\r\n                  </div>\r\n                </div>\r\n                <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                  <div class="form-group label-floating">\r\n                    <label id="lblTotalAnticipos" name="lblTotalAnticipos" class="control-label">{{\'totalAnticipos\' | translate}}</label>\r\n                    <input type="text" id="txtTotalAnticipos" name="txtTotalAnticipos" formControlName="txtTotalAnticipos" class="form-control">\r\n                  </div>\r\n                </div>\r\n                <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                  <div class="form-group label-floating">\r\n                    <label id="lblSumatoriaIsc" name="lblSumatoriaIsc" class="control-label">{{\'sumatoriaIsc\' | translate}}</label>\r\n                    <input type="text" id="txtSumatoriaIsc" name="txtSumatoriaIsc" formControlName="txtSumatoriaIsc" class="form-control">\r\n                  </div>\r\n                </div>\r\n                <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                  <div class="form-group label-floating">\r\n                    <label id="lblSumatoriaIgv" name="lblSumatoriaIgv" class="control-label">{{\'sumatoriaIgv\' | translate}}</label>\r\n                    <input type="text" id="txtSumatoriaIgv" name="txtSumatoriaIgv" formControlName="txtSumatoriaIgv" class="form-control">\r\n                  </div>\r\n                </div>\r\n                <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                  <div class="form-group label-floating">\r\n                    <label id="lblSubTotal" name="lblSubTotal" class="control-label">{{\'subTotal\' | translate}}</label>\r\n                    <input type="text" id="txtSubTotal" name="txtSubTotal" formControlName="txtSubTotal" class="form-control">\r\n                  </div>\r\n                </div>\r\n                <div class="col-xs-12 col-sm-4 col-md-4 ">\r\n                  <div class="form-group label-floating">\r\n                    <label id="lblImporteTotal" name="lblImporteTotal" class="control-label">{{\'importeTotal\' | translate}}</label>\r\n                    <input type="text" id="txtImporteTotal" name="txtImporteTotal" formControlName="txtImporteTotal" class="form-control">\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class="row">\r\n                  <div class="col-md-12" align="right">\r\n                    <button type="submit" class="btn btn-default" [disabled]="!(flagVistaPrevia && boletaFormGroup.valid)">{{\'vistaPrevia\' | translate}}</button>\r\n                    \x3c!-- <button type="submit" class="btn btn-default btn-block">{{\'vistaPrevia\' | translate}}</button> --\x3e\r\n                    \x3c!-- <button type="button" class="btn btn-default btn-block" (click)="probarBotonVistaPrevia()">Probar Vista Previa</button> --\x3e\r\n                  </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n'},"./src/app/facturacion-electronica/comprobantes/boleta/boleta.component.ts":function(t,o,e){"use strict";var a=e("./node_modules/@angular/core/@angular/core.es5.js"),i=e("./node_modules/@angular/forms/@angular/forms.es5.js"),r=e("./src/app/facturacion-electronica/general/data-table/data-table.component.ts"),s=e("./src/app/facturacion-electronica/general/utils/rutas.service.ts"),n=e("./node_modules/@angular/router/@angular/router.es5.js"),c=e("./src/app/facturacion-electronica/comprobantes/models/detalleEbiz.ts"),l=e("./src/app/facturacion-electronica/general/data-table/utils/accion.ts"),u=e("./src/app/facturacion-electronica/general/data-table/utils/tipo-accion.ts"),m=e("./src/app/facturacion-electronica/general/data-table/utils/modo-vista-accion.ts"),p=e("./src/app/facturacion-electronica/comprobantes/services/persistencia.service.ts"),d=e("./src/app/facturacion-electronica/comprobantes/models/facturaEbiz.ts"),b=e("./src/app/facturacion-electronica/general/data-table/utils/tipoBotonAgregar.ts"),h=e("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),g=e("./src/app/facturacion-electronica/comprobantes/models/cabeceraFactura.ts"),v=e("./src/app/facturacion-electronica/general/services/configuracionDocumento/series.service.ts"),_=e("./node_modules/rxjs/BehaviorSubject.js"),O=(e.n(_),e("./src/app/facturacion-electronica/general/services/organizacion/entidad.service.ts")),f=e("./src/app/facturacion-electronica/general/models/documento/tablaMaestra.ts"),D=e("./src/app/facturacion-electronica/general/services/documento/tablaMaestra.service.ts"),I=e("./src/app/facturacion-electronica/general/utils/catalogo-igv.service.ts"),T=e("./node_modules/rxjs/Observable.js"),C=(e.n(T),e("./src/app/facturacion-electronica/general/models/organizacion/entidad.ts")),A=e("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.entidad.service.ts"),E=e("./src/app/facturacion-electronica/general/utils/catalogo-documento-identidad.service.ts"),x=e("./src/app/facturacion-electronica/comprobantes/models/documentoConcepto.ts"),N=e("./src/app/facturacion-electronica/general/services/documento/conceptoDocumento.service.ts"),S=e("./src/app/facturacion-electronica/comprobantes/models/documentoParametro.ts"),P=e("./src/app/facturacion-electronica/general/services/utils/validadorPersonalizado.ts"),F=e("./node_modules/@ngx-translate/core/index.js"),R=e("./src/app/facturacion-electronica/general/services/refresh.service.ts"),B=e("./src/app/facturacion-electronica/comprobantes/services/padre-comprobante.service.ts"),G=e("./node_modules/@angular/common/@angular/common.es5.js"),y=e("./src/app/facturacion-electronica/general/data-table/utils/columna-data-table.ts");e.d(o,"a",function(){return V});var M=this&&this.__decorate||function(t,o,e,a){var i,r=arguments.length,s=r<3?o:null===a?a=Object.getOwnPropertyDescriptor(o,e):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,o,e,a);else for(var n=t.length-1;n>=0;n--)(i=t[n])&&(s=(r<3?i(s):r>3?i(o,e,s):i(o,e))||s);return r>3&&s&&Object.defineProperty(o,e,s),s},w=this&&this.__metadata||function(t,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,o)},V=function(){function t(t,o,e,a,i,r,s,n,p,h,v,O,f,D,I,T,A){this._persistenciaService=t,this._rutas=o,this._route=e,this._activeRoute=a,this._tipos=i,this.seriesService=r,this._entidadServices=s,this._tablaMaestraService=n,this._catalogoIgvService=p,this._entidadPersistenciaService=h,this._cataloDocumentos=v,this._conceptoDocumentoService=O,this._translate=f,this._datePipe=D,this.Refresh=I,this._catalogoDocumentos=T,this._padreComprobanteService=A,this.showDialog=!1,this.titulo="boleta",this.entidad=[],this.entidad_uno=new C.a,this.dtoOutSeries=[],this.tiposDocumentos=new _.BehaviorSubject([]),this.estadoautocomplete=new _.BehaviorSubject(!1),this.series=[],this.dtoOuMonedas=[],this.TipoAccion=u.a,this.tipo=m.a.ICONOS,this.tipoBotonAgregar=b.a.COMBO,this.AccionesPrueba=[new l.a("editar",new l.b("edit","btn-info"),u.a.EDITAR),new l.a("eliminar",new l.b("delete","btn-info"),u.a.ELIMINAR)],this.searchData=[],this.producto=new c.a,this.monedas=new _.BehaviorSubject([]),this.todosTiposDocumentoIdentidad=new _.BehaviorSubject([]),this._padreComprobanteService.actualizarComprobante(this._activeRoute.snapshot.data.codigo,this._activeRoute.snapshot.data.mostrarCombo,!1),this.igv=.18,this.boleta=new d.a,this.cabeceraDatosBoleta=new g.a,this.esBoletaAnticipo=!1,this.flagRangoFechas=!1,this.listaProductos=[],this.columnasTabla=[new y.a("codigo","codigoItem"),new y.a("descripcion","descripcionItem",{"text-align":"left"}),new y.a("cantidad","cantidad",{"text-align":"right"}),new y.a("unidadMedida","detalle.unidadMedida"),new y.a("valorUnitario","precioUnitario",{"text-align":"right"}),new y.a("igv","montoImpuesto",{"text-align":"right"}),new y.a("isc","detalle.subtotalIsc",{"text-align":"right"}),new y.a("descuento","detalle.descuento",{"text-align":"right"}),new y.a("valorVenta","precioTotal",{"text-align":"right"})],this.flagTipoDocumento=!0}return t.prototype.ngOnInit=function(){var t=this;this.initFormGroup(),console.log("this.Refresh.CargarPersistencia - ONINIT"),console.log(this.Refresh.CargarPersistencia),this.Refresh.CargarPersistencia||(this._persistenciaService.removePersistenciaSimple("documentosReferencia"),this._persistenciaService.removePersistenciaSimple("checkBoletaAnticipo"),this._persistenciaService.removePersistenciaSimple("listaProductos"),this._persistenciaService.removePersistenciaSimple("cabeceraFactura"),this._persistenciaService.removePersistenciaSimple("factura"),this._persistenciaService.removePersistenciaSimple("listaProductos"),this._persistenciaService.removePersistenciaSimple("listaConsultaDocumentosRelacionados"),this._persistenciaService.removePersistenciaSimple("UUIDConsultaComprobante"),this._persistenciaService.removePersistenciaSimple("tipoComprobanteCodigo"),this._persistenciaService.removePersistenciaSimple("entidad"),this._persistenciaService.removePersistenciaSimple("checkFacturaAnticipo"),this._persistenciaService.removePersistenciaSimple("documentosReferenciaTemporal"),this._persistenciaService.removePersistenciaSimple("documentosReferencia")),this.cargarServicios(),this.cargarBoleta(),this.setFlagVistaPrevia(),this.seriesService.filtroSeries(localStorage.getItem("id_entidad"),this._tipos.TIPO_DOCUMENTO_BOLETA,this._tipos.TIPO_SERIE_OFFLINE.toString()).subscribe(function(o){t.series=o}),this.listarrazonsocial(),this.esBoletaAnticipo=this._persistenciaService.getEstadoFacturaAnticipo(),console.log(this.boletaFormGroup.controls.txtFechaEmision.valid),console.log(this.boletaFormGroup.controls.txtFechaEmision.valid)},t.prototype.ngAfterViewInit=function(){this.fillCabecera()},t.prototype.noOnDestroy=function(){this.Refresh.CargarPersistencia=!1},t.prototype.cargarBoleta=function(){this.listaProductos=this._persistenciaService.getListaProductos(),this.boleta.documentoReferencia=this._persistenciaService.getDocumentosReferencia(),this.calcularMontos()},t.prototype.calcularMontos=function(){this.listaProductos=this._persistenciaService.getListaProductos();var t;if(this.boleta.detraccion=Number("0.00"),this.boleta.totalDescuentos=0,this.boleta.sumaAnticipos=0,this.boleta.totalAnticipos=0,this.boleta.sumaIgv=0,this.boleta.sumaIsc=0,this.boleta.subTotal=0,this.boleta.importeTotal=0,this.boleta.sumaOtrosCargos=0,this.boleta.sumaOtrosTributos=0,this.boleta.sumaOtrosTributos=Number(this.boletaFormGroup.controls.txtSumatoriaOtrosTributos.value),this.boleta.sumaOtrosCargos=Number(this.boletaFormGroup.controls.txtSumatoriaOtrosCargos.value),this.boleta.importeReferencial="0",this.boleta.montoGravadas=0,this.boleta.montoExoaneradas=0,this.boleta.montoInafectas=0,this.boleta.subTotalComprobanteConcepto=0,t=0,this.listaProductos.length>0){this.setTipoIgv(Number(this.listaProductos[0].detalle.codigoTipoIgv));for(var o=0;o<this.listaProductos.length;o++)t+=Number(this.listaProductos[o].cantidad)*Number(this.listaProductos[o].precioUnitario)-Number(this.listaProductos[o].detalle.descuento),this.boleta.totalDescuentos=this.boleta.totalDescuentos+Number(this.listaProductos[o].detalle.descuento),this.boleta.sumaIsc=this.boleta.sumaIsc+Number(this.listaProductos[o].detalle.subtotalIsc),this.boleta.importeReferencial=(Number(this.boleta.importeReferencial)+Number(this.listaProductos[o].cantidad)*Number(this.listaProductos[o].precioUnitario)).toString(),this.boleta.subTotalComprobanteConcepto=this.boleta.subTotalComprobanteConcepto+Number(this.listaProductos[o].cantidad)*Number(this.listaProductos[o].precioUnitario);this.boleta.subTotal=t+this.boleta.sumaIsc,this.tipoIgvItems===this._catalogoIgvService.IGV_GRAVADO_RANGO&&(this.boleta.sumaIgv=this.boleta.subTotal*this._catalogoIgvService.IGV_VALOR)}else this.tipoIgvItems=0;for(var o=0;o<this.boleta.documentoReferencia.length;o++)this.boleta.totalAnticipos=this.boleta.totalAnticipos+Number(this.boleta.documentoReferencia[o].anticipo);switch(this.boleta.importeTotal=this.boleta.subTotal+this.boleta.sumaIgv-this.boleta.totalAnticipos+this.boleta.sumaOtrosCargos+this.boleta.sumaOtrosTributos,this.boleta.totalComprobante=(this.boleta.subTotal+this.boleta.sumaIgv-this.boleta.totalAnticipos).toString(),this.boletaFormGroup.controls.txtOperacionesGrabadas.setValue("0.00"),this.boletaFormGroup.controls.txtOperacionesExoneradas.setValue("0.00"),this.boletaFormGroup.controls.txtOperacionesInafectas.setValue("0.00"),this.boletaFormGroup.controls.txtTotalDescuentos.setValue(this.formatearNumeroADecimales(this.boleta.totalDescuentos)),this.boletaFormGroup.controls.txtTotalAnticipos.setValue(this.formatearNumeroADecimales(this.boleta.totalAnticipos)),this.boletaFormGroup.controls.txtSumatoriaIsc.setValue(this.formatearNumeroADecimales(this.boleta.sumaIsc)),this.boletaFormGroup.controls.txtSumatoriaIgv.setValue(this.formatearNumeroADecimales(this.boleta.sumaIgv)),this.boletaFormGroup.controls.txtSubTotal.setValue(this.formatearNumeroADecimales(this.boleta.subTotalComprobanteConcepto)),this.boletaFormGroup.controls.txtImporteTotal.setValue(this.formatearNumeroADecimales(this.boleta.importeTotal)),this.tipoIgvItems){case this._catalogoIgvService.IGV_GRAVADO_RANGO:this.boleta.montoGravadas=t,this.boletaFormGroup.controls.txtOperacionesGrabadas.setValue(this.formatearNumeroADecimales(this.boleta.montoGravadas));break;case this._catalogoIgvService.IGV_EXONERADO_RANGO:this.boleta.montoExoaneradas=t,this.boletaFormGroup.controls.txtOperacionesExoneradas.setValue(this.formatearNumeroADecimales(this.boleta.montoExoaneradas));break;case this._catalogoIgvService.IGV_INAFECTO_RANGO:this.boleta.montoInafectas=t,this.boletaFormGroup.controls.txtOperacionesInafectas.setValue(this.formatearNumeroADecimales(this.boleta.montoInafectas))}},t.prototype.sumarOtrosCargos=function(){this.boleta.importeTotal=Number(this.boletaFormGroup.controls.txtImporteTotal.value),0===this.listaProductos.length&&(this.boleta.importeTotal=0),this.boleta.sumaOtrosTributos=Number(this.boletaFormGroup.controls.txtSumatoriaOtrosTributos.value),this.boleta.sumaOtrosCargos=Number(this.boletaFormGroup.controls.txtSumatoriaOtrosCargos.value),this.boleta.importeTotal=this.boleta.importeTotal+this.boleta.sumaOtrosTributos+this.boleta.sumaOtrosCargos,this.boletaFormGroup.controls.txtImporteTotal.setValue(this.formatearNumeroADecimales(this.boleta.importeTotal))},t.prototype.formatearNumeroADecimales=function(t,o){return void 0===o&&(o=2),t.toFixed(o)},t.prototype.setTipoIgv=function(t){t>this._catalogoIgvService.IGV_INAFECTO_RANGO-1?t>this._catalogoIgvService.IGV_EXPORTACION_RANGO-1?this.tipoIgvItems=this._catalogoIgvService.IGV_EXPORTACION_RANGO:this.tipoIgvItems=this._catalogoIgvService.IGV_INAFECTO_RANGO:t>this._catalogoIgvService.IGV_EXONERADO_RANGO-1?this.tipoIgvItems=this._catalogoIgvService.IGV_EXONERADO_RANGO:this.tipoIgvItems=this._catalogoIgvService.IGV_GRAVADO_RANGO},t.prototype.fillCabecera=function(){if(this.cabeceraDatosBoleta=this._persistenciaService.getCabeceraFactura(),this.cabeceraDatosBoleta)this.idEntidadCliente=this.cabeceraDatosBoleta.idEntidadCliente,this.ubigeoCliente=this.cabeceraDatosBoleta.ubigeoCliente,this.estadoautocomplete.next(!0),""!==this.cabeceraDatosBoleta.tipoDocumento&&(this.boletaFormGroup.controls.cmbTipoDocumento.setValue(this.cabeceraDatosBoleta.tipoDocumento),this.setFormatoTamanioDocumento(),this.eliminarEstiloInput("cmbTipoDocumento","is-empty")),""!==this.cabeceraDatosBoleta.numeroDocumento&&(this.eliminarEstiloInput("txtNumeroDocumento","is-empty"),this.boletaFormGroup.controls.txtNumeroDocumento.setValue(this.cabeceraDatosBoleta.numeroDocumento)),""!==this.cabeceraDatosBoleta.direccionFiscal&&this.eliminarEstiloInput("txtDireccionFiscal","is-empty"),""!==this.cabeceraDatosBoleta.correo&&this.eliminarEstiloInput("txtCorreo","is-empty"),""!==this.cabeceraDatosBoleta.sumaOtrosCargos&&this.eliminarEstiloInput("txtSumatoriaOtrosCargos","is-empty"),""!==this.cabeceraDatosBoleta.sumaOtrosTributos&&this.eliminarEstiloInput("txtSumatoriaOtrosTributos","is-empty"),""!==this.cabeceraDatosBoleta.ruc&&this.eliminarEstiloInput("txtNumeroDocumento","is-empty"),""!==this.cabeceraDatosBoleta.serie&&this.eliminarEstiloInput("cmbSerie","is-empty"),""!==this.cabeceraDatosBoleta.fechaEmision&&this.eliminarEstiloInput("txtFechaEmision","is-empty"),""!==this.cabeceraDatosBoleta.fechaVencimiento&&this.eliminarEstiloInput("txtFechaVencimiento","is-empty"),""!==this.cabeceraDatosBoleta.tipoMoneda&&this.eliminarEstiloInput("cmbMoneda","is-empty"),""!==this.cabeceraDatosBoleta.observaciones&&this.eliminarEstiloInput("txtObservaciones","is-empty"),this.boletaFormGroup.controls.txtDireccionFiscal.setValue(this.cabeceraDatosBoleta.direccionFiscal),this.boletaFormGroup.controls.txtCorreo.setValue(this.cabeceraDatosBoleta.correo),this.boletaFormGroup.controls.txtSumatoriaOtrosCargos.setValue(this.cabeceraDatosBoleta.sumaOtrosCargos),this.boletaFormGroup.controls.txtSumatoriaOtrosTributos.setValue(this.cabeceraDatosBoleta.sumaOtrosTributos),this.boletaFormGroup.controls.txtNumeroDocumento.setValue(this.cabeceraDatosBoleta.ruc),this.boletaFormGroup.controls.cmbSerie.setValue(this.cabeceraDatosBoleta.serie),this.boletaFormGroup.controls.txtFechaEmision.setValue(this.cabeceraDatosBoleta.fechaEmision),this.boletaFormGroup.controls.txtFechaVencimiento.setValue(this.cabeceraDatosBoleta.fechaVencimiento),this.boletaFormGroup.controls.cmbMoneda.setValue(this.cabeceraDatosBoleta.tipoMoneda),this.boletaFormGroup.controls.txtObservaciones.setValue(this.cabeceraDatosBoleta.observaciones),this.boletaFormGroup.controls.txtRazonSocial.setValue(this.cabeceraDatosBoleta.razonsSocial);else{var t=new Date,o=this.setMes(t.getDate())+"/"+this.setMes(t.getMonth()+1)+"/"+t.getFullYear().toString();this.boletaFormGroup.controls.txtFechaEmision.setValue(o),this.boletaFormGroup.controls.txtFechaVencimiento.setValue(o)}},t.prototype.setBoletaCabeceraDetalle=function(){this.guardarOrganizacion(),this.cabeceraDatosBoleta=new g.a,this.cabeceraDatosBoleta.ubigeoCliente=this.ubigeoCliente,this.cabeceraDatosBoleta.idEntidadCliente=this.idEntidadCliente,this.cabeceraDatosBoleta.tipoDocumento=this.boletaFormGroup.controls.cmbTipoDocumento.value,this.cabeceraDatosBoleta.numeroDocumento=this.boletaFormGroup.controls.txtNumeroDocumento.value,this.cabeceraDatosBoleta.ruc=this.boletaFormGroup.controls.txtNumeroDocumento.value,this.cabeceraDatosBoleta.razonsSocial=this.boletaFormGroup.controls.txtRazonSocial.value,this.cabeceraDatosBoleta.serie=this.boletaFormGroup.controls.cmbSerie.value,this.cabeceraDatosBoleta.fechaEmision=this.boletaFormGroup.controls.txtFechaEmision.value,this.cabeceraDatosBoleta.fechaVencimiento=this.boletaFormGroup.controls.txtFechaVencimiento.value,this.cabeceraDatosBoleta.tipoMoneda=this.boletaFormGroup.controls.cmbMoneda.value,this.cabeceraDatosBoleta.sumaOtrosCargos=this.boletaFormGroup.controls.txtSumatoriaOtrosCargos.value,this.cabeceraDatosBoleta.sumaOtrosTributos=this.boletaFormGroup.controls.txtSumatoriaOtrosTributos.value,this.cabeceraDatosBoleta.observaciones=this.boletaFormGroup.controls.txtObservaciones.value,this.cabeceraDatosBoleta.direccionFiscal=this.boletaFormGroup.controls.txtDireccionFiscal.value,this.cabeceraDatosBoleta.correo=this.boletaFormGroup.controls.txtCorreo.value,this._persistenciaService.setCabeceraFactura(this.cabeceraDatosBoleta)},t.prototype.setFlagVistaPrevia=function(){this.listaProductos=this._persistenciaService.getListaProductos(),0===this.listaProductos.length?this.flagVistaPrevia=!1:this.flagVistaPrevia=!0},t.prototype.setFormatoDocumento=function(){this.boletaFormGroup.controls.txtNumeroDocumento.setValue(""),this.boletaFormGroup.controls.txtRazonSocial.setValue(""),this.boletaFormGroup.controls.txtDireccionFiscal.setValue(""),this.boletaFormGroup.controls.txtCorreo.setValue(""),this.agregarEstiloInput("txtNumeroDocumento","is-empty"),this.agregarEstiloInput("txtRazonSocial","is-empty"),this.agregarEstiloInput("txtDireccionFiscal","is-empty"),this.agregarEstiloInput("txtCorreo","is-empty"),this.setFormatoTamanioDocumento()},t.prototype.setFormatoTamanioDocumento=function(){switch(this.boletaFormGroup.controls.cmbTipoDocumento.value){case this._catalogoDocumentos.TIPO_DOCUMENTO_IDENTIDAD_RUC:this.tamanioTipoDocumento=this._catalogoDocumentos.TIPO_DOCUMENTO_IDENTIDAD_RUC_TAMANIO,this.formatoTipoDocumento=this._tipos.TIPO_FORMATO_NUMERICO;break;case this._catalogoDocumentos.TIPO_DOCUMENTO_IDENTIDAD_DNI:this.tamanioTipoDocumento=this._catalogoDocumentos.TIPO_DOCUMENTO_IDENTIDAD_DNI_TAMANIO,this.formatoTipoDocumento=this._tipos.TIPO_FORMATO_NUMERICO;break;case this._catalogoDocumentos.TIPO_DOCUMENTO_IDENTIDAD_CARNET_EXTRANJERIA:this.tamanioTipoDocumento=this._catalogoDocumentos.TIPO_DOCUMENTO_IDENTIDAD_CARNET_EXTRANJERIA_TAMANIO,this.formatoTipoDocumento=this._tipos.TIPO_FORMATO_ALFANUMERICO;break;case this._catalogoDocumentos.TIPO_DOCUMENTO_IDENTIDAD_PASAPORTE:this.tamanioTipoDocumento=this._catalogoDocumentos.TIPO_DOCUMENTO_IDENTIDAD_PASAPORTE_TAMANIO,this.formatoTipoDocumento=this._tipos.TIPO_FORMATO_ALFANUMERICO;break;case this._catalogoDocumentos.TIPO_DOCUMENTO_IDENTIDAD_RUC:this.tamanioTipoDocumento=this._catalogoDocumentos.TIPO_DOCUMENTO_IDENTIDAD_RUC_TAMANIO,this.formatoTipoDocumento=this._tipos.TIPO_FORMATO_NUMERICO;break;case this._catalogoDocumentos.TIPO_DOCUMENTO_IDENTIDAD_CEDULA_DIPLOMATICA_IDENTIDAD:this.tamanioTipoDocumento=this._catalogoDocumentos.TIPO_DOCUMENTO_IDENTIDAD_CEDULA_DIPLOMATICA_IDENTIDAD_TAMANIO,this.formatoTipoDocumento=this._tipos.TIPO_FORMATO_NUMERICO}},t.prototype.cargarServicios=function(){this.monedas=this._tablaMaestraService.obtenerPorIdTabla(f.e),this.todosTipoConceptos=this._conceptoDocumentoService.obtenerTodosConceptosDocumentos(),this.setTipoDocumento()},t.prototype.setTipoDocumento=function(){var t=[];t=[this._catalogoDocumentos.TIPO_DOCUMENTO_IDENTIDAD_RUC,this._catalogoDocumentos.TIPO_DOCUMENTO_IDENTIDAD_DNI,this._catalogoDocumentos.TIPO_DOCUMENTO_IDENTIDAD_CARNET_EXTRANJERIA,this._catalogoDocumentos.TIPO_DOCUMENTO_IDENTIDAD_PASAPORTE],this.todosTiposDocumentoIdentidad=this._tablaMaestraService.obtenerPorIdTabla(f.b),this.tiposDocumentos=this._tablaMaestraService.obtenerPorCodigosDeTablaMaestra(this.todosTiposDocumentoIdentidad,t)},t.prototype.eliminarEstiloInput=function(t,o){setTimeout(function(){$("#"+t).parent().removeClass(o)},200)},t.prototype.iniciarData=function(t){this.listaProductos=this._persistenciaService.getListaProductos(),this.tabla.insertarData(this.listaProductos)},t.prototype.irDocumentoRelacionado=function(){this.guardarOrganizacion(),this.setBoletaCabeceraDetalle(),this._persistenciaService.setFactura(this.boleta);var t=this._persistenciaService.getDocumentosReferencia();this._persistenciaService.setPersistenciaSimple("documentosReferenciaTemporal",t),this._route.navigateByUrl(this._rutas.URL_COMPROBANTE_BOLETA_DOCUMENTO_RELACIONADO)},t.prototype.irAgregarServicio=function(){this.setBoletaCabeceraDetalle(),this._route.navigateByUrl(this._rutas.URL_COMPROBANTE_BOLETA_SERVICIO_AGREGAR)},t.prototype.irAgregarBien=function(){this.setBoletaCabeceraDetalle(),this._route.navigateByUrl(this._rutas.URL_COMPROBANTE_BOLETA_BIEN_AGREGAR)},t.prototype.irVistaPrevia=function(){this.validacionComprobanteMontos()},t.prototype.validacionComprobanteMontos=function(){var t=this;this.boleta.importeTotal<0?swal({title:"Advertencia",text:"El monto por anticipos no puede ser mayor al monto total del comprobante.",type:"warning",showCancelButton:!1,confirmButtonColor:"#2399e5",cancelButtonColor:"#2399e5",confirmButtonText:"Aceptar"}).then(function(o){o&&(t.irDocumentoRelacionado(),t._route.navigateByUrl(t._rutas.URL_COMPROBANTE_BOLETA_DOCUMENTO_RELACIONADO))}):(this.setBoletaCabeceraDetalle(),this.cargarDataVistaPrevia(),this._route.navigateByUrl(this._rutas.URL_COMPROBANTE_BOLETA_VISTA_PREVIA))},t.prototype.cargarDataVistaPrevia=function(){var t=this;this.boleta.idSerie=this.boletaFormGroup.controls.cmbSerie.value;var o=this.series.find(function(o){return t.boleta.idSerie===o.idSerie.toString()});this.boleta.serieNombre=o.serie,this.boleta.numeroComprobante=this.boleta.serieNombre,this.boleta.rucCompradorBase=this.boletaFormGroup.controls.txtNumeroDocumento.value,this.boleta.rucProveedorBase=localStorage.getItem("org_ruc"),this.boleta.rucProveedor=this.boleta.rucProveedorBase,this.boleta.rucComprador=this.boleta.rucCompradorBase,this.boleta.usuarioCreacion=JSON.parse(localStorage.getItem("usuarioActual")).nombreusuario,this.boleta.usuarioModificacion="SYSTEM",this.boleta.idTablaTipoComprobante=this._tipos.ID_TABLA_TIPO_COMPROBANTE,this.esBoletaAnticipo,this.boleta.idTipoComprobante=this._tipos.TIPO_DOCUMENTO_BOLETA,this.boleta.idRegistroTipoComprobante=this._tipos.TIPO_DOCUMENTO_BOLETA,this.boleta.razonSocialProveedor=localStorage.getItem("org_nombre"),this.boleta.razonSocialComprador=this.boletaFormGroup.controls.txtRazonSocial.value,this.boleta.observacionComprobante=this.boletaFormGroup.controls.txtObservaciones.value,this.boleta.tipoComprobante=this._tipos.TIPO_DOCUMENTO_BOLETA_NOMBRE,this.boleta.montoPagado=this.boleta.importeTotal.toString(),this.boleta.igv=this.boleta.sumaIgv.toString(),this.boleta.isc=this.boleta.sumaIsc.toString(),this.boleta.otrosTributos=this.boleta.sumaOtrosTributos.toString(),this.boleta.descuento=this.boleta.totalDescuentos.toString(),this.boleta.subtotalComprobante=(Number(this.boleta.importeReferencial)-Number(this.boleta.totalDescuentos)).toString(),this.boleta.totalComprobante=this.boleta.totalComprobante,this.boleta.tipoItem=this.listaProductos[0].tipoProducto.toString(),this.monedas.subscribe(function(o){var e=o.findIndex(function(o){return o.codigo==t.boletaFormGroup.get("cmbMoneda").value});t.boleta.moneda=o[e].descripcionCorta,t.boleta.idTablaMoneda=o[e].tabla.toString(),t.boleta.idRegistroMoneda=Number(o[e].codigo).toString()});var e=this.boletaFormGroup.controls.txtFechaEmision.value,a=e.toString().split("/"),i=Number(a[0]),r=Number(a[1])-1,s=Number(a[2]);this.boleta.fechaEmision=Number(new Date(s,r,i)),e=this.boletaFormGroup.controls.txtFechaVencimiento.value,a=e.toString().split("/"),i=Number(a[0]),r=Number(a[1])-1,s=Number(a[2]),this.boleta.fechaVencimiento=Number(new Date(s,r,i)),this.boleta.direccionProveedor=localStorage.getItem("org_direccion"),this.boleta.porcentajeDetracction="0.00",this.boleta.detraccion=0,this.boleta.direccionComprador=this.boletaFormGroup.controls.txtDireccionFiscal.value,this.boleta.direccionProveedor=localStorage.getItem("org_direccion"),this.boleta.porcentajeImpuesto=this.formatearNumeroADecimales(100*this.igv),this.boleta.detalleEbiz=this._persistenciaService.getListaProductos(),this.boleta.documentoEntidad[0].idTipoEntidad=this._tipos.TIPO_ENTIDAD_EMISOR,this.boleta.documentoEntidad[0].descripcionTipoEntidad=this._tipos.DESCRIPCION_TIPO_ENTIDAD_EMISOR,this.boleta.documentoEntidad[0].idEntidad=localStorage.getItem("id_entidad"),this.boleta.documentoEntidad[0].tipoDocumento="6",this.boleta.documentoEntidad[0].documento=localStorage.getItem("org_ruc"),this.boleta.documentoEntidad[0].denominacion=localStorage.getItem("org_nombre"),this.boleta.documentoEntidad[0].nombreComercial=localStorage.getItem("org_nombre"),this.boleta.documentoEntidad[0].direccionFiscal=localStorage.getItem("org_direccion"),this.boleta.documentoEntidad[0].ubigeo="040101",this.boleta.documentoEntidad[0].email=localStorage.getItem("org_email"),this.boleta.documentoEntidad[0].correo=localStorage.getItem("org_email"),this.boleta.documentoEntidad[0].notifica=this._tipos.NOTIFICACION_DOCUMENTO_ENTIDAD;var n,c=(this.boletaFormGroup.controls.txtNumeroDocumento.value,this._entidadServices.buscarPorRuc(this.boletaFormGroup.get("txtNumeroDocumento").value+"?idTipoDocumento="+Number(this.boletaFormGroup.get("cmbTipoDocumento").value).toString()));c&&c.subscribe(function(t){t&&(n=t.id)}),this.boleta.documentoEntidad[1].idTipoEntidad=this._tipos.TIPO_ENTIDAD_RECEPTOR,this.boleta.documentoEntidad[1].descripcionTipoEntidad=this._tipos.DESCRIPCION_TIPO_ENTIDAD_RECEPTOR,this.flagTipoDocumento?(this.boleta.documentoEntidad[1].idEntidad=n,this.boleta.documentoEntidad[1].ubigeo=this.ubigeoCliente):(this.boleta.documentoEntidad[1].idEntidad=null,this.boleta.documentoEntidad[1].ubigeo=null),isNaN(parseInt(this.boletaFormGroup.controls.cmbTipoDocumento.value,10))?this.boleta.documentoEntidad[1].tipoDocumento=this.boletaFormGroup.controls.cmbTipoDocumento.value:this.boleta.documentoEntidad[1].tipoDocumento=Number(this.boletaFormGroup.controls.cmbTipoDocumento.value).toString(),this.boleta.documentoEntidad[1].documento=this.boletaFormGroup.controls.txtNumeroDocumento.value,this.boleta.documentoEntidad[1].denominacion=this.boletaFormGroup.controls.txtRazonSocial.value,this.boleta.documentoEntidad[1].nombreComercial=this.boletaFormGroup.controls.txtRazonSocial.value,this.boleta.documentoEntidad[1].direccionFiscal=this.boletaFormGroup.controls.txtDireccionFiscal.value,this.boleta.documentoEntidad[1].email=this.boletaFormGroup.controls.txtCorreo.value,this.boleta.documentoEntidad[1].correo=this.boletaFormGroup.controls.txtCorreo.value,this.boleta.documentoEntidad[1].notifica=this._tipos.NOTIFICACION_DOCUMENTO_ENTIDAD;var l=[Number(this._tipos.CONCEPTO_OPERACION_GRAVADA_CODIGO),Number(this._tipos.CONCEPTO_OPERACION_INAFECTAS_CODIGO),Number(this._tipos.CONCEPTO_OPERACION_EXONERADO_CODIGO),Number(this._tipos.CONCEPTO_OPERACION_GRATUITA_CODIGO),Number(this._tipos.CONCEPTO_OPERACION_SUB_TOTAL_VENTA_CODIGO),Number(this._tipos.CONCEPTO_OPERACION_TOTAL_DESCUENTOS_CODIGO),Number(this._tipos.CONCEPTO_OPERACION_DETRACCIONES_CODIGO),Number(this._tipos.CONCEPTO_OPERACION_OTROS_CARGOS_CODIGO)];if(this.tiposConceptos=this._conceptoDocumentoService.obtenerPorCodigos(this.todosTipoConceptos,l),this.setDocumentoConcepto(),this.esBoletaAnticipo){this.boleta.documentoParametro=[];var u=new S.a;u.descripcionParametro=this._tipos.BOLETA_ANTICIPO_DESCRIPCION_PARAMETRO,u.idParametro=this._tipos.BOLETA_ANTICIPO_ID_PARAMETRO,u.jsonn.tipo=this._tipos.BOLETA_ANTICIPO_TIPO_PARAMETRO,u.jsonn.valor=this._tipos.BOLETA_ANTICIPO_TIPO_PARAMETRO_VALOR,u.jsonn.auxiliarEntero=this._tipos.BOLETA_ANTICIPO_ID_DOMINIO,u.jsonn.auxiliarCaracter=this._tipos.BOLETA_ANTICIPO_CODIGO_SUNAT,u.jsonn.auxiliarFecha=null,u.jsonn.auxiliarImporte=this.boleta.importeTotal,this.boleta.documentoParametro.push(u),this.boleta.documentoParametro[0].json=JSON.stringify(this.boleta.documentoParametro[0].jsonn)}else this.boleta.documentoParametro=[];this.calcularMontos(),this._persistenciaService.setFactura(this.boleta)},t.prototype.setDocumentoConcepto=function(){var t=this,o=new x.a;this.tiposConceptos.subscribe(function(e){for(var a=0,i=e;a<i.length;a++){var r=i[a];switch(Number(r.codigo)){case Number(t._tipos.CONCEPTO_OPERACION_GRAVADA_CODIGO):o=new x.a,o.idConcepto=r.idConcepto.toString(),o.descripcionConcepto=r.descripcion,o.codigoConcepto=r.codigo,o.importe=t.boleta.montoGravadas.toString(),t.boleta.documentoConcepto.push(o);break;case Number(t._tipos.CONCEPTO_OPERACION_INAFECTAS_CODIGO):o=new x.a,o.idConcepto=r.idConcepto.toString(),o.descripcionConcepto=r.descripcion,o.codigoConcepto=r.codigo,o.importe=t.boleta.montoInafectas.toString(),t.boleta.documentoConcepto.push(o);break;case Number(t._tipos.CONCEPTO_OPERACION_EXONERADO_CODIGO):o=new x.a,o.idConcepto=r.idConcepto.toString(),o.descripcionConcepto=r.descripcion,o.codigoConcepto=r.codigo,o.importe=t.boleta.montoExoaneradas.toString(),t.boleta.documentoConcepto.push(o);break;case Number(t._tipos.CONCEPTO_OPERACION_GRATUITA_CODIGO):o=new x.a,o.idConcepto=r.idConcepto.toString(),o.descripcionConcepto=r.descripcion,o.codigoConcepto=r.codigo,o.importe="0.00",t.boleta.documentoConcepto.push(o);break;case Number(t._tipos.CONCEPTO_OPERACION_SUB_TOTAL_VENTA_CODIGO):o=new x.a,o.idConcepto=r.idConcepto.toString(),o.descripcionConcepto=r.descripcion,o.codigoConcepto=r.codigo,o.importe=t.boleta.subTotalComprobanteConcepto.toString(),t.boleta.documentoConcepto.push(o);break;case Number(t._tipos.CONCEPTO_OPERACION_TOTAL_DESCUENTOS_CODIGO):o=new x.a,o.idConcepto=r.idConcepto.toString(),o.descripcionConcepto=r.descripcion,o.codigoConcepto=r.codigo,o.importe=t.boleta.totalDescuentos.toString(),t.boleta.documentoConcepto.push(o);break;case Number(t._tipos.CONCEPTO_OPERACION_DETRACCIONES_CODIGO):o=new x.a,o.idConcepto=r.idConcepto.toString(),o.descripcionConcepto=r.descripcion,o.codigoConcepto=r.codigo,o.importe=t.boleta.detraccion.toString(),t.boleta.documentoConcepto.push(o);break;case Number(t._tipos.CONCEPTO_OPERACION_OTROS_CARGOS_CODIGO):o=new x.a,o.idConcepto=r.idConcepto.toString(),o.descripcionConcepto=r.descripcion,o.codigoConcepto=r.codigo,o.importe=t.boleta.sumaOtrosCargos.toString(),t.boleta.documentoConcepto.push(o)}}})},t.prototype.validacionesBoletaAnticipo=function(t){var o=this;if(!0===t)if(0===this._persistenciaService.getListaProductos().length)this.tituloBoletaAnticipo="Boleta de Anticipo",this.invocarModalMontoacturaAnticipo(),this.esBoletaAnticipo=t,this._persistenciaService.setEstadoFacturaAnticipo(!0);else{var e=this;this.esBoletaAnticipo=!1,$("#chkBoletaAnticipo").prop("checked",!1),swal({title:"¬øEst√° seguro?",html:'<div class="text-center"> El comprobante ya tiene √≠tems ingresados, desea eliminarlos. </div>',type:"warning",showCancelButton:!0,confirmButtonColor:"#4caf50",cancelButtonColor:"#f44336",confirmButtonText:"S√ç",cancelButtonText:"NO"}).catch(function(t){e._persistenciaService.setEstadoFacturaAnticipo(!1)}).then(function(t){t?(e._persistenciaService.eliminarListaItemsFactura(),e.listaProductos=e._persistenciaService.getListaProductos(),e.tabla.insertarData(e.listaProductos),o.tituloBoletaAnticipo="Item(s) eliminado(s) correctamente.<br>Ingrese el monto de la boleta de anticipo",o.invocarModalMontoacturaAnticipo()):e._persistenciaService.setEstadoFacturaAnticipo(!1)})}else{var a=this;this.esBoletaAnticipo&&swal({title:"¬øEst√° seguro?",html:'<div class="text-center"> ¬°Se eliminar√°n los datos guardados! </div>',type:"warning",showCancelButton:!0,confirmButtonColor:"#4caf50",cancelButtonColor:"#f44336",confirmButtonText:"S√ç",cancelButtonText:"NO"}).catch(function(t){}).then(function(t){t?(a._persistenciaService.eliminarListaItemsFactura(),a._persistenciaService.setEstadoFacturaAnticipo(!1),a.esBoletaAnticipo=!1,a.listaProductos=a._persistenciaService.getListaProductos(),a.tabla.insertarData(a.listaProductos),o.boleta.documentoParametro=[],a.calcularMontos()):(a.esBoletaAnticipo=!0,$("#chkBoletaAnticipo").prop("checked",!0))})}this.listaProductos=this._persistenciaService.getListaProductos(),this.tabla.insertarData(this.listaProductos)},t.prototype.seleccionBoletaAnticipo=function(t){var o=this;this.guardarOrganizacion();var e,a,i,r;this._translate.get("mensajeComprobanteConDocumentosRelacionados").subscribe(function(t){return e=t}),this._translate.get("mensajeNotificacionTituloAdvertencia").subscribe(function(t){return a=t}),this._translate.get("eliminar").subscribe(function(t){return i=t}),this._translate.get("cancelar").subscribe(function(t){return r=t});var s=this;$("#chkBoletaAnticipo").prop("checked",!t),this.boleta.documentoReferencia.length>0?swal({title:"Advertencia",text:e,type:"warning",showCancelButton:!0,confirmButtonColor:"#2399e5",cancelButtonColor:"#2399e5",confirmButtonText:i,cancelButtonText:r}).catch(function(t){}).then(function(e){!0===e?(swal({title:"Advertencia",text:"Documentos Relacionados eliminados exitosamente.",confirmButtonText:"CONTINUAR"}),s._persistenciaService.removeDocumentosReferencia(),o.boleta.documentoReferencia=[],o.validacionesBoletaAnticipo(t)):$("#chkBoletaAnticipo").prop("checked",!1)}):this.validacionesBoletaAnticipo(t)},t.prototype.invocarModalMontoacturaAnticipo=function(){var t,o=this;this._translate.get("formatoMontoSwalLabel").subscribe(function(o){return t=o});var e=this;swal({title:this.tituloBoletaAnticipo,html:'<div class="form-group label-floating" xmlns="http://www.w3.org/1999/html"><label class="control-label">Monto Boleta Anticipo (sin IGV)<span class="star">*</span> </label><input type="text" id="montoAnticipo" type="text" class="form-control"/> <label>'+t+"</label></div>",allowOutsideClick:!1,preConfirm:function(){return new Promise(function(t,o){setTimeout(function(){var e=0,a=/([0-9,]{1,9})|([.]([0-9]{2}))/g,i=$("#montoAnticipo").val();i=i.split(",");i.filter(function(t){if(a.test(t)){var o=Number(t);return isNaN(o)?(e=1,!1):o<=0&&(e=2,!0)}return e=1,!0});if(e)switch(e){case 1:swal.showValidationError(),o(new Error("Formato Inv√°lido"));break;case 2:swal.showValidationError(),o(new Error("Monto Inv√°lido"))}else t(i)},500)})},showCancelButton:!0,confirmButtonColor:"#2399e5",cancelButtonColor:"#2399e5",confirmButtonText:"Agregar",cancelButtonText:"Regresar"}).catch(function(t){return console.log("CANCEL")}).then(function(t){t?(o.setBoletaAnticipo(Number(e.formatearNumeroADecimales(Number(t)))),swal({type:"success",title:"Acci√≥n Exitosa",confirmButtonText:"CONTINUAR",confirmButtonColor:"#4caf50"}),e.listaProductos=e._persistenciaService.getListaProductos(),e.tabla.insertarData(e.listaProductos),o.esBoletaAnticipo=!0,$("#chkBoletaAnticipo").prop("checked",!0),o._persistenciaService.setEstadoFacturaAnticipo(!0)):(o.esBoletaAnticipo=!1,$("#chkBoletaAnticipo").prop("checked",!1),o._persistenciaService.setEstadoFacturaAnticipo(!1))})},t.prototype.setBoletaAnticipo=function(t){var o=new S.a;this.producto.descripcionItem="Boleta de Anticipo",this.producto.idRegistroUnidad="0000001",this.producto.idTablaUnidad="10000",this.producto.codigoUnidadMedida="NIU",this.producto.posicion="1",this.producto.codigoItem=this._tipos.BOLETA_ANTICIPO_VALOR_CODIGO_ITEM,this.producto.precioUnitario=this.formatearNumeroADecimales(t),this.producto.precioTotal=this.formatearNumeroADecimales(Number((Number(this.producto.precioUnitario)*this.igv+Number(this.producto.precioUnitario)).toString())),this.producto.cantidad="1.00",this.producto.montoImpuesto=this.formatearNumeroADecimales(Number(this.producto.precioUnitario)*this.igv),this.producto.detalle.idTipoIgv=this._tipos.BOLETA_ANTICIPO_ID_TIPO_IGV,this.producto.detalle.codigoTipoIgv=this._tipos.BOLETA_ANTICIPO_CODIGO_TIPO_IGV,this.producto.detalle.descripcionTipoIgv=this._tipos.BOLETA_ANTICIPO_DESCRIPCION_TIPO_IGV,this.producto.detalle.idTipoIsc=this._tipos.ID_ISC_ID_TIPO_NO_TIENE,this.producto.detalle.codigoTipoIsc=this._tipos.CODIGO_TIPO_ISC_NO_TIENE,this.producto.detalle.descripcionTipoIsc=this._tipos.DESCRIPCION_TIPO_ISC_NO_TIENE,this.producto.detalle.idTipoPrecio=this._tipos.TIPO_PRECIO_PRECIO_UNITARIO_ID,this.producto.detalle.codigoTipoPrecio=this._tipos.TIPO_PRECIO_PRECIO_UNITARIO_CODIGO,this.producto.detalle.descripcionTipoPrecio=this._tipos.TIPO_PRECIO_PRECIO_UNITARIO_DESCRIPCION,this.producto.detalle.idProducto=null,this.producto.detalle.numeroItem="1",this.producto.detalle.precioUnitarioVenta=this.producto.precioTotal,this.producto.detalle.unidadMedida="-",this.producto.detalle.subtotalVenta=this.producto.precioTotal,this.producto.detalle.subtotalIgv=this.producto.montoImpuesto,this.producto.detalle.subtotalIsc="0.00",this.producto.detalle.descuento="0.00",this.producto.tipoProducto=this._tipos.TIPO_PRODUCTO_SERVICIO,this.producto.idTipoItemFactura=this._tipos.BOLETA_ANTICIPO_IDENTIFICADOR_ITEM,this._persistenciaService.agregarProducto(this.producto),this.boleta.tipoItem=this._tipos.TIPO_PRODUCTO_SERVICIO.toString(),o.descripcionParametro=this._tipos.BOLETA_ANTICIPO_DESCRIPCION_PARAMETRO,o.idParametro=this._tipos.BOLETA_ANTICIPO_ID_PARAMETRO,o.jsonn.tipo=this._tipos.BOLETA_ANTICIPO_TIPO_PARAMETRO,o.jsonn.valor=this._tipos.BOLETA_ANTICIPO_TIPO_PARAMETRO_VALOR,o.jsonn.auxiliarEntero=this._tipos.BOLETA_ANTICIPO_ID_DOMINIO,o.jsonn.auxiliarCaracter=this._tipos.BOLETA_ANTICIPO_CODIGO_SUNAT,o.jsonn.auxiliarFecha=null,o.jsonn.auxiliarImporte=this.boleta.importeTotal,this.boleta.documentoParametro.push(o),this._persistenciaService.setFactura(this.boleta),this.calcularMontos(),this.setFlagVistaPrevia()},t.prototype.setMes=function(t){return t/10>1?t.toString():"0"+t.toString()},t.prototype.initFormGroup=function(){var t=new Date,o=this.setMes(t.getDate())+"/"+this.setMes(t.getMonth()+1)+"/"+t.getFullYear().toString();this.boletaFormGroup=new i.FormGroup({txtRazonSocial:new i.FormControl("",[i.Validators.required,i.Validators.pattern("[A-Za-z0-9√°√©√≠√≥√∫√Å√â√ç√ì√ö/%\\s-.;,]+"),i.Validators.maxLength(100),i.Validators.minLength(1)]),txtDetraccion:new i.FormControl("0.00",[i.Validators.required,i.Validators.pattern("[0-9]+[.][0-9]{2}"),i.Validators.maxLength(15),i.Validators.minLength(4)]),cmbTipoDocumento:new i.FormControl(""),txtNumeroDocumento:new i.FormControl(""),cmbSerie:new i.FormControl("",[i.Validators.required]),txtDireccionFiscal:new i.FormControl({value:"",disabled:!0}),txtCorreo:new i.FormControl("",[i.Validators.required,i.Validators.pattern("[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)*@[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)*[.][a-zA-Z]{1,5}")]),txtFechaEmision:new i.FormControl(o,P.a.validarFechaEmision("errorFecha",this._translate,this._datePipe)),txtFechaVencimiento:new i.FormControl(o,[i.Validators.required,P.a.fechaDeberiaSerMayorAHoy("errorFecha")]),cmbMoneda:new i.FormControl("",[i.Validators.required]),chkBoletaAnticipo:new i.FormControl(""),txtObservaciones:new i.FormControl(""),txtOperacionesGrabadas:new i.FormControl({value:"0.00",disabled:!0}),txtOperacionesInafectas:new i.FormControl({value:"0.00",disabled:!0}),txtOperacionesExoneradas:new i.FormControl({value:"0.00",disabled:!0}),txtTotalDescuentos:new i.FormControl({value:"0.00",disabled:!0}),txtSumatoriaOtrosTributos:new i.FormControl("0.00"),txtSumatoriaOtrosCargos:new i.FormControl("0.00"),txtTotalAnticipos:new i.FormControl({value:"0.00",disabled:!0}),txtSumatoriaIsc:new i.FormControl({value:"0.00",disabled:!0}),txtSumatoriaIgv:new i.FormControl({value:"0.00",disabled:!0}),txtSubTotal:new i.FormControl({value:"0.00",disabled:!0}),txtImporteTotal:new i.FormControl({value:"0.00",disabled:!0})},P.a.fechaDeberiaSerMenorEmisionVencimiento("txtFechaEmision","txtFechaVencimiento","errorFecha"))},t.prototype.eliminar=function(t){this.calcularMontos(),this._persistenciaService.setListaProductos(t)},t.prototype.agregarItem=function(t){},t.prototype.ejecutarAccion=function(t){var o=t[0],e=new c.a;switch(e=t[1],o){case u.a.ELIMINAR:this.esBoletaAnticipo&&(this.esBoletaAnticipo=!this.esBoletaAnticipo,this._persistenciaService.setEstadoFacturaAnticipo(this.esBoletaAnticipo)),this._persistenciaService.eliminarItem(e),this.recargarTabla(),this.setFlagVistaPrevia(),this.calcularMontos();break;case u.a.EDITAR:if(this.esBoletaAnticipo)this.editarItemBoletaAnticipo();else switch(e.tipoProducto){case this._tipos.TIPO_PRODUCTO_BIEN:this._persistenciaService.setPersistenciaSimple("idEditarProducto",e.id),this.setBoletaCabeceraDetalle(),this._route.navigateByUrl(this._rutas.URL_COMPROBANTE_BOLETA_BIEN_EDITAR);break;case this._tipos.TIPO_PRODUCTO_SERVICIO:this._persistenciaService.setPersistenciaSimple("idEditarProducto",e.id),this.setBoletaCabeceraDetalle(),this._route.navigateByUrl(this._rutas.URL_COMPROBANTE_BOLETA_SERVICIO_EDITAR)}}},t.prototype.editarItemBoletaAnticipo=function(){var t,o=this,e=this._persistenciaService.getListaProductos()[0],a=this;this._translate.get("formatoMontoSwalLabel").subscribe(function(o){return t=o}),swal({title:"Editar Boleta Anticipo",html:'<div class="form-group label-floating" xmlns="http://www.w3.org/1999/html"><label class="control-label">Monto Boleta Anticipo (sin IGV)<span class="star">*</span> </label><input type="text" id="montoAnticipo" type="text" class="form-control" value="'+e.precioUnitario+'"/> <label>'+t+"</label></div>",allowOutsideClick:!1,preConfirm:function(){return new Promise(function(t,o){setTimeout(function(){var e=0,a=/([0-9,]{1,9})|([.]([0-9]{2}))/g,i=$("#montoAnticipo").val();i=i.split(",");i.filter(function(t){if(a.test(t)){var o=Number(t);return isNaN(o)?(e=1,!1):o<=0&&(e=2,!0)}return e=1,!0});if(e)switch(e){case 1:swal.showValidationError(),o(new Error("Formato Inv√°lido"));break;case 2:swal.showValidationError(),o(new Error("Monto Inv√°lido"))}else t(i)},500)})},showCancelButton:!0,confirmButtonColor:"#2399e5",cancelButtonColor:"#2399e5",confirmButtonText:"Editar",cancelButtonText:"Regresar"}).catch(function(t){return console.log("CANCEL")}).then(function(t){t&&(a._persistenciaService.removePersistenciaSimple("listaProductos"),o.setBoletaAnticipo(Number(t)),swal({type:"success",title:"Acci√≥n Exitosa",confirmButtonText:"CONTINUAR",confirmButtonColor:"#4caf50"}),a.listaProductos=a._persistenciaService.getListaProductos(),a.tabla.insertarData(a.listaProductos))})},t.prototype.recargarTabla=function(){this.listaProductos=this._persistenciaService.getListaProductos(),this.tabla.insertarData(this.listaProductos)},t.prototype.tipoProductoSeleccionado=function(t){switch(t.codigo){case this._tipos.TIPO_PRODUCTO_BIEN:this.irAgregarBien();break;case this._tipos.TIPO_PRODUCTO_SERVICIO:this.irAgregarServicio()}},t.prototype.probarBotonVistaPrevia=function(){console.log(this.boletaFormGroup.controls),console.log("!( "+this.flagVistaPrevia+" && "+this.boletaFormGroup.valid+" )"),console.log(!(this.flagVistaPrevia&&this.boletaFormGroup.valid))},t.prototype.busquedaruc=function(t){var o=this;if(this.boletaFormGroup.get("txtNumeroDocumento").value.length===this.tamanioTipoDocumento){var e=this._entidadServices.buscarPorRuc(this.boletaFormGroup.get("txtNumeroDocumento").value+"?idTipoDocumento="+Number(this.boletaFormGroup.get("cmbTipoDocumento").value).toString());console.log(e),null!=e?(this.flagTipoDocumento=!0,this.eliminarEstiloInputDosNiveles("txtRazonSocial","is-empty"),e.subscribe(function(t){o.entidad_uno=t||new C.a,o.org_busqueda=o.entidad_uno,o.idEntidadCliente=o.entidad_uno.id,o.ubigeoCliente=o.entidad_uno.ubigeo,o.entidad_uno.denominacion?""===o.entidad_uno.correoElectronico?(o.boletaFormGroup.controls.txtCorreo.enable(),o.agregarEstiloInput("txtRazonSocial","is-empty")):(o.boletaFormGroup.controls.txtCorreo.disable(),o.boletaFormGroup.controls.txtRazonSocial.setValue(o.entidad_uno.denominacion),o.eliminarEstiloInput("txtRazonSocial","is-empty")):(o.boletaFormGroup.controls.txtRazonSocial.enable(),o.agregarEstiloInput("txtRazonSocial","is-empty")),o.entidad_uno.correoElectronico?"-"===o.entidad_uno.correoElectronico?(o.boletaFormGroup.controls.txtCorreo.enable(),o.agregarEstiloInput("txtCorreo","is-empty")):(o.boletaFormGroup.controls.txtCorreo.disable(),o.boletaFormGroup.controls.txtCorreo.setValue(o.entidad_uno.correoElectronico),o.eliminarEstiloInput("txtCorreo","is-empty")):(o.boletaFormGroup.controls.txtCorreo.enable(),o.agregarEstiloInput("txtCorreo","is-empty")),o.entidad_uno.direccionFiscal&&""!==o.entidad_uno.direccionFiscal?(o.boletaFormGroup.controls.txtDireccionFiscal.disable(),o.boletaFormGroup.controls.txtDireccionFiscal.setValue(o.entidad_uno.direccionFiscal),o.eliminarEstiloInput("txtDireccionFiscal","is-empty")):(o.boletaFormGroup.controls.txtDireccionFiscal.enable(),o.agregarEstiloInput("txtDireccionFiscal","is-empty"))})):(this.flagTipoDocumento=!1,this.boletaFormGroup.controls.txtCorreo.enable(),this.boletaFormGroup.controls.txtDireccionFiscal.enable(),this.boletaFormGroup.controls.txtRazonSocial.enable())}else this.boletaFormGroup.controls.txtRazonSocial.reset(),this.boletaFormGroup.controls.txtCorreo.reset(),this.boletaFormGroup.controls.txtDireccionFiscal.reset()},t.prototype.agregarEstiloInputDosNiveles=function(t,o){setTimeout(function(){$("#"+t).parent().parent().addClass(o)},200)},t.prototype.agregarEstiloInput=function(t,o){setTimeout(function(){$("#"+t).parent().addClass(o)},200)},t.prototype.listarrazonsocial=function(){var t=this,o=(new Date).getTime();setTimeout(function(){var e=(new Date).getTime();o+4e3<=e&&t._entidadServices.buscarPorRazonSocial(t.boletaFormGroup.get("txtRazonSocial").value,"6").subscribe(function(o){t.searchData=o})},4e3)},t.prototype.autocompleListFormatter=function(t){return t.denominacion},t.prototype.listarOrganizacionesDeAutcompletado=function(t){return t?this._entidadServices.buscarPorRazonSocial(t,"6"):T.Observable.of([])},t.prototype.cambioAutocomplete=function(){"object"==typeof this.boletaFormGroup.get("txtRazonSocial").value?this.estadoautocomplete.next(!0):(this.boletaFormGroup.get("txtNumeroDocumento").reset(),this.boletaFormGroup.get("txtDireccionFiscal").reset(),this.boletaFormGroup.get("txtRazonSocial").reset(),this.boletaFormGroup.get("txtCorreo").reset(),this.agregarEstiloInput("txtNumeroDocumento","is-empty"),this.agregarEstiloInput("txtCorreo","is-empty"),this.agregarEstiloInput("txtDireccionFiscal","is-empty"),this.estadoautocomplete.next(!1))},t.prototype.busqueda=function(){var t=this;1==this.estadoautocomplete.value?this.rucquery=this.cabeceraDatosBoleta.ruc:this.rucquery=this.boletaFormGroup.get("txtRazonSocial").value.documento,this.estadoautocomplete.next(!1),void 0!==this.boletaFormGroup.get("txtRazonSocial").value&&""!=this.boletaFormGroup.get("txtRazonSocial").value&&this._entidadServices.buscarPorRuc(this.rucquery).subscribe(function(o){t.entidad_uno=o||new C.a,t.org_busqueda=t.entidad_uno,t.boletaFormGroup.controls.txtNumeroDocumento.setValue(t.entidad_uno.documento),t.boletaFormGroup.controls.txtDireccionFiscal.setValue(t.entidad_uno.direccionFiscal),t.boletaFormGroup.controls.txtRazonSocial.setValue(t.entidad_uno.denominacion),t.boletaFormGroup.controls.txtCorreo.setValue(t.entidad_uno.correoElectronico),t._entidadPersistenciaService.setEntidad(t.entidad_uno),$("input").each(function(){$(this.parentElement).removeClass("is-empty")})},function(t){500==t.status&&swal({type:"error",title:"No se encontr√≥ la organizaci√≥n u ocurri√≥ un problema en el servidor.",confirmButtonClass:"btn btn-danger",buttonsStyling:!1})})},t.prototype.validarRangoFechaCreacionVencimiento=function(){new Date(this.boletaFormGroup.controls.txtFechaEmision.value)>new Date(this.boletaFormGroup.controls.txtFechaVencimiento.value)?(this.flagRangoFechas=!0,this.boletaFormGroup.invalid):this.flagRangoFechas=!1},t.prototype.eliminarEstiloInputDosNiveles=function(t,o){setTimeout(function(){$("#"+t).parent().parent().removeClass(o)},200)},t.prototype.guardarOrganizacion=function(){var t=new C.b;t.correo=this.boletaFormGroup.controls.txtCorreo.value,t.direccion=this.boletaFormGroup.controls.txtDireccionFiscal.value,t.nombreComercial=this.boletaFormGroup.controls.txtRazonSocial.value,t.ruc=this.boletaFormGroup.controls.txtNumeroDocumento.value,t.idTipoDocumento=this.boletaFormGroup.controls.cmbTipoDocumento.value,console.log("ingreseeeee",t.ruc.toString().length,"fasdf",t.idTipoDocumento),t.ruc.toString().length==this._catalogoDocumentos.TIPO_DOCUMENTO_IDENTIDAD_RUC_TAMANIO&&t.idTipoDocumento==this._cataloDocumentos.TIPO_DOCUMENTO_IDENTIDAD_RUC&&(console.log("ingreseeeee1"),this._conceptoDocumentoService.guardarOrganizacion(t).subscribe()),t.ruc.toString().length==this._catalogoDocumentos.TIPO_DOCUMENTO_IDENTIDAD_CARNET_EXTRANJERIA_TAMANIO&&t.idTipoDocumento==this._cataloDocumentos.TIPO_DOCUMENTO_IDENTIDAD_CARNET_EXTRANJERIA&&(console.log("ingreseeeee2"),this._conceptoDocumentoService.guardarOrganizacion(t).subscribe()),t.ruc.toString().length==this._catalogoDocumentos.TIPO_DOCUMENTO_IDENTIDAD_CEDULA_DIPLOMATICA_IDENTIDAD_TAMANIO&&t.idTipoDocumento==this._cataloDocumentos.TIPO_DOCUMENTO_IDENTIDAD_CEDULA_DIPLOMATICA_IDENTIDAD&&(console.log("ingreseeeee3"),this._conceptoDocumentoService.guardarOrganizacion(t).subscribe()),t.ruc.toString().length==this._catalogoDocumentos.TIPO_DOCUMENTO_IDENTIDAD_DNI_TAMANIO&&t.idTipoDocumento==this._cataloDocumentos.TIPO_DOCUMENTO_IDENTIDAD_DNI&&(console.log("ingreseeeee4"),this._conceptoDocumentoService.guardarOrganizacion(t).subscribe()),t.ruc.toString().length==this._catalogoDocumentos.TIPO_DOCUMENTO_IDENTIDAD_PASAPORTE_TAMANIO&&t.idTipoDocumento==this._cataloDocumentos.TIPO_DOCUMENTO_IDENTIDAD_PASAPORTE&&(console.log("ingreseeeee5"),this._conceptoDocumentoService.guardarOrganizacion(t).subscribe())},t}();M([e.i(a.ViewChild)("otro"),w("design:type","function"==typeof(U=void 0!==r.a&&r.a)&&U||Object)],V.prototype,"tabla",void 0),M([e.i(a.ViewChild)("inputRazonSocial"),w("design:type","function"==typeof(L=void 0!==a.ElementRef&&a.ElementRef)&&L||Object)],V.prototype,"razonautocomplete",void 0),V=M([e.i(a.Component)({selector:"app-boleta",template:e("./src/app/facturacion-electronica/comprobantes/boleta/boleta.component.html"),styles:[e("./src/app/facturacion-electronica/comprobantes/boleta/boleta.component.css")]}),w("design:paramtypes",["function"==typeof(j=void 0!==p.a&&p.a)&&j||Object,"function"==typeof(z=void 0!==s.a&&s.a)&&z||Object,"function"==typeof(k=void 0!==n.c&&n.c)&&k||Object,"function"==typeof(q=void 0!==n.b&&n.b)&&q||Object,"function"==typeof(X=void 0!==h.a&&h.a)&&X||Object,"function"==typeof(J=void 0!==v.a&&v.a)&&J||Object,"function"==typeof(Z=void 0!==O.a&&O.a)&&Z||Object,"function"==typeof(H=void 0!==D.a&&D.a)&&H||Object,"function"==typeof(Y=void 0!==I.a&&I.a)&&Y||Object,"function"==typeof(K=void 0!==A.a&&A.a)&&K||Object,"function"==typeof(Q=void 0!==E.a&&E.a)&&Q||Object,"function"==typeof(W=void 0!==N.a&&N.a)&&W||Object,"function"==typeof(tt=void 0!==F.c&&F.c)&&tt||Object,"function"==typeof(ot=void 0!==G.DatePipe&&G.DatePipe)&&ot||Object,"function"==typeof(et=void 0!==R.a&&R.a)&&et||Object,"function"==typeof(at=void 0!==E.a&&E.a)&&at||Object,"function"==typeof(it=void 0!==B.a&&B.a)&&it||Object])],V);var U,L,j,z,k,q,X,J,Z,H,Y,K,Q,W,tt,ot,et,at,it},"./src/app/facturacion-electronica/comprobantes/boleta/boleta.module.ts":function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=e("./node_modules/@angular/core/@angular/core.es5.js"),i=e("./node_modules/@angular/common/@angular/common.es5.js"),r=e("./src/app/facturacion-electronica/comprobantes/boleta/boleta.routing.module.ts"),s=e("./src/app/facturacion-electronica/comprobantes/boleta/boleta.component.ts"),n=e("./node_modules/@angular/forms/@angular/forms.es5.js"),c=e("./src/app/directives/datepicker.module.ts"),l=e("./src/app/facturacion-electronica/comprobantes/comprobante-vista-previa/comprobante-vista-previa.module.ts"),u=e("./src/app/facturacion-electronica/comprobantes/comprobante-documento-relacionado/comprobante-documento-relacionado.module.ts"),m=e("./src/app/facturacion-electronica/general/consulta/consulta.module.ts"),p=e("./src/app/facturacion-electronica/comprobantes/comprobante-item/comprobante-item.module.ts"),d=e("./src/app/facturacion-electronica/comprobantes/comprobante-emitir/comprobante-emitir.module.ts"),b=e("./node_modules/@ngx-translate/core/index.js"),h=e("./src/app/facturacion-electronica/comprobantes/item/item.module.ts"),g=e("./src/app/facturacion-electronica/general/data-table/data-table.module.ts"),v=e("./node_modules/ng2-completer/index.js"),_=e("./src/app/facturacion-electronica/general/emision-comprobante/emision-comprobante.module.ts"),O=e("./src/app/facturacion-electronica/general/directivas/directivas.module.ts"),f=e("./node_modules/ng2-auto-complete/dist/index.js"),D=(e.n(f),e("./src/app/facturacion-electronica/general/services/refresh.service.ts")),I=e("./src/app/facturacion-electronica/general/services/person.service.ts"),T=e("./src/app/facturacion-electronica/general/services/documento/tablaMaestra.service.ts"),C=e("./src/app/facturacion-electronica/percepcion-retencion/services/persistencia.entidad.service.ts"),A=e("./node_modules/@angular/common/@angular/common/http.es5.js"),E=e("./src/app/facturacion-electronica/general/services/tokenInterceptor.service.ts");e.d(o,"BoletaModule",function(){return N});var x=this&&this.__decorate||function(t,o,e,a){var i,r=arguments.length,s=r<3?o:null===a?a=Object.getOwnPropertyDescriptor(o,e):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,o,e,a);else for(var n=t.length-1;n>=0;n--)(i=t[n])&&(s=(r<3?i(s):r>3?i(o,e,s):i(o,e))||s);return r>3&&s&&Object.defineProperty(o,e,s),s},N=function(){function t(){}return t}();N=x([e.i(a.NgModule)({imports:[r.a,i.CommonModule,n.ReactiveFormsModule,c.a,h.a,g.a,p.a,l.a,u.a,m.a,d.a,b.a,v.a,f.Ng2AutoCompleteModule,O.a,_.a],declarations:[s.a],providers:[D.a,I.a,T.a,C.a,{provide:A.c,useClass:E.a,multi:!0}]})],N)},"./src/app/facturacion-electronica/comprobantes/boleta/boleta.routing.module.ts":function(t,o,e){"use strict";var a=e("./node_modules/@angular/core/@angular/core.es5.js"),i=e("./node_modules/@angular/router/@angular/router.es5.js"),r=e("./src/app/facturacion-electronica/comprobantes/boleta/boleta.component.ts"),s=e("./src/app/facturacion-electronica/comprobantes/comprobante-vista-previa/comprobante-vista-previa.component.ts"),n=e("./src/app/facturacion-electronica/comprobantes/comprobante-item/comprobante-item.component.ts"),c=e("./src/app/facturacion-electronica/general/consulta/consulta.component.ts"),l=e("./src/app/facturacion-electronica/comprobantes/comprobante-documento-relacionado/comprobante-documento-relacionado.component.ts"),u=e("./src/app/facturacion-electronica/general/emision-comprobante/emision-comprobante.component.ts");e.d(o,"a",function(){return d});var m=this&&this.__decorate||function(t,o,e,a){var i,r=arguments.length,s=r<3?o:null===a?a=Object.getOwnPropertyDescriptor(o,e):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,o,e,a);else for(var n=t.length-1;n>=0;n--)(i=t[n])&&(s=(r<3?i(s):r>3?i(o,e,s):i(o,e))||s);return r>3&&s&&Object.defineProperty(o,e,s),s},p=[{path:"",children:[{path:"",pathMatch:"full",redirectTo:"crear"},{path:"crear",component:r.a,data:{codigo:"03",mostrarCombo:!0}},{path:"crear/docRelacionado",component:l.a,data:{codigo:"03",tipoDocumento:"03",mostrarCombo:!1}},{path:"crear/docRelacionado/buscar",component:c.a,data:{codigo:"03",tipoConsulta:10,titulo:"consultaDocumentoRelacionadoBoleta",mostrarCombo:!1}},{path:"crear/servicio/agregar",component:n.a,data:{codigo:"03",tipoAccion:1,tipoDocumento:"03",mostrarCombo:!0}},{path:"crear/servicio/editar",component:n.a,data:{codigo:"03",tipoAccion:2,tipoDocumento:"03",mostrarCombo:!1}},{path:"crear/bien/agregar",component:n.a,data:{codigo:"03",tipoAccion:3,tipoDocumento:"03",mostrarCombo:!1}},{path:"crear/bien/editar",component:n.a,data:{codigo:"03",tipoAccion:4,tipoDocumento:"03",mostrarCombo:!1}},{path:"crear/vistaprevia",component:s.a,data:{tipoDocumento:"03",titulo:"Boleta"}},{path:"emitir/:id",component:u.a,data:{codigo:"03",mostrarCombo:!1,titulo:"Factura Emitida"}}]}],d=function(){function t(){}return t}();d=m([e.i(a.NgModule)({imports:[i.a.forChild(p)],exports:[i.a]})],d)}});