webpackJsonp([11],{"./src/app/guia/comprador/buscar/guiacompradorbuscar.component.html":function(t,n){t.exports='<div class="main-content">\r\n    <div class="container-fluid">\r\n        <div class="row">\r\n            <div class="col-sm-12">\r\n                <div class="card">\r\n                    <form method="#" action="#">\r\n                        <div class="card-header card-header-text" data-background-color="blue">\r\n                            <h4 class="card-title">Buscar Guías</h4>\r\n                        </div>\r\n                        <div class="card-content">\r\n                            <div class="row">\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Número de Guía\r\n                                        </label>\r\n                                        <input name="nroguia" [(ngModel)]="filtro.nroguia" type="text" class="form-control">\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Número de Orden de Compra\r\n                                    </label>\r\n                                        <input name="nrooc" [(ngModel)]="filtro.nrooc" type="text" class="form-control">\r\n                                    </div>\r\n                                </div>\r\n\r\n                         \r\n\r\n                            </div>\r\n                            <div class="row">\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Número de ERP\r\n                                            </label>\r\n                                        <input name="nroerp" [(ngModel)]="filtro.nroerp" type="text" class="form-control">\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Estado</label>\r\n                                        <select [(ngModel)]="filtro.estado" name="estado" class="form-control">\r\n                                            <option value="NONE" selected>TODOS</option>\r\n                                            <option *ngFor="let opt of listEstadoCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </div>\r\n                            <div class="row">\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Fecha Emisión Del</label>\r\n                                        <input type="text" [(ngModel)]="filtro.fechaemisioninicio" name="fechaemisioninicio" class="form-control" datepicker />\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">al</label>\r\n                                        <input type="text" [(ngModel)]="filtro.fechaemisionfin" name="fechaemisionfin" class="form-control" datepicker />\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group">\r\n                                        <button *ngIf="botonBuscar.visible" [disabled]="!botonBuscar.habilitado" class="btn btn-default" (click)="clicked($event)">{{botonBuscar.Titulo}}</button>\r\n                                        <button *ngIf="botonBuscar.visible" [disabled]="!botonBuscar.habilitado" class="btn btn-default" (click)="limpiar($event)">Limpiar</button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <nav class="navbar navbar-info" role="navigation">\r\n                                <div class="container-fluid">\r\n                                     <div class="navbar-header">\r\n\r\n                                        <span class="navbar-brand">Resultados</span>\r\n                                    </div>\r\n\x3c!--                                    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\r\n                                        <ul class="nav navbar-nav">\r\n\r\n                                        </ul>\r\n                                    </div> !--\x3e\r\n                                </div>\r\n                            </nav>\r\n                            <div class="material-datatables table-responsive">\r\n                                <table id="dtResultados" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th>N° Guía</th>\r\n                                            <th>N° ERP</th>\r\n                                            <th>Estado</th>\r\n                                            <th>Organización Proveedora</th>\r\n\r\n                                            <th>Fecha de Emisión</th>\r\n                                            <th>Fecha de Inicio de Traslado</th>\r\n                                            <th>Fecha Probable de Arribo</th>\r\n                                            <th class="disabled-sorting text-center">Acciones</th>\r\n                                        </tr>\r\n                                    </thead>\r\n\r\n\r\n                                </table>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},"./src/app/guia/comprador/buscar/guiacompradorbuscar.component.ts":function(t,n,r){"use strict";function o(){b=$("#dtResultados").DataTable({order:[[4,"desc"]],searching:!1,serverSide:!0,ajax:{beforeSend:function(t){u.util.tokenValid()&&(t.setRequestHeader("Authorization","Bearer "+localStorage.getItem("access_token")),t.setRequestHeader("origen_datos","PEB2M"),t.setRequestHeader("tipo_empresa","C"),t.setRequestHeader("org_id",localStorage.getItem("org_id")),t.setRequestHeader("Ocp-Apim-Subscription-Key",localStorage.getItem("Ocp_Apim_Subscription_Key")))},url:c.w,dataSrc:"data",data:function(t){if(""!=u.filtro.nroguia)t.NumeroGuia=u.filtro.nroguia.trim();else if(""!=u.filtro.nrooc)t.NumeroOC=u.filtro.nrooc.trim();else{if(""!=u.filtro.nroerp&&(t.DocumentoMaterial=u.filtro.nroerp.trim()),"NONE"!=u.filtro.estado&&(t.Estado=u.filtro.estado),u.filtro.fechaemisioninicio){var n=DatatableFunctions.ConvertStringToDatetime(u.filtro.fechaemisioninicio);t.FechaEmision_inicio=DatatableFunctions.FormatDatetimeForMicroService(n)}if(u.filtro.fechaemisionfin){var r=DatatableFunctions.AddDayEndDatetime(DatatableFunctions.ConvertStringToDatetime(u.filtro.fechaemisionfin));t.FechaEmision_fin=DatatableFunctions.FormatDatetimeForMicroService(r)}}t.column_names="[CodigoGuia,NumeroGuia,FechaEmision,FechaInicioTraslado,FechaEstimadaArribo,RazonSocialCliente,RazonSocialProveedor,Estado,DocumentoMaterial,MotivoRechazoSAP]"}},columns:[{data:"NumeroGuia",name:"NumeroGuia"},{data:"DocumentoMaterial",name:"DocumentoMaterial"},{data:"Estado",name:"Estado"},{data:"RazonSocialProveedor",name:"RazonSocialProveedor"},{data:"FechaEmision",name:"FechaEmision"},{data:"FechaInicioTraslado",name:"FechaInicioTraslado"},{data:"FechaEstimadaArribo",name:"FechaEstimadaArribo"},{data:"NumeroGuia",name:"NumeroGuia"}],columnDefs:[{className:"text-center",targets:[0,1,2,3,4,5,6,7]},{render:function(t,n,r){return void 0===r.MotivoRechazoSAP||0===r.MotivoRechazoSAP.trim().length?r.DocumentoMaterial:'<div class="text-center">\n                          <button class="btn btn-simple" style="color:red;" onclick=\'swal({ title:"Error SAP", text: "'+r.MotivoRechazoSAP+'",type: "error", buttonsStyling: false, confirmButtonClass: "btn btn-danger", confirmButtonColor: "#ec6c62"});\'>Error</button>\n                    </div>'},targets:1},{render:function(t,n,r){var o="",a='href="/guia/comprador/formulario/'+r.CodigoGuia+'"';return u.botonDetalle.habilitado||(o="disabled",a=""),'<div class="text-center"><a '+a+' row-id="'+r.CodigoGuia+'"><button class="btn btn-simple btn-info btn-icon edit" rel="tooltip" title="Ver" data-placement="left" '+o+'><i class="material-icons">visibility</i></button></a></div>'},targets:7}]}),b.on("click",".edit",function(t){if(u.botonDetalle.habilitado){var n=$(this).closest("tr"),r=n.find("a").attr("row-id"),o=["/guia/comprador/formulario",r];u.navigate(o)}t.preventDefault()})}var a=r("./node_modules/@angular/core/@angular/core.es5.js"),e=r("./node_modules/@angular/router/@angular/router.es5.js"),i=r("./src/app/service/login.service.ts"),l=r("./src/app/utils/app.utils.ts"),s=r("./src/app/service/masterservice.ts"),c=r("./src/app/utils/app.constants.ts"),d=r("./src/app/model/menu.ts");r.d(n,"a",function(){return f});var u,b,g=this&&this.__decorate||function(t,n,r,o){var a,e=arguments.length,i=e<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,n,r,o);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(i=(e<3?a(i):e>3?a(n,r,i):a(n,r))||i);return e>3&&i&&Object.defineProperty(n,r,i),i},p=this&&this.__metadata||function(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)},f=function(){function t(t,n,r,o,a){this.router=t,this.route=n,this._masterService=r,this._securityService=o,this.cdRef=a,this.botonBuscar=new d.a,this.botonDetalle=new d.a,this.url_main_module_page="/guia/comprador/buscar",this.util=new l.a(this.router,this._masterService),this.botonBuscar=new d.a,this.botonDetalle=new d.a}return t.prototype.navigate=function(t){this.router.navigate(t,{relativeTo:this.route})},t.prototype.obtenerBotones=function(){var t=this,n=this._securityService.ObtenerBotonesCache(this.url_main_module_page);n?this.configurarBotones(n):this._securityService.obtenerBotones(this.url_main_module_page).subscribe(function(n){u.configurarBotones(n),u._securityService.guardarBotonesLocalStore(t.url_main_module_page,n)},function(t){return console.log(t)},function(){})},t.prototype.configurarBotones=function(t){t&&t.length>0&&(this.botonBuscar=t.find(function(t){return"buscar"===t.nombre})?t.find(function(t){return"buscar"===t.nombre}):this.botonBuscar,this.botonDetalle=t.find(function(t){return"detalle"===t.nombre})?t.find(function(t){return"detalle"===t.nombre}):this.botonDetalle)},t.prototype.validarfiltros=function(){if(u.filtro.nroguia=u.filtro.nroguia.trim(),u.filtro.nrooc=u.filtro.nrooc.trim(),u.filtro.nroerp=u.filtro.nroerp.trim(),""==this.filtro.nroguia&&""==this.filtro.nrooc){if(null==this.filtro.fechaemisioninicio||""==this.filtro.fechaemisioninicio.toString())return swal({text:"Fecha de Emisión inicio es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(null==this.filtro.fechaemisionfin||""==this.filtro.fechaemisionfin.toString())return swal({text:"Fecha de Emisión fin es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(null!=this.filtro.fechaemisioninicio&&""!=this.filtro.fechaemisioninicio.toString()&&null!=this.filtro.fechaemisionfin&&""!=this.filtro.fechaemisionfin.toString()){var t=DatatableFunctions.ConvertStringToDatetime(u.filtro.fechaemisioninicio),n=DatatableFunctions.ConvertStringToDatetime(u.filtro.fechaemisionfin);if(moment(n).diff(t,"days")>30)return swal({text:'El filtro de búsqueda "Fecha de Emisión" debe tener un rango máximo de 30 días entre la Fecha Inicial y la Fecha Fin.',type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(DatatableFunctions.FormatDatetimeForMicroService(t)>DatatableFunctions.FormatDatetimeForMicroService(n))return swal({text:"El rango de Fechas de Emisión seleccionado no es correcto. La Fecha Inicial es mayor a la Fecha Fin.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1}}return!0},t.prototype.clicked=function(t){this.validarfiltros()&&b.ajax.reload(),t.preventDefault()},t.prototype.limpiar=function(t){this.filtroDefecto(),setTimeout(function(){$("input").each(function(){$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")})},200),t.preventDefault()},t.prototype.filtroDefecto=function(){var t=new Date;t.setDate(t.getDate()-30),this.filtro={nroguia:"",nrooc:"",nroerp:"",fechaemisioninicio:t,fechaemisionfin:new Date,estado:"NONE",publicada:!0}},t.prototype.ngOnInit=function(){this.filtroDefecto(),this.util.listEstadoGuia(function(t){u.listEstadoCombo=t}),u=this},t.prototype.ngAfterViewInit=function(){o(),this.obtenerBotones()},t.prototype.ngAfterViewChecked=function(){this.cdRef.detectChanges()},t}();f=g([r.i(a.Component)({selector:"guiacompradorbuscar-cmp",template:r("./src/app/guia/comprador/buscar/guiacompradorbuscar.component.html"),providers:[s.a,i.a]}),p("design:paramtypes",["function"==typeof(v=void 0!==e.c&&e.c)&&v||Object,"function"==typeof(m=void 0!==e.b&&e.b)&&m||Object,"function"==typeof(h=void 0!==s.a&&s.a)&&h||Object,"function"==typeof(y=void 0!==i.a&&i.a)&&y||Object,"function"==typeof(x=void 0!==a.ChangeDetectorRef&&a.ChangeDetectorRef)&&x||Object])],f);var v,m,h,y,x},"./src/app/guia/comprador/formulario/guiacompradorformulario.component.html":function(t,n){t.exports='<div class="main-content">\r\n  <div class="container-fluid">\r\n    <div class="row">\r\n      <div class="col-sm-12">\r\n        <div class="card">\r\n          <form method="#" action="#">\r\n            <div class="card-header card-header-text" data-background-color="blue">\r\n              <h4 class="card-title">Guía</h4>\r\n            </div>\r\n            <div class="card-content">\r\n              <div class="card-header">\r\n                <h4 class="card-title">Datos Generales</h4>\r\n              </div>\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="row">\r\n                      <div class="col-sm-5">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">N° Guía</label>\r\n                          <input type="text" name="nroguia1" [disabled]="toggleButton" [(ngModel)]="guia.nroguia1" class="form-control">\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-7">\r\n                        <div class="form-group label-floating">\r\n                          <input type="text" name="nroguia2" [disabled]="toggleButton" [(ngModel)]="guia.nroguia2" class="form-control">\r\n\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n                <div class="row">\r\n\r\n\r\n\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Organización Compradora \r\n                      </label>\r\n                      <input name="razonsocialcliente" type="text" [disabled]="toggleButton" [(ngModel)]="guia.razonsocialcliente" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Organización Proveedora\r\n                        </label>\r\n                      <input name="razonsocialproveedor" type="text" [disabled]="toggleButton" [(ngModel)]="guia.razonsocialproveedor" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">RUC Organización Compradora\r\n                                              </label>\r\n                      <input name="ruccliente" type="text" [disabled]="toggleButton" [(ngModel)]="guia.ruccliente" class="form-control">\r\n\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">RUC Organización Proveedora\r\n                      </label>\r\n                      <input name="rucproveedor" [disabled]="toggleButton" type="text" [(ngModel)]="guia.rucproveedor" class="form-control">\r\n                    </div>\r\n                  </div>\r\n\r\n\r\n\r\n                </div>\r\n                <div class="row">\r\n\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Motivo de Guía \r\n                                          </label>\r\n                      <select id="motivoguia" name="motivoguia" class="form-control" [(ngModel)]="guia.motivoguia" [disabled]="toggleButton">\r\n                                            <option Value=""></option>\r\n                                            <option *ngFor="let opt of listMotivoGuiaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                                          </select>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Número ERP de Documento Material \r\n                                          </label>\r\n                      <input name="nroerpdocmaterial" type="text" [disabled]="toggleButton" [(ngModel)]="guia.nroerpdocmaterial" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                        <label class="control-label">Estado Web</label>\r\n                        <select id="estado" [(ngModel)]="guia.estado" name="estado" class="form-control" [disabled]="toggleButton">\r\n                            <option Value=""></option>\r\n                            <option *ngFor="let opt of listEstadoCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha de Emisión\r\n                          </label>\r\n                      <input name="fechaemision" [(ngModel)]="guia.fechaemision" datepicker disabled type="text" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha de Inicio de Traslado\r\n                          </label>\r\n                      <input name="fechainiciotraslado" [(ngModel)]="guia.fechainiciotraslado" datepicker disabled type="text" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha Probable de Arribo \r\n                          </label>\r\n                      <input name="fechaprobablearribo" [(ngModel)]="guia.fechaprobablearribo" datepicker disabled type="text" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="row">\r\n                  <div class="col-sm-12">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Observaciones\r\n                      </label>\r\n                      <textarea name="observaciones" [(ngModel)]="guia.observaciones" class="form-control" [disabled]="toggleButton"></textarea>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div *ngIf="guia.motivorechazosap" class="row" >\r\n                  <div class="col-sm-12">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Motivo Rechazo SAP\r\n                      </label>\r\n                      <textarea style="color:red;" name="motivorechazosap" id="motivorechazosap" [(ngModel)]="guia.motivorechazosap" maxlength="200" class="form-control" [disabled]="toggleButton"></textarea>\r\n                      <span class="help-block" id="lblMotRzoSAP">200 caracteres máximo (0)</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n              <div class="card-header">\r\n                <h4 class="card-title">Datos Transportista</h4>\r\n              </div>\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="row">\r\n                      <div class="col-sm-5">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">Tipo Documento</label>\r\n                          <select id="tipodoctransporte" name="tipodoctransporte" class="form-control" [(ngModel)]="guia.tipodoctransporte" [disabled]="toggleButton">\r\n                            <option Value=""></option>\r\n                            <option *ngFor="let opt of listTipoDocIdentidad" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                            \r\n                          </select>\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-7">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">N° Documento</label>\r\n                          <input type="text" name="rucdnitransporte" [(ngModel)]="guia.rucdnitransporte" class="form-control" [disabled]="toggleButton">\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Razon Social / Nombre\r\n                      </label>\r\n                      <input name="razonsocialnombretransporte" [(ngModel)]="guia.razonsocialnombretransporte" type="text" class="form-control"\r\n                        [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">N° Placa</label>\r\n                      <input type="text" name="placatransporte" class="form-control" [(ngModel)]="guia.placatransporte" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Dirección\r\n                      </label>\r\n                      <input name="direcciontransporte" type="text" class="form-control" [(ngModel)]="guia.direcciontransporte" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Código de Reg. MTC</label>\r\n                      <input type="text" name="codigomtctransporte" class="form-control" [(ngModel)]="guia.codigomtctransporte" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Tipo Transporte\r\n                      </label>\r\n                      <select name="tipotransporte" id="tipotransporte" [(ngModel)]="guia.tipotransporte" class="form-control" [disabled]="toggleButton">\r\n                        <option Value=""></option>\r\n                        <option *ngFor="let opt of listTransporteGuiaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="card-header">\r\n                <h4 class="card-title">Datos de la Carga</h4>\r\n              </div>\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Punto Partida</label>\r\n                      <input type="text" name="puntopartida" class="form-control" [(ngModel)]="guia.puntopartida" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Punto LLegada</label>\r\n                      <input type="text" name="puntollegada" class="form-control" [(ngModel)]="guia.puntollegada" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Almancén Destino</label>\r\n                      <input type="text" name="alamcendestino" [(ngModel)]="guia.alamcendestino" class="form-control" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Total Bultos</label>\r\n                      <input type="text" name="totalbultos" [(ngModel)]="guia.totalbultos" class="form-control" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="row">\r\n                      <div class="col-sm-9">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">Total Volúmen</label>\r\n                          <input type="text" name="totalvolumen" [(ngModel)]="guia.totalvolumen" class="form-control" [disabled]="toggleButton">\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-3">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label"></label>\r\n                          <select id="totalvolumenund" name="totalvolumenund" [(ngModel)]="guia.totalvolumenund" class="form-control" [disabled]="toggleButton">\r\n                            <option Value=""></option>\r\n                            <option *ngFor="let opt of listUnidadMedidaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                          </select>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="row">\r\n                      <div class="col-sm-9">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">Total Peso Bruto</label>\r\n                          <input type="text" name="totalpesobruto" [(ngModel)]="guia.totalpesobruto" class="form-control" [disabled]="toggleButton">\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-3">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label"></label>\r\n                          <select id="totalpesobrutound" name="totalpesobrutound" [(ngModel)]="guia.totalpesobrutound" class="form-control" [disabled]="toggleButton">\r\n                            <option Value=""></option>\r\n                            <option *ngFor="let opt of listUnidadMedidaPesoCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                          </select>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="row">\r\n                      <div class="col-sm-9">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">Tara</label>\r\n                          <input type="text" name="tara" [(ngModel)]="guia.tara" class="form-control" [disabled]="toggleButton">\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-3">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label"></label>\r\n                          <select name="totalpesobrutound" [(ngModel)]="guia.totalpesobrutound" class="form-control" disabled>\r\n                            <option Value=""></option>\r\n                            <option *ngFor="let opt of listUnidadMedidaPesoCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                          </select>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="row">\r\n                      <div class="col-sm-9">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">Total Peso Neto</label>\r\n                          <input type="text" name="totalpesoneto" [(ngModel)]="guia.totalpesoneto" class="form-control" [disabled]="toggleButton">\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-3">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label"></label>\r\n                          <select name="totalpesobrutound" [(ngModel)]="guia.totalpesobrutound" class="form-control" disabled>\r\n                            <option Value=""></option>\r\n                            <option *ngFor="let opt of listUnidadMedidaPesoCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                          </select>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="card">\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n                <div class="card-content">\r\n                  <h4 class="card-title">Detalle de Artículos</h4>\r\n\r\n                  <div class="material-datatables table-responsive" style="display:block">\r\n                    <table id="dtArticulos" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                      <thead>\r\n                        <tr>\r\n\r\n                          <th>N° Item</th>\r\n                          <th>N° OC</th>\r\n                          <th>N° Item OC</th>\r\n                          <th>Código de Producto</th>\r\n                          <th>Descripción del Producto</th>\r\n                          <th>Und. de Medida del Pedido</th>\r\n                          <th>Cantidad del Pedido</th>\r\n                          <th>Cantidad Recibida</th>\r\n                          <th>Cantidad Despachada</th>\r\n                          <th>Und. de Medida de Despacho</th>\r\n                          <th>Estado</th>\r\n\r\n                        </tr>\r\n                      </thead>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class="row">\r\n                <div class="col-md-12">\r\n                  <div class="card">\r\n                    <div class="card-header card-header-icon" data-background-color="blue">\r\n                      <i class="material-icons">assignment</i>\r\n                    </div>\r\n                    <div class="card-content">\r\n                      <h4 class="card-title">Archivos Adjuntos</h4>\r\n\r\n                      <div class="material-datatables table-responsive">\r\n                        <table id="dtArchivos" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                          <thead>\r\n                            <tr>\r\n\r\n                              <th width="20%">Nombre</th>\r\n                              <th width="60%">Descripción</th>\r\n                              <th class="disabled-sorting text-center" width="20%">Acciones</th>\r\n                            </tr>\r\n                          </thead>\r\n\r\n\r\n                        </table>\r\n                      </div>\r\n                    </div>\r\n                    \x3c!-- end content--\x3e\r\n                  </div>\r\n                  \x3c!--  end card  --\x3e\r\n                </div>\r\n                \x3c!-- end col-md-12 --\x3e\r\n              </div>\r\n            </div>\r\n            <div class="card-footer">\r\n              <button class="btn btn-fill btn-default pull-right" routerLink="/guia/comprador/buscar">Regresar</button>\r\n              <button *ngIf="botonImprimir.visible" [disabled]="!botonImprimir.habilitado" class="btn btn-fill btn-default pull-right" (click)="print($event)">{{botonImprimir.Titulo}}</button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n\r\n<div style="display:none">\r\n\r\n  <div id="print-section-guia" style=\'font-family: Arial, Helvetica, sans-serif;color: #000;font-size: 12px;\'>\r\n    <table width="100%" cellpadding="0" cellspacing="0" align="center" bgcolor="#ffffff" style=\'font-family: Arial, Helvetica, sans-serif;color: #000;font-size: 12px;\'>\r\n      <tbody>\r\n        <tr>\r\n          <td align="center">\r\n\r\n\r\n            <table width="900" cellpadding="0" cellspacing="0" border="0" bgcolor="#fff">\r\n              <tbody>\r\n                <tr>\r\n                  <td colspan="2" bgcolor="#fff" align="left" valign="middle">\r\n                    <img src="{{this.baseurl}}assets/img/faces/centenario.png" width="250" style="padding:0; margin:0; border:0; display:none">\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="top" style="font-size: 20px">\r\n                    <b>Guía de Materiales  {{this.guia.nroguia}}</b><br><br>\r\n                  </td>\r\n                </tr>\r\n\r\n\r\n\r\n\r\n              </tbody>\r\n            </table>\r\n\r\n            <table width="900" class="print-table" cellpadding="5" border=\'0\' style="border:1px solid #999;border-collapse: collapse;"\r\n              cellspacing="0" bgcolor="#fff">\r\n              <tbody>\r\n\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 18px">\r\n                    <b>Datos Generales</b>\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;width: 50%">\r\n                    <b>Organización Compradora:</b><br> {{this.guia.razonsocialcliente}}\r\n                  </td>\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;width: 50%">\r\n                    <b>Organización Proveedora:</b><br> {{this.guia.razonsocialproveedor}}\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>RUC Organización Compradora:</b><br> {{this.guia.ruccliente}}\r\n                  </td>\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>RUC Organización Proveedora:</b><br> {{this.guia.rucproveedor}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Motivo de Guía:</b><br> {{this.guia.motivoguia_text}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Numero ERP Documento de Material:</b><br> {{this.guia.nroerpdocmaterial}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Estado Guía:</b><br> {{this.guia.estado_text}}\r\n                  </td>\r\n                </tr>\r\n\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Fecha de Emisión:</b><br> {{this.guia.fechaemision}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Fecha de Inicio de Traslado:</b><br> {{this.guia.fechainiciotraslado}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Fecha Probable de Arribo:</b><br> {{this.guia.fechaprobablearribo}}\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Observaciones:</b><br> {{this.guia.observaciones}}\r\n                  </td>\r\n                </tr>\r\n                <tr *ngIf="guia.motivorechazosap" style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Motivo Rechazo SAP:</b><br> {{this.guia.motivorechazosap}}\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 18px">\r\n                    <b>Datos del Transportista</b>\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="3" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Tipo de Documento:</b><br> {{this.guia.tipodoctransporte_text}}\r\n                  </td>\r\n                  <td colspan="3" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Nro. Documento:</b><br> {{this.guia.rucdnitransporte}}\r\n                  </td>\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Razón Social/Nombre:</b><br> {{this.guia.razonsocialnombretransporte}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Nro. Placa:</b><br> {{this.guia.placatransporte}}\r\n                  </td>\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Dirección:</b><br> {{this.guia.direcciontransporte}}\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Código Reg. de MTC:</b><br> {{this.guia.codigomtctransporte}}\r\n                  </td>\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Tipo de Transporte:</b><br> {{this.guia.tipotransporte_text}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 18px">\r\n                    <b>Datos de la Carga</b>\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Punto de Partida:</b><br> {{this.guia.puntopartida}}\r\n                  </td>\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Punto de Llegada:</b><br> {{this.guia.puntollegada}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Almacen Destino:</b><br> {{this.guia.alamcendestino}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Total Bultos:</b><br> {{this.guia.totalbultos}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Total Volumen:</b><br> {{this.guia.totalvolumen}}{{this.guia.totalvolumenund_text}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Total Peso Bruto:</b><br> {{this.guia.totalpesobruto}}{{this.guia.totalpesobrutound_text}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Tara:</b><br> {{this.guia.tara}}{{this.guia.totalpesobrutound_text}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Total Peso Neto:</b><br> {{this.guia.totalpesoneto}}{{this.guia.totalpesobrutound_text}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 18px">\r\n                    <b>Detalle de los Artículos</b>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n\r\n              <tr style="border:1px solid #999;">\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>No. Item</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>No. OC</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>No. Item OC</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Código de Producto</b>\r\n                </td>\r\n                <td colspan="2" bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Descripción del Producto</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Und. de Medida del Pedido</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Cantidad del Pedido</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Cantidad Recibida</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Cantidad Despachada</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Und. de Medida de Despacho</b>\r\n                </td>\r\n\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Estado</b>\r\n                </td>\r\n\r\n\r\n\r\n              </tr>\r\n              <tr *ngFor="let row of this.guia.articulos" ng-class="trhighlight">\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  {{row.nroitem}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.nrooc}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.nroitemoc}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.codproducto}}\r\n                </td>\r\n                <td colspan="2" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                  {{row.descproducto}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.unidadmedida}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.cantidadpedido}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.cantidadrecibida}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.cantidaddespachada}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.unidadmedidadespacho}}\r\n                </td>\r\n\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.estado}}\r\n                </td>\r\n              </tr>\r\n\r\n            </table>\r\n\r\n\r\n\r\n\r\n\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <br>\r\n\r\n  </div>\r\n\r\n\r\n</div>'},"./src/app/guia/comprador/formulario/guiacompradorformulario.component.ts":function(t,n,r){"use strict";function o(){f=$("#dtArticulos").DataTable({ajax:function(t,n,r){n({data:p.guia.articulos})},columns:[{data:"nroitem"},{data:"nrooc"},{data:"nroitemoc"},{data:"codproducto"},{data:"descproducto"},{data:"unidadmedida"},{data:"cantidadpedido"},{data:"cantidadrecibida"},{data:"cantidadpedido"},{data:"unidadmedidadespacho"},{data:"estado"}],columnDefs:[{className:"text-center",targets:[0,1,2,3,4,5,6,7,8,9,10]}]})}var a=r("./node_modules/@angular/router/@angular/router.es5.js"),e=r("./node_modules/@angular/core/@angular/core.es5.js"),i=r("./src/app/model/guia.ts"),l=r("./src/app/service/masterservice.ts"),s=r("./src/app/service/guiaservice.ts"),c=r("./src/app/utils/app.utils.ts"),d=r("./src/app/service/adjuntoservice.ts"),u=r("./src/assets/js/plugins/jquery.PrintArea.js"),b=(r.n(u),r("./src/app/service/login.service.ts")),g=r("./src/app/model/menu.ts");r.d(n,"a",function(){return x});var p,f,v,m,h=this&&this.__decorate||function(t,n,r,o){var a,e=arguments.length,i=e<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,n,r,o);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(i=(e<3?a(i):e>3?a(n,r,i):a(n,r))||i);return e>3&&i&&Object.defineProperty(n,r,i),i},y=this&&this.__metadata||function(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)},x=function(){function t(t,n,r,o,a,e,l){this.router=n,this._masterService=r,this._dataServiceAdjunto=o,this._dataService=a,this._securityService=e,this.cdRef=l,this.id="0",this.toggleButton=!0,this.botonImprimir=new g.a,this.url_main_module_page="/guia/comprador/buscar",this.activatedRoute=t,this.util=new c.a(this.router,this._masterService),this.guia=new i.a,this.baseurl=$("#baseurl").attr("href")}return t.prototype.obtenerBotones=function(){var t=this,n=this._securityService.ObtenerBotonesCache(this.url_main_module_page);n?(console.log("ObtenerBotonesCache",n),this.configurarBotones(n)):this._securityService.obtenerBotones(this.url_main_module_page).subscribe(function(n){console.log("obtenerBotones",n),p.configurarBotones(n),p._securityService.guardarBotonesLocalStore(t.url_main_module_page,n)},function(t){return console.log(t)},function(){})},t.prototype.configurarBotones=function(t){t&&t.length>0&&(this.botonImprimir=t.find(function(t){return"imprimir"===t.nombre})?t.find(function(t){return"imprimir"===t.nombre}):this.botonImprimir)},t.prototype.print=function(t){p.guia.motivoguia_text=$("#motivoguia option:selected").text(),p.guia.estado_text=$("#estado option:selected").text(),p.guia.tipodoctransporte_text=$("#tipodoctransporte option:selected").text(),p.guia.tipotransporte_text=$("#tipotransporte option:selected").text(),p.guia.totalvolumenund_text=$("#totalvolumenund option:selected").text(),p.guia.totalpesobrutound_text=$("#totalpesobrutound option:selected").text(),setTimeout(function(){$("div#print-section-guia").printArea({popTitle:"GUIA",mode:"iframe",popClose:!1})},200)},t.prototype.ngOnInit=function(){var t=this;p=this,this.activatedRoute.params.subscribe(function(n){t.id=n.id}),"0"!=this.id?(this.toggleButton=!0,$("#btnAgregarItemOC").addClass("disabled"),$("#btnEliminarItemOC").addClass("disabled")):this.toggleButton=!1,this.guia=new i.a,this.util.listUnidadMedidaVolumen(function(t){p.listUnidadMedidaCombo=t}),this.util.listUnidadMedidaMasa(function(t){p.listUnidadMedidaPesoCombo=t}),this.util.listMotivoGuia(function(t){p.listMotivoGuiaCombo=t}),this.util.listTransporteGuia(function(t){p.listTransporteGuiaCombo=t}),this.util.listTipoDocIdentidad(function(t){p.listTipoDocIdentidad=t}),this.util.listEstadoGuia(function(t){p.listEstadoCombo=t})},t.prototype.ngAfterViewInit=function(){var t=this;this._dataService.obtener(this.id).subscribe(function(n){t.guia=n,setTimeout(function(){$("input").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),$("select").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),$("textarea").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),f.ajax.reload(),v.ajax.reload()},100)},function(t){return console.log(t)},function(){}),v=$("#dtArchivos").on("draw.dt",function(t,n,r){DatatableFunctions.initDatatable(t,n,r,v)}).DataTable({ajax:function(t,n,r){n({data:p.guia.docadjuntos})},columns:[{data:"nombre"},{data:"descripcion"},{data:"id"}],columnDefs:[{className:"text-center",targets:[0,1,2]},{render:function(t,n,r){return'<a class="editar" href="javascript:void(0);" row-id="'+r.id+'"><button class="btn btn-simple btn-info btn-icon download" rel="tooltip" title="Bajar Archivo" data-placement="left"><i class="material-icons">get_app</i></button></a>'},targets:2}]}),v.on("click",".download",function(t){var n=$(this).closest("tr"),r=n.find("a.editar").attr("row-id"),o=p.guia.docadjuntos;m=o.find(function(t){return t.id==r}),p._dataServiceAdjunto.DescargarArchivo(m).subscribe(function(t){saveAs(t,m.nombre)},function(t){return console.log(t)},function(){}),t.preventDefault()}),o(),this.obtenerBotones()},t.prototype.ngAfterViewChecked=function(){this.cdRef.detectChanges()},t.prototype.ngOnChanges=function(t){},t.prototype.habilitarEdicion=function(t){this.toggleButton=!1,$("#btnAgregarItemOC").removeClass("disabled"),$("#btnEliminarItemOC").removeClass("disabled")},t}();x=h([r.i(e.Component)({selector:"guiacompradorformulario-cmp",template:r("./src/app/guia/comprador/formulario/guiacompradorformulario.component.html"),providers:[d.a,s.a,l.a,b.a]}),y("design:paramtypes",["function"==typeof(w=void 0!==a.b&&a.b)&&w||Object,"function"==typeof(C=void 0!==a.c&&a.c)&&C||Object,"function"==typeof(B=void 0!==l.a&&l.a)&&B||Object,"function"==typeof(D=void 0!==d.a&&d.a)&&D||Object,"function"==typeof(S=void 0!==s.a&&s.a)&&S||Object,"function"==typeof(O=void 0!==b.a&&b.a)&&O||Object,"function"==typeof(_=void 0!==e.ChangeDetectorRef&&e.ChangeDetectorRef)&&_||Object])],x);var w,C,B,D,S,O,_},"./src/app/guia/guia.module.ts":function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=r("./node_modules/@angular/core/@angular/core.es5.js"),a=r("./node_modules/@angular/router/@angular/router.es5.js"),e=r("./node_modules/@angular/common/@angular/common.es5.js"),i=r("./node_modules/@angular/forms/@angular/forms.es5.js"),l=r("./src/app/utils/utils.module.ts"),s=r("./src/app/guia/proveedor/formulario/guiaproveedorformulario.component.ts"),c=r("./src/app/guia/comprador/formulario/guiacompradorformulario.component.ts"),d=r("./src/app/guia/proveedor/buscar/guiaproveedorbuscar.component.ts"),u=r("./src/app/guia/guia.routing.ts"),b=r("./src/app/directives/datepicker.module.ts"),g=r("./src/app/guia/comprador/buscar/guiacompradorbuscar.component.ts");r.d(n,"GuiaModule",function(){return f});var p=this&&this.__decorate||function(t,n,r,o){var a,e=arguments.length,i=e<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,n,r,o);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(i=(e<3?a(i):e>3?a(n,r,i):a(n,r))||i);return e>3&&i&&Object.defineProperty(n,r,i),i},f=function(){function t(){}return t}();f=p([r.i(o.NgModule)({imports:[e.CommonModule,a.a.forChild(u.a),i.FormsModule,l.a,b.a],declarations:[s.a,d.a,g.a,c.a]})],f)},"./src/app/guia/guia.routing.ts":function(t,n,r){"use strict";var o=r("./src/app/guia/proveedor/formulario/guiaproveedorformulario.component.ts"),a=r("./src/app/guia/comprador/formulario/guiacompradorformulario.component.ts"),e=r("./src/app/guia/proveedor/buscar/guiaproveedorbuscar.component.ts"),i=r("./src/app/guia/comprador/buscar/guiacompradorbuscar.component.ts"),l=r("./src/app/service/auth-guard.service.ts");r.d(n,"a",function(){return s});var s=[{path:"",children:[{path:"proveedor/formulario/:id",component:o.a,canActivate:[l.a]},{path:"comprador/formulario/:id",component:a.a,canActivate:[l.a]},{path:"proveedor/buscar",component:e.a,canActivate:[l.a]},{path:"comprador/buscar",component:i.a,canActivate:[l.a]}]}]},"./src/app/guia/proveedor/buscar/guiaproveedorbuscar.component.html":function(t,n){t.exports='<div class="main-content">\r\n    <div class="container-fluid">\r\n        <div class="row">\r\n            <div class="col-sm-12">\r\n                <div class="card">\r\n                    <form method="#" action="#">\r\n                        <div class="card-header card-header-text" data-background-color="blue">\r\n                            <h4 class="card-title">Buscar Guías</h4>\r\n                        </div>\r\n                        <div class="card-content">\r\n                            <div class="row">\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Número de Guía\r\n                                        </label>\r\n                                        <input name="nroguia" [(ngModel)]="filtro.nroguia" type="text" class="form-control">\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Número de Orden de Compra\r\n                                        </label>\r\n                                        <input name="nrooc" [(ngModel)]="filtro.nrooc" type="text" class="form-control">\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group">\r\n\r\n                                        <div class="togglebutton">\r\n\r\n                                            <label>\r\n                                                <input type="checkbox" [checked]="!filtro.publicada" (change)="filtro.publicada = !filtro.publicada; filtro.estado=\'NONE\';"> Borrador\r\n                                            </label>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="row">\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Número de ERP\r\n                                        </label>\r\n                                        <input name="nroerp" [(ngModel)]="filtro.nroerp" type="text" class="form-control">\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4" *ngIf="filtro.publicada">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Estado</label>\r\n                                        <select [(ngModel)]="filtro.estado" name="estado" class="form-control">\r\n                                            <option value="NONE" selected>TODOS</option>\r\n                                            <option *ngFor="let opt of listEstadoCombo" value="{{opt.valor}}"> {{opt.desc}} </option>\r\n\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="row">\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Fecha Emisión Del</label>\r\n                                        <input type="text" [(ngModel)]="filtro.fechaemisioninicio" name="fechaemisioninicio" class="form-control" datepicker />\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">al</label>\r\n                                        <input type="text" [(ngModel)]="filtro.fechaemisionfin" name="fechaemisionfin" class="form-control" datepicker/>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group">\r\n                                        <button *ngIf="botonBuscar.visible" [disabled]="!botonBuscar.habilitado" class="btn btn-default" (click)="clicked($event)">{{botonBuscar.Titulo}}</button>\r\n                                        <button *ngIf="botonBuscar.visible" [disabled]="!botonBuscar.habilitado" class="btn btn-default" (click)="limpiar($event)">Limpiar</button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <nav class="navbar navbar-info navbar-without-margin" role="navigation">\r\n                                <div class="container-fluid">\r\n                                    <div class="navbar-header">\r\n\r\n                                        <span class="navbar-brand">Resultados</span>\r\n                                    </div>\r\n\r\n                                </div>\r\n                            </nav>\r\n\r\n                            <div class="row">\r\n                                <div class="col-sm-7">\r\n                                </div>\r\n                                <div class="col-sm-5">\r\n                                    <div class="form-group form-group-without-margin">\r\n\r\n                                        <button *ngIf="botonDescartar.visible && !filtro.publicada" [disabled]="!botonDescartar.habilitado" class="btn btn-default pull-right" (click)="DescartarBorradores($event)">{{botonDescartar.Titulo}}</button>\r\n                                        <button *ngIf="botonRegistrar.visible" [disabled]="!botonRegistrar.habilitado" class="btn btn-default pull-right" [routerLink]="[\'/guia/proveedor/formulario\', 0]">{{botonRegistrar.Titulo}}</button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="material-datatables table-responsive">\r\n                                <table id="dtResultados" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                                    <thead>\r\n                                        <tr>\r\n\r\n                                            <th class="disabled-sorting text-right">\r\n                                                <div class="checkbox text-right">\r\n                                                    <label>\r\n                                                        <input type="checkbox" name="optionsCheckboxes" class="checkall">\r\n                                                    </label>\r\n                                                </div>\r\n                                            </th>\r\n                                            <th>N° Guía</th>\r\n                                            <th>N° ERP</th>\r\n                                            <th>Estado</th>\r\n                                            <th>Organización Compradora</th>\r\n\r\n                                            <th>Fecha de Emisión</th>\r\n                                            <th>Fecha de Inicio de Traslado</th>\r\n                                            <th>Fecha Probable de Arribo</th>\r\n                                            <th class="disabled-sorting text-center">Acciones</th>\r\n                                        </tr>\r\n                                    </thead>\r\n\r\n                                </table>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},"./src/app/guia/proveedor/buscar/guiaproveedorbuscar.component.ts":function(t,n,r){"use strict";function o(){var t=c.D;b.filtro.publicada&&(t=c.w),g=$("#dtResultados").on("draw.dt",function(t,n,r){DatatableFunctions.initDatatable(t,n,r,g)}).DataTable({order:[[5,"desc"]],searching:!1,serverSide:!0,ajax:{beforeSend:function(t){b.util.tokenValid()&&(t.setRequestHeader("Authorization","Bearer "+localStorage.getItem("access_token")),t.setRequestHeader("origen_datos","PEB2M"),t.setRequestHeader("tipo_empresa","P"),t.setRequestHeader("org_id",localStorage.getItem("org_id")),t.setRequestHeader("Ocp-Apim-Subscription-Key",localStorage.getItem("Ocp_Apim_Subscription_Key")))},url:t,dataSrc:"data",data:function(t){if(""!=b.filtro.nroguia)t.NumeroGuia=b.filtro.nroguia.trim();else if(""!=b.filtro.nrooc)t.NumeroOC=b.filtro.nrooc.trim();else{if(""!=b.filtro.nroerp&&(t.DocumentoMaterial=b.filtro.nroerp.trim()),"NONE"!=b.filtro.estado&&(t.Estado=b.filtro.estado),b.filtro.fechaemisioninicio){var n=DatatableFunctions.ConvertStringToDatetime(b.filtro.fechaemisioninicio);t.FechaEmision_inicio=DatatableFunctions.FormatDatetimeForMicroService(n)}if(b.filtro.fechaemisionfin){var r=DatatableFunctions.AddDayEndDatetime(DatatableFunctions.ConvertStringToDatetime(b.filtro.fechaemisionfin));t.FechaEmision_fin=DatatableFunctions.FormatDatetimeForMicroService(r)}}t.column_names="[CodigoGuia,NumeroGuia,FechaEmision,FechaInicioTraslado,FechaEstimadaArribo,RazonSocialCliente,RazonSocialProveedor,Estado,DocumentoMaterial,MotivoRechazoSAP]"}},columns:[{data:"NumeroGuia",name:"NumeroGuia"},{data:"NumeroGuia",name:"NumeroGuia"},{data:"DocumentoMaterial",name:"DocumentoMaterial"},{data:"Estado",name:"Estado"},{data:"RazonSocialCliente",name:"RazonSocialCliente"},{data:"FechaEmision",name:"FechaEmision"},{data:"FechaInicioTraslado",name:"FechaInicioTraslado"},{data:"FechaEstimadaArribo",name:"FechaEstimadaArribo"},{data:"CodigoGuia",name:"CodigoGuia"}],columnDefs:[{className:"text-center",targets:[1,2,3,4,5,6,7]},{render:function(t,n,r){return'<div class="text-right" height="100%"><div class="checkbox text-right"><label><input class="checkboxGuia" value="'+r.CodigoGuia+'"  type="checkbox" name="optionsCheckboxes"></label></div></div>'},targets:0,orderable:!1},{render:function(t,n,r){return void 0===r.MotivoRechazoSAP||0===r.MotivoRechazoSAP.trim().length?r.DocumentoMaterial:'<div class="text-center">\n                      <button class="btn btn-simple" style="color:red;" onclick=\'swal({ title:"Error SAP", text: "'+r.MotivoRechazoSAP+'",type: "error", buttonsStyling: false, confirmButtonClass: "btn btn-danger", confirmButtonColor: "#ec6c62"});\'>Error</button>\n                    </div>'},targets:2},{render:function(t,n,r){var o=b.filtro.publicada?"0":"1",a="Ver/Editar";return b.filtro.publicada&&(a="Ver"),'<div class="text-center"><a href="/guia/proveedor/formulario/'+r.CodigoGuia+'" row-id="'+r.CodigoGuia+'" esBorrador="'+o+'" id_doc="'+r.id_doc+'"><button class="btn btn-simple btn-info btn-icon edit" rel="tooltip" title="'+a+'" data-placement="left"><i class="material-icons">visibility</i></button></a></div>'},targets:8}]}),g.on("click",".edit",function(t){var n=$(this).closest("tr"),r=n.find("a").attr("row-id"),o=n.find("a").attr("esBorrador"),a=n.find("a").attr("id_doc"),e=["/guia/proveedor/formulario",r,{b:o,c:a}];b.navigate(e),t.preventDefault()}),g.on("click",".buscar-propuesta",function(t){var n=$(this).closest("tr"),r=(g.row(n).data(),["/guia/proveedor/buscar"]);b.navigate(r),t.preventDefault()})}var a=r("./node_modules/@angular/core/@angular/core.es5.js"),e=r("./node_modules/@angular/router/@angular/router.es5.js"),i=r("./src/app/utils/app.utils.ts"),l=r("./src/app/service/masterservice.ts"),s=r("./src/app/service/guiaservice.ts"),c=r("./src/app/utils/app.constants.ts"),d=r("./src/app/service/login.service.ts"),u=r("./src/app/model/menu.ts");r.d(n,"a",function(){return h});var b,g,p=this&&this.__decorate||function(t,n,r,o){var a,e=arguments.length,i=e<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,n,r,o);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(i=(e<3?a(i):e>3?a(n,r,i):a(n,r))||i);return e>3&&i&&Object.defineProperty(n,r,i),i},f=this&&this.__metadata||function(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)},v=this&&this.__awaiter||function(t,n,r,o){return new(r||(r=Promise))(function(a,e){function i(t){try{s(o.next(t))}catch(t){e(t)}}function l(t){try{s(o.throw(t))}catch(t){e(t)}}function s(t){t.done?a(t.value):new r(function(n){n(t.value)}).then(i,l)}s((o=o.apply(t,n||[])).next())})},m=this&&this.__generator||function(t,n){function r(t){return function(n){return o([t,n])}}function o(r){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,e&&(i=e[2&r[0]?"return":r[0]?"throw":"next"])&&!(i=i.call(e,r[1])).done)return i;switch(e=0,i&&(r=[0,i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,e=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=n.call(t,s)}catch(t){r=[6,t],e=0}finally{a=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var a,e,i,l,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},h=function(){function t(t,n,r,o,a,e){this.router=t,this.route=n,this._masterService=r,this.guiaService=o,this._securityService=a,this.cdRef=e,this.url_main_module_page="/guia/proveedor/buscar",this.botonBuscar=new u.a,this.botonDetalle=new u.a,this.botonDescartar=new u.a,this.botonRegistrar=new u.a,this.util=new i.a(this.router,this._masterService)}return t.prototype.navigate=function(t){this.router.navigate(t,{relativeTo:this.route})},t.prototype.obtenerBotones=function(){var t=this,n=this._securityService.ObtenerBotonesCache(this.url_main_module_page);n?this.configurarBotones(n):this._securityService.obtenerBotones(this.url_main_module_page).subscribe(function(n){b.configurarBotones(n),b._securityService.guardarBotonesLocalStore(t.url_main_module_page,n)},function(t){return console.log(t)},function(){})},t.prototype.configurarBotones=function(t){t&&t.length>0&&(this.botonBuscar=t.find(function(t){return"buscar"===t.nombre})?t.find(function(t){return"buscar"===t.nombre}):this.botonBuscar,this.botonDetalle=t.find(function(t){return"detalle"===t.nombre})?t.find(function(t){return"detalle"===t.nombre}):this.botonDetalle,this.botonDescartar=t.find(function(t){return"descartarborrador"===t.nombre})?t.find(function(t){return"descartarborrador"===t.nombre}):this.botonDescartar,this.botonRegistrar=t.find(function(t){return"registrarguia"===t.nombre})?t.find(function(t){return"registrarguia"===t.nombre}):this.botonRegistrar)},t.prototype.validarfiltros=function(){if(this.filtro.nroguia=this.filtro.nroguia.trim(),this.filtro.nrooc=this.filtro.nrooc.trim(),this.filtro.nroerp=this.filtro.nroerp.trim(),""==this.filtro.nroguia&&""==this.filtro.nrooc){if(null==this.filtro.fechaemisioninicio||""==this.filtro.fechaemisioninicio.toString())return swal({text:"Fecha de Emisión inicio es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(null==this.filtro.fechaemisionfin||""==this.filtro.fechaemisionfin.toString())return swal({text:"Fecha de Emisión fin es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(null!=this.filtro.fechaemisioninicio&&""!=this.filtro.fechaemisioninicio.toString()&&null!=this.filtro.fechaemisionfin&&""!=this.filtro.fechaemisionfin.toString()){var t=DatatableFunctions.ConvertStringToDatetime(b.filtro.fechaemisioninicio),n=DatatableFunctions.ConvertStringToDatetime(b.filtro.fechaemisionfin);if(moment(n).diff(t,"days")>30)return swal({text:'El filtro de búsqueda "Fecha de Emisión" debe tener un rango máximo de 30 días entre la Fecha Inicial y la Fecha Fin.',type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(DatatableFunctions.FormatDatetimeForMicroService(t)>DatatableFunctions.FormatDatetimeForMicroService(n))return swal({text:"El rango de Fechas de Emisión seleccionado no es correcto. La Fecha Inicial es mayor a la Fecha Fin.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1}}return!0},t.prototype.clicked=function(t){this.validarfiltros()&&(this.filtro.publicada?g.ajax.url(c.w).load():g.ajax.url(c.D).load()),t.preventDefault()},t.prototype.limpiar=function(t){this.filtroDefecto(),setTimeout(function(){$("input").each(function(){$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")})},200),t.preventDefault()},t.prototype.filtroDefecto=function(){var t=new Date;t.setDate(t.getDate()-30),this.filtro={nroguia:"",nrooc:"",nroerp:"",fechaemisioninicio:t,fechaemisionfin:new Date,estado:"NONE",publicada:!0}},t.prototype.ngOnInit=function(){this.util.listEstadoGuia(function(t){t=t.filter(function(t){return"GBORR"!=t.valor}),b.listEstadoCombo=t}),b=this,this.filtroDefecto()},t.prototype.ngAfterViewInit=function(){o(),DatatableFunctions.registerCheckAll(),this.obtenerBotones()},t.prototype.ngAfterViewChecked=function(){this.cdRef.detectChanges()},t.prototype.DescartarBorradoresAsincrono=function(t){return v(this,void 0,void 0,function(){var n,r,o,a,e;return m(this,function(i){switch(i.label){case 0:n=0,r=t,i.label=1;case 1:return n<r.length?(o=r[n],a=$(o).val(),[4,this.guiaService.descartarBorrador(a).toPromise()]):[3,4];case 2:e=i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.DescartarBorradores=function(t){return v(this,void 0,void 0,function(){var n;return m(this,function(r){return t.preventDefault(),n=$("#dtResultados").find(".checkboxGuia:checked"),n.length<=0?(swal({text:"Debe seleccionar una Guia.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1]):(swal({html:"¿Está seguro de descartar las guias seleccionadas?",type:"warning",showCancelButton:!0,confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",buttonsStyling:!1,confirmButtonClass:"btn btn-default",cancelButtonClass:"btn btn-warning"}).then(function(){b.DescartarBorradoresAsincrono(n),setTimeout(function(){g.ajax.reload(),swal({text:"Se descartó las guias seleccionadas.",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success"})},1e3)},function(t){}),[2])})})},t}();h=p([r.i(a.Component)({selector:"guiaproveedorbuscar-cmp",template:r("./src/app/guia/proveedor/buscar/guiaproveedorbuscar.component.html"),providers:[s.a,l.a,d.a]}),f("design:paramtypes",["function"==typeof(y=void 0!==e.c&&e.c)&&y||Object,"function"==typeof(x=void 0!==e.b&&e.b)&&x||Object,"function"==typeof(w=void 0!==l.a&&l.a)&&w||Object,"function"==typeof(C=void 0!==s.a&&s.a)&&C||Object,"function"==typeof(B=void 0!==d.a&&d.a)&&B||Object,"function"==typeof(D=void 0!==a.ChangeDetectorRef&&a.ChangeDetectorRef)&&D||Object])],h);var y,x,w,C,B,D},"./src/app/guia/proveedor/formulario/guiaproveedorformulario.component.html":function(t,n){t.exports='<div class="main-content">\r\n  <div class="container-fluid">\r\n    <div class="row">\r\n      <div class="col-sm-12">\r\n        <div class="card">\r\n          <form method="#" action="#">\r\n            <div class="card-header card-header-text" data-background-color="blue">\r\n              <h4 class="card-title">Guía</h4>\r\n            </div>\r\n            <div class="card-content">\r\n              <div class="card-header">\r\n                <h4 class="card-title">Datos Generales</h4>\r\n              </div>\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="row">\r\n                      <div class="col-sm-5">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">Serie  <span class="star">*</span></label>\r\n                          <input type="text" name="nroguia1" id="nroguia1" pattern="[a-zA-Z0-9\\s]+" [disabled]="toggleButton" maxlength="4" [(ngModel)]="guia.nroguia1" class="form-control">\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-7">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">N° Correlativo<span class="star">*</span></label>\r\n                          <input type="text" name="nroguia2" id="nroguia2" pattern="[a-zA-Z0-9\\s]+" [disabled]="toggleButton" maxlength="8" [(ngModel)]="guia.nroguia2" class="form-control">\r\n\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                \r\n\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Organización Compradora <span class="star">*</span>\r\n                              </label>\r\n                      <input name="razonsocialcliente" type="text" [disabled]="true" [(ngModel)]="guia.razonsocialcliente" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Organización Proveedora \r\n                          </label>\r\n                      <input name="razonsocialproveedor" type="text" disabled [(ngModel)]="guia.razonsocialproveedor" class="form-control">\r\n                    </div>\r\n                  </div>\r\n\r\n\r\n\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="row">\r\n                      <div class="col-sm-8">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">RUC Organización Compradora <span class="star">*</span>\r\n                              </label>\r\n                          <input name="ruccliente" type="text" [disabled]="true" [(ngModel)]="guia.ruccliente" class="form-control">\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-4">\r\n                        <button data-toggle="modal" *ngIf="esBorrador==\'1\' || id==\'0\'" data-target="#mdlBuscarCliente" class="btn btn-fill btn-default" (click)="buscarCliente(event)" \r\n                          [disabled]="toggleButton">Buscar</button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">RUC Organización Proveedora\r\n                      </label>\r\n                      <input name="rucproveedor" disabled type="text" [(ngModel)]="guia.rucproveedor" class="form-control">\r\n                    </div>\r\n                  </div>\r\n\r\n\r\n                </div>\r\n                <div class="row">\r\n\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Motivo de Guía <span class="star">*</span>\r\n                                          </label>\r\n                      <select id="motivoguia" name="motivoguia" class="form-control" [(ngModel)]="guia.motivoguia" [disabled]="toggleButton">\r\n                                            <option value=""></option>\r\n                                            <option *ngFor="let opt of listMotivoGuiaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                                          </select>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\x3c!--*ngIf="this.id!=\'0\'"  dentro de class--\x3e\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Número ERP de Documento Material \r\n                                          </label>\r\n                      <input name="nroerpdocmaterial" type="text" disabled [(ngModel)]="guia.nroerpdocmaterial" class="form-control">\r\n                    </div>\r\n                  </div>\r\n\r\n\r\n                  <div class="col-sm-4" >\x3c!--*ngIf="this.id!=\'0\'"  dentro de class--\x3e\r\n                    <div class="form-group label-floating">\r\n                        <label class="control-label">Estado Web</label>\r\n                        <select id="estado" [(ngModel)]="guia.estado" name="estado" class="form-control" [disabled]="toggleButton">\r\n                            <option Value=""></option>\r\n                            <option *ngFor="let opt of listEstadoCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha de Emisión <span class="star">*</span>\r\n                          </label>\r\n                      <input name="fechaemision" [(ngModel)]="guia.fechaemision" disabled datepicker type="text" class="form-control toggleButton">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha de Inicio de Traslado  <span class="star">*</span>\r\n                          </label>\r\n                      <input name="fechainiciotraslado" [(ngModel)]="guia.fechainiciotraslado" disabled datepicker type="text" class="form-control toggleButton">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha Probable de Arribo  <span class="star">*</span>\r\n                            </label>\r\n                      <input name="fechaprobablearribo" [(ngModel)]="guia.fechaprobablearribo" disabled datepicker type="text" class="form-control toggleButton">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="row">\r\n                  <div class="col-sm-12">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Observaciones\r\n                      </label>\r\n                      <textarea name="observaciones" id="observaciones" [(ngModel)]="guia.observaciones" maxlength="500" class="form-control" [disabled]="toggleButton"></textarea>\r\n                      <span class="help-block" id="lblDescLength">500 caracteres máximo (0)</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div *ngIf="guia.motivorechazosap" class="row" >\r\n                  <div class="col-sm-12">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Motivo Rechazo SAP\r\n                      </label>\r\n                      <textarea style="color:red;" name="motivorechazosap" id="motivorechazosap" [(ngModel)]="guia.motivorechazosap" maxlength="200" class="form-control" [disabled]="toggleButton"></textarea>\r\n                      <span class="help-block" id="lblMotRzoSAP">200 caracteres máximo (0)</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n              <div class="card-header">\r\n                <h4 class="card-title">Datos Transportista</h4>\r\n              </div>\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="row">\r\n                      <div class="col-sm-5">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">Tipo Documento</label>\r\n                          <select id="tipodoctransporte" name="tipodoctransporte" [(ngModel)]="guia.tipodoctransporte" class="form-control" [disabled]="toggleButton">\r\n                            <option Value=""></option>\r\n                            <option *ngFor="let opt of listTipoDocIdentidad" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                            \r\n                          </select>\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-7">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">N° Documento</label>\r\n                          <input type="text" id="rucdnitransporte" name="rucdnitransporte" class="form-control" [(ngModel)]="guia.rucdnitransporte"\r\n                            value="" [disabled]="toggleButton">\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Razon Social / Nombre\r\n                      </label>\r\n                      <input name="razonsocialnombretransporte" type="text" class="form-control" [(ngModel)]="guia.razonsocialnombretransporte"\r\n                        [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">N° Placa</label>\r\n                      <input type="text" name="placatransporte" class="form-control" [(ngModel)]="guia.placatransporte" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Dirección\r\n                      </label>\r\n                      <input name="direcciontransporte" type="text" class="form-control" [(ngModel)]="guia.direcciontransporte" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Código de Reg. MTC</label>\r\n                      <input type="text" name="codigomtctransporte" class="form-control" [(ngModel)]="guia.codigomtctransporte" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Tipo Transporte\r\n                      </label>\r\n                      <select id="tipotransporte" name="tipotransporte" [(ngModel)]="guia.tipotransporte" class="form-control" [disabled]="toggleButton">\r\n                        <option Value=""></option>\r\n                        <option *ngFor="let opt of listTransporteGuiaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="card-header">\r\n                <h4 class="card-title">Datos de la Carga</h4>\r\n              </div>\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Punto Partida</label>\r\n                      <input type="text" name="puntopartida" class="form-control" [(ngModel)]="guia.puntopartida" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Punto LLegada</label>\r\n                      <input type="text" name="puntollegada" class="form-control" [(ngModel)]="guia.puntollegada" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Almancén Destino</label>\r\n                      <input type="text" name="alamcendestino" class="form-control" [(ngModel)]="guia.alamcendestino" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Total Bultos</label>\r\n                      <input type="text" name="totalbultos" class="form-control" [(ngModel)]="guia.totalbultos" [disabled]="toggleButton">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="row">\r\n                      <div class="col-sm-9">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">Total Volúmen</label>\r\n                          <input type="text" name="totalvolumen" [(ngModel)]="guia.totalvolumen" class="form-control" value="" [disabled]="toggleButton">\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-3">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label"></label>\r\n                          <select id="totalvolumenund" name="totalvolumenund" class="form-control" [(ngModel)]="guia.totalvolumenund" [disabled]="toggleButton">\r\n                            <option Value=""></option>\r\n                            <option *ngFor="let opt of listUnidadMedidaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                          </select>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="row">\r\n                      <div class="col-sm-9">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">Total Peso Bruto</label>\r\n                          <input type="text" name="totalpesobruto" [(ngModel)]="guia.totalpesobruto" class="form-control" [disabled]="toggleButton">\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-3">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label"></label>\r\n                          <select id="totalpesobrutound" name="totalpesobrutound" [(ngModel)]="guia.totalpesobrutound" class="form-control toggleButton">\r\n                            <option Value=""></option>\r\n                            <option *ngFor="let opt of listUnidadMedidaPesoCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                          </select>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="row">\r\n                      <div class="col-sm-9">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">Tara</label>\r\n                          <input type="text" name="tara" class="form-control" [(ngModel)]="guia.tara" [disabled]="toggleButton">\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-3">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label"></label>\r\n                          <select name="totalpesobrutound" [(ngModel)]="guia.totalpesobrutound" class="form-control toggleButton" disabled>\r\n                            <option Value=""></option>\r\n                            <option *ngFor="let opt of listUnidadMedidaPesoCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                          </select>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="row">\r\n                      <div class="col-sm-9">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">Total Peso Neto</label>\r\n                          <input type="text" name="totalpesoneto" class="form-control" [(ngModel)]="guia.totalpesoneto" [disabled]="toggleButton">\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-3">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label"></label>\r\n                          <select name="totalpesobrutound" [(ngModel)]="guia.totalpesobrutound" class="form-control toggleButton" disabled>\r\n                            <option Value=""></option>\r\n                            <option *ngFor="let opt of listUnidadMedidaPesoCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                          </select>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="card">\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n                <div class="card-content">\r\n                  <h4 class="card-title">Detalle de Artículos</h4>\r\n                  <div class="toolbar" *ngIf="toggleButton==false">\r\n                    <div class="row">\r\n                      <div class="col-sm-12">\r\n                        <nav class="navbar navbar-info" role="navigation">\r\n                          <div class="container-fluid">\r\n                            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\r\n                             \r\n                            </div>\r\n                          </div>\r\n                        </nav>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="row"  *ngIf="toggleButton==false">\r\n                    <div class="col-sm-7">\r\n                    </div>\r\n                    <div class="col-sm-5">\r\n                      <div class="form-group form-group-without-margin">\r\n                          <button id="btnEliminarItemOC" class="btn btn-default pull-right" (click)="eliminarArticulos($event)">Eliminar</button>\r\n                        <button id="btnAgregarItemOC" class="btn btn-default pull-right" (click)="AbrirAgregarOC($event)">Añadir Orden de Compra</button>\r\n                        \r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="material-datatables table-responsive" style="display:block">\r\n                    <table id="dtArticulos" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                      <thead>\r\n                        <tr>\r\n                            <th class="disabled-sorting text-right">\r\n                                <i class="material-icons" *ngIf="esBorrador==\'1\' || id==\'0\'">delete_forever</i><br *ngIf="esBorrador==\'1\' || id==\'0\'"/>\r\n                                <div class="checkbox text-right" *ngIf="esBorrador==\'1\' || id==\'0\'">\r\n                                    <label><input type="checkbox" name="optionsCheckboxes" class="checkall" ></label>\r\n                                </div>\r\n                            </th>\r\n\r\n                          <th>N° Item</th>\r\n                          <th>N° OC</th>\r\n                          <th>N° Item OC</th>\r\n                          <th>Código de Producto</th>\r\n                          <th>Descripción del Producto</th>                                          \r\n                          <th>Und. de Medida del Pedido</th>\r\n                          <th>Cantidad del Pedido</th>                         \r\n                          <th>Cantidad Recibida</th>\r\n                          <th>Cantidad Despachada<span class="star"  *ngIf="!toggleButton">*</span></th>\r\n                          <th>Und. de Medida de Despacho<span class="star"  *ngIf="!toggleButton">*</span></th>   \r\n                          <th>Estado</th>\r\n\r\n                        </tr>\r\n                      </thead>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class="row">\r\n                <div class="col-md-12">\r\n                  <div class="card">\r\n                    <div class="card-header card-header-icon" data-background-color="blue">\r\n                      <i class="material-icons">assignment</i>\r\n                    </div>\r\n                    <div class="card-content">\r\n                      <h4 class="card-title">Archivos Adjuntos</h4>\r\n                      <div class="toolbar" [hidden]="toggleButton">\r\n                        <div class="row">\r\n                          <div class="col-sm-12">\r\n                            <nav class="navbar navbar-info" role="navigation">\r\n                              <div class="container-fluid">\r\n                                <div class="navbar-header">\r\n                                  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">\r\n                                            <span class="sr-only">Acciones</span>\r\n                                            <span class="icon-bar"></span>\r\n                                            <span class="icon-bar"></span>\r\n                                            <span class="icon-bar"></span>\r\n                                        </button>\r\n                                  <a class="navbar-brand disabled"></a>\r\n                                </div>\r\n                                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\r\n                                  \r\n                                </div>\r\n                              </div>\r\n                            </nav>\r\n\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div class="row"  [hidden]="toggleButton">\r\n                          <div class="col-sm-8">\r\n                          </div>\r\n                          <div class="col-sm-4">\r\n                            <div class="form-group form-group-without-margin">\r\n                                \r\n                              <button  class="btn btn-default pull-right" data-toggle="modal" (click)="agregarArchivo($event)" data-target="#mdlArchivosAdjuntos">Agregar</button>\r\n                              <button  class="btn btn-default pull-right" (click)="eliminarArchivos($event)">Eliminar</button>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      <div class="material-datatables table-responsive">\r\n                        <table id="dtArchivos" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                          <thead>\r\n                            <tr>\r\n                              <th class="disabled-sorting text-right">\r\n                                <div class="checkbox text-right" *ngIf="esBorrador==\'1\' || id==\'0\'">\r\n                                  <label><input type="checkbox" name="optionsCheckboxes" class="checkall" ></label>\r\n                                </div>\r\n                              </th>\r\n                              <th width="20%">Nombre</th>\r\n                              <th width="60%">Descripción</th>\r\n                              <th class="disabled-sorting text-center" width="20%">Acciones</th>\r\n                            </tr>\r\n                          </thead>\r\n\r\n\r\n                        </table>\r\n                      </div>\r\n                    </div>\r\n                    \x3c!-- end content--\x3e\r\n                  </div>\r\n                  \x3c!--  end card  --\x3e\r\n                </div>\r\n                \x3c!-- end col-md-12 --\x3e\r\n              </div>\r\n            </div>\r\n            <div class="card-footer">\r\n\r\n\r\n              <button class="btn btn-fill btn-default pull-right" routerLink="/guia/proveedor/buscar">Regresar</button>\r\n              <button class="btn btn-fill btn-default pull-right" [disabled]="!botonImprimir.habilitado" *ngIf="botonImprimir.visible && id!==\'0\'" (click)="print($event)">{{botonImprimir.Titulo}}</button>\r\n              <button class="btn btn-fill btn-default pull-right" [disabled]="!botonEnviar.habilitado || toggleButton" *ngIf="botonEnviar.visible && (esBorrador==\'1\' || id==\'0\')" (click)="enviarGuia($event)">{{botonEnviar.Titulo}}</button>\r\n              <button class="btn btn-fill btn-default pull-right" [disabled]="!botonGuardar.habilitado || toggleButton" (click)="guardarGuia($event)"\r\n                *ngIf="botonGuardar.visible && (esBorrador==\'1\' || id==\'0\')">{{botonGuardar.Titulo}}</button>\r\n              <button type="button" class="btn btn-fill btn-default pull-right" (click)="descartarBorrador($event)" *ngIf="botonDescartar.visible && (id!==\'0\' && esBorrador==\'1\')"\r\n                [disabled]="!botonDescartar.habilitado || toggleButton">{{botonDescartar.Titulo}}</button>\r\n              <button (click)="habilitarEdicion($event)" class="btn btn-fill btn-default pull-right" *ngIf="botonEdicion.visible && (id!==\'0\' && esBorrador==\'1\')" [disabled]="!botonEdicion.habilitado">{{botonEdicion.Titulo}}</button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div id="mdlAtributosLista" class="modal fade" tabindex="-1" role="dialog">\r\n    <div class="modal-dialog" role="document">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n              </td>\r\n              <td class="cell-title">\r\n                <div class="card-content">\r\n                  <h4 class="card-title modal-title">Atributos del Detalle</h4>\r\n\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </div>\r\n        <div class="modal-body">\r\n\r\n          <div class="card-content">\r\n            <div class="row">\r\n              <div class="col-sm-6">\r\n                <div class="form-group label-floating">\r\n                  <label class="control-label">Nro. Item\r\n                          <span class="star"></span>\r\n                        </label>\r\n                  <input name="nroitem" [(ngModel)]="producto.nroitem" required type="text" class="form-control" [disabled]="toggleButton">\r\n                </div>\r\n              </div>\r\n              <div class="col-sm-6">\r\n                <div class="form-group label-floating">\r\n                  <label class="control-label">Descripción del Producto\r\n                          <span class="star"></span>\r\n                        </label>\r\n                  <input name="descproducto" [(ngModel)]="producto.descproducto" required type="text" class="form-control" [disabled]="toggleButton">\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="material-datatables table-responsive">\r\n            <table id="dtAtributos" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n              <thead>\r\n                <tr>\r\n\r\n                  <th>Nombre</th>\r\n                  <th>Operador</th>\r\n                  <th>Valor</th>\r\n                  <th>Unidad</th>\r\n\r\n\r\n                </tr>\r\n              </thead>\r\n\r\n\r\n            </table>\r\n          </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>\r\n\r\n        </div>\r\n      </div>\r\n      \x3c!-- /.modal-content --\x3e\r\n    </div>\r\n    \x3c!-- /.modal-dialog --\x3e\r\n  </div>\r\n  <div id="mdlBuscarCliente" class="modal fade" tabindex="-1" role="dialog">\r\n    <div class="modal-dialog modal-lg" role="document">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n\r\n\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n              </td>\r\n              <td class="cell-title">\r\n                <div class="card-content">\r\n                  <h4 class="card-title modal-title">Buscar Organización Compradora</h4>\r\n\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </div>\r\n        <div class="modal-body">\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Nombre de Organización Compradora</label>\r\n                <input type="text" id="txtBuscarNroOC" name="txtBuscarNroOC" [(ngModel)]="filtroCliente.razonsocial" class="form-control"\r\n                  value="" [disabled]="toggleButton">\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n\r\n            <div class="col-sm-9">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">RUC</label>\r\n                <input type="text" id="txtBuscarCodCliente" [(ngModel)]="filtroCliente.ruc" name="txtBuscarCodCliente" class="form-control"\r\n                  value="" [disabled]="toggleButton">\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-3">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label"></label>\r\n                <button type="button" class="btn btn-default" (click)="buscarClienteDT($event)">Buscar</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="material-datatables table-responsive">\r\n                <table id="dtBuscarCliente" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                  <thead>\r\n                    <tr>\r\n                      <th class="disabled-sorting text-right">\r\n\r\n                      </th>\r\n                      <th style="width:50%">Nombre de Organización Compradora</th>\r\n                      <th style="width:50%">RUC</th>\r\n                    </tr>\r\n                  </thead>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n          <button type="button" class="btn btn-default" (click)="SeleccionarCliente($event)" [disabled]="btnSeleccionar">Seleccionar</button>\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>\r\n        </div>\r\n      </div>\r\n      \x3c!-- /.modal-content --\x3e\r\n    </div>\r\n    \x3c!-- /.modal-dialog --\x3e\r\n  </div>\r\n  <div id="mdlOrdenesCompra" class="modal fade" tabindex="-1" role="dialog">\r\n    <div class="modal-dialog modal-lg" role="document">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n\r\n\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n              </td>\r\n              <td class="cell-title">\r\n                <div class="card-content">\r\n                  <h4 class="card-title modal-title">Buscar Orden de Compra</h4>\r\n\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </div>\r\n        <div class="modal-body">\r\n          <div class="row">\r\n            <div class="col-sm-6">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Nro. O.C.</label>\r\n                <input type="text" name="nroordencompra" class="form-control" [(ngModel)]="filtrooc.nroordencompra" [disabled]="toggleButton">\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-6" >\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Estado</label>\r\n                <select name="estado" class="form-control" [(ngModel)]="filtrooc.estado" disabled>\r\n      \r\n\r\n                  <option value="NONE">TODOS</option>\r\n                  <option *ngFor="let optEstado of listEstadoOCCombo" value="{{optEstado.valor}}"> {{optEstado.desc}} </option>           \r\n\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-sm-5">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Creada/Enviada después de</label>\r\n\r\n                <input type="text" [(ngModel)]="filtrooc.fechacreacioninicio" name="fechacreacioninicio" class="form-control" datepicker\r\n                />\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-5">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Creada/Enviada antes de</label>\r\n\r\n                <input type="text" [(ngModel)]="filtrooc.fechacreacionfin" name="fechacreacionfin" class="form-control" datepicker />\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-2">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label"></label>\r\n                <button type="button" class="btn btn-default" (click)="BuscarOCClick($event)">Buscar</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="material-datatables table-responsive">\r\n                <table id="dtBuscarOC" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                  <thead>\r\n                    <tr>\r\n                      <th class="disabled-sorting text-right">\r\n                        <div class="checkbox text-right">\r\n                          <label><input type="checkbox" name="optionsCheckboxes" class="checkall" ></label>\r\n                        </div>\r\n                      </th>\r\n                      <th style="width:10%">Nro. O.C.</th>\r\n                      <th style="width:15%">Organización Compradora</th>\r\n                      <th style="width:15%">Usuario Comprador</th>\r\n                      <th style="width:10%">Atención A</th>\r\n                      <th style="width:10%">Estado</th>\r\n                      <th style="width:10%">Versión</th>\r\n                      <th style="width:10%">Total</th>\r\n                      <th style="width:10%">Fecha Creación</th>\r\n                    </tr>\r\n                  </thead>\r\n\r\n\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n          <button type="button" class="btn btn-default" (click)="AgregarArticulosOC($event)" [disabled]="btnSeleccionar">Añadir</button>\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>\r\n        </div>\r\n      </div>\r\n      \x3c!-- /.modal-content --\x3e\r\n    </div>\r\n    \x3c!-- /.modal-dialog --\x3e\r\n  </div>\r\n\r\n  <div id="mdlArchivosAdjuntos" class="modal fade" tabindex="-1" role="dialog">\r\n    <div class="modal-dialog" role="document">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n\r\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n\r\n\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n              </td>\r\n              <td class="cell-title">\r\n                <div class="card-content">\r\n                  <h4 class="card-title modal-title">Archivo Adjunto</h4>\r\n                  \x3c!--<h4 class="modal-title">Archivo Adjunto</h4>--\x3e\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </div>\r\n        <div class="modal-body">\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="form-group">\r\n                <div class="fileinput fileinput-new input-group" data-provides="fileinput">\r\n                  <div class="form-control" data-trigger="fileinput">\r\n                    <i class="material-icons fileinput-exists">attach_file</i>\r\n                    <span class="fileinput-filename"></span>\r\n                  </div>\r\n                  <span class="input-group-addon btn btn-default btn-file">\r\n                      <span class="fileinput-new">Seleccionar Archivo</span>\r\n                  <span class="fileinput-exists">Seleccionar Archivo</span>\r\n                  <input type="file" name="..." (change)="onChangeFile($event)" id="txtArchivo">\r\n                  <a href="#" class="input-group-addon btn btn-default fileinput-exists" style="display:none" data-dismiss="fileinput" id="btnEliminarAA">Remover</a>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n\r\n            <div class="col-sm-12">\r\n              <div class="form-group label-floating">\r\n                <textarea name="descripcion" placeholder="Descripción" [(ngModel)]="archivo.descripcion" class="form-control" rows="4" [disabled]="toggleButton"></textarea>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n        <div class="row" *ngIf="ProgressUpload">\r\n          <div class="col-sm-4">\r\n          </div>\r\n          <div class="col-sm-4">\r\n            <img src="assets/img/progress.gif" style="padding:0; margin:0; border:0">\r\n\r\n          </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n          \r\n          <button type="button" class="btn btn-default" (click)="grabarArchivoAdjunto()" [disabled]="ProgressUpload">Adjuntar</button>\r\n          <button type="button" class="btn btn-default" data-dismiss="modal" [disabled]="ProgressUpload">Cerrar</button>\r\n        </div>\r\n      </div>\r\n      \x3c!-- /.modal-content --\x3e\r\n    </div>\r\n    \x3c!-- /.modal-dialog --\x3e\r\n  </div>\r\n</div>\r\n\r\n\r\n<div style="display:none">\r\n\r\n  <div id="print-section-guia" style=\'font-family: Arial, Helvetica, sans-serif;color: #000;font-size: 12px;\'>\r\n    <table width="100%" cellpadding="0" cellspacing="0" align="center" bgcolor="#ffffff" style=\'font-family: Arial, Helvetica, sans-serif;color: #000;font-size: 12px;\'>\r\n      <tbody>\r\n        <tr>\r\n          <td align="center">\r\n\r\n\r\n            <table width="900" cellpadding="0" cellspacing="0" border="0" bgcolor="#fff">\r\n              <tbody>\r\n                <tr>\r\n                  <td colspan="2" bgcolor="#fff" align="left" valign="middle">\r\n                    <img src="{{this.baseurl}}assets/img/faces/centenario.png" width="250" style="padding:0; margin:0; border:0; display:none">\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="top" style="font-size: 20px">\r\n                    <b>Guía de Materiales  {{this.guia.nroguia}}</b><br><br>\r\n                  </td>\r\n                </tr>\r\n\r\n\r\n\r\n\r\n              </tbody>\r\n            </table>\r\n\r\n            <table width="900" class="print-table" cellpadding="5" border=\'0\' style="border:1px solid #999;border-collapse: collapse;"\r\n              cellspacing="0" bgcolor="#fff">\r\n              <tbody>\r\n\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 18px">\r\n                    <b>Datos Generales</b>\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;width: 50%">\r\n                    <b>Organización Compradora:</b><br> {{this.guia.razonsocialcliente}}\r\n                  </td>\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;width: 50%">\r\n                    <b>Organización Proveedora:</b><br> {{this.guia.razonsocialproveedor}}\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>RUC Organización Compradora:</b><br> {{this.guia.ruccliente}}\r\n                  </td>\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>RUC Organización Proveedora:</b><br> {{this.guia.rucproveedor}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Motivo de Guía:</b><br> {{this.guia.motivoguia_text}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Numero ERP Documento de Material:</b><br> {{this.guia.nroerpdocmaterial}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Estado Guía:</b><br> {{this.guia.estado_text}}\r\n                  </td>\r\n                </tr>\r\n\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Fecha de Emisión:</b><br> {{this.guia.fechaemision}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Fecha de Inicio de Traslado:</b><br> {{this.guia.fechainiciotraslado}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Fecha Probable de Arribo:</b><br> {{this.guia.fechaprobablearribo}}\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Observaciones:</b><br> {{this.guia.observaciones}}\r\n                  </td>\r\n                </tr>\r\n                <tr *ngIf="guia.motivorechazosap" style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Motivo Rechazo SAP:</b><br> {{this.guia.motivorechazosap}}\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 18px">\r\n                    <b>Datos del Transportista</b>\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="3" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Tipo de Documento:</b><br> {{this.guia.tipodoctransporte_text}}\r\n                  </td>\r\n                  <td colspan="3" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Nro. Documento:</b><br> {{this.guia.rucdnitransporte}}\r\n                  </td>\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Razón Social/Nombre:</b><br> {{this.guia.razonsocialnombretransporte}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Nro. Placa:</b><br> {{this.guia.placatransporte}}\r\n                  </td>\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Dirección:</b><br> {{this.guia.direcciontransporte}}\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Código Reg. de MTC:</b><br> {{this.guia.codigomtctransporte}}\r\n                  </td>\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Tipo de Transporte:</b><br> {{this.guia.tipotransporte_text}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 18px">\r\n                    <b>Datos de la Carga</b>\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Punto de Partida:</b><br> {{this.guia.puntopartida}}\r\n                  </td>\r\n                  <td colspan="6" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Punto de Llegada:</b><br> {{this.guia.puntollegada}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Almacen Destino:</b><br> {{this.guia.alamcendestino}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Total Bultos:</b><br> {{this.guia.totalbultos}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Total Volumen:</b><br> {{this.guia.totalvolumen}}{{this.guia.totalvolumenund_text}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Total Peso Bruto:</b><br> {{this.guia.totalpesobruto}}{{this.guia.totalpesobrutound_text}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Tara:</b><br> {{this.guia.tara}}{{this.guia.totalpesobrutound_text}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Total Peso Neto:</b><br> {{this.guia.totalpesoneto}}{{this.guia.totalpesobrutound_text}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 18px">\r\n                    <b>Detalle de los Artículos</b>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n\r\n              <tr style="border:1px solid #999;">\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>No. Item</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>No. OC</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>No. Item OC</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Código de Producto</b>\r\n                </td>\r\n                <td colspan="2" bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Descripción del Producto</b>\r\n                </td>\r\n\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Und. de Medida del Pedido</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Cantidad del Pedido</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Cantidad Recibida</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Cantidad Despachada</b>\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Und. de Medida de Despacho</b>\r\n                </td>\r\n\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  <b>Estado</b>\r\n                </td>\r\n\r\n              </tr>\r\n              <tr *ngFor="let row of this.guia.articulos" ng-class="trhighlight">\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  {{row.nroitem}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.nrooc}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.nroitemoc}}\r\n                </td>\r\n                <td bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;">\r\n                  {{row.codproducto}}\r\n                </td>\r\n                <td colspan="2" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                  {{row.descproducto}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.unidadmedida}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.cantidadpedido}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.cantidadrecibida}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.cantidaddespachada}}\r\n                </td>\r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.unidadmedidadespacho}}\r\n                </td>\r\n              \r\n                <td bgcolor="#fff" align="right" valign="top" style="border:1px solid #999;">\r\n                  {{row.estado}}\r\n                </td>\r\n              </tr>\r\n           \r\n            </table>\r\n\r\n\r\n\r\n\r\n\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <br>\r\n\r\n  </div>\r\n</div>'},"./src/app/guia/proveedor/formulario/guiaproveedorformulario.component.ts":function(t,n,r){"use strict";function o(){B.listUnidadMedidaPesoCombo?i():setTimeout(function(){o()},200)}function a(){S=$("#dtBuscarCliente").DataTable({searching:!1,serverSide:!0,ajax:{beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+localStorage.getItem("access_token")),t.setRequestHeader("origen_datos","PEB2M"),t.setRequestHeader("tipo_empresa","P"),t.setRequestHeader("org_id",localStorage.getItem("org_id")),t.setRequestHeader("Ocp-Apim-Subscription-Key",localStorage.getItem("Ocp_Apim_Subscription_Key"))},url:x.v,dataSrc:"data",data:function(t){""!=B.filtroCliente.razonsocial&&(t.RazonSocial=B.filtroCliente.razonsocial),""!=B.filtroCliente.ruc&&(t.Ruc=B.filtroCliente.ruc),t.column_names="IdOrganizacion,RazonSocial,Ruc"}},columns:[{data:"IdOrganizacion"},{data:"RazonSocial"},{data:"Ruc"}],columnDefs:[{className:"text-center",targets:[1,2]},{render:function(t,n,r){return'<div class="text-right" height="100%"><div class="radio text-right"><label><input type="radio" name="optionsCheckboxes" class="checkboxCliente" ruc="'+r.Ruc+'" razonsocial="'+r.RazonSocial+'" value="'+r.IdOrganizacion+'"></label></div></div>'},targets:0}]})}function e(){_=$("#dtBuscarOC").on("init.dt",function(t,n,r){DatatableFunctions.initDatatable(t,n,r,_)}).DataTable({pageLength:5,order:[[8,"desc"],[1,"desc"]],searching:!1,serverSide:!0,ajax:{beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+localStorage.getItem("access_token")),t.setRequestHeader("origen_datos","PEB2M"),t.setRequestHeader("tipo_empresa","P"),t.setRequestHeader("org_id",localStorage.getItem("org_id")),t.setRequestHeader("Ocp-Apim-Subscription-Key",localStorage.getItem("Ocp_Apim_Subscription_Key"))},url:x.n,dataSrc:"data",data:function(t){if(""!=B.filtrooc.nroordencompra&&(t.NumeroOrden=B.filtrooc.nroordencompra),"NONE"!=B.filtrooc.nroordencompra&&(t.EstadoOrden=B.filtrooc.estado),B.filtrooc.fechacreacioninicio){var n=DatatableFunctions.ConvertStringToDatetime(B.filtrooc.fechacreacioninicio);t.FechaRegistroInicio=DatatableFunctions.FormatDatetimeForMicroService(n)}if(B.filtrooc.fechacreacionfin){var r=DatatableFunctions.AddDayEndDatetime(DatatableFunctions.ConvertStringToDatetime(B.filtrooc.fechacreacionfin));t.FechaRegistroFin=DatatableFunctions.FormatDatetimeForMicroService(r)}t.TipoOrden="M",t.org_idComprador=B.guia.idorgcompradora,t.column_names="CodigoOrden,NumeroOrden,Fecha,EstadoOrden,TipoOrden,AtencionA,NITComprador,UsuarioComprador,NombreComprador,NITVendedor,UsuarioProveedor,NombreVendedor,ValorTotal,MonedaOrden,FechaCreacion,NumeroRfq,Version,FechaRegistro"}},columns:[{data:"CodigoOrden",name:"CodigoOrden"},{data:"NumeroOrden",name:"NumeroOrden"},{data:"NombreComprador",name:"NombreComprador"},{data:"UsuarioComprador",name:"UsuarioComprador"},{data:"AtencionA",name:"AtencionA"},{data:"EstadoOrden",name:"EstadoOrden"},{data:"Version",name:"Version"},{data:"ValorTotal",name:"ValorTotal"},{data:"FechaRegistro",name:"FechaRegistro"}],columnDefs:[{className:"text-center",targets:[1,2,3,4,5,6,7,8]},{render:function(t,n,r){return'<div class="text-right" height="100%"><div class="checkbox text-right"><label><input type="checkbox" name="optionsCheckboxes" numOC="'+r.NumeroOrden+'" value="'+r.CodigoOrden+'" class="checkboxOC"></label></div></div>'},targets:0},{render:function(t,n,r){return DatatableFunctions.ParseFieldHtml(r.AtencionA)},targets:4},{render:function(t,n,r){return r.MonedaOrden+" "+DatatableFunctions.FormatNumber(r.ValorTotal)},targets:7}]})}function i(){O=$("#dtArticulos").on("init.dt",function(t,n,r){DatatableFunctions.initDatatable(t,n,r,O)}).DataTable({ajax:function(t,n,r){n({data:B.guia.articulos})},columns:[{data:"nroitem"},{data:"nroitem"},{data:"nrooc"},{data:"nroitemoc"},{data:"codproducto"},{data:"descproducto"},{data:"unidadmedida"},{data:"cantidadpedido"},{data:"cantidadrecibida"},{data:"cantidaddespachada"},{data:"unidadmedidadespacho"},{data:"estado"}],columnDefs:[{className:"text-center",targets:[1,2,3,4,5,6,7,8,9,10,11]},{render:function(t,n,r){return"1"==B.esBorrador||"0"==B.id?'<div class="text-right" height="100%"><div class="checkbox text-right"><label><input type="checkbox" value="'+r.nroitem+'" name="optionsCheckboxes" class="checkboxArticulos"></label></div></div>':""},targets:0},{render:function(t,n,r){return r.codproducto},targets:4},{render:function(t,n,r){return'<input name="cantidaddespachada" value="'+r.cantidadpedido+'" nroitem="'+r.nroitem+'" type="text" class="toggleButton cantidaddespachada'+r.nroitem+' cantidaddespachada form-control text-center dt-text" disabled>'},targets:9}]}),O.on("change",".cantidaddespachada",function(t){var n=$(this).attr("nroitem"),r=B.guia.articulos.find(function(t){return t.nroitem==n});r.cantidaddespachada=$(this).val(),$(".cantidaddespachada"+n).val(r.cantidaddespachada)}),O.on("change",".unidadmedidadespacho",function(t){var n=$(this).attr("nroitem"),r=B.guia.articulos.find(function(t){return t.nroitem==n});r.unidadmedidadespacho=$(this).val(),$(".unidadmedidadespacho"+n).val(r.unidadmedidadespacho)}),O.on("click",".atributos",function(t){var n=$(this).closest("tr"),r=n.find("a").attr("row-id"),o=B.guia.articulos.find(function(t){return t.nroitem==r});B.producto=o,setTimeout(function(){D.ajax.reload(),$("#mdlAtributosLista").modal("show"),$("input").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),$("select").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),$("textarea").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")})},500),t.preventDefault()}),O.on("click",".remove",function(t){var n=$(this).closest("tr"),r=n.find("a").attr("row-id");swal({text:"¿Desea eliminar el artículo seleccionado?",type:"warning",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No",buttonsStyling:!1,confirmButtonClass:"btn btn-default",cancelButtonClass:"btn btn-warning"}).then(function(){var t=B.guia.articulos,n=t.filter(function(t){return t.nroitem!=r});B.guia.articulos=JSON.parse(JSON.stringify(c(n))),setTimeout(function(){O.ajax.reload()},500)},function(t){}),t.preventDefault()}),D=$("#dtAtributos").DataTable({ajax:function(t,n,r){n({data:B.producto.atributos})},columns:[{data:"nombre"},{data:"operador"},{data:"valor"},{data:"unidad"}],columnDefs:[{className:"text-center",targets:[0,1,2,3]}]}),l()}function l(){B.toggleButton||setTimeout(function(){if(O){O.column(0).visible(!0)}},200)}function s(){B.toggleButton||setTimeout(function(){if(A){A.column(0).visible(!0)}},200)}function c(t){for(var n=1,r=0,o=t;r<o.length;r++){o[r].nroitem=n++}return t}var d=r("./node_modules/@angular/router/@angular/router.es5.js"),u=r("./node_modules/@angular/core/@angular/core.es5.js"),b=r("./src/app/model/guia.ts"),g=r("./src/app/model/archivo.ts"),p=r("./src/app/service/masterservice.ts"),f=r("./src/app/service/guiaservice.ts"),v=r("./src/app/service/ordencompraservice.ts"),m=r("./src/app/service/adjuntoservice.ts"),h=r("./src/app/utils/app.utils.ts"),y=r("./src/assets/js/plugins/jquery.PrintArea.js"),x=(r.n(y),r("./src/app/utils/app.constants.ts")),w=r("./src/app/service/login.service.ts"),C=r("./src/app/model/menu.ts");r.d(n,"a",function(){return k});var B,D,S,O,_,A,M,F=this&&this.__decorate||function(t,n,r,o){var a,e=arguments.length,i=e<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,n,r,o);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(i=(e<3?a(i):e>3?a(n,r,i):a(n,r))||i);return e>3&&i&&Object.defineProperty(n,r,i),i},E=this&&this.__metadata||function(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)},T=this&&this.__awaiter||function(t,n,r,o){return new(r||(r=Promise))(function(a,e){function i(t){try{s(o.next(t))}catch(t){e(t)}}function l(t){try{s(o.throw(t))}catch(t){e(t)}}function s(t){t.done?a(t.value):new r(function(n){n(t.value)}).then(i,l)}s((o=o.apply(t,n||[])).next())})},R=this&&this.__generator||function(t,n){function r(t){return function(n){return o([t,n])}}function o(r){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,e&&(i=e[2&r[0]?"return":r[0]?"throw":"next"])&&!(i=i.call(e,r[1])).done)return i;switch(e=0,i&&(r=[0,i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,e=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=n.call(t,s)}catch(t){r=[6,t],e=0}finally{a=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var a,e,i,l,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},k=function(){function t(t,n,r,o,a,e,i,l){this.router=n,this._masterService=r,this._dataServiceAdjunto=o,this._dataService=a,this._dataServiceOC=e,this._securityService=i,this.cdRef=l,this.id="0",this.esBorrador="0",this.id_doc="",this.toggleButton=!0,this.ProgressUpload=!1,this.btnSeleccionar=!1,this.botonImprimir=new C.a,this.botonEdicion=new C.a,this.botonDescartar=new C.a,this.botonGuardar=new C.a,this.botonEnviar=new C.a,this.url_main_module_page="/guia/proveedor/buscar",this.filtroOCDefecto(),this.filtroClienteDefecto(),this.activatedRoute=t,this.util=new h.a(this.router,this._masterService),this.guia=new b.a,this.guiaOriginal=new b.a,this.archivo=new g.a,this.producto=new b.b,this.baseurl=$("#baseurl").attr("href")}return t.prototype.navigate=function(t){this.router.navigate(t,{relativeTo:this.activatedRoute})},t.prototype.obtenerBotones=function(){var t=this,n=this._securityService.ObtenerBotonesCache(this.url_main_module_page);n?(console.log("ObtenerBotonesCache",n),this.configurarBotones(n)):this._securityService.obtenerBotones(this.url_main_module_page).subscribe(function(n){console.log("obtenerBotones",n),B.configurarBotones(n),B._securityService.guardarBotonesLocalStore(t.url_main_module_page,n)},function(t){return console.log(t)},function(){})},t.prototype.configurarBotones=function(t){t&&t.length>0&&(this.botonImprimir=t.find(function(t){return"imprimir"===t.nombre})?t.find(function(t){return"imprimir"===t.nombre}):this.botonImprimir,this.botonDescartar=t.find(function(t){return"descartarborrador"===t.nombre})?t.find(function(t){return"descartarborrador"===t.nombre}):this.botonDescartar,this.botonEdicion=t.find(function(t){return"habilitaredicion"===t.nombre})?t.find(function(t){return"habilitaredicion"===t.nombre}):this.botonEdicion,this.botonEnviar=t.find(function(t){return"enviar"===t.nombre})?t.find(function(t){return"enviar"===t.nombre}):this.botonEnviar,this.botonGuardar=t.find(function(t){return"guardar"===t.nombre})?t.find(function(t){return"guardar"===t.nombre}):this.botonGuardar)},t.prototype.print=function(t){B.guia.motivoguia_text=$("#motivoguia option:selected").text(),B.guia.estado_text=$("#estado option:selected").text(),B.guia.tipodoctransporte_text=$("#tipodoctransporte option:selected").text(),B.guia.tipotransporte_text=$("#tipotransporte option:selected").text(),B.guia.totalvolumenund_text=$("#totalvolumenund option:selected").text(),B.guia.totalpesobrutound_text=$("#totalpesobrutound option:selected").text(),setTimeout(function(){$("div#print-section-guia").printArea({popTitle:"GUIA",mode:"iframe",popClose:!1})},200)},t.prototype.validardatos=function(t,n){return void 0===n&&(n=!1),T(this,void 0,void 0,function(){var t,r,o,a,e,i,l,s,c;return R(this,function(d){switch(d.label){case 0:if(""==this.guia.nroguia.trim()||"-"==this.guia.nroguia.trim())return swal({text:"Nro. Guia es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];if(t=/^[a-z0-9]+$/i,r=this.guia.nroguia1.trim()+this.guia.nroguia2.trim(),!t.test(r))return swal({text:"Nro. Guia solo puede contener caracteres alfanuméricos.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];if(null==this.guia.razonsocialcliente||""==this.guia.razonsocialcliente.trim())return swal({text:"Organización Compradora es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];if(null==this.guia.ruccliente||""==this.guia.ruccliente.trim())return swal({text:"RUC Organización Compradora es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];if(null==this.guia.motivoguia||""==this.guia.motivoguia.trim())return swal({text:"Motivo Guia es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];if(null==this.guia.fechaemision||""==this.guia.fechaemision.toString())return swal({text:"Fecha Emisión es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];if(null==this.guia.fechainiciotraslado||""==this.guia.fechainiciotraslado.toString())return swal({text:"Fecha Traslado es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];if(null==this.guia.fechaprobablearribo||""==this.guia.fechaprobablearribo.toString())return swal({text:"Fecha Probable Arribo es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];if(o=DatatableFunctions.ConvertStringToDatetime(this.guia.fechaemision),a=DatatableFunctions.ConvertStringToDatetime(this.guia.fechainiciotraslado),e=DatatableFunctions.ConvertStringToDatetime(this.guia.fechaprobablearribo),o>a)return swal({text:"La Fecha de Emisión debe ser menor a la Fecha de Inicio de Traslado.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];if(a>e)return swal({text:"La Fecha de Inicio de Traslado debe ser menor a la Fecha Probable de Arribo.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];if(null==this.guia.articulos||0==this.guia.articulos.length)return swal({text:"Al menos un ítem es requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];if(!n)return[3,2];for(i=0,l=this.guia.articulos;i<l.length;i++)if(s=l[i],s.cantidaddespachada=s.cantidadpedido,"Despachada"==s.estado)return swal({text:"Eliminar los ítems que ya fueron despachados.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];return[4,this._dataService.verificar_duplicados(this.guia.nroguia,localStorage.getItem("org_id"),this.guia.idorgcompradora).toPromise()];case 1:if(c=d.sent(),Number(c.recordsTotal)>0)return B.toggleButton=!1,swal({text:"El número de guía ya existe.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nroguia1").focus()}),[2,!1];d.label=2;case 2:return[2,!0]}})})},t.prototype.enviarGuia=function(t){return T(this,void 0,void 0,function(){var n=this;return R(this,function(r){switch(r.label){case 0:return this.toggleButton=!0,this.guia.nroguia=this.guia.nroguia1+"-"+this.guia.nroguia2,this.guia.estado="GPUBL",[4,this.validardatos(t,!0)];case 1:return r.sent()?this._dataService.agregar(this.guia).subscribe(function(t){swal({text:"La información ha sido enviada. Confirme el correcto registro de la misma verificando el Número ERP en la columna correspondiente. Espere dicho número para la impresión de su constancia.",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success"});var n=["/guia/proveedor/buscar"];B.navigate(n)},function(t){n.toggleButton=!1,console.log(t)},function(){}):this.toggleButton=!1,[2]}})})},t.prototype.guardarGuia=function(t){return T(this,void 0,void 0,function(){var n=this;return R(this,function(r){switch(r.label){case 0:return this.toggleButton=!0,this.guia.nroguia=this.guia.nroguia1+"-"+this.guia.nroguia2,this.guia.estado="GPREI",[4,this.validardatos(t,!1)];case 1:return r.sent()?this._dataService.guardar(this.guia).subscribe(function(t){swal({text:"La información ha sido guardada. Confirme el correcto registro de la misma verificando el N° Guía en la columna correspondiente.",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success"});var n=["/guia/proveedor/buscar"];B.navigate(n)},function(t){n.toggleButton=!1,console.log(t)},function(){}):this.toggleButton=!1,[2]}})})},t.prototype.agregarArchivo=function(t){this.archivo=new g.a,this.archivo.nombreblob="org/"+localStorage.getItem("org_ruc")+"/guia/"+DatatableFunctions.newUUID(),$("#btnEliminarAA").click(),$("#txtArchivo").val(null),t.preventDefault()},t.prototype.descartarBorrador=function(t){swal({html:"¿Está seguro de descartar la guia?",type:"warning",showCancelButton:!0,confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",buttonsStyling:!1,confirmButtonClass:"btn btn-default",cancelButtonClass:"btn btn-warning"}).then(function(){B._dataService.descartarBorrador(B.id).subscribe(function(t){swal({text:"Se descartó la guia.",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Aceptar"}).then(function(){var t=["/guia/proveedor/buscar"];B.navigate(t)},function(t){var n=["/guia/proveedor/buscar"];B.navigate(n)})},function(t){return console.log(t)},function(){})},function(t){}),t.preventDefault()},t.prototype.validarDocumentos=function(){return 0!=$("#txtArchivo").get(0).files.length||(swal({text:"Un archivo es requerido. Por favor completar y volver a intentar!",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1)},t.prototype.filtroClienteDefecto=function(){this.filtroCliente={ruccodigo:"",ruc:"",razonsocial:""}},t.prototype.onChangeFile=function(t){var n=t,r=n.target,o=r.files;this.archivo.contenido=o[0]},t.prototype.grabarArchivoAdjunto=function(){var t=this;if(!this.validarDocumentos())return!1;var n=this.guia.docadjuntos.sort(function(t,n){return t.id<n.id?-1:t.id>n.id?1:0});if(n.length>0){var r=n[n.length-1].id;this.archivo.id=r+1}else this.archivo.id=1;var o=$("#txtArchivo").val();if(o){var a=o.indexOf("\\")>=0?o.lastIndexOf("\\"):o.lastIndexOf("/"),e=o.substring(a);0!==e.indexOf("\\")&&0!==e.indexOf("/")||(e=e.substring(1)),this.archivo.nombre=e}this.ProgressUpload=!0,B._dataServiceAdjunto.AgregarArchivo(this.archivo).subscribe(function(n){t.ProgressUpload=!1,B.archivo.url=B._dataServiceAdjunto.ObtenerUrlDescarga(B.archivo),B.guia.docadjuntos.push(JSON.parse(JSON.stringify(B.archivo))),setTimeout(function(){A.ajax.reload()},500),$("#mdlArchivosAdjuntos").modal("toggle")},function(t){return console.log(t)},function(){})},t.prototype.eliminarArchivos=function(t){t.preventDefault();var n=$("#dtArchivos").find(".checkboxArchivos:checked");if(n.length<=0)return swal({text:"Debe seleccionar un Archivo.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;var r="¿Desea eliminar el archivo seleccionado?";n.length>1&&(r="¿Desea eliminar los archivos seleccionados?"),swal({text:r,type:"warning",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No",buttonsStyling:!1,confirmButtonClass:"btn btn-default",cancelButtonClass:"btn btn-warning"}).then(function(){for(var t=B.guia.docadjuntos,r=0,o=n;r<o.length;r++){var a=o[r];!function(n){var r=$(n).val();t=t.filter(function(t){return t.id!=r})}(a)}B.guia.docadjuntos=JSON.parse(JSON.stringify(c(t))),setTimeout(function(){A.ajax.reload()},500)},function(t){})},t.prototype.eliminarArticulos=function(t){t.preventDefault();var n=$("#dtArticulos").find(".checkboxArticulos:checked");if(n.length<=0)return swal({text:"Debe seleccionar un Articulo.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;var r="¿Desea eliminar el artículo seleccionado?";n.length>1&&(r="¿Desea eliminar los artículos seleccionados?"),swal({text:r,type:"warning",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No",buttonsStyling:!1,confirmButtonClass:"btn btn-default",cancelButtonClass:"btn btn-warning"}).then(function(){for(var t=B.guia.articulos,r=0,o=n;r<o.length;r++){var a=o[r];!function(n){var r=$(n).val();t=t.filter(function(t){return t.nroitem!=r})}(a)}B.guia.articulos=JSON.parse(JSON.stringify(c(t))),setTimeout(function(){O.ajax.reload()},500)},function(t){})},t.prototype.AgregarArticulosOC=function(t){return T(this,void 0,void 0,function(){var n,r,o,a,e,i,l,s,c,d,u,b,g,p,f,v,m,h,y=this;return R(this,function(x){switch(x.label){case 0:if(this.btnSeleccionar=!0,t.preventDefault(),n=$("#dtBuscarOC").find(".checkboxOC:checked"),n.length<=0)return swal({text:"Debe seleccionar una Orden de Compra.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),this.btnSeleccionar=!1,[2,!1];r=function(t){var n,r,a;return R(this,function(e){switch(e.label){case 0:return n=$(t).val(),[4,o._dataServiceOC.obtener(n,"P",!0).toPromise()];case 1:return r=e.sent(),a=B.guia.articulos.filter(function(t){return t.idoc==n}),null!=a&&r.productos.length==a.length?(swal({text:"No se puede volver a agregar la OC #"+$(t).attr("numOC")+".",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),o.btnSeleccionar=!1,[2,{value:!1}]):[2]}})},o=this,a=0,e=n,x.label=1;case 1:return a<e.length?(i=e[a],[5,r(i)]):[3,4];case 2:if("object"==typeof(l=x.sent()))return[2,l.value];x.label=3;case 3:return a++,[3,1];case 4:s=B.guia.articulos.sort(function(t,n){return y.btnSeleccionar=!1,t.nroitem<n.nroitem?-1:t.nroitem>n.nroitem?1:0}),c=1,s.length>0&&(c=s[s.length-1].nroitem+1),d=0,u=n,x.label=5;case 5:return d<u.length?(b=u[d],g=$(b).val(),[4,this._dataServiceOC.obtener(g,"P",!0).toPromise()]):[3,8];case 6:for(p=x.sent(),"Material"==p.tipo?B.guia.tipoguia="M":B.guia.tipoguia="S",f=function(t){if(null!=B.guia.articulos.find(function(n){return n.IdProductoOrden==t.IdProductoOrden}))return"continue";B.guia.articulos.push({idoc:g,nroitem:c++,nrooc:p.nroordencompra,nroitemoc:t.posicion,codproducto:t.micodigo,descproducto:t.desccorta,cantidadpedido:t.cantidad,cantidadrecibida:"0",unidadmedida:t.unidad,cantidaddespachada:"",unidadmedidadespacho:t.unidad,atributos:t.atributos,pesoneto:"",unidadmedidapesoneto:t.unidad,estado:t.estado,nroparte:t.micodigo,preciounitario:"",preciototal:"",IdProductoOrden:t.IdProductoOrden,IdTablaUnidad:"",IdRegistroUnidad:"",IdProdxGuia:"",EjercicioGuia:"",destino:"",CodigoGuiaERP:""})},v=0,m=p.productos;v<m.length;v++)h=m[v],f(h);x.label=7;case 7:return d++,[3,5];case 8:return setTimeout(function(){O.ajax.reload(),$("#mdlOrdenesCompra").modal("toggle")},500),[2]}})})},t.prototype.SeleccionarCliente=function(t){this.btnSeleccionar=!0,t.preventDefault();var n=$("#dtBuscarCliente").find(".checkboxCliente:checked");if(n.length<=0)return swal({text:"Debe seleccionar una Organización Compradora.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),this.btnSeleccionar=!1,!1;if(n.length>1)return swal({text:"Debe seleccionar solo una Organización Compradora.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),this.btnSeleccionar=!1,!1;for(var r=0,o=n;r<o.length;r++){var a=o[r],e=$(a).val();this.guia.razonsocialcliente=$(a).attr("razonsocial"),this.guia.ruccliente=$(a).attr("ruc"),this.guia.idorgcompradora=e}setTimeout(function(){S.ajax.reload(),$("input").each(function(){$(this).keydown(),$(this).val()&&""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),$("#mdlBuscarCliente").modal("toggle")},500)},t.prototype.validarfiltrosOC=function(){if(null==this.filtrooc.fechacreacioninicio||""==this.filtrooc.fechacreacioninicio.toString())return swal({text:"Fecha de registro inicio es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(null==this.filtrooc.fechacreacionfin||""==this.filtrooc.fechacreacionfin.toString())return swal({text:"Fecha de registro fin es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(null!=this.filtrooc.fechacreacioninicio&&""!=this.filtrooc.fechacreacioninicio.toString()&&null!=this.filtrooc.fechacreacionfin&&""!=this.filtrooc.fechacreacionfin.toString()){var t=DatatableFunctions.ConvertStringToDatetime(this.filtrooc.fechacreacioninicio),n=DatatableFunctions.ConvertStringToDatetime(this.filtrooc.fechacreacionfin);if(moment(n).diff(t,"days")>30)return swal({text:'El filtro de búsqueda "Fecha de Creación" debe tener un rango máximo de 30 días entre la Fecha Inicial y la Fecha Fin.',type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(DatatableFunctions.FormatDatetimeForMicroService(t)>DatatableFunctions.FormatDatetimeForMicroService(n))return swal({text:"El rango de Fechas de registro seleccionado no es correcto. La Fecha Inicial es mayor a la Fecha Fin.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1}return!0},t.prototype.AbrirAgregarOC=function(t){if(!this.guia.ruccliente||""===this.guia.ruccliente)return swal({text:"Debe seleccionar una organización compradora.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;$("#mdlOrdenesCompra").modal("show"),$("select").each(function(){$(this).keydown(),$(this).val()&&""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),_.ajax.reload(),t.preventDefault()},t.prototype.BuscarOCClick=function(t){this.validarfiltrosOC()&&_.ajax.reload(),t.preventDefault()},t.prototype.filtroOCDefecto=function(){var t=new Date;t.setDate(t.getDate()-30),this.filtrooc={nroordencompra:"",estado:"OACEP",fechacreacioninicio:t,fechacreacionfin:new Date}},t.prototype.buscarCliente=function(t){this.filtroCliente.razonsocial="",this.filtroCliente.ruc="",null!=S?this.buscarClienteDT(t):a()},t.prototype.ngOnInit=function(){var t=this;$("#mdlBuscarCliente").on("hidden.bs.modal",function(){B.btnSeleccionar=!1}),$("#mdlBuscarCliente").on("shown.bs.modal",function(){B.btnSeleccionar=!1}),$("#mdlOrdenesCompra").on("hidden.bs.modal",function(){B.btnSeleccionar=!1}),$("#mdlOrdenesCompra").on("shown.bs.modal",function(){B.btnSeleccionar=!1}),B=this,this.activatedRoute.params.subscribe(function(n){t.id=n.id,t.esBorrador=n.b,t.id_doc=n.c}),"0"!=this.id?(this.toggleButton=!0,$("#btnAgregarItemOC").addClass("disabled"),$("#btnEliminarItemOC").addClass("disabled")):(this.esBorrador="1",this.toggleButton=!1,this.habilitarEdicion(null),this.guia.razonsocialproveedor=localStorage.getItem("org_nombre"),this.guia.rucproveedor=localStorage.getItem("org_ruc")),this.util.listUnidadMedida(function(t){}),this.util.listUnidadMedidaVolumen(function(t){B.listUnidadMedidaCombo=t}),this.util.listUnidadMedidaMasa(function(t){B.listUnidadMedidaPesoCombo=t}),this.util.listMotivoGuia(function(t){B.listMotivoGuiaCombo=t}),this.util.listTransporteGuia(function(t){B.listTransporteGuiaCombo=t}),this.util.listTipoDocIdentidad(function(t){B.listTipoDocIdentidad=t}),this.util.listEstadoGuia(function(t){B.listEstadoCombo=t}),this.util.listEstadoOC(function(t){B.listEstadoOCCombo=t})},t.prototype.ngAfterViewInit=function(){var t=this;if("0"!=this.id){console.log("this.esBorrador",this.esBorrador),this.guia.tipoguia="M";var n=!0;"1"===this.esBorrador&&(n=!1),this._dataService.obtener(this.id,n).subscribe(function(n){t.guia=n,t.guia.id_doc=t.id_doc,t.guiaOriginal=JSON.parse(JSON.stringify(n)),t.producto=n.articulos.length>0?n.articulos[0]:new b.b,setTimeout(function(){$("input").each(function(){$(this).keydown(),$(this).val()&&""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),$("select").each(function(){$(this).keydown(),$(this).val()&&""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),$("textarea").each(function(){$(this).keydown(),$(this).val()&&""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),O.ajax.reload(),A.ajax.reload()},200)},function(t){return console.log(t)},function(){})}DatatableFunctions.ModalSettings(),$("#mdlArchivosAdjuntos").on("shown.bs.modal",function(){$("#btnEliminarAA").click()}),A=$("#dtArchivos").on("draw.dt",function(t,n,r){DatatableFunctions.initDatatable(t,n,r,A)}).DataTable({ajax:function(t,n,r){n({data:B.guia.docadjuntos})},columns:[{data:"id"},{data:"nombre"},{data:"descripcion"},{data:"id"}],columnDefs:[{className:"text-center",targets:[1,2,3]},{render:function(t,n,r){return"1"==B.esBorrador||"0"==B.id?'<div class="text-right" height="100%"><div class="checkbox text-right"><label><input type="checkbox" value="'+r.id+'" name="optionsCheckboxes" class="checkboxArchivos"></label></div></div>':""},targets:0,orderable:!1,visible:!1},{render:function(t,n,r){return'<a class="editar" href="javascript:void(0);" row-id="'+r.id+'"><button class="btn btn-simple btn-info btn-icon download" rel="tooltip" title="Bajar Archivo" data-placement="left"><i class="material-icons">get_app</i></button></a><button class="btn btn-simple btn-danger btn-icon remove" rel="tooltip" title="Eliminar" data-placement="left"><i class="material-icons">delete</i></button>'},targets:3}]}),A.on("click",".download",function(t){var n=$(this).closest("tr"),r=n.find("a.editar").attr("row-id"),o=B.guia.docadjuntos;M=o.find(function(t){return t.id==r}),B._dataServiceAdjunto.DescargarArchivo(M).subscribe(function(t){saveAs(t,M.nombre)},function(t){return console.log(t)},function(){}),t.preventDefault()}),A.on("click",".remove",function(t){var n=$(this).closest("tr"),r=n.find("a.editar").attr("row-id");swal({text:"¿Desea eliminar el registro seleccionado?",type:"warning",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No",buttonsStyling:!1,confirmButtonClass:"btn btn-default",cancelButtonClass:"btn btn-warning"}).then(function(){var t=B.guia.docadjuntos,n=t.filter(function(t){return t.id!=r});B.guia.docadjuntos=JSON.parse(JSON.stringify(n)),setTimeout(function(){A.ajax.reload()},500)},function(t){}),t.preventDefault()}),s(),o(),e(),a(),DatatableFunctions.registerCheckAll();$("#observaciones").keyup(function(){var t=$(this).val().length,n=500-t;$("#lblDescLength").html("500 caracteres máximo ("+n+")")}),$("#nroguia1").blur(function(){if(null==B.guia.nroguia1&&(B.guia.nroguia1=""),""!=B.guia.nroguia1){var t=/^[a-z0-9]+$/i,n=B.guia.nroguia1.trim();return t.test(n)?void 0:(swal({text:"Nro. Guia - La Serie solo puede contener caracteres alfanuméricos.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nroguia1").focus()}),!1)}}),$("#nroguia2").blur(function(){if(null==B.guia.nroguia2&&(B.guia.nroguia2=""),""!=B.guia.nroguia2){var t=/^[a-z0-9]+$/i,n=B.guia.nroguia2.trim();return t.test(n)?void 0:(swal({text:"Nro. Guia - El Correlativo solo puede contener caracteres alfanuméricos.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nroguia2").focus()}),!1)}}),this.obtenerBotones()},t.prototype.ngAfterViewChecked=function(){this.cdRef.detectChanges()},t.prototype.ngOnChanges=function(t){},t.prototype.habilitarEdicion=function(t){return T(this,void 0,void 0,function(){var t,n,r,o,a,e,i,c,d,u,b,g,a;return R(this,function(p){switch(p.label){case 0:for(t=[],n="",r=0,o=this.guia.articulos;r<o.length;r++)a=o[r],n!=a.idoc&&t.push(a.idoc),n=a.idoc;e=0,i=t,p.label=1;case 1:return e<i.length?(c=i[e],[4,this._dataServiceOC.obtener(c,"P",!0).toPromise()]):[3,4];case 2:for(d=p.sent(),u=function(t){var n=d.productos.filter(function(n){return n.IdProductoOrden==t.IdProductoOrden});if(null==n||0==n.length)return"continue";t.estado=n[0].estado,t.codproducto=n[0].micodigo,t.descproducto=n[0].desccorta,t.cantidadpedido=n[0].cantidad,t.unidadmedida=n[0].unidad,t.unidadmedidadespacho=n[0].unidad,t.atributos=n[0].atributos,t.unidadmedidapesoneto=n[0].unidad,t.nroparte=n[0].micodigo},b=0,g=this.guia.articulos;b<g.length;b++)a=g[b],u(a);p.label=3;case 3:return e++,[3,1];case 4:return this.toggleButton=!1,setTimeout(function(){$(".toggleButton").prop("disabled",!1),$("#btnAgregarItemOC").removeClass("disabled"),$("#btnEliminarItemOC").removeClass("disabled")},200),setTimeout(function(){O.ajax.reload()},500),l(),s(),[2]}})})},t.prototype.validarfiltrosCliente=function(){return B.filtroCliente.razonsocial=B.filtroCliente.razonsocial.trim(),B.filtroCliente.ruc=B.filtroCliente.ruc.trim(),!0},t.prototype.buscarClienteDT=function(t){this.validarfiltrosCliente()&&S.ajax.reload()},t}();k=F([r.i(u.Component)({selector:"guiaproveedorformulario-cmp",template:r("./src/app/guia/proveedor/formulario/guiaproveedorformulario.component.html"),providers:[m.a,v.a,f.a,p.a,w.a]}),E("design:paramtypes",["function"==typeof(P=void 0!==d.b&&d.b)&&P||Object,"function"==typeof(N=void 0!==d.c&&d.c)&&N||Object,"function"==typeof(I=void 0!==p.a&&p.a)&&I||Object,"function"==typeof(j=void 0!==m.a&&m.a)&&j||Object,"function"==typeof(z=void 0!==f.a&&f.a)&&z||Object,"function"==typeof(G=void 0!==v.a&&v.a)&&G||Object,"function"==typeof(U=void 0!==w.a&&w.a)&&U||Object,"function"==typeof(V=void 0!==u.ChangeDetectorRef&&u.ChangeDetectorRef)&&V||Object])],k);var P,N,I,j,z,G,U,V},"./src/app/model/guia.ts":function(t,n,r){"use strict";r.d(n,"a",function(){return o}),r.d(n,"b",function(){return a});var o=function(){function t(){this.fechaemision=null,this.fechainiciotraslado=null,this.fechaprobablearribo=null,this.articulos=[],this.docadjuntos=[],this.nroguia="",this.nroguia1="",this.nroguia2=""}return t}(),a=function(){function t(){this.atributos=[]}return t}();(function(){function t(){}})(),function(){function t(){}}(),function(){function t(){}}(),function(){function t(){}}()}});