webpackJsonp([9],{"./src/app/factura/comprador/buscar/facturacompradorbuscar.component.html":function(t,r){t.exports='<div class="main-content">\r\n    <div class="container-fluid">\r\n        <div class="row">\r\n            <div class="col-sm-12">\r\n                <div class="card">\r\n                    <form method="#" action="#">\r\n                        <div class="card-header card-header-text" data-background-color="blue">\r\n                            <h4 class="card-title">Buscar Comprobante de Pago</h4>\r\n                        </div>\r\n                        <div class="card-content">\r\n                            <div class="row">\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Número Comprobante de Pago\r\n                                        </label>\r\n                                        <input [(ngModel)]="filtro.nrocomprobantepago" name="nrocomprobantepago" type="text" class="form-control">\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Razón Social Proveedor\r\n                                        </label>\r\n                                        <input [(ngModel)]="filtro.razonsocialproveedor" name="razonsocialcliente" type="text" class="form-control">\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">RUC Proveedor\r\n                                        </label>\r\n                                        <input [(ngModel)]="filtro.rucproveedor" name="ruccliente" type="text" class="form-control">\r\n                                    </div>\r\n                                </div>\r\n                                \r\n                            </div>\r\n                            <div class="row">\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Estado\r\n                                        </label>\r\n                                        <select [(ngModel)]="filtro.estado" name="estado" class="form-control">\r\n                                            <option value="NONE" selected>TODOS</option>\r\n                                            <option *ngFor="let opt of listEstadoCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Fecha Emisión Del</label>\r\n                                        <input type="text" [(ngModel)]="filtro.fechaemisioninicio" name="fechaemisioninicio" class="form-control" datepicker />\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Al</label>\r\n                                        <input type="text" [(ngModel)]="filtro.fechaemisionfin" name="fechaemisionfin" class="form-control" datepicker />\r\n                                    </div>\r\n                                </div>\r\n                              \r\n                                \r\n                              \r\n                                \r\n                            </div>\r\n                          <div class="row">\r\n                            <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Moneda\r\n                                        </label>\r\n                                        <select [(ngModel)]="filtro.moneda" name="moneda" class="form-control">\r\n                                            <option value="NONE" selected>TODOS</option>\r\n                                            <option *ngFor="let opt of listMonedaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                            <div class="col-sm-4">\r\n                                      <div class="form-group label-floating">\r\n                                          <label class="label-on-left">Tipo de Emisión</label>\r\n                                          <div class="togglebutton">\r\n                                              <label>\r\n                                                  <input type="checkbox" [checked]="filtro.tipoemisionfisico" (change)="filtro.tipoemisionfisico = !filtro.tipoemisionfisico" > Físico\r\n                                              </label>\r\n                                              <label>\r\n                                                  <input type="checkbox" [checked]="filtro.tipoemisionelectronico"  (change)="filtro.tipoemisionelectronico = !filtro.tipoemisionelectronico" > Electrónico\r\n                                          </label>\r\n                                          </div>\r\n                                      </div>\r\n                                  </div>\r\n                            \r\n                            <div class="col-sm-4">\r\n                                    <div class="form-group">\r\n                                      \r\n                                        <button *ngIf="botonBuscar.visible" [disabled]="!botonBuscar.habilitado" class="btn btn-default" (click)="clicked($event)">{{botonBuscar.Titulo}}</button>\r\n                                        <button *ngIf="botonBuscar.visible" [disabled]="!botonBuscar.habilitado" class="btn btn-default" (click)="limpiar($event)">Limpiar</button>\r\n                                    </div>\r\n                                </div>\r\n                          </div>\r\n                            <nav class="navbar navbar-info navbar-without-margin" role="navigation">\r\n                                <div class="container-fluid">\r\n                                    <div class="navbar-header">\r\n\r\n                                        <span class="navbar-brand">Resultados</span>\r\n                                    </div>\r\n                                   \r\n                                </div>\r\n                            </nav>\r\n                            <div class="material-datatables table-responsive">\r\n                                <table id="dtResultados" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                                    <thead>\r\n                                        <tr>\r\n                                           \r\n                                            <th>No. Doc. de Pago</th>\r\n                                            <th>Organización Proveedora</th>\r\n                                            <th>Tipo Doc</th>\r\n                                            <th>Documento ERP</th>\r\n                                           \r\n                                            <th>Forma de Pago</th>\r\n                                            <th>Importe Total</th>\r\n                                            <th>Estado</th>\r\n                                            \r\n                                            <th>Fecha de Emisión</th>\r\n                                            <th>Fecha Prog. Pago</th>\r\n                                            <th>Fecha Pago</th>\r\n                                            <th>Notas</th>\r\n                                            <th class="disabled-sorting text-center">Acciones</th>\r\n                                        </tr>\r\n                                    </thead>\r\n\r\n                                </table>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div id="mdlObservaciones" class="modal fade" tabindex="-1" role="dialog">\r\n    <div class="modal-dialog modal-lg" role="document">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n              </td>\r\n              <td class="cell-title">\r\n                <div class="card-content">\r\n                  <h4 class="card-title modal-title">Observaciones</h4>\r\n\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n          \r\n        </div>\r\n        <div class="modal-body">\r\n          <div class="row">\r\n                <div class="col-sm-12 text-center">\r\n                  <b>Observaciones Comprobante de pago:</b><p></p>\r\n                </div>\r\n              </div>\r\n              <div class="row">\r\n                <div class="col-sm-12">\r\n                  <span id="mdlObservaciones_obs"></span>\r\n                </div>\r\n              </div>\r\n              <div class="row">\r\n                <div class="col-sm-12 text-center" >\r\n                  <p></p><b>Observaciones de pago:</b><p></p>\r\n                </div>\r\n              </div>\r\n              <div class="row">\r\n                <div class="col-sm-12">\r\n                  <span id="mdlObservaciones_obs_pago"></span>\r\n                </div>\r\n              </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>\r\n        </div>\r\n      </div>\r\n      \x3c!-- /.modal-content --\x3e\r\n    </div>\r\n    \x3c!-- /.modal-dialog --\x3e\r\n  </div>'},"./src/app/factura/comprador/buscar/facturacompradorbuscar.component.ts":function(t,r,n){"use strict";function a(){b=$("#dtResultados").on("init.dt",function(t,r,n){DatatableFunctions.initDatatable(t,r,n,b)}).DataTable({order:[[7,"desc"]],searching:!1,serverSide:!0,ajax:{beforeSend:function(t){u.util.tokenValid()&&(t.setRequestHeader("Authorization","Bearer "+localStorage.getItem("access_token")),t.setRequestHeader("origen_datos","PEB2M"),t.setRequestHeader("tipo_empresa","C"),t.setRequestHeader("org_id",localStorage.getItem("org_id")),t.setRequestHeader("Ocp-Apim-Subscription-Key",localStorage.getItem("Ocp_Apim_Subscription_Key")))},url:s.r,dataSrc:"data",data:function(t){if(""!=u.filtro.nrocomprobantepago&&(t.NumeroFactura=u.filtro.nrocomprobantepago),""!=u.filtro.razonsocialproveedor&&(t.RazonSocialProveedor=u.filtro.razonsocialproveedor),""!=u.filtro.rucproveedor&&(t.RucProveedor=u.filtro.rucproveedor),"NONE"!=u.filtro.estado&&(t.Estado=u.filtro.estado),"NONE"!=u.filtro.moneda&&(t.Moneda=u.filtro.moneda),u.filtro.fechaemisioninicio){var r=DatatableFunctions.ConvertStringToDatetime(u.filtro.fechaemisioninicio);t.FechaEmision_inicio=DatatableFunctions.FormatDatetimeForMicroService(r)}if(u.filtro.fechaemisionfin){var n=DatatableFunctions.AddDayEndDatetime(DatatableFunctions.ConvertStringToDatetime(u.filtro.fechaemisionfin));t.FechaEmision_fin=DatatableFunctions.FormatDatetimeForMicroService(n)}t.column_names="IdComprobante,NumeroFactura,RazonSocialProveedor,TipoComprobante,DocumentoErp,FormaPago,Total,Moneda,Estado,FechaEmision,FechaProgramadaPago,FechaPago,Observaciones,ObservacionesPago"}},columns:[{data:"NumeroFactura",name:"NumeroFactura"},{data:"RazonSocialProveedor",name:"RazonSocialProveedor"},{data:"TipoComprobante",name:"TipoComprobante"},{data:"DocumentoErp",name:"DocumentoErp"},{data:"FormaPago",name:"FormaPago"},{data:"Total",name:"Total"},{data:"Estado",name:"Estado"},{data:"FechaEmision",name:"FechaEmision"},{data:"FechaProgramadaPago",name:"FechaProgramadaPago",visible:!1},{data:"FechaPago",name:"FechaPago"},{data:"NumeroFactura",name:"Nota"},{data:"NumeroFactura",name:"NumeroFactura"},{data:"ObservacionesPago",name:"ObservacionesPago",visible:!1},{data:"Observaciones",name:"Observaciones",visible:!1}],columnDefs:[{className:"text-center",targets:[0,1,2,3,4,5,6,7,8,9,10,11]},{render:function(t,r,n){return n.Moneda+" "+DatatableFunctions.FormatNumber(n.Total)},targets:5},{render:function(t,r,n){var a="",o='href="/factura/comprador/formulario/'+n.IdComprobante+'"';return u.botonDetalle.habilitado||(a="disabled",o=""),'<div class="text-center"><a class="editar" '+o+' row-id="'+n.IdComprobante+'"><button class="btn btn-simple btn-info btn-icon edit" rel="tooltip" title="Ver" data-placement="left" '+a+'><i class="material-icons">visibility</i></button></a></div>'},targets:11},{render:function(t,r,n){return'<a data-toggle="modal" class="observaciones" data-target="#mdlObservaciones" style="cursor:hand">Observaciones</a>'},targets:12}]}),b.on("click",".observaciones",function(t){var r=$(this).closest("tr"),n=b.row(r).data();$("#mdlObservaciones_obs").html(n.Observaciones),$("#mdlObservaciones_obs_pago").html(null==n.ObservacionesPago?"":DatatableFunctions.ReplaceToken(n.ObservacionesPago)),t.preventDefault()}),b.on("click",".edit",function(t){if(u.botonDetalle.habilitado){var r=$(this).closest("tr");b.row(r).data();console.log("click edit",t);var n=r.find("a.editar").attr("row-id"),a=["/factura/comprador/formulario",n];u.navigate(a)}t.preventDefault()})}var o=n("./node_modules/@angular/core/@angular/core.es5.js"),e=n("./node_modules/@angular/router/@angular/router.es5.js"),i=n("./src/app/utils/app.utils.ts"),l=n("./src/app/service/masterservice.ts"),s=n("./src/app/utils/app.constants.ts"),c=n("./src/app/model/menu.ts"),d=n("./src/app/service/login.service.ts");n.d(r,"a",function(){return m});var u,b,f=this&&this.__decorate||function(t,r,n,a){var o,e=arguments.length,i=e<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,r,n,a);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(i=(e<3?o(i):e>3?o(r,n,i):o(r,n))||i);return e>3&&i&&Object.defineProperty(r,n,i),i},p=this&&this.__metadata||function(t,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,r)},m=function(){function t(t,r,n,a,o){this.router=t,this.route=r,this._masterService=n,this._securityService=a,this.cdRef=o,this.botonBuscar=new c.a,this.botonDetalle=new c.a,this.url_main_module_page="/factura/comprador/buscar",this.util=new i.a(this.router,this._masterService)}return t.prototype.navigate=function(t){this.router.navigate(t,{relativeTo:this.route})},t.prototype.obtenerBotones=function(){var t=this,r=this._securityService.ObtenerBotonesCache(this.url_main_module_page);r?this.configurarBotones(r):this._securityService.obtenerBotones(this.url_main_module_page).subscribe(function(r){u.configurarBotones(r),u._securityService.guardarBotonesLocalStore(t.url_main_module_page,r)},function(t){return console.log(t)},function(){})},t.prototype.configurarBotones=function(t){t&&t.length>0&&(this.botonBuscar=t.find(function(t){return"buscar"===t.nombre})?t.find(function(t){return"buscar"===t.nombre}):this.botonBuscar,this.botonDetalle=t.find(function(t){return"detalle"===t.nombre})?t.find(function(t){return"detalle"===t.nombre}):this.botonDetalle)},t.prototype.validarfiltros=function(){if(null!=this.filtro.fechaemisioninicio&&""!=this.filtro.fechaemisioninicio.toString()&&null!=this.filtro.fechaemisionfin&&""!=this.filtro.fechaemisionfin.toString()){var t=DatatableFunctions.ConvertStringToDatetime(u.filtro.fechaemisioninicio),r=DatatableFunctions.ConvertStringToDatetime(u.filtro.fechaemisionfin);if(DatatableFunctions.FormatDatetimeForMicroService(t)>DatatableFunctions.FormatDatetimeForMicroService(r))return swal({text:"El rango de Fechas de creación seleccionado no es correcto.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1}return!0},t.prototype.clicked=function(t){this.validarfiltros()&&b.ajax.reload(),t.preventDefault()},t.prototype.limpiar=function(t){this.filtroDefecto(),setTimeout(function(){$("input").each(function(){$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")})},200),t.preventDefault()},t.prototype.filtroDefecto=function(){var t=new Date;t.setMonth(t.getMonth()-1),this.filtro={nrocomprobantepago:"",razonsocialproveedor:"",rucproveedor:"",estado:"NONE",moneda:"NONE",fechaemisioninicio:t,fechaemisionfin:new Date,tipoemisionfisico:!0,tipoemisionelectronico:!0}},t.prototype.ngOnInit=function(){u=this,this.filtroDefecto(),this.util.listMonedas(function(t){u.listMonedaCombo=t}),this.util.listEstadoCP(function(t){u.listEstadoCombo=t})},t.prototype.ngAfterViewInit=function(){a(),DatatableFunctions.registerCheckAll(),this.obtenerBotones()},t.prototype.ngAfterViewChecked=function(){this.cdRef.detectChanges()},t}();m=f([n.i(o.Component)({selector:"facturacompradorbuscar-cmp",template:n("./src/app/factura/comprador/buscar/facturacompradorbuscar.component.html"),providers:[l.a]}),p("design:paramtypes",["function"==typeof(g=void 0!==e.c&&e.c)&&g||Object,"function"==typeof(v=void 0!==e.b&&e.b)&&v||Object,"function"==typeof(h=void 0!==l.a&&l.a)&&h||Object,"function"==typeof(y=void 0!==d.a&&d.a)&&y||Object,"function"==typeof(x=void 0!==o.ChangeDetectorRef&&o.ChangeDetectorRef)&&x||Object])],m);var g,v,h,y,x},"./src/app/factura/comprador/formulario/facturacompradorformulario.component.html":function(t,r){t.exports='<div class="main-content">\r\n  <div class="container-fluid">\r\n    <div class="row">\r\n      <div class="col-sm-12">\r\n        <div class="card">\r\n          <form method="#" action="#">\r\n            <div class="card-header card-header-text" data-background-color="blue">\r\n              <h4 class="card-title">Comprobante de Pago</h4>\r\n            </div>\r\n\r\n            <div class="card-content" id="secFactura">\r\n              <div class="card-header">\r\n                <h4 class="card-title">Comprobante de Pago Cabecera</h4>\r\n              </div>\r\n              <div class="card-content">\r\n\r\n\r\n                <div class="row">\r\n                  <div class="col-sm-3">\r\n\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">No. Comprobante de Pago</label>\r\n                      <input name="nocomprobantepago" id="nocomprobantepago" [(ngModel)]="factura.nocomprobantepago" type="text" [disabled]="toggleButton"\r\n                        class="form-control">\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class="col-sm-3">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">RUC Org. Proveedora\r\n                                          </label>\r\n                      <input name="rucproveedor" [(ngModel)]="factura.rucproveedor" type="text" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Razón Social Org. Proveedora \r\n                                          </label>\r\n                      <input name="razonsocialproveedor" [(ngModel)]="factura.razonsocialproveedor" type="text" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-2">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Tipo Documento \r\n                                            </label>\r\n                      <select id="tipodocumento" name="tipodocumento" class="form-control" [(ngModel)]="factura.tipodocumento" [disabled]="toggleButton">\r\n                                              <option disabled=""></option>\r\n                                              <option *ngFor="let opt of listTipoComprobante" value="{{opt.valor}}"> {{opt.desc}} </option> \r\n                                            </select>\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n                <div class=\'row\'>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">RUC Org. Compradora \r\n                                              </label>\r\n                      <input name="ruccliente" [(ngModel)]="factura.ruccliente" type="text" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Razón Social Org. Compradora \r\n                                              </label>\r\n                      <input name="razonsocialcliente" [(ngModel)]="factura.razonsocialcliente" type="text" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class="col-sm-4" *ngIf="id!=0">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Estado\r\n                                              </label>\r\n                      <select id="estado" [(ngModel)]="factura.estadocomprador" name="estado" class="form-control" disabled>\r\n                                                <option disabled="" selected=""></option>\r\n                                                <option *ngFor="let opt of listEstadoCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                                              </select>\r\n                    </div>\r\n                  </div>\r\n\r\n\r\n\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-12">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Guías de Despacho\r\n                                          </label>\r\n                      <input name="guiasdespacho" type="text" [(ngModel)]="factura.guiasdespacho" [disabled]="toggleButton" class="form-control">\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n                <div class="row">\r\n\r\n                  <div class="col-sm-12">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Orden de Compra/Servicio/Contrato\r\n                                                            </label>\r\n                      <input name="ordencompraserviciocontrato" [(ngModel)]="factura.ordencompraserviciocontrato" type="text" [disabled]="toggleButton"\r\n                        class="form-control">\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n                <div class="row">\r\n                    <div class="col-sm-4">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">Fecha Emisión \r\n                                            </label>\r\n                          <input name="fechaemision" [(ngModel)]="factura.fechaemision" id="txtFechaEmision" disabled datepicker type="text" [disabled]="toggleButton"\r\n                            class="form-control">\r\n                        </div>\r\n                      </div>\r\n                  \x3c!--<div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha Vencimiento\r\n                                        </label>\r\n                      <input name="txtFechaVencimiento" id="txtFechaProgPago" datepicker disabled [(ngModel)]="factura.fechavencimiento" type="text"\r\n                        [disabled]="toggleButton" class="form-control">\r\n                    </div>\r\n                  </div>--\x3e\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha de Recepción\r\n                                        </label>\r\n                      <input name="fecharecepcion" id="fecharecepcion" datepicker disabled [(ngModel)]="factura.fecharecepcion" type="text" [disabled]="toggleButton"\r\n                        class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha de Registro\r\n                                        </label>\r\n                      <input name="fecharegistro" id="fecharegistro" datepicker disabled [(ngModel)]="factura.fecharegistro" type="text" [disabled]="toggleButton"\r\n                        class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n\r\n                <div class="row">\r\n                  <div class="col-sm-4" *ngIf="id!=0">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Documento ERP \r\n                                        </label>\r\n                      <input name="documentoerp" type="text" [(ngModel)]="factura.documentoerp" [disabled]="toggleButton" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Forma de Pago\r\n                                        </label>\r\n                      <input name="formapago" type="text" [(ngModel)]="factura.formapago" [disabled]="toggleButton" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Moneda \r\n                                            </label>\r\n                      <select id="moneda" [(ngModel)]="factura.moneda" name="moneda" class="form-control" [disabled]="toggleButton">\r\n                                          <option disabled="" selected=""></option>\r\n                                          <option *ngFor="let opt of listMonedaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                                        </select>\r\n\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n\r\n\r\n              </div>\r\n\r\n            </div>\r\n            <div class="card-content">\r\n              <div class="row">\r\n                <div class="col-sm-12">\r\n                  <div class="card {{factura.eshas ? \'hidden\' : \'\'}}">\r\n                    <div class="card-header card-header-icon" data-background-color="blue">\r\n                      <i class="material-icons">assignment</i>\r\n                    </div>\r\n                    <div class="card-content">\r\n                      <h4 class="card-title">Detalle</h4>\r\n                      <div class="toolbar">\r\n                        <div class="row">\r\n                          <div class="col-sm-12">\r\n                            <nav class="navbar navbar-info" role="navigation">\r\n                              <div class="container-fluid">\r\n                                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\r\n\r\n                                </div>\r\n                              </div>\r\n                            </nav>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div class="row" *ngIf="!toggleButton">\r\n                        <div class="col-sm-12">\r\n                          <div class="form-group form-group-without-margin">\r\n\r\n                            <button id="btnEliminarItemOC" [disabled]="toggleButton" class="btn btn-default pull-right" (click)="eliminarArticulos($event)">Eliminar</button>\r\n                            <button id="btnAgregarItemOC" [disabled]="toggleButton" class="btn btn-default pull-right" (click)="AbrirAgregarGuia($event)">Añadir Guía</button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div class="material-datatables table-responsive" style="display:block">\r\n                        <table id="dtArticulos" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                          <thead>\r\n                            <tr>\r\n\r\n                             \r\n                              <th>No. Item</th>\r\n                              <th>No. Guía</th>\r\n                              <th>No. Orden de Compra</th>\r\n                              <th>No. Item OC</th>                              \r\n                              <th>Descripción del Producto</th>\r\n                              <th>Cantidad</th>\r\n                              <th>Precio Unitario Referencial</th>\r\n                              <th>Importe Total Item</th>\r\n\r\n                            </tr>\r\n                          </thead>\r\n                        </table>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class="card {{factura.esguiamaterial ? \'hidden\' : \'\'}}">\r\n\r\n                    <div class="card-header card-header-icon" data-background-color="blue">\r\n                      <i class="material-icons">assignment</i>\r\n                    </div>\r\n                    <div class="card-content">\r\n\r\n                      <h4 class="card-title">Detalle</h4>\r\n                      <div class="toolbar">\r\n                        <div class="row">\r\n                          <div class="col-sm-12">\r\n                            <nav class="navbar navbar-info" role="navigation">\r\n                              <div class="container-fluid">\r\n                                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\r\n\r\n                                </div>\r\n                              </div>\r\n                            </nav>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div class="row" *ngIf="!toggleButton">\r\n                        <div class="col-sm-12">\r\n                          <div class="form-group form-group-without-margin">\r\n\r\n                            <button id="btnEliminarItemOC" [disabled]="toggleButton" class="btn btn-default pull-right" (click)="eliminarArticulos($event)">Eliminar</button>\r\n                            <button id="btnAgregarItemOC" [disabled]="toggleButton" class="btn btn-default pull-right" (click)="AbrirAgregarAceptacionServicio($event)">Añadir Hoja de Aceptación de Servicio</button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div class="material-datatables table-responsive" style="display:block">\r\n                        <table id="dtArticulosHAS" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                          <thead>\r\n                            <tr>\r\n\r\n                             \r\n\r\n                              <th>No. Item</th>\r\n                              <th>No. HAS</th>\r\n                              <th>No. Orden de Compra</th>\r\n                              <th>No. Item OC</th>\r\n                              \r\n                              <th>Descripción del Producto</th>\r\n\r\n                              <th>Cantidad</th>\r\n                              <th>Precio Unitario Referencial</th>\r\n                              <th>Importe Total Item</th>\r\n\r\n                            </tr>\r\n                          </thead>\r\n                        </table>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="row">\r\n              <div class="col-sm-4 col-sm-offset-8">\r\n                <div class="form-group label-floating">\r\n                  <label class="control-label">Sub-Total\r\n                  </label>\r\n                  <input name="subtotal" type="text" [(ngModel)]="factura.subtotal" disabled class="form-control">\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="row">\r\n              <div class="col-sm-4 col-sm-offset-8">\r\n                <div class="form-group label-floating">\r\n                  <label class="control-label">IGV\r\n                  </label>\r\n                  <input name="igv" type="text" [(ngModel)]="factura.igv" disabled class="form-control">\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="row">\r\n              <div class="col-sm-4 col-sm-offset-8">\r\n                <div class="form-group label-floating">\r\n                  <label class="control-label">Total\r\n                  </label>\r\n                  <input name="txtTotal" type="text" [(ngModel)]="factura.total" disabled class="form-control">\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="card-content">\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-12">\r\n                    <div class="form-group">\r\n                      <label class="control-label">{{factura.totaltexto}}</label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="row">\r\n                <div class="col-md-12">\r\n                  <div class="card">\r\n                    <div class="card-header card-header-icon" data-background-color="blue">\r\n                      <i class="material-icons">assignment</i>\r\n                    </div>\r\n                    <div class="card-content">\r\n                      <h4 class="card-title">Archivos Adjuntos</h4>\r\n                      <div class="toolbar" [hidden]="toggleButton">\r\n                        <div class="row">\r\n                          <div class="col-sm-12">\r\n                            <nav class="navbar navbar-info" role="navigation">\r\n                              <div class="container-fluid">\r\n                                <div class="navbar-header">\r\n                                  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">\r\n                                            <span class="sr-only">Acciones</span>\r\n                                            <span class="icon-bar"></span>\r\n                                            <span class="icon-bar"></span>\r\n                                            <span class="icon-bar"></span>\r\n                                        </button>\r\n                                  <a class="navbar-brand disabled"></a>\r\n                                </div>\r\n                                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\r\n                                  <ul class="nav navbar-nav">\r\n                                    <li><a href="#mdlArchivosAdjuntos" data-toggle="modal" (click)="agregarArchivo($event)" data-target="#mdlArchivosAdjuntos">Agregar</a></li>\r\n                                    <li><a (click)="eliminarArchivos($event)">Eliminar</a></li>\r\n                                  </ul>\r\n                                </div>\r\n                              </div>\r\n                            </nav>\r\n\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div class="material-datatables table-responsive">\r\n                        <table id="dtArchivos" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                          <thead>\r\n                            <tr>\r\n                              <th class="disabled-sorting text-right">\r\n\r\n                              </th>\r\n                              <th width="20%">Nombre</th>\r\n                              <th width="60%">Descripción</th>\r\n                              <th class="disabled-sorting text-center" width="20%">Acciones</th>\r\n                            </tr>\r\n                          </thead>\r\n\r\n\r\n                        </table>\r\n                      </div>\r\n                    </div>\r\n                    \x3c!-- end content--\x3e\r\n                  </div>\r\n                  \x3c!--  end card  --\x3e\r\n                </div>\r\n                \x3c!-- end col-md-12 --\x3e\r\n              </div>\r\n              <div class="card-header">\r\n                <h4 class="card-title">Datos de Pago</h4>\r\n              </div>\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Tipo Pago\r\n                      </label>\r\n                      <input name="tipopago" type="text" [(ngModel)]="factura.tipopago" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Nro. Documento  \r\n                      </label>\r\n                      <input name="nrodocumento" type="text" [(ngModel)]="factura.nrodocumento" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Banco \r\n                      </label>\r\n                      <input name="txtBabanconco" type="text" [(ngModel)]="factura.banco" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha de Pago\r\n                      </label>\r\n                      <input name="fechapago" type="text" datepicker disabled [(ngModel)]="factura.fechapago" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Monto\r\n                      </label>\r\n                      <input name="monto" type="text" [(ngModel)]="factura.monto" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Moneda \r\n                      </label>\r\n                      <input name="datospagomoneda" type="text" [(ngModel)]="factura.datospagomoneda" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Nro. Cheque\r\n                      </label>\r\n                      <input name="nrocheque" type="text" [(ngModel)]="factura.nrocheque" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="card-header">\r\n                <h4 class="card-title">Datos de Descuento por Retención o Detracción</h4>\r\n              </div>\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Tipo Descuento\r\n                      </label>\r\n                      <input name="tipodescuento" type="text" [(ngModel)]="factura.tipodescuento" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Nro. Comprobante\r\n                      </label>\r\n                      <input name="nrocomprobante" type="text" [(ngModel)]="factura.nrocomprobante" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Monto\r\n                      </label>\r\n                      <input name="dsctomonto" type="text" [(ngModel)]="factura.dsctomonto" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-6">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Moneda\r\n                      </label>\r\n                      <input name="dsctomoneda" type="text" [(ngModel)]="factura.dsctomoneda" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="card-header">\r\n                <h4 class="card-title">Observaciones Comprobante de Pago</h4>\r\n              </div>\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-12">\r\n                      <div [innerHTML]="factura.observaciones" style="text-align: left;">\r\n                        </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="card-header">\r\n                <h4 class="card-title">Observaciones de Pago</h4>\r\n              </div>\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-12">\r\n                    <div [innerHTML]="factura.obscomprobantepago" style="text-align: left;">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n\r\n            <div class="card-footer">\r\n              <button class="btn btn-fill btn-default pull-right" routerLink="/factura/comprador/buscar">Regresar</button>\r\n              <button  *ngIf="botonImprimir.visible && id!=\'0\'" [disabled]="!botonImprimir.habilitado"  class="btn btn-fill btn-default pull-right" (click)="print($event)" >{{botonImprimir.Titulo}}</button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div id="mdlBuscarCliente" class="modal fade" tabindex="-1" role="dialog">\r\n    <div class="modal-dialog modal-lg" role="document">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n              </td>\r\n              <td class="cell-title">\r\n                <div class="card-content">\r\n                  <h4 class="card-title modal-title">Buscar Cliente</h4>\r\n\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </div>\r\n        <div class="modal-body">\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Nombre de Compañía</label>\r\n                <input type="text" id="txtBuscarNroOC" name="txtBuscarNroOC" class="form-control" value="" disabled>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-sm-1">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label"></label>\r\n                <select name="cmbPais" class="form-control" disabled>\r\n                 <option Value="PE">PE</option>\r\n               </select>\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-5">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Código</label>\r\n                <input type="text" id="txtBuscarCodCliente" name="txtBuscarCodCliente" class="form-control" value="" disabled>\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-2">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label"></label>\r\n                <button type="button" class="btn btn-default" data-dismiss="modal">Buscar</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="material-datatables table-responsive">\r\n                <table id="dtBuscarCliente" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                  <thead>\r\n                    <tr>\r\n                      <th class="disabled-sorting text-right">\r\n\r\n                      </th>\r\n                      <th style="width:50%">Nombre de Compañía</th>\r\n                      <th style="width:50%">Código</th>\r\n                    </tr>\r\n                  </thead>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Seleccionar</button>\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>\r\n        </div>\r\n      </div>\r\n      \x3c!-- /.modal-content --\x3e\r\n    </div>\r\n    \x3c!-- /.modal-dialog --\x3e\r\n  </div>\r\n  <div id="mdlGuias" class="modal fade" tabindex="-1" role="dialog">\r\n    <div class="modal-dialog modal-lg" role="document">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n              </td>\r\n              <td class="cell-title">\r\n                <div class="card-content">\r\n                  <h4 class="card-title modal-title">Buscar Guía</h4>\r\n\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </div>\r\n        <div class="modal-body">\r\n          <div class="row">\r\n            <div class="col-sm-6">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Nro. Guía</label>\r\n                <input type="text" id="txtBuscarNroOC" name="txtBuscarNroOC" class="form-control" value="" disabled>\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-6">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Estado</label>\r\n                <select name="cmbBuscarEstado" id="cmbBuscarEstado" class="form-control" disabled>\r\n                  <option Value="Aceptada">Aceptada</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-sm-5">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Emitida/Enviada después de</label>\r\n                <input type="text" id="txtGuiaEmitidaDesde" name="txtGuiaEmitidaDesde" datepicker class="form-control" value="" disabled>\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-5">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Emitida/Enviada antes de</label>\r\n                <input type="text" id="txtGuiaEmitidaHasta" name="txtGuiaEmitidaHasta" datepicker class="form-control" value="" disabled>\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-2">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label"></label>\r\n                <button type="button" class="btn btn-default" data-dismiss="modal">Buscar</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="material-datatables table-responsive">\r\n                <table id="dtBuscarGuia" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                  <thead>\r\n                    <tr>\r\n                      <th class="disabled-sorting text-right">\r\n                        <div class="checkbox">\r\n                          <label>\r\n                          <input type="checkbox" name="optionsCheckboxes">\r\n                          </label>\r\n                        </div>\r\n                      </th>\r\n                      <th>N° Guía</th>\r\n                      <th>Estado (proveedor/cliente)</th>\r\n                      <th>Proveedor</th>\r\n                      <th>Fecha de Emisión</th>\r\n                      <th>Fecha de Inicio de Traslado</th>\r\n                      <th>Fecha Probable de Arribo</th>\r\n                    </tr>\r\n                  </thead>\r\n\r\n\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Añadir</button>\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>\r\n        </div>\r\n      </div>\r\n      \x3c!-- /.modal-content --\x3e\r\n    </div>\r\n    \x3c!-- /.modal-dialog --\x3e\r\n  </div>\r\n</div>\r\n\r\n\r\n<div style="display:none">\r\n  <div id="print-section" style=\'font-family: Arial, Helvetica, sans-serif;color: #000;font-size: 12px;\'>\r\n    <table width="100%" cellpadding="0" cellspacing="0" align="center" bgcolor="#ffffff" style=\'font-family: Arial, Helvetica, sans-serif;color: #000;font-size: 12px;\'>\r\n      <tbody>\r\n        <tr>\r\n          <td align="center">\r\n\r\n\r\n            <table width="900" cellpadding="0" cellspacing="0" border="0" bgcolor="#fff">\r\n              <tbody>\r\n                <tr>\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle">\r\n                    Imprimir Comprobante de Pago Nº{{factura.nocomprobantepago}}<br/><br/>\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="top" style="font-size: 20px">\r\n                    <b>IMPRESION DE COMPROBANTE DE PAGO</b><br><br>\r\n                  </td>\r\n                </tr>\r\n\r\n\r\n\r\n\r\n              </tbody>\r\n            </table>\r\n\r\n            <table width="900" class="print-table" cellpadding="5" border=\'0\' style="border:0px solid #999;border-collapse: collapse;"\r\n              cellspacing="0" bgcolor="#fff">\r\n              <tbody>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.razonsocialproveedor}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    RUC N° {{factura.rucproveedor}}<br/> {{factura.tipodocumento_text}}\r\n                    <br/>\r\n                    <b> {{factura.nocomprobantepago}}</b><br/>\r\n\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 20px">\r\n                    <b style="font-size: 20px; color:#0067a3">Datos Generales:</b>\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="1" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Cliente:</b>\r\n                  </td>\r\n\r\n                  <td colspan="3" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.razonsocialcliente}}\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b>  RUC N°:</b>\r\n                  </td>\r\n\r\n                  <td colspan="3" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.ruccliente}}\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Estado:</b>\r\n                  </td>\r\n                  <td colspan="3" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.estado_text}}\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="1" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Guias de Despacho:</b>\r\n                  </td>\r\n\r\n                  <td colspan="11" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.guiasdespacho}}\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Orden de Compra/Servicio/Contrato:</b> {{factura.ordencompraserviciocontrato}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                    <td colspan="1" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                        <b> Fecha de Emision:</b>\r\n                      </td>\r\n                      <td colspan="3" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                        {{factura.fechaemision}}\r\n                      </td>\r\n                 \x3c!-- <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Fecha de Vencimiento:</b> {{factura.fecharegistro}}\r\n                  </td>--\x3e\r\n\r\n\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b>  Fecha de Recepcion:</b> {{factura.fecharecepcion}}\r\n                  </td>\r\n\r\n\r\n\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Fecha de Registro:</b> {{factura.fecharegistro}}\r\n                  </td>\r\n\r\n                </tr>\r\n\r\n              \r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Documento ERP:</b> {{factura.documentoerp}}\r\n                  </td>\r\n\r\n\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b>  Forma de Pago:</b> {{factura.formapago}}\r\n                  </td>\r\n\r\n\r\n\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Moneda:</b> {{factura.moneda_text}}\r\n                  </td>\r\n\r\n                </tr>\r\n                <tr style="border:0px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:0px solid #999;">\r\n                    &nbsp;\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;font-size: 20px">\r\n                    <b style="font-size: 20px; color:#0067a3">Detalle</b>\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b>No. <br>Item</b>\r\n                  </td>\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b>Num. Guía</b>\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b>Num. OC</b>\r\n                  </td>\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b>Num. Item OC</b>\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b>Descripción del Producto</b>\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b>Cantidad</b>\r\n                  </td>\r\n\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b>Precio Unitario Referencial</b>\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b>Importe Total Item</b>\r\n                  </td>\r\n\r\n\r\n                </tr>\r\n\r\n                <tr *ngFor="let row of factura.detallefactura" style="border:1px solid #999;">\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{row.noitem}}\r\n                  </td>\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{row.noguia}}\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{row.nooc}}\r\n                  </td>\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{row.noitemoc}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n\r\n                    <div [innerHTML]="row.descproducto" style="text-align: center;">\r\n                    </div>\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{row.cantidad}}\r\n                  </td>\r\n\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{row.preciounitreferencial}}\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{row.importetotalitem}}\r\n                  </td>\r\n\r\n\r\n                </tr>\r\n                <tr style="border:0px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:0px solid #999;">\r\n                    &nbsp;\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:0px solid #999;">\r\n                  <td colspan="7" bgcolor="#fff" align="center" valign="middle" style="border:0px solid #999;">\r\n                    &nbsp;\r\n                  </td>\r\n\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b> Sub-Total:</b>\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.moneda}}\r\n                  </td>\r\n\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.subtotal}}\r\n                  </td>\r\n\r\n\r\n                </tr>\r\n\r\n                <tr style="border:0px solid #999;">\r\n                  <td colspan="7" bgcolor="#fff" align="center" valign="middle" style="border:0px solid #999;">\r\n                    &nbsp;\r\n                  </td>\r\n\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b> IGV:</b>\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.moneda}}\r\n                  </td>\r\n\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.igv}}\r\n                  </td>\r\n\r\n\r\n                </tr>\r\n\r\n                <tr style="border:0px solid #999;">\r\n                  <td colspan="7" bgcolor="#fff" align="center" valign="middle" style="border:0px solid #999;">\r\n                    &nbsp;\r\n                  </td>\r\n\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b> Total:</b>\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.moneda}}\r\n                  </td>\r\n\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.total}}\r\n                  </td>\r\n\r\n\r\n                </tr>\r\n\r\n                <tr style="border:0px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:0px solid #999;">\r\n                    SON: {{factura.totaltexto}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 20px">\r\n                    <b style="font-size: 20px; color:#0067a3">Datos de Pago:</b>\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Tipo Pago:</b> {{factura.tipopago}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Nro. Documento:</b> {{factura.nrodocumento}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Banco:</b> {{factura.banco}}\r\n                  </td>\r\n\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Fecha de Pago:</b> {{factura.fechapago}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Monto:</b> {{factura.monto}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Moneda:</b> {{factura.datospagomoneda}}\r\n                  </td>\r\n\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Nro. Cheque:</b> {{factura.nrocheque}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 20px">\r\n                    <b style="font-size: 20px; color:#0067a3">Datos de Descuentos por Retención o Detracción:</b>\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Tipo Descuento:</b> {{factura.tipodescuento}}\r\n                  </td>\r\n                  <td colspan="8" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b>Nro. Comprobante:</b> {{factura.nrocomprobante}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Monto:</b> {{factura.dsctomonto}}\r\n                  </td>\r\n                  <td colspan="8" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b>Moneda:</b> {{factura.dsctomoneda}}\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:0px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:0px solid #999;">\r\n                    &nbsp;\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 20px">\r\n                    <b style="font-size: 20px; color:#0067a3">Observaciones Comprobante de Pago:</b>\r\n                    <div [innerHTML]="factura.observaciones" style="text-align: left;">\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;" cellpadding="0">\r\n                  <td colspan="12" bgcolor="#fff" cellpadding="0" align="left" valign="top" style="border:1px solid #999;font-size: 20px">\r\n                    <b style="font-size: 20px; color:#0067a3">Observaciones de Pago:</b>\r\n\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            <div [innerHTML]="factura.obscomprobantepago" style="text-align: left; align-content:center; width:900px;">\r\n            </div>\r\n\r\n\r\n\r\n\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n\r\n  </div>\r\n</div>'},"./src/app/factura/comprador/formulario/facturacompradorformulario.component.ts":function(t,r,n){"use strict";function a(){p=$("#dtArticulos").on("init.dt",function(t,r,n){DatatableFunctions.initDatatable(t,r,n,p)}).DataTable({ajax:function(t,r,n){r({data:f.factura.detallefactura})},createdRow:function(t,r,n){"10"===r.posicion||"20"===r.posicion?$(t).addClass("highlight"):$("td",t).eq(0).addClass("text-center")},columns:[{data:"noitem"},{data:"noguia"},{data:"nooc"},{data:"noitemoc"},{data:"descproducto"},{data:"cantidad"},{data:"preciounitreferencial"},{data:"importetotalitem"}],columnDefs:[{className:"text-center",targets:[0,1,2,3,4,5,6,7]}]}),m=$("#dtArticulosHAS").DataTable({ajax:function(t,r,n){r({data:f.factura.detallefactura})},createdRow:function(t,r,n){"10"===r.posicion||"20"===r.posicion?$(t).addClass("highlight"):$("td",t).eq(0).addClass("text-center")},columns:[{data:"noitem"},{data:"noguia"},{data:"nooc"},{data:"noitemoc"},{data:"descproducto"},{data:"cantidad"},{data:"preciounitreferencial"},{data:"importetotalitem"}],columnDefs:[{className:"text-center",targets:[0,1,2,3,4,5,6,7]}]})}var o=n("./node_modules/@angular/router/@angular/router.es5.js"),e=n("./node_modules/@angular/core/@angular/core.es5.js"),i=n("./src/app/model/factura.ts"),l=n("./src/app/service/masterservice.ts"),s=n("./src/app/service/facturaservice.ts"),c=n("./src/app/utils/app.utils.ts"),d=n("./src/app/service/adjuntoservice.ts"),u=n("./src/app/service/login.service.ts"),b=n("./src/app/model/menu.ts");n.d(r,"a",function(){return x});var f,p,m,g,v,h=this&&this.__decorate||function(t,r,n,a){var o,e=arguments.length,i=e<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,r,n,a);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(i=(e<3?o(i):e>3?o(r,n,i):o(r,n))||i);return e>3&&i&&Object.defineProperty(r,n,i),i},y=this&&this.__metadata||function(t,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,r)},x=function(){function t(t,r,n,a,o,e,i){this.router=t,this.route=r,this._masterService=n,this._dataServiceAdjunto=a,this._dataService=o,this._securityService=e,this.cdRef=i,this.step=1,this.id="",this.toggleButton=!0,this.botonImprimir=new b.a,this.url_main_module_page="/factura/comprador/buscar",this.activatedRoute=r,this.listDetalleFactura=[],this.util=new c.a(this.router,this._masterService)}return t.prototype.obtenerBotones=function(){var t=this,r=this._securityService.ObtenerBotonesCache(this.url_main_module_page);r?(console.log("ObtenerBotonesCache",r),this.configurarBotones(r)):this._securityService.obtenerBotones(this.url_main_module_page).subscribe(function(r){console.log("obtenerBotones",r),f.configurarBotones(r),f._securityService.guardarBotonesLocalStore(t.url_main_module_page,r)},function(t){return console.log(t)},function(){})},t.prototype.configurarBotones=function(t){t&&t.length>0&&(this.botonImprimir=t.find(function(t){return"imprimir"===t.nombre})?t.find(function(t){return"imprimir"===t.nombre}):this.botonImprimir,console.log("this.botonImprimir ",this.botonImprimir))},t.prototype.print=function(t){this.factura.tipodocumento_text=$("#tipodocumento option:selected").text(),this.factura.estado_text=$("#estado option:selected").text(),this.factura.moneda_text=$("#moneda option:selected").text(),setTimeout(function(){$("div#print-section").printArea({popTitle:"Comprobante de Pago",mode:"iframe",popClose:!1})},200)},t.prototype.ngOnInit=function(){var t=this;this.factura=new i.a,this.activatedRoute.params.subscribe(function(r){t.id=r.id}),"0"!=this.id?(this.toggleButton=!0,$("#btnAgregarItemOC").addClass("disabled"),$("#btnEliminarItemOC").addClass("disabled"),$("#secCabecera").hide(),$("#secFactura").show()):(this.toggleButton=!1,$("#secCabecera").show(),$("#secFactura").hide()),f=this,this.util.listEstadoCP(function(t){f.listEstadoCombo=t}),this.util.listMonedas(function(t){f.listMonedaCombo=t}),this.util.listTipoComprobante(function(t){f.listTipoComprobante=t})},t.prototype.ngAfterViewInit=function(){var t=this;DatatableFunctions.ModalSettings(),this._dataService.obtener(this.id,"C").subscribe(function(r){t.factura=r,setTimeout(function(){$("input").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),$("select").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),$("textarea").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),p.ajax.reload(),m.ajax.reload(),g.ajax.reload()},100)},function(t){return console.log(t)},function(){}),g=$("#dtArchivos").on("draw.dt",function(t,r,n){DatatableFunctions.initDatatable(t,r,n,g)}).DataTable({ajax:function(t,r,n){r({data:f.factura.docadjuntos})},columns:[{data:"id"},{data:"nombre"},{data:"descripcion"},{data:"id"}],columnDefs:[{className:"text-center",targets:[1,2,3]},{render:function(t,r,n){return""},targets:0,orderable:!1},{render:function(t,r,n){return'<a class="editar" href="javascript:void(0);" row-id="'+n.id+'"><button class="btn btn-simple btn-info btn-icon download" rel="tooltip" title="Bajar Archivo" data-placement="left"><i class="material-icons">get_app</i></button></a><button class="btn btn-simple btn-danger btn-icon remove" rel="tooltip" title="Eliminar" data-placement="left"><i class="material-icons">delete</i></button>'},targets:3}]}),g.on("click",".download",function(t){var r=$(this).closest("tr"),n=r.find("a.editar").attr("row-id"),a=f.factura.docadjuntos;v=a.find(function(t){return t.id==n}),f._dataServiceAdjunto.DescargarArchivo(v).subscribe(function(t){saveAs(t,v.nombre)},function(t){return console.log(t)},function(){}),t.preventDefault()}),DatatableFunctions.registerCheckAll(),a(),this.obtenerBotones()},t.prototype.ngAfterViewChecked=function(){this.cdRef.detectChanges()},t.prototype.ngOnChanges=function(t){},t.prototype.registrarFactura=function(t){$("#secCabecera").hide(),$("#secFactura").show(),this.step=2},t.prototype.habilitarEdicion=function(t){this.toggleButton=!1,$("#btnAgregarItemOC").removeClass("disabled"),$("#btnEliminarItemOC").removeClass("disabled")},t}();x=h([n.i(e.Component)({selector:"facturacompradorformulario-cmp",template:n("./src/app/factura/comprador/formulario/facturacompradorformulario.component.html"),providers:[d.a,l.a,s.a,u.a]}),y("design:paramtypes",["function"==typeof(C=void 0!==o.c&&o.c)&&C||Object,"function"==typeof(w=void 0!==o.b&&o.b)&&w||Object,"function"==typeof(D=void 0!==l.a&&l.a)&&D||Object,"function"==typeof(S=void 0!==d.a&&d.a)&&S||Object,"function"==typeof(F=void 0!==s.a&&s.a)&&F||Object,"function"==typeof(E=void 0!==u.a&&u.a)&&E||Object,"function"==typeof(B=void 0!==e.ChangeDetectorRef&&e.ChangeDetectorRef)&&B||Object])],x);var C,w,D,S,F,E,B},"./src/app/factura/factura.module.ts":function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=n("./node_modules/@angular/core/@angular/core.es5.js"),o=n("./node_modules/@angular/router/@angular/router.es5.js"),e=n("./node_modules/@angular/common/@angular/common.es5.js"),i=n("./node_modules/@angular/forms/@angular/forms.es5.js"),l=n("./src/app/utils/utils.module.ts"),s=n("./src/app/factura/proveedor/formulario/facturaproveedorformulario.component.ts"),c=n("./src/app/factura/comprador/formulario/facturacompradorformulario.component.ts"),d=n("./src/app/factura/proveedor/buscar/facturaproveedorbuscar.component.ts"),u=n("./src/app/factura/factura.routing.ts"),b=n("./src/app/directives/datepicker.module.ts"),f=n("./src/app/factura/comprador/buscar/facturacompradorbuscar.component.ts");n.d(r,"FacturaModule",function(){return m});var p=this&&this.__decorate||function(t,r,n,a){var o,e=arguments.length,i=e<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,r,n,a);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(i=(e<3?o(i):e>3?o(r,n,i):o(r,n))||i);return e>3&&i&&Object.defineProperty(r,n,i),i},m=function(){function t(){}return t}();m=p([n.i(a.NgModule)({imports:[e.CommonModule,o.a.forChild(u.a),i.FormsModule,l.a,b.a],declarations:[d.a,s.a,f.a,c.a]})],m)},"./src/app/factura/factura.routing.ts":function(t,r,n){"use strict";var a=n("./src/app/factura/proveedor/buscar/facturaproveedorbuscar.component.ts"),o=n("./src/app/factura/proveedor/formulario/facturaproveedorformulario.component.ts"),e=n("./src/app/factura/comprador/formulario/facturacompradorformulario.component.ts"),i=n("./src/app/factura/comprador/buscar/facturacompradorbuscar.component.ts"),l=n("./src/app/service/auth-guard.service.ts");n.d(r,"a",function(){return s});var s=[{path:"",children:[{path:"proveedor/formulario/:id",component:o.a,canActivate:[l.a]},{path:"proveedor/buscar",component:a.a,canActivate:[l.a]},{path:"comprador/buscar",component:i.a,canActivate:[l.a]},{path:"comprador/formulario/:id",component:e.a,canActivate:[l.a]}]}]},"./src/app/factura/proveedor/buscar/facturaproveedorbuscar.component.html":function(t,r){t.exports='<div class="main-content">\r\n    <div class="container-fluid">\r\n        <div class="row">\r\n            <div class="col-sm-12">\r\n                <div class="card">\r\n                    <form method="#" action="#">\r\n                        <div class="card-header card-header-text" data-background-color="blue">\r\n                            <h4 class="card-title">Buscar Comprobante de Pago</h4>\r\n                        </div>\r\n                        <div class="card-content">\r\n                            <div class="row">\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Número Comprobante de Pago\r\n                                        </label>\r\n                                        <input [(ngModel)]="filtro.nrocomprobantepago" name="nrocomprobantepago" type="text" class="form-control">\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Razón Social Cliente\r\n                                        </label>\r\n                                        <input [(ngModel)]="filtro.razonsocialcliente" name="razonsocialcliente" type="text" class="form-control">\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">RUC Cliente\r\n                                        </label>\r\n                                        <input [(ngModel)]="filtro.ruccliente" name="ruccliente" type="text" class="form-control">\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </div>\r\n                            <div class="row">\r\n                               \r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Fecha Emisión Del</label>\r\n                                        <input type="text" [(ngModel)]="filtro.fechaemisioninicio" name="fechaemisioninicio" class="form-control" datepicker />\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Al</label>\r\n                                        <input type="text" [(ngModel)]="filtro.fechaemisionfin" name="fechaemisionfin" class="form-control" datepicker />\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4" *ngIf="filtro.publicada">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Estado\r\n                                        </label>\r\n                                        <select [(ngModel)]="filtro.estado" name="estado" class="form-control">\r\n                                            <option value="NONE" selected>TODOS</option>\r\n                                            <option *ngFor="let opt of listEstadoCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n\r\n\r\n\r\n                            </div>\r\n                            <div class="row">\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="control-label">Moneda\r\n                                        </label>\r\n                                        <select [(ngModel)]="filtro.moneda" name="moneda" class="form-control">\r\n                                            <option value="NONE" selected>TODOS</option>\r\n                                            <option *ngFor="let opt of listMonedaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group label-floating">\r\n                                        <label class="label-on-left">Tipo de Emisión</label>\r\n                                        <div class="togglebutton">\r\n                                            <label>\r\n                                                  <input type="checkbox" [checked]="filtro.tipoemisionfisico" (change)="filtro.tipoemisionfisico = !filtro.tipoemisionfisico" > Físico\r\n                                              </label>\r\n                                            <label>\r\n                                                  <input type="checkbox" [checked]="filtro.tipoemisionelectronico"  (change)="filtro.tipoemisionelectronico = !filtro.tipoemisionelectronico" > Electrónico\r\n                                          </label>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-sm-4">\r\n                                    <div class="form-group">\r\n                                       \r\n                                        <div class="togglebutton">\r\n                                            \r\n                                            <label>\r\n                                                <input type="checkbox" [checked]="!filtro.publicada"  (change)="filtro.publicada = !filtro.publicada;filtro.estado=\'NONE\'; clicked($event); " > Borrador\r\n                                        </label>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                \r\n                            </div>\r\n                            <div class="row">\r\n                                    <div class="col-sm-8">\r\n                                    </div>\r\n                                    <div class="col-sm-4">\r\n                                            <div class="form-group">\r\n        \r\n                                                <button *ngIf="botonBuscar.visible" [disabled]="!botonBuscar.habilitado" class="btn btn-default" (click)="clicked($event)">{{botonBuscar.Titulo}}</button>\r\n                                                <button *ngIf="botonBuscar.visible" [disabled]="!botonBuscar.habilitado" class="btn btn-default" (click)="limpiar($event)">Limpiar</button>\r\n                                            </div>\r\n                                        </div>\r\n                                </div>\r\n                            <nav class="navbar navbar-info navbar-without-margin" role="navigation">\r\n                                <div class="container-fluid">\r\n                                    <div class="navbar-header">\r\n                                        <span class="navbar-brand">Resultados</span>\r\n                                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">\r\n                                            <span class="sr-only">Acciones</span>\r\n                                            <span class="icon-bar"></span>\r\n                                            <span class="icon-bar"></span>\r\n                                            <span class="icon-bar"></span>\r\n                                            \r\n                                        </button>\r\n                                        \r\n                                    </div>\r\n                                  \r\n                                </div>\r\n                            </nav>\r\n\r\n\r\n                            <div class="row">\r\n                                <div class="col-sm-6">\r\n                                </div>\r\n                                <div class="col-sm-6">\r\n                                    <div class="form-group form-group-without-margin">\r\n                                       \r\n                                        <button *ngIf="botonDescartar.visible && !filtro.publicada" [disabled]="!botonDescartar.habilitado" class="btn btn-default pull-right"  (click)="DescartarBorradores($event)">{{botonDescartar.Titulo}}</button>\r\n                                        <button *ngIf="botonRegistrar.visible" [disabled]="!botonRegistrar.habilitado" class="btn btn-default pull-right" [routerLink]="[\'/factura/proveedor/formulario\', \'0\']">{{botonRegistrar.Titulo}}</button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="material-datatables table-responsive">\r\n                                <table id="dtResultados" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                                    <thead>\r\n                                        <tr>\r\n\r\n                                            <th class="disabled-sorting text-right">\r\n                                                <div class="checkbox text-right">\r\n                                                    <label><input type="checkbox" name="optionsCheckboxes" class="checkall" ></label>\r\n                                                </div>\r\n                                            </th>\r\n                                            <th>No. Doc. de Pago</th>\r\n                                            <th>Organización Compradora</th>\r\n                                            <th>Tipo Doc</th>\r\n                                            <th>Documento ERP</th>\r\n                                            <th>Forma de Pago</th>\r\n                                            <th>Importe Total</th>\r\n                                            <th>Estado</th>\r\n                                            <th>Fecha de Emisión</th>\r\n                                            <th>Fecha Prog. Pago</th>\r\n                                            <th>Fecha Pago</th>\r\n                                            <th>Notas</th>\r\n                                            <th class="disabled-sorting text-center">Acciones</th>\r\n                                        </tr>\r\n                                    </thead>\r\n\r\n                                </table>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div id="mdlObservaciones" class="modal fade" tabindex="-1" role="dialog">\r\n    <div class="modal-dialog modal-lg" role="document">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n              </td>\r\n              <td class="cell-title">\r\n                <div class="card-content">\r\n                  <h4 class="card-title modal-title">Observaciones</h4>\r\n\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n          \r\n        </div>\r\n        <div class="modal-body">\r\n          <div class="row">\r\n                <div class="col-sm-12 text-center">\r\n                  <b>Observaciones Comprobante de pago:</b><p></p>\r\n                </div>\r\n              </div>\r\n              <div class="row">\r\n                <div class="col-sm-12">\r\n                  <span id="mdlObservaciones_obs"></span>\r\n                </div>\r\n              </div>\r\n              <div class="row">\r\n                <div class="col-sm-12 text-center" >\r\n                  <p></p><b>Observaciones de pago:</b><p></p>\r\n                </div>\r\n              </div>\r\n              <div class="row">\r\n                <div class="col-sm-12">\r\n                  <span id="mdlObservaciones_obs_pago"></span>\r\n                </div>\r\n              </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>\r\n        </div>\r\n      </div>\r\n      \x3c!-- /.modal-content --\x3e\r\n    </div>\r\n    \x3c!-- /.modal-dialog --\x3e\r\n  </div>'},"./src/app/factura/proveedor/buscar/facturaproveedorbuscar.component.ts":function(t,r,n){"use strict";function a(){var t=c.s;b.filtro.publicada&&(t=c.r),f=$("#dtResultados").on("init.dt",function(t,r,n){DatatableFunctions.initDatatable(t,r,n,f)}).DataTable({order:[[8,"desc"]],searching:!1,serverSide:!0,ajax:{beforeSend:function(t){b.util.tokenValid()&&(t.setRequestHeader("Authorization","Bearer "+localStorage.getItem("access_token")),t.setRequestHeader("origen_datos","PEB2M"),t.setRequestHeader("tipo_empresa","P"),t.setRequestHeader("org_id",localStorage.getItem("org_id")),t.setRequestHeader("Ocp-Apim-Subscription-Key",localStorage.getItem("Ocp_Apim_Subscription_Key")))},url:t,dataSrc:"data",data:function(t){if(""!=b.filtro.nrocomprobantepago&&(t.NumeroFactura=b.filtro.nrocomprobantepago),""!=b.filtro.razonsocialcliente&&(t.RazonSocialComprador=b.filtro.razonsocialcliente),""!=b.filtro.ruccliente&&(t.RucCliente=b.filtro.ruccliente),"NONE"!=b.filtro.estado&&(t.Estado=b.filtro.estado),"NONE"!=b.filtro.moneda&&(t.Moneda=b.filtro.moneda),b.filtro.fechaemisioninicio){var r=DatatableFunctions.ConvertStringToDatetime(b.filtro.fechaemisioninicio);t.FechaEmision_inicio=DatatableFunctions.FormatDatetimeForMicroService(r)}if(b.filtro.fechaemisionfin){var n=DatatableFunctions.AddDayEndDatetime(DatatableFunctions.ConvertStringToDatetime(b.filtro.fechaemisionfin));t.FechaEmision_fin=DatatableFunctions.FormatDatetimeForMicroService(n)}t.column_names="IdComprobante,NumeroFactura,RazonSocialProveedor,TipoComprobante,DocumentoErp,FormaPago,Total,Moneda,Estado,FechaEmision,FechaProgramadaPago,FechaPago,Observaciones,ObservacionesPago,RazonSocialCliente",b.filtro.publicada||(t.column_names="[NumeroFactura,RazonSocialProveedor,RazonSocialCliente,TipoComprobante,DocumentoErp,FormaPago,Total,Moneda,Estado,FechaEmision,FechaProgramadaPago,FechaPago,Observaciones,ObservacionesPago]")}},columns:[{data:"NumeroFactura",name:"NumeroFactura"},{data:"NumeroFactura",name:"NumeroFactura"},{data:"RazonSocialCliente",name:"RazonSocialCliente"},{data:"TipoComprobante",name:"TipoComprobante"},{data:"NumeroFactura",name:"NumeroFactura"},{data:"FormaPago",name:"FormaPago"},{data:"Total",name:"Total"},{data:"Estado",name:"Estado"},{data:"FechaEmision",name:"FechaEmision"},{data:"FechaProgramadaPago",name:"FechaProgramadaPago",visible:!1},{data:"FechaPago",name:"FechaPago"},{data:"NumeroFactura",name:"Nota"},{data:"NumeroFactura",name:"NumeroFactura"}],columnDefs:[{className:"text-center",targets:[1,2,3,4,5,6,7,8,9,10,11,12]},{render:function(t,r,n){return'<div class="text-right" height="100%"><div class="checkbox text-right"><label><input class="checkboxCP" type="checkbox" value="'+n.IdComprobante+'"  name="optionsCheckboxes"></label></div></div>'},targets:0},{render:function(t,r,n){return n.DocumentoErp?n.DocumentoErp:""},targets:4},{render:function(t,r,n){return n.Moneda+" "+DatatableFunctions.FormatNumber(n.Total)},targets:6},{render:function(t,r,n){var a=b.filtro.publicada?"0":"1",o="Ver/Editar";b.filtro.publicada&&(o="Ver");var e="",i='href="/factura/comprador/formulario/'+n.IdComprobante+'"';return b.botonDetalle.habilitado||(e="disabled",i=""),'<div class="text-center"><a class="editar" '+i+' row-id="'+n.IdComprobante+'" esBorrador="'+a+'" id_doc="'+n.id_doc+'"><button class="btn btn-simple btn-info btn-icon edit" rel="tooltip" title="'+o+'" data-placement="left" '+e+'><i class="material-icons">visibility</i></button></a></div>'},targets:12},{render:function(t,r,n){return'<a data-toggle="modal" class="observaciones" data-target="#mdlObservaciones" style="cursor:hand">Observaciones</a>'},targets:11}]}),f.on("click",".observaciones",function(t){var r=$(this).closest("tr"),n=f.row(r).data();$("#mdlObservaciones_obs").html(n.Observaciones),$("#mdlObservaciones_obs_pago").html(null==n.ObservacionesPago?"":DatatableFunctions.ReplaceToken(n.ObservacionesPago)),t.preventDefault()}),f.on("click",".edit",function(t){if(b.botonDetalle.habilitado){var r=$(this).closest("tr");f.row(r).data();console.log("click edit",t);var n=r.find("a.editar").attr("row-id"),a=r.find("a.editar").attr("esBorrador"),o=r.find("a.editar").attr("id_doc"),e=["/factura/proveedor/formulario",n,{b:a,c:o}];b.navigate(e)}t.preventDefault()})}var o=n("./node_modules/@angular/core/@angular/core.es5.js"),e=n("./node_modules/@angular/router/@angular/router.es5.js"),i=n("./src/app/utils/app.utils.ts"),l=n("./src/app/service/masterservice.ts"),s=n("./src/app/service/facturaservice.ts"),c=n("./src/app/utils/app.constants.ts"),d=n("./src/app/model/menu.ts"),u=n("./src/app/service/login.service.ts");n.d(r,"a",function(){return h});var b,f,p=this&&this.__decorate||function(t,r,n,a){var o,e=arguments.length,i=e<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,r,n,a);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(i=(e<3?o(i):e>3?o(r,n,i):o(r,n))||i);return e>3&&i&&Object.defineProperty(r,n,i),i},m=this&&this.__metadata||function(t,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,r)},g=this&&this.__awaiter||function(t,r,n,a){return new(n||(n=Promise))(function(o,e){function i(t){try{s(a.next(t))}catch(t){e(t)}}function l(t){try{s(a.throw(t))}catch(t){e(t)}}function s(t){t.done?o(t.value):new n(function(r){r(t.value)}).then(i,l)}s((a=a.apply(t,r||[])).next())})},v=this&&this.__generator||function(t,r){function n(t){return function(r){return a([t,r])}}function a(n){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,e&&(i=e[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(e,n[1])).done)return i;switch(e=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,e=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){s.label=n[1];break}if(6===n[0]&&s.label<i[1]){s.label=i[1],i=n;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(n);break}i[2]&&s.ops.pop(),s.trys.pop();continue}n=r.call(t,s)}catch(t){n=[6,t],e=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,e,i,l,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},h=function(){function t(t,r,n,a,o,e){this.cpService=t,this.router=r,this.route=n,this._masterService=a,this._securityService=o,this.cdRef=e,this.botonBuscar=new d.a,this.botonDetalle=new d.a,this.botonDescartar=new d.a,this.botonRegistrar=new d.a,this.url_main_module_page="/factura/proveedor/buscar",this.util=new i.a(this.router,this._masterService)}return t.prototype.navigate=function(t){this.router.navigate(t,{relativeTo:this.route})},t.prototype.obtenerBotones=function(){var t=this,r=this._securityService.ObtenerBotonesCache(this.url_main_module_page);r?this.configurarBotones(r):this._securityService.obtenerBotones(this.url_main_module_page).subscribe(function(r){b.configurarBotones(r),b._securityService.guardarBotonesLocalStore(t.url_main_module_page,r)},function(t){return console.log(t)},function(){})},t.prototype.configurarBotones=function(t){t&&t.length>0&&(this.botonBuscar=t.find(function(t){return"buscar"===t.nombre})?t.find(function(t){return"buscar"===t.nombre}):this.botonBuscar,this.botonDetalle=t.find(function(t){return"detalle"===t.nombre})?t.find(function(t){return"detalle"===t.nombre}):this.botonDetalle,this.botonDescartar=t.find(function(t){return"descartarborrador"===t.nombre})?t.find(function(t){return"descartarborrador"===t.nombre}):this.botonDescartar,this.botonRegistrar=t.find(function(t){return"registrarcomprobante"===t.nombre})?t.find(function(t){return"registrarcomprobante"===t.nombre}):this.botonRegistrar)},t.prototype.validarfiltros=function(){if(null!=this.filtro.fechaemisioninicio&&""!=this.filtro.fechaemisioninicio.toString()&&null!=this.filtro.fechaemisionfin&&""!=this.filtro.fechaemisionfin.toString()){var t=DatatableFunctions.ConvertStringToDatetime(b.filtro.fechaemisioninicio),r=DatatableFunctions.ConvertStringToDatetime(b.filtro.fechaemisionfin);if(DatatableFunctions.FormatDatetimeForMicroService(t)>DatatableFunctions.FormatDatetimeForMicroService(r))return swal({text:"El rango de Fechas de creación seleccionado no es correcto.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1}return!0},t.prototype.DescartarBorradoresAsincrono=function(t){return g(this,void 0,void 0,function(){var r,n,a,o,e;return v(this,function(i){switch(i.label){case 0:r=0,n=t,i.label=1;case 1:return r<n.length?(a=n[r],o=$(a).val(),[4,this.cpService.descartarBorrador(o).toPromise()]):[3,4];case 2:e=i.sent(),i.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},t.prototype.DescartarBorradores=function(t){return g(this,void 0,void 0,function(){var r;return v(this,function(n){return t.preventDefault(),r=$("#dtResultados").find(".checkboxCP:checked"),r.length<=0?(swal({text:"Debe seleccionar un comprobante de pago.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1]):(swal({html:"¿Está seguro de descartar los comprobantes de pagos seleccionados?",type:"warning",showCancelButton:!0,confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",buttonsStyling:!1,confirmButtonClass:"btn btn-default",cancelButtonClass:"btn btn-warning"}).then(function(){b.DescartarBorradoresAsincrono(r),setTimeout(function(){f.ajax.reload(),swal({text:"Se descartó los comprobantes de pagos seleccionados.",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success"})},1e3)},function(t){}),[2])})})},t.prototype.clicked=function(t){this.validarfiltros()&&(this.filtro.publicada?f.ajax.url(c.r).load():f.ajax.url(c.s).load()),t&&t.preventDefault()},t.prototype.limpiar=function(t){this.filtroDefecto(),setTimeout(function(){$("input").each(function(){$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")})},200),t&&t.preventDefault()},t.prototype.filtroDefecto=function(){var t=new Date;t.setMonth(t.getMonth()-1),this.filtro={nrocomprobantepago:"",razonsocialcliente:"",ruccliente:"",estado:"NONE",moneda:"NONE",fechaemisioninicio:t,fechaemisionfin:new Date,tipoemisionfisico:!0,tipoemisionelectronico:!0,publicada:!0}},t.prototype.ngOnInit=function(){b=this,this.filtroDefecto(),this.util.listMonedas(function(t){b.listMonedaCombo=t}),this.util.listEstadoCP(function(t){t=t.filter(function(t){return"CBORR"!=t.valor}),b.listEstadoCombo=t})},t.prototype.ngAfterViewInit=function(){a(),DatatableFunctions.registerCheckAll(),this.obtenerBotones()},t.prototype.ngAfterViewChecked=function(){this.cdRef.detectChanges()},t}();h=p([n.i(o.Component)({selector:"facturaproveedorbuscar-cmp",template:n("./src/app/factura/proveedor/buscar/facturaproveedorbuscar.component.html"),providers:[l.a,s.a]}),m("design:paramtypes",["function"==typeof(y=void 0!==s.a&&s.a)&&y||Object,"function"==typeof(x=void 0!==e.c&&e.c)&&x||Object,"function"==typeof(C=void 0!==e.b&&e.b)&&C||Object,"function"==typeof(w=void 0!==l.a&&l.a)&&w||Object,"function"==typeof(D=void 0!==u.a&&u.a)&&D||Object,"function"==typeof(S=void 0!==o.ChangeDetectorRef&&o.ChangeDetectorRef)&&S||Object])],h);var y,x,C,w,D,S},"./src/app/factura/proveedor/formulario/facturaproveedorformulario.component.html":function(t,r){t.exports='<div class="main-content">\r\n  <div class="container-fluid">\r\n    <div class="row">\r\n      <div class="col-sm-12">\r\n        <div class="card">\r\n          <form method="#" action="#">\r\n            <div class="card-header card-header-text" data-background-color="blue">\r\n              <h4 class="card-title">Comprobante de Pago</h4>\r\n            </div>\r\n            <div class="card-content" id="secCabecera">\r\n              <div class="card-header">\r\n                <h4 class="card-title">Comprobante de Pago Cabecera</h4>\r\n              </div>\r\n              <div class="card-content">\r\n                <div class="row">\r\n                  <div class="col-sm-8 col-sm-offset-2">\r\n                    <div class="row">\r\n                      <div class="col-sm-10">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">RUC Organización Compradora <span class="star">*</span>\r\n                          </label>\r\n                          <input name="txtRucCliente" type="text" readonly="true" disabled [(ngModel)]="factura.ruccliente" class="form-control">\r\n                        </div>\r\n                      </div>\r\n                      <div class="col-sm-2">\r\n                        <button data-toggle="modal" data-target="#mdlBuscarCliente" class="btn btn-fill btn-default" (click)="buscarCliente($event)"\r\n                          [disabled]="toggleButton">Buscar</button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                    <div class="col-sm-8 col-sm-offset-2">\r\n                        <div class="form-group label-floating">\r\n                          <label class="control-label">Nombre de Organización Compradora <span class="star">*</span>\r\n                          </label>\r\n                          <input name="txtRazonSocialCliente" type="text" readonly="true" disabled [(ngModel)]="factura.razonsocialcliente" class="form-control">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="row">\r\n                    <div class="col-sm-8 col-sm-offset-2">\r\n                        <div class="radio">\r\n                          <label> Guías de Material\r\n                          <input type="radio" [checked]="factura.esguiamaterial"  (change)="onEsMaterialChange($event)" name="tipofactura" >\r\n                          </label>\r\n                          <label> Hojas de Aceptación de Servicio\r\n                          <input type="radio"  [checked]="factura.eshas"  (change)="onEsHasChange($event)" name="tipofactura">\r\n                          </label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="card-content" id="secFactura">\r\n              <div class="card-header">\r\n                <h4 class="card-title">Comprobante de Pago Cabecera</h4>\r\n              </div>\r\n\r\n              <div class="card-content" *ngIf="esBorrador===\'1\'">\r\n                <div class=\'row\'>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Tipo de Emisión\r\n                      </label>\r\n                      <div class="radio">\r\n                          <label> Físico\r\n                              <input type="radio" name="optionsCheckboxes" [checked]="factura.esfisico" [disabled]="toggleButton"  (change)="onEsFisicoChange($event)">\r\n                          </label>\r\n                          <label> Electrónico\r\n                              <input type="radio" name="optionsCheckboxes" [checked]="factura.eselectronico" [disabled]="toggleButton" (change)="onEsElectronicolChange($event)">\r\n                          </label>\r\n                      </div>\r\n\r\n\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n\r\n                <div class="row">\r\n                  <div class="col-sm-1">\r\n\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Serie <span class="star">*</span></label>\r\n                      <input name="nocomprobantepago1" id="nocomprobantepago1" [(ngModel)]="factura.nocomprobantepago1" pattern="[a-zA-Z0-9\\s]+"\r\n                        type="text" maxlength="3" [disabled]="toggleButton" class="form-control">\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class="col-sm-3">\r\n\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">N° Correlativo <span class="star">*</span></label>\r\n                      <input name="nocomprobantepago2" id="nocomprobantepago2" [(ngModel)]="factura.nocomprobantepago2" pattern="[a-zA-Z0-9\\s]+"\r\n                        type="text" maxlength="7" [disabled]="toggleButton" class="form-control">\r\n\r\n                    </div>\r\n                  </div>\r\n\r\n\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">RUC Org. Compradora <span class="star">*</span>\r\n                                        </label>\r\n                      <input name="ruccliente" [(ngModel)]="factura.ruccliente" type="text" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Razón Social Org. Compradora <span class="star">*</span>\r\n                                        </label>\r\n                      <input name="razonsocialcliente" [(ngModel)]="factura.razonsocialcliente" type="text" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha Emisión <span class="star">*</span>\r\n                                        </label>\r\n                      <input name="fechaemision" [(ngModel)]="factura.fechaemision" id="txtFechaEmision" datepicker type="text" [disabled]="toggleButton"\r\n                        class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Tipo Documento <span class="star">*</span>\r\n                                        </label>\r\n                      <select id="tipodocumento" name="tipodocumento" class="form-control" [(ngModel)]="factura.tipodocumento" [disabled]="toggleButton">\r\n                                          <option disabled=""></option>\r\n                                          <option *ngFor="let opt of listTipoComprobante" value="{{opt.valor}}"> {{opt.desc}} </option> \r\n                                        </select>\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Moneda <span class="star">*</span>\r\n                                                </label>\r\n                      <select id="moneda" [(ngModel)]="factura.moneda" name="moneda" class="form-control" [disabled]="toggleButton">\r\n                                              <option disabled="" selected=""></option>\r\n                                              <option *ngFor="let opt of listMonedaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                                            </select>\r\n\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">SubTotal \r\n                                        </label>\r\n                      <input name="subtotal" [(ngModel)]="factura.subtotal" type="text" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Total Descuento \r\n                                        </label>\r\n                      <input name="dsctomonto" [(ngModel)]="factura.dsctomonto" type="text" [disabled]="toggleButton" class="form-control" pattern="^(((\\d{1,3})(,\\d{3})*)|(\\d+))(.\\d+)?$">\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n\r\n\r\n\r\n              </div>\r\n\r\n              <div class="card-content" *ngIf="esBorrador===\'0\'">\r\n\r\n\r\n                <div class="row">\r\n                  <div class="col-sm-3">\r\n\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">No. Comprobante de Pago</label>\r\n                      <input name="nocomprobantepago" id="nocomprobantepago" [(ngModel)]="factura.nocomprobantepago" type="text" [disabled]="toggleButton"\r\n                        class="form-control">\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class="col-sm-3">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">RUC Org. Proveedora\r\n                        </label>\r\n                      <input name="rucproveedor" [(ngModel)]="factura.rucproveedor" type="text" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Razón Social Org. Proveedora \r\n                        </label>\r\n                      <input name="razonsocialproveedor" [(ngModel)]="factura.razonsocialproveedor" type="text" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-2">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Tipo Documento \r\n                          </label>\r\n                      <select id="tipodocumento" name="tipodocumento" class="form-control" [(ngModel)]="factura.tipodocumento" [disabled]="toggleButton">\r\n                            <option disabled=""></option>\r\n                            <option *ngFor="let opt of listTipoComprobante" value="{{opt.valor}}"> {{opt.desc}} </option> \r\n                          </select>\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n                <div class=\'row\'>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">RUC Org. Compradora \r\n                            </label>\r\n                      <input name="ruccliente" [(ngModel)]="factura.ruccliente" type="text" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Razón Social Org. Compradora \r\n                            </label>\r\n                      <input name="razonsocialcliente" [(ngModel)]="factura.razonsocialcliente" type="text" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class="col-sm-4" *ngIf="id!=0">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Estado\r\n                            </label>\r\n                      <select id="estado" [(ngModel)]="factura.estado" name="estado" class="form-control" disabled>\r\n                              <option disabled="" selected=""></option>\r\n                              <option *ngFor="let opt of listEstadoCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                            </select>\r\n                    </div>\r\n                  </div>\r\n\r\n\r\n\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-12">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Guías de Despacho\r\n                        </label>\r\n                      <input name="guiasdespacho" type="text" [(ngModel)]="factura.guiasdespacho" [disabled]="toggleButton" class="form-control">\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n                <div class="row">\r\n\r\n                  <div class="col-sm-12">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Orden de Compra/Servicio/Contrato\r\n                                          </label>\r\n                      <input name="ordencompraserviciocontrato" [(ngModel)]="factura.ordencompraserviciocontrato" type="text" [disabled]="toggleButton"\r\n                        class="form-control">\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n                <div class="row">\r\n                  \x3c!--<div class="col-sm-4" >\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha Vencimiento\r\n                      </label>\r\n                      <input name="txtFechaVencimiento" id="txtFechaProgPago" datepicker  disabled [(ngModel)]="factura.fechavencimiento" type="text" [disabled]="toggleButton"\r\n                        class="form-control">\r\n                    </div>\r\n                  </div>--\x3e\r\n                  <div class="col-sm-4">\r\n                      <div class="form-group label-floating">\r\n                        <label class="control-label">Fecha Emisión \r\n                        </label>\r\n                        <input name="fechaemision" [(ngModel)]="factura.fechaemision" id="txtFechaEmision" datepicker disabled type="text" [disabled]="toggleButton"\r\n                          class="form-control">\r\n                      </div>\r\n                    </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha de Recepción\r\n                      </label>\r\n                      <input name="fecharecepcion" id="fecharecepcion" datepicker disabled [(ngModel)]="factura.fecharecepcion" type="text" [disabled]="toggleButton"\r\n                        class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Fecha de Registro\r\n                      </label>\r\n                      <input name="fecharegistro" id="fecharegistro" datepicker disabled [(ngModel)]="factura.fecharegistro" type="text" [disabled]="toggleButton"\r\n                        class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n         \r\n                <div class="row">\r\n                  <div class="col-sm-4" *ngIf="id!=0">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Documento ERP \r\n                      </label>\r\n                      <input name="documentoerp" type="text" [(ngModel)]="factura.documentoerp" [disabled]="toggleButton" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Forma de Pago\r\n                      </label>\r\n                      <input name="formapago" type="text" [(ngModel)]="factura.formapago" [disabled]="toggleButton" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Moneda \r\n                          </label>\r\n                      <select id="moneda" [(ngModel)]="factura.moneda" name="moneda" class="form-control" [disabled]="toggleButton">\r\n                        <option disabled="" selected=""></option>\r\n                        <option *ngFor="let opt of listMonedaCombo" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n                      </select>\r\n\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n \r\n\r\n              </div>\r\n              <div class="card-header" *ngIf="esBorrador===\'1\'">\r\n                <h4 class="card-title">Tipo de Impuesto</h4>\r\n                <small>El impuesto 1 se calcula por defecto al 18%</small>\r\n              </div>\r\n              <div class="card-content" *ngIf="esBorrador===\'1\'">\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Impuesto 1 <span class="star">*</span>\r\n                      </label>\r\n                      <input name="impuesto1" type="text" [(ngModel)]="factura.impuesto1" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Impuesto 2 \r\n                      </label>\r\n                      <input name="impuesto2" id="impuesto2" type="text" [(ngModel)]="factura.impuesto2" [disabled]="toggleButton" (change)="calcularTotal($event)" class="form-control"  pattern="^(((\\d{1,3})(,\\d{3})*)|(\\d+))(.\\d+)?$">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Impuesto 3\r\n                      </label>\r\n                      <input name="impuesto3" id="impuesto3" type="text" [(ngModel)]="factura.impuesto3" [disabled]="toggleButton" (change)="calcularTotal($event)" class="form-control" pattern="^(((\\d{1,3})(,\\d{3})*)|(\\d+))(.\\d+)?$">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Importe Total <span class="star">*</span>\r\n                      </label>\r\n                      <input name="importetotal" id="importetotal" type="text" [(ngModel)]="factura.importetotal" disabled class="form-control">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Importe Referencial\r\n                      </label>\r\n                      <input name="importereferencial" type="text" [(ngModel)]="factura.importereferencial" [disabled]="toggleButton" class="form-control" pattern="^(((\\d{1,3})(,\\d{3})*)|(\\d+))(.\\d+)?$">\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-sm-4">\r\n                    <div class="form-group label-floating">\r\n                      <label class="control-label">Observaciones\r\n                      </label>\r\n                      <input name="observaciones" type="text" [(ngModel)]="factura.observaciones" [disabled]="toggleButton" class="form-control">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n\r\n              <div class="card {{factura.eshas ? \'hidden\' : \'\'}}">\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n                <div class="card-content">\r\n                  <h4 class="card-title">Detalle</h4>\r\n                  <div class="toolbar">\r\n                    <div class="row">\r\n                      <div class="col-sm-12">\r\n                        <nav class="navbar navbar-info" role="navigation">\r\n                          <div class="container-fluid">\r\n                            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\r\n\r\n                            </div>\r\n                          </div>\r\n                        </nav>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="row" *ngIf="!toggleButton">\r\n                    <div class="col-sm-12">\r\n                      <div class="form-group form-group-without-margin">\r\n\r\n                        <button id="btnEliminarItemOC" [disabled]="toggleButton" class="btn btn-default pull-right" (click)="eliminarArticulos($event)">Eliminar</button>\r\n                        <button id="btnAgregarItemOC" [disabled]="toggleButton" class="btn btn-default pull-right" (click)="AbrirAgregarGuia($event)">Añadir Guía</button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="material-datatables table-responsive" style="display:block">\r\n                    <table id="dtArticulos" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                      <thead>\r\n                        <tr>\r\n\r\n                          <th class="disabled-sorting text-right">\r\n                            <div class="checkbox text-right">\r\n                              <label><input type="checkbox" name="optionsCheckboxes" class="checkall" ></label>\r\n                            </div>\r\n                          </th>\r\n                          <th>No. Item</th>\r\n                          <th>No. Guía</th>\r\n                          <th>No. Orden de CompraA</th>\r\n                          <th>No. Item OC</th>\r\n                          <th>No. de Parte</th>\r\n                          <th>Descripción del Producto</th>                         \r\n                          <th>Cantidad</th>\r\n                          <th>Precio Unitario Referencial</th>\r\n                          <th>Importe Total Item</th>\r\n<th>Estado</th>\r\n                        </tr>\r\n                      </thead>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class="card {{factura.esguiamaterial ? \'hidden\' : \'\'}}">\r\n\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n                <div class="card-content">\r\n\r\n                  <h4 class="card-title">Detalle</h4>\r\n                  <div class="toolbar">\r\n                    <div class="row">\r\n                      <div class="col-sm-12">\r\n                        <nav class="navbar navbar-info" role="navigation">\r\n                          <div class="container-fluid">\r\n                            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\r\n                            </div>\r\n                          </div>\r\n                        </nav>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class="row" *ngIf="!toggleButton">\r\n                    <div class="col-sm-12">\r\n                      <div class="form-group form-group-without-margin">\r\n                        <button id="btnEliminarItemOC" [disabled]="toggleButton" class="btn btn-default pull-right" (click)="eliminarArticulos($event)">Eliminar</button>\r\n                        <button id="btnAgregarItemOC" [disabled]="toggleButton" class="btn btn-default pull-right" (click)="AbrirAgregarAceptacionServicio($event)">Añadir Hoja de Aceptación de Servicio</button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class="material-datatables table-responsive" style="display:block">\r\n                    <table id="dtArticulosHAS" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                      <thead>\r\n                        <tr>\r\n                          <th class="disabled-sorting text-right">\r\n                            <div class="checkbox text-right">\r\n                              <label><input type="checkbox" name="optionsCheckboxes" class="checkall" ></label>\r\n                            </div>\r\n                          </th>\r\n                          <th>No. Item</th>\r\n                          <th>No. HAS</th>\r\n                          <th>No. Orden de CompraB</th>\r\n                          <th>No. Item OC</th>\r\n                          <th>No. de Parte</th>\r\n                          <th>Descripción del Producto</th>\r\n                          <th>Cantidad</th>\r\n                          <th>Precio Unitario Referencial</th>\r\n                          <th>Importe Total Item</th>\r\n                          <th>Estado</th>\r\n                        </tr>\r\n                      </thead>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="row rowEditar" *ngIf="esBorrador===\'0\'">\r\n                <div class="col-sm-4 col-sm-offset-8">\r\n                  <div class="form-group label-floating">\r\n                    <label class="control-label">Sub-Total\r\n                    </label>\r\n                    <input name="subtotal" type="text" [(ngModel)]="factura.subtotal" [disabled]="toggleButton" class="form-control">\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="row rowEditar" *ngIf="esBorrador===\'0\'">\r\n                <div class="col-sm-4 col-sm-offset-8">\r\n                  <div class="form-group label-floating">\r\n                    <label class="control-label">IGV\r\n                    </label>\r\n                    <input name="igv" type="text" [(ngModel)]="factura.igv" [disabled]="toggleButton" class="form-control">\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class="row rowEditar" *ngIf="esBorrador===\'0\'">\r\n                <div class="col-sm-4 col-sm-offset-8">\r\n                  <div class="form-group label-floating">\r\n                    <label class="control-label">Total\r\n                    </label>\r\n                    <input name="total" type="text" [(ngModel)]="factura.total" [disabled]="toggleButton" class="form-control">\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class="row rowEditar" *ngIf="esBorrador===\'0\'">\r\n                <div class="col-sm-12">\r\n                  <div class="form-group label-floating">\r\n\r\n                    <label class="control-label">{{factura.totaltexto}}</label>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class="card">\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n                <div class="card-content">\r\n                  <h4 class="card-title">Archivos Adjuntos</h4>\r\n                  <div class="toolbar">\r\n                    <div class="row">\r\n                      <div class="col-sm-12">\r\n                        <nav class="navbar navbar-info" role="navigation">\r\n                          <div class="container-fluid">\r\n                            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\r\n\r\n                            </div>\r\n                          </div>\r\n                        </nav>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="row" *ngIf="!toggleButton">\r\n                    <div class="col-sm-12">\r\n                      <div class="form-group form-group-without-margin">\r\n                        <button class="btn btn-default pull-right" (click)="eliminarArchivos($event)">Eliminar</button>\r\n                        <button class="btn btn-default pull-right" data-toggle="modal" (click)="agregarArchivo($event)" data-target="#mdlArchivosAdjuntos">Agregar</button>\r\n\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="material-datatables table-responsive">\r\n                    <table id="dtArchivos" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                      <thead>\r\n                        <tr>\r\n                          <th class="disabled-sorting text-right">\r\n                            <div class="checkbox text-right">\r\n                              <label><input type="checkbox" name="optionsCheckboxes" class="checkall" ></label>\r\n                            </div>\r\n                          </th>\r\n                          <th width="20%">Nombre</th>\r\n                          <th width="60%">Descripción</th>\r\n                          <th class="disabled-sorting text-center" width="20%">Acciones</th>\r\n                        </tr>\r\n                      </thead>\r\n\r\n\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n                \x3c!-- end content--\x3e\r\n              </div>\r\n              <div class="card-content rowEditar" *ngIf="esBorrador===\'0\'">\r\n\r\n\r\n\r\n\r\n                <div class="card-header">\r\n                  <h4 class="card-title">Datos de Pago</h4>\r\n                </div>\r\n                <div class="card-content">\r\n                  <div class="row">\r\n                    <div class="col-sm-4">\r\n                      <div class="form-group label-floating">\r\n                        <label class="control-label">Tipo Pago\r\n                        </label>\r\n                        <input name="tipopago" type="text" [(ngModel)]="factura.tipopago" [disabled]="toggleButton" class="form-control">\r\n                      </div>\r\n                    </div>\r\n                    <div class="col-sm-4">\r\n                      <div class="form-group label-floating">\r\n                        <label class="control-label">Nro. Documento  \r\n                        </label>\r\n                        <input name="nrodocumento" type="text" [(ngModel)]="factura.nrodocumento" [disabled]="toggleButton" class="form-control">\r\n                      </div>\r\n                    </div>\r\n                    <div class="col-sm-4">\r\n                      <div class="form-group label-floating">\r\n                        <label class="control-label">Banco \r\n                        </label>\r\n                        <input name="banco" type="text" [(ngModel)]="factura.banco" [disabled]="toggleButton" class="form-control">\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="row">\r\n                    <div class="col-sm-4">\r\n                      <div class="form-group label-floating">\r\n                        <label class="control-label">Fecha de Pago\r\n                        </label>\r\n                        <input name="fechapago" type="text" datepicker disabled  [(ngModel)]="factura.fechapago" [disabled]="toggleButton" class="form-control">\r\n                      </div>\r\n                    </div>\r\n                    <div class="col-sm-4">\r\n                      <div class="form-group label-floating">\r\n                        <label class="control-label">Monto\r\n                        </label>\r\n                        <input name="monto" type="text" [(ngModel)]="factura.monto" [disabled]="toggleButton" class="form-control">\r\n                      </div>\r\n                    </div>\r\n                    <div class="col-sm-4">\r\n                      <div class="form-group label-floating">\r\n                        <label class="control-label">Moneda \r\n                        </label>\r\n                        <input name="datospagomoneda" type="text" [(ngModel)]="factura.datospagomoneda" [disabled]="toggleButton" class="form-control">\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="row">\r\n                    <div class="col-sm-4">\r\n                      <div class="form-group label-floating">\r\n                        <label class="control-label">Nro. Cheque\r\n                        </label>\r\n                        <input name="nrocheque" type="text" [(ngModel)]="factura.nrocheque" [disabled]="toggleButton" class="form-control">\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="card-header">\r\n                  <h4 class="card-title">Datos de Descuento por Retención o Detracción</h4>\r\n                </div>\r\n                <div class="card-content">\r\n                  <div class="row">\r\n                    <div class="col-sm-6">\r\n                      <div class="form-group label-floating">\r\n                        <label class="control-label">Tipo Descuento\r\n                        </label>\r\n                        <input name="tipodescuento" type="text" [(ngModel)]="factura.tipodescuento" [disabled]="toggleButton" class="form-control">\r\n                      </div>\r\n                    </div>\r\n                    <div class="col-sm-6">\r\n                      <div class="form-group label-floating">\r\n                        <label class="control-label">Nro. Comprobante\r\n                        </label>\r\n                        <input name="nrocomprobante" type="text" [(ngModel)]="factura.nrocomprobante" [disabled]="toggleButton" class="form-control">\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class="row">\r\n                    <div class="col-sm-6">\r\n                      <div class="form-group label-floating">\r\n                        <label class="control-label">Monto\r\n                        </label>\r\n                        <input name="dsctomonto" type="text" [(ngModel)]="factura.dsctomonto" [disabled]="toggleButton" class="form-control">\r\n                      </div>\r\n                    </div>\r\n                    <div class="col-sm-6">\r\n                      <div class="form-group label-floating">\r\n                        <label class="control-label">Moneda\r\n                        </label>\r\n                        <input name="dsctomoneda" type="text" [(ngModel)]="factura.dsctomoneda" [disabled]="toggleButton" class="form-control">\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="card-header">\r\n                  <h4 class="card-title">Observaciones Comprobante de Pago</h4>\r\n                </div>\r\n                <div class="card-content">\r\n                  <div class="row">\r\n                    <div class="col-sm-12">\r\n                        <div [innerHTML]="factura.observaciones" style="text-align: left;">\r\n                          </div>\r\n                    \r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="card-header">\r\n                  <h4 class="card-title">Observaciones de Pago</h4>\r\n                </div>\r\n                <div class="card-content">\r\n                  <div class="row">\r\n                    <div class="col-sm-12">\r\n                      <div [innerHTML]="factura.obscomprobantepago" style="text-align: left;">\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n            </div>\r\n\r\n            <div class="card-footer">\r\n              <button type="button" class="btn btn-fill btn-default pull-right" routerLink="/factura/proveedor/buscar">Regresar</button>\r\n              <button class="btn btn-fill btn-default pull-right" (click)="print($event)" *ngIf="botonImprimir.visible && id!=\'0\' &&  esBorrador==\'0\'" [disabled]="!botonImprimir.habilitado" >{{botonImprimir.Titulo}}</button>\r\n              <button type="button" class="btn btn-fill btn-default pull-right" (click)="registrarFactura($event)" *ngIf="botonRegistar.visible && (id==\'0\' && step==1)" [disabled]="!botonRegistar.habilitado || toggleButton"  >{{botonRegistar.Titulo}}</button>\r\n              <button type="button" class="btn btn-fill btn-default pull-right" \r\n                (click)="enviarFactura($event)" *ngIf="botonEnviar.visible && ((id!=\'0\' && esBorrador==\'1\') || (id==\'0\'&& step==2))" [disabled]="!botonEnviar.habilitado || toggleButton" >{{botonEnviar.Titulo}}</button>\r\n              <button type="button" class="btn btn-fill btn-default pull-right" (click)="guardarFactura($event)"\r\n                 *ngIf="botonGuardar.visible && ((id==\'0\' || esBorrador==\'1\') && step==2)" [disabled]="!botonGuardar.habilitado || toggleButton" >{{botonGuardar.Titulo}}</button>\r\n              <button type="button" class="btn btn-fill btn-default pull-right" (click)="descartarBorrador($event)"  *ngIf="botonDescartar.visible && (id!==\'0\' && esBorrador==\'1\')" [disabled]="!botonDescartar.habilitado || toggleButton" >{{botonDescartar.Titulo}}</button>\r\n              <button (click)="habilitarEdicion($event)" class="btn btn-fill btn-default pull-right" \r\n              *ngIf="botonEdicion.visible && (((id!=\'0\' && esBorrador==\'1\') || (id!=\'0\' && esBorrador==\'1\' && step==2)))" [disabled]="!botonEdicion.habilitado">{{botonEdicion.Titulo}}</button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n  <div id="mdlBuscarCliente" class="modal fade" tabindex="-1" role="dialog">\r\n    <div class="modal-dialog modal-lg" role="document">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n              </td>\r\n              <td class="cell-title">\r\n                <div class="card-content">\r\n                  <h4 class="card-title modal-title">Buscar Organización Compradora</h4>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </div>\r\n        <div class="modal-body">\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Nombre de Organización Compradora</label>\r\n                <input type="text" id="txtBuscarNroOC" name="txtBuscarNroOC" [(ngModel)]="filtroCliente.razonsocial" class="form-control"\r\n                  value="" [disabled]="toggleButton">\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-sm-10">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">RUC</label>\r\n                <input type="text" id="txtBuscarCodCliente" [(ngModel)]="filtroCliente.ruc" name="txtBuscarCodCliente" class="form-control"\r\n                  value="" [disabled]="toggleButton">\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-2">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label"></label>\r\n                <button type="button" class="btn btn-default" (click)="buscarClienteDT($event)">Buscar</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="material-datatables table-responsive">\r\n                <table id="dtBuscarCliente" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                  <thead>\r\n                    <tr>\r\n                      <th class="disabled-sorting text-right"></th>\r\n                      <th style="width:50%">Nombre de Organización Compradora</th>\r\n                      <th style="width:50%">RUC</th>\r\n                    </tr>\r\n                  </thead>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n          <button type="button" class="btn btn-default" (click)="SeleccionarCliente($event)" [disabled]="btnSeleccionar">Seleccionar</button>\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>\r\n        </div>\r\n      </div>\r\n      \x3c!-- /.modal-content --\x3e\r\n    </div>\r\n    \x3c!-- /.modal-dialog --\x3e\r\n  </div>\r\n  <div id="mdlGuias" class="modal fade" tabindex="-1" role="dialog">\r\n    <div class="modal-dialog modal-lg" role="document">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n              </td>\r\n              <td class="cell-title">\r\n                <div class="card-content">\r\n                  <h4 class="card-title modal-title">Buscar Guía</h4>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </div>\r\n        <div class="modal-body">\r\n          <div class="row">\r\n            <div class="col-sm-6">\r\n                <div class="form-group label-floating">\r\n                    <label class="control-label">Nro. Guía</label>\r\n                    <input type="text" id="txtBuscarNroOC" [(ngModel)]="filtroGuia.nroguia" name="txtBuscarNroOC" class="form-control" value=""\r\n                      [disabled]="toggleButton">\r\n                </div>\r\n            </div>\r\n            <div class="col-sm-6">\r\n                <div class="form-group label-floating">\r\n                    <label class="control-label">Estado</label>\r\n                    <select name="cmbBuscarEstado" class="form-control" [(ngModel)]="filtroGuia.estado" [disabled]="toggleButton">\r\n                        <option value="NONE">TODOS</option>\r\n                        <option *ngFor="let optEstado of listEstadoGuia" value="{{optEstado.valor}}"> {{optEstado.desc}} </option>\r\n                    </select>\r\n                </div>\r\n              </div>\r\n          </div>\r\n          <div class="row">\r\n              <div class="col-sm-5">\r\n                <div class="form-group label-floating">\r\n                    <label class="control-label">Emitida/Enviada después de</label>\r\n                    <input type="text" id="txtGuiaEmitidaDesde" [(ngModel)]="filtroGuia.fechaemitidadesde" name="txtGuiaEmitidaDesde" datepicker\r\n                      class="form-control" value="" [disabled]="toggleButton">\r\n                </div>\r\n              </div>\r\n              <div class="col-sm-5">\r\n                <div class="form-group label-floating">\r\n                    <label class="control-label">Emitida/Enviada antes de</label>\r\n                    <input type="text" id="txtGuiaEmitidaHasta" [(ngModel)]="filtroGuia.fechaemitidahasta" name="txtGuiaEmitidaHasta" datepicker\r\n                      class="form-control" value="" [disabled]="toggleButton">\r\n                </div>\r\n              </div>\r\n              <div class="col-sm-2">\r\n                <div class="form-group label-floating">\r\n                    <label class="control-label"></label>\r\n                    <button type="button" class="btn btn-default" (click)="buscarGuiaDT($event)">Buscar</button>\r\n                </div>\r\n              </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="material-datatables table-responsive">\r\n                <table id="dtBuscarGuia" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">\r\n                  <thead>\r\n                    <tr>\r\n\r\n                      <th class="disabled-sorting text-right">\r\n                        <div class="checkbox text-right">\r\n                          <label><input type="checkbox" name="optionsCheckboxes" class="checkall" ></label>\r\n                        </div>\r\n                      </th>\r\n\r\n                      <th>N° Guía</th>\r\n                      <th>Estado</th>\r\n                      <th>Organización Compradora</th>\r\n                      <th>Fecha de Emisión</th>\r\n                      <th>Fecha de Inicio de Traslado</th>\r\n                      <th>Fecha Probable de Arribo</th>\r\n                    </tr>\r\n                  </thead>\r\n\r\n\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n          <button type="button" class="btn btn-default" (click)="AgregarArticulosGuia($event)" [disabled]="btnSeleccionar">Añadir</button>\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>\r\n        </div>\r\n      </div>\r\n      \x3c!-- /.modal-content --\x3e\r\n    </div>\r\n    \x3c!-- /.modal-dialog --\x3e\r\n  </div>\r\n\r\n  <div id="mdlArchivosAdjuntos" class="modal fade" tabindex="-1" role="dialog">\r\n    <div class="modal-dialog" role="document">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n\r\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n\r\n\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n              </td>\r\n              <td class="cell-title">\r\n                <div class="card-content">\r\n                  <h4 class="card-title modal-title">Archivo Adjunto</h4>\r\n                  \x3c!--<h4 class="modal-title">Archivo Adjunto</h4>--\x3e\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </div>\r\n        <div class="modal-body">\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="form-group">\r\n                <div class="fileinput fileinput-new input-group" data-provides="fileinput">\r\n                  <div class="form-control" data-trigger="fileinput">\r\n                    <i class="material-icons fileinput-exists">attach_file</i>\r\n                    <span class="fileinput-filename"></span>\r\n                  </div>\r\n                  <span class="input-group-addon btn btn-default btn-file">\r\n                      <span class="fileinput-new">Seleccionar Archivo</span>\r\n                  <span class="fileinput-exists">Seleccionar Archivo</span>\r\n                  <input type="file" name="..." (change)="onChangeFile($event)" id="txtArchivo">\r\n                  <a href="#" class="input-group-addon btn btn-default fileinput-exists" style="display:none" data-dismiss="fileinput" id="btnEliminarAA">Remover</a>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="form-group label-floating">\r\n                <textarea name="descripcion" placeholder="Descripción" [(ngModel)]="archivo.descripcion" class="form-control" rows="4" [disabled]="toggleButton"></textarea>\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n        <div class="modal-footer">\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>\r\n          <button type="button" class="btn btn-default" (click)="grabarArchivoAdjunto()" [disabled]="toggleButton">Adjuntar</button>\r\n        </div>\r\n      </div>\r\n      \x3c!-- /.modal-content --\x3e\r\n    </div>\r\n    \x3c!-- /.modal-dialog --\x3e\r\n  </div>\r\n  <div id="mdlConformidadServicio" class="modal fade" tabindex="-1" role="dialog">\r\n    <div class="modal-dialog modal-lg" role="document">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                <div class="card-header card-header-icon" data-background-color="blue">\r\n                  <i class="material-icons">assignment</i>\r\n                </div>\r\n              </td>\r\n              <td class="cell-title">\r\n                <div class="card-content">\r\n                  <h4 class="card-title modal-title">Buscar Aceptación de Servicio</h4>\r\n\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </div>\r\n        <div class="modal-body">\r\n          <div class="row">\r\n            <div class="col-sm-4">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Número de Aceptación de Servicio\r\n                    </label>\r\n                <input [(ngModel)]="filtrohas.nroconformidadservicio" name="nroconformidadservicio" type="text" class="form-control">\r\n              </div>\r\n            </div>\r\n\r\n            <div class="col-sm-4">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Estado</label>\r\n                <select [(ngModel)]="filtrohas.estado" name="estado" class="form-control">\r\n                        <option value="NONE" selected>TODOS</option>\r\n                        <option *ngFor="let opt of listEstadoHAS" value="{{opt.valor}}"> {{opt.desc}} </option>   \r\n\r\n\r\n                    </select>\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-4">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Nro ERP\r\n                    </label>\r\n                <input [(ngModel)]="filtrohas.nroerp" name="nroerp" type="text" class="form-control">\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n\r\n            <div class="col-sm-4">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">Fecha Creación Del</label>\r\n                <input type="text" [(ngModel)]="filtrohas.fechacreacioninicio" name="fechacreacioninicio" class="form-control" datepicker\r\n                />\r\n              </div>\r\n            </div>\r\n            <div class="col-sm-4">\r\n              <div class="form-group label-floating">\r\n                <label class="control-label">al</label>\r\n                <input type="text" [(ngModel)]="filtrohas.fechacreacionfin" name="fechacreacionfin" class="form-control" datepicker/>\r\n              </div>\r\n            </div>\r\n\r\n            <div class="col-sm-4">\r\n              <div class="form-group">\r\n                <button class="btn btn-default" (click)="BuscarHasClicked($event)">Buscar</button>\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <nav class="navbar navbar-info" role="navigation">\r\n            <div class="container-fluid">\r\n              <div class="navbar-header">\r\n\r\n                <span class="navbar-brand">Resultados</span>\r\n              </div>\r\n\r\n\r\n            </div>\r\n          </nav>\r\n          <div class="row">\r\n            <div class="col-sm-12">\r\n              <div class="material-datatables table-responsive">\r\n                <table id="dtBuscarAceptacionServicio" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%"\r\n                  style="width:100%">\r\n                  <thead>\r\n                    <tr>\r\n                      <th class="disabled-sorting text-right">\r\n                        <div class="checkbox text-right">\r\n                          <label><input type="checkbox" name="optionsCheckboxes" class="checkall" ></label>\r\n                        </div>\r\n                      </th>\r\n                      <th>Nro. Aceptación de Servicio</th>\r\n                      <th>N°ERP</th>\r\n                      <th>Estado</th>\r\n                      <th>Organización Compradora</th>\r\n                      <th>Fecha de Aceptación</th>\r\n\r\n                    </tr>\r\n                  </thead>\r\n\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n          <button type="button" class="btn btn-default" (click)="AgregarArticulosHAS($event)">Añadir</button>\r\n          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>\r\n        </div>\r\n      </div>\r\n      \x3c!-- /.modal-content --\x3e\r\n    </div>\r\n    \x3c!-- /.modal-dialog --\x3e\r\n  </div>\r\n\r\n</div>\r\n\r\n<div style="display:none">\r\n  <div id="print-section" style=\'font-family: Arial, Helvetica, sans-serif;color: #000;font-size: 12px;\'>\r\n    <table width="100%" cellpadding="0" cellspacing="0" align="center" bgcolor="#ffffff" style=\'font-family: Arial, Helvetica, sans-serif;color: #000;font-size: 12px;\'>\r\n      <tbody>\r\n        <tr>\r\n          <td align="center">\r\n\r\n\r\n            <table width="900" cellpadding="0" cellspacing="0" border="0" bgcolor="#fff">\r\n              <tbody>\r\n                <tr>\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle">\r\n                    Imprimir Comprobante de Pago Nº{{factura.nocomprobantepago}}<br/><br/>\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="top" style="font-size: 20px">\r\n                    <b>IMPRESION DE COMPROBANTE DE PAGO</b><br><br>\r\n                  </td>\r\n                </tr>\r\n\r\n\r\n\r\n\r\n              </tbody>\r\n            </table>\r\n\r\n            <table width="900" class="print-table" cellpadding="5" border=\'0\' style="border:0px solid #999;border-collapse: collapse;"\r\n              cellspacing="0" bgcolor="#fff">\r\n              <tbody>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.razonsocialproveedor}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    RUC N° {{factura.rucproveedor}}<br/> {{factura.tipodocumento_text}}\r\n                    <br/>\r\n                    <b> {{factura.nocomprobantepago}}</b><br/>\r\n\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 20px">\r\n                    <b style="font-size: 20px; color:#0067a3">Datos Generales:</b>\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="1" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Cliente:</b>\r\n                  </td>\r\n\r\n                  <td colspan="3" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.razonsocialcliente}}\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b>  RUC N°:</b>\r\n                  </td>\r\n\r\n                  <td colspan="3" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.ruccliente}}\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Estado:</b>\r\n                  </td>\r\n                  <td colspan="3" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.estado_text}}\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="1" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Guias de Despacho:</b>\r\n                  </td>\r\n\r\n                  <td colspan="11" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.guiasdespacho}}\r\n                  </td>\r\n\r\n\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;">\r\n                    <b>Orden de Compra/Servicio/Contrato:</b> {{factura.ordencompraserviciocontrato}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n\r\n                    <td colspan="1" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                        <b> Fecha de Emision:</b>\r\n                      </td>\r\n    \r\n                      <td colspan="3" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                        {{factura.fechaemision}}\r\n                      </td>\r\n                 \x3c!-- <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Fecha de Vencimiento:</b> {{factura.fecharegistro}}\r\n                  </td>--\x3e\r\n\r\n\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b>  Fecha de Recepcion:</b> {{factura.fecharecepcion}}\r\n                  </td>\r\n\r\n\r\n\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Fecha de Registro:</b> {{factura.fecharegistro}}\r\n                  </td>\r\n\r\n                </tr>\r\n\r\n              \r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Documento ERP:</b> {{factura.documentoerp}}\r\n                  </td>\r\n\r\n\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b>  Forma de Pago:</b> {{factura.formapago}}\r\n                  </td>\r\n\r\n\r\n\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Moneda:</b> {{factura.moneda_text}}\r\n                  </td>\r\n\r\n                </tr>\r\n                <tr style="border:0px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:0px solid #999;">\r\n                    &nbsp;\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="center" valign="top" style="border:1px solid #999;font-size: 20px">\r\n                    <b style="font-size: 20px; color:#0067a3">Detalle</b>\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b>No. <br>Item</b>\r\n                  </td>\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b>Num. Guía</b>\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b>Num. OC</b>\r\n                  </td>\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b>Num. Item OC</b>\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b>Descripción del Producto</b>\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b>Cantidad</b>\r\n                  </td>\r\n\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b>Precio Unitario Referencial</b>\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b>Importe Total Item</b>\r\n                  </td>\r\n\r\n\r\n                </tr>\r\n\r\n                <tr *ngFor="let row of factura.detallefactura" style="border:1px solid #999;">\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{row.noitem}}\r\n                  </td>\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{row.noguia}}\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{row.nooc}}\r\n                  </td>\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{row.noitemoc}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n\r\n                    <div [innerHTML]="row.descproducto" style="text-align: center;">\r\n                    </div>\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{row.cantidad}}\r\n                  </td>\r\n\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{row.preciounitreferencial}}\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{row.importetotalitem}}\r\n                  </td>\r\n\r\n\r\n                </tr>\r\n                <tr style="border:0px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:0px solid #999;">\r\n                    &nbsp;\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:0px solid #999;">\r\n                  <td colspan="7" bgcolor="#fff" align="center" valign="middle" style="border:0px solid #999;">\r\n                    &nbsp;\r\n                  </td>\r\n\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b> Sub-Total:</b>\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.moneda}}\r\n                  </td>\r\n\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.subtotal}}\r\n                  </td>\r\n\r\n\r\n                </tr>\r\n\r\n                <tr style="border:0px solid #999;">\r\n                  <td colspan="7" bgcolor="#fff" align="center" valign="middle" style="border:0px solid #999;">\r\n                    &nbsp;\r\n                  </td>\r\n\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b> IGV:</b>\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.moneda}}\r\n                  </td>\r\n\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.igv}}\r\n                  </td>\r\n\r\n\r\n                </tr>\r\n\r\n                <tr style="border:0px solid #999;">\r\n                  <td colspan="7" bgcolor="#fff" align="center" valign="middle" style="border:0px solid #999;">\r\n                    &nbsp;\r\n                  </td>\r\n\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    <b> Total:</b>\r\n                  </td>\r\n\r\n                  <td colspan="1" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.moneda}}\r\n                  </td>\r\n\r\n                  <td colspan="2" bgcolor="#fff" align="center" valign="middle" style="border:1px solid #999;">\r\n                    {{factura.total}}\r\n                  </td>\r\n\r\n\r\n                </tr>\r\n\r\n                <tr style="border:0px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:0px solid #999;">\r\n                      SON: {{factura.totaltexto}} \r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 20px">\r\n                    <b style="font-size: 20px; color:#0067a3">Datos de Pago:</b>\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Tipo Pago:</b> {{factura.tipopago}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Nro. Documento:</b> {{factura.nrodocumento}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Banco:</b> {{factura.banco}}\r\n                  </td>\r\n\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Fecha de Pago:</b> {{factura.fechapago}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Monto:</b> {{factura.monto}}\r\n                  </td>\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Moneda:</b> {{factura.datospagomoneda}}\r\n                  </td>\r\n\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Nro. Cheque:</b> {{factura.nrocheque}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 20px">\r\n                    <b style="font-size: 20px; color:#0067a3">Datos de Descuentos por Retención o Detracción:</b>\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Tipo Descuento:</b> {{factura.tipodescuento}}\r\n                  </td>\r\n                  <td colspan="8" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b>Nro. Comprobante:</b> {{factura.nrocomprobante}}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="4" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b> Monto:</b> {{factura.dsctomonto}}\r\n                  </td>\r\n                  <td colspan="8" bgcolor="#fff" align="left" valign="middle" style="border:1px solid #999;">\r\n                    <b>Moneda:</b> {{factura.dsctomoneda}}\r\n                  </td>\r\n                </tr>\r\n                <tr style="border:0px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:0px solid #999;">\r\n                    &nbsp;\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;">\r\n                  <td colspan="12" bgcolor="#fff" align="left" valign="top" style="border:1px solid #999;font-size: 20px">\r\n                    <b style="font-size: 20px; color:#0067a3">Observaciones Comprobante de Pago:</b>\r\n                    <div [innerHTML]="factura.observaciones" style="text-align: left;">\r\n                      </div>\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr style="border:1px solid #999;" cellpadding="0">\r\n                  <td colspan="12" bgcolor="#fff" cellpadding="0" align="left" valign="top" style="border:1px solid #999;font-size: 20px">\r\n                    <b style="font-size: 20px; color:#0067a3">Observaciones de Pago:</b>\r\n\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            <div [innerHTML]="factura.obscomprobantepago" style="text-align: left; align-content:center; width:900px;">\r\n            </div>\r\n\r\n\r\n\r\n\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n\r\n  </div>\r\n</div>'},"./src/app/factura/proveedor/formulario/facturaproveedorformulario.component.ts":function(t,r,n){"use strict";function a(){F=$("#dtBuscarCliente").DataTable({searching:!1,serverSide:!0,ajax:{beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+localStorage.getItem("access_token")),t.setRequestHeader("origen_datos","PEB2M"),t.setRequestHeader("tipo_empresa","P"),t.setRequestHeader("org_id",localStorage.getItem("org_id")),t.setRequestHeader("Ocp-Apim-Subscription-Key",localStorage.getItem("Ocp_Apim_Subscription_Key"))},url:y.v,dataSrc:"data",data:function(t){""!=w.filtroCliente.razonsocial&&(t.RazonSocial=w.filtroCliente.razonsocial),""!=w.filtroCliente.ruc&&(t.Ruc=w.filtroCliente.ruc),t.column_names="IdOrganizacion,RazonSocial,Ruc"}},columns:[{data:"IdOrganizacion"},{data:"RazonSocial"},{data:"Ruc"}],columnDefs:[{className:"text-center",targets:[1,2]},{render:function(t,r,n){return'<div class="text-right" height="100%"><div class="radio text-right"><label><input type="radio" name="optionsCheckboxes" class="checkboxCliente" ruc="'+n.Ruc+'" razonsocial="'+n.RazonSocial+'" value="'+n.IdOrganizacion+'"></label></div></div>'},targets:0}]})}function o(){B=$("#dtBuscarAceptacionServicio").on("draw.dt",function(t,r,n){DatatableFunctions.initDatatable(t,r,n,B)}).DataTable({order:[[5,"desc"]],searching:!1,serverSide:!0,ajax:{beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+localStorage.getItem("access_token")),t.setRequestHeader("origen_datos","PEB2M"),t.setRequestHeader("tipo_empresa","P"),t.setRequestHeader("org_id",localStorage.getItem("org_id")),t.setRequestHeader("Ocp-Apim-Subscription-Key",localStorage.getItem("Ocp_Apim_Subscription_Key"))},url:y.k,dataSrc:"data",data:function(t){if(""!=w.filtrohas.nroconformidadservicio&&(t.NroConformidadServicio=w.filtrohas.nroconformidadservicio),"NONE"!=w.filtrohas.estado?t.Estado=w.filtrohas.estado:(t.Estado="TODOS",t.origen_modulo="comprobantes"),""!=w.filtrohas.nroerp&&(t.CodigoHASERP=w.filtrohas.nroerp),w.filtrohas.fechacreacioninicio){var r=DatatableFunctions.ConvertStringToDatetime(w.filtrohas.fechacreacioninicio);t.FechaAprobacion_inicio=DatatableFunctions.FormatDatetimeForMicroService(r)}if(w.filtrohas.fechacreacionfin){var n=DatatableFunctions.AddDayEndDatetime(DatatableFunctions.ConvertStringToDatetime(w.filtrohas.fechacreacionfin));t.FechaAprobacion_fin=DatatableFunctions.FormatDatetimeForMicroService(n)}t.org_idComprador=w.factura.IdOrgCliente,t.Moneda=w.factura.moneda,t.column_names="IdHas,NroConformidadServicio,CodigoHASERP,Proveedor,Cliente,EstadoDescripcion,FechaAprobacion"}},columns:[{data:"IdHas",name:"IdHas"},{data:"NroConformidadServicio",name:"NroConformidadServicio"},{data:"CodigoHASERP",name:"CodigoHASERP"},{data:"EstadoDescripcion",name:"EstadoDescripcion"},{data:"Cliente",name:"Cliente"},{data:"FechaAprobacion",name:"FechaAprobacion"}],columnDefs:[{className:"text-center",targets:[1,2,3,4,5]},{render:function(t,r,n){return'<div class="text-right" height="100%"><div class="checkbox text-right"><label><input type="checkbox" name="optionsCheckboxes" numhas="'+n.NroConformidadServicio+'" value="'+n.IdHas+'" class="checkboxAceptacionServicio"></label></div></div>'},targets:0,orderable:!1}]})}function e(){E=$("#dtBuscarGuia").on("draw.dt",function(t,r,n){DatatableFunctions.initDatatable(t,r,n,E)}).DataTable({order:[[4,"desc"]],searching:!1,serverSide:!0,ajax:{beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+localStorage.getItem("access_token")),t.setRequestHeader("origen_datos","PEB2M"),t.setRequestHeader("tipo_empresa","P"),t.setRequestHeader("org_id",localStorage.getItem("org_id")),t.setRequestHeader("Ocp-Apim-Subscription-Key",localStorage.getItem("Ocp_Apim_Subscription_Key"))},url:y.w,dataSrc:"data",data:function(t){if(""!=w.filtroGuia.nroguia&&(t.NumeroGuia=w.filtroGuia.nroguia),"NONE"!=w.filtroGuia.estado?t.Estado=w.filtroGuia.estado:(t.Estado="TODOS",t.origen_modulo="comprobantes"),w.filtroGuia.fechaemitidadesde){var r=DatatableFunctions.ConvertStringToDatetime(w.filtroGuia.fechaemitidadesde);t.FechaEmision_inicio=DatatableFunctions.FormatDatetimeForMicroService(r)}if(w.filtroGuia.fechaemitidahasta){var n=DatatableFunctions.AddDayEndDatetime(DatatableFunctions.ConvertStringToDatetime(w.filtroGuia.fechaemitidahasta));t.FechaEmision_fin=DatatableFunctions.FormatDatetimeForMicroService(n)}t.org_idComprador=w.factura.IdOrgCliente,t.Moneda=w.factura.moneda,t.column_names="[CodigoGuia,NumeroGuia,FechaEmision,FechaInicioTraslado,FechaEstimadaArribo,RazonSocialCliente,RazonSocialProveedor,Estado,DocumentoMaterial]"}},columns:[{data:"NumeroGuia",name:"NumeroGuia"},{data:"NumeroGuia",name:"NumeroGuia"},{data:"Estado",name:"Estado"},{data:"RazonSocialCliente",name:"RazonSocialCliente"},{data:"FechaEmision",name:"FechaEmision"},{data:"FechaInicioTraslado",name:"FechaInicioTraslado"},{data:"FechaEstimadaArribo",name:"FechaEstimadaArribo"}],columnDefs:[{className:"text-center",targets:[1,2,3,4,5,6]},{render:function(t,r,n){return'<div class="text-right" height="100%"><div class="checkbox text-right"><label><input type="checkbox" name="optionsCheckboxes" numguia="'+n.NumeroGuia+'" value="'+n.CodigoGuia+'" class="checkboxGuia"></label></div></div>'},targets:0,orderable:!1}]})}function i(){D=$("#dtArticulos").on("init.dt",function(t,r,n){DatatableFunctions.initDatatable(t,r,n,D)}).DataTable({ajax:function(t,r,n){r({data:w.factura.detallefactura})},createdRow:function(t,r,n){"10"===r.posicion||"20"===r.posicion?$(t).addClass("highlight"):$("td",t).eq(0).addClass("text-center")},columns:[{data:"noitem"},{data:"noitem"},{data:"noguia"},{data:"nooc"},{data:"noitemoc"},{data:"noparte"},{data:"descproducto"},{data:"cantidad"},{data:"preciounitreferencial"},{data:"importetotalitem"},{data:"estado"}],columnDefs:[{className:"text-center",targets:[1,2,3,4,5,6,7,8,9,10]},{render:function(t,r,n){return'<div class="text-right" height="100%"><div class="checkbox text-right"><label><input type="checkbox" name="optionsCheckboxes" value="'+n.noitem+'" class="checkboxArticulos"></label></div></div>'},targets:0},{targets:[10],visible:"1"===w.esBorrador},{targets:[5],visible:"1"===w.esBorrador}]}),S=$("#dtArticulosHAS").DataTable({ajax:function(t,r,n){r({data:w.factura.detallefactura})},createdRow:function(t,r,n){"10"===r.posicion||"20"===r.posicion?$(t).addClass("highlight"):$("td",t).eq(0).addClass("text-center")},columns:[{data:"noitem"},{data:"noitem"},{data:"noguia"},{data:"nooc"},{data:"noitemoc"},{data:"noparte"},{data:"descproducto"},{data:"cantidad"},{data:"preciounitreferencial"},{data:"importetotalitem"},{data:"estado"}],columnDefs:[{className:"text-center",targets:[1,2,3,4,5,6,7,8,9]},{render:function(t,r,n){return'<div class="text-right" height="100%"><div class="checkbox text-right"><label><input type="checkbox" name="optionsCheckboxes" value="'+n.noitem+'" class="checkboxArticulos"></label></div></div>'},targets:0},{targets:[10],visible:"1"===w.esBorrador},{targets:[5],visible:"1"===w.esBorrador}]})}function l(t){for(var r=1,n=0,a=t;n<a.length;n++){a[n].noitem=r++}return t}var s=n("./node_modules/@angular/router/@angular/router.es5.js"),c=n("./node_modules/@angular/core/@angular/core.es5.js"),d=n("./src/app/model/factura.ts"),u=n("./src/app/model/archivo.ts"),b=n("./src/app/utils/app.utils.ts"),f=n("./src/app/service/masterservice.ts"),p=n("./src/app/service/adjuntoservice.ts"),m=n("./src/app/service/facturaservice.ts"),g=n("./src/app/service/guiaservice.ts"),v=n("./src/app/service/conformidadservicioservice.ts"),h=n("./src/assets/js/plugins/jquery.PrintArea.js"),y=(n.n(h),n("./src/app/utils/app.constants.ts")),x=n("./src/app/service/login.service.ts"),C=n("./src/app/model/menu.ts");n.d(r,"a",function(){return R});var w,D,S,F,E,B,O,P,A=this&&this.__decorate||function(t,r,n,a){var o,e=arguments.length,i=e<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,r,n,a);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(i=(e<3?o(i):e>3?o(r,n,i):o(r,n))||i);return e>3&&i&&Object.defineProperty(r,n,i),i},N=this&&this.__metadata||function(t,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,r)},_=this&&this.__awaiter||function(t,r,n,a){return new(n||(n=Promise))(function(o,e){function i(t){try{s(a.next(t))}catch(t){e(t)}}function l(t){try{s(a.throw(t))}catch(t){e(t)}}function s(t){t.done?o(t.value):new n(function(r){r(t.value)}).then(i,l)}s((a=a.apply(t,r||[])).next())})},I=this&&this.__generator||function(t,r){function n(t){return function(r){return a([t,r])}}function a(n){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,e&&(i=e[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(e,n[1])).done)return i;switch(e=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,e=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){s.label=n[1];break}if(6===n[0]&&s.label<i[1]){s.label=i[1],i=n;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(n);break}i[2]&&s.ops.pop(),s.trys.pop();continue}n=r.call(t,s)}catch(t){n=[6,t],e=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,e,i,l,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},R=function(){function t(t,r,n,a,o,e,i,l,s){this.router=t,this.route=r,this._masterService=n,this._dataServiceAdjunto=a,this._dataService=o,this._dataGuiaService=e,this._dataHASService=i,this._securityService=l,this.cdRef=s,this.step=1,this.id="0",this.esBorrador="0",this.id_doc="",this.toggleButton=!0,this.btnSeleccionar=!1,this.botonImprimir=new C.a,this.botonEdicion=new C.a,this.botonDescartar=new C.a,this.botonGuardar=new C.a,this.botonEnviar=new C.a,this.botonRegistar=new C.a,this.url_main_module_page="/factura/proveedor/buscar",this.filtroClienteDefecto(),this.filtroGuiaDefecto(),this.filtroDefectoHAS(),this.activatedRoute=r,this.util=new b.a(this.router,this._masterService),this.archivo=new u.a,this.factura=new d.a}return t.prototype.navigate=function(t){this.router.navigate(t,{relativeTo:this.activatedRoute})},t.prototype.filtroDefectoHAS=function(){var t=new Date;t.setDate(t.getDate()-30),this.filtrohas={nroconformidadservicio:"",nroordenservicio:"",estado:"NONE",fechacreacioninicio:t,fechacreacionfin:new Date,nroerp:""}},t.prototype.obtenerBotones=function(){var t=this,r=this._securityService.ObtenerBotonesCache(this.url_main_module_page);r?(console.log("ObtenerBotonesCache",r),this.configurarBotones(r)):this._securityService.obtenerBotones(this.url_main_module_page).subscribe(function(r){console.log("obtenerBotones",r),w.configurarBotones(r),w._securityService.guardarBotonesLocalStore(t.url_main_module_page,r)},function(t){return console.log(t)},function(){})},t.prototype.configurarBotones=function(t){t&&t.length>0&&(this.botonImprimir=t.find(function(t){return"imprimir"===t.nombre})?t.find(function(t){return"imprimir"===t.nombre}):this.botonImprimir,this.botonDescartar=t.find(function(t){return"descartarborrador"===t.nombre})?t.find(function(t){return"descartarborrador"===t.nombre}):this.botonDescartar,this.botonEdicion=t.find(function(t){return"habilitaredicion"===t.nombre})?t.find(function(t){return"habilitaredicion"===t.nombre}):this.botonEdicion,this.botonEnviar=t.find(function(t){return"enviar"===t.nombre})?t.find(function(t){return"enviar"===t.nombre}):this.botonEnviar,this.botonGuardar=t.find(function(t){return"guardar"===t.nombre})?t.find(function(t){return"guardar"===t.nombre}):this.botonGuardar,this.botonRegistar=t.find(function(t){return"registrarcomprobante"===t.nombre})?t.find(function(t){return"registrarcomprobante"===t.nombre}):this.botonRegistar)},t.prototype.agregarArchivo=function(t){this.archivo=new u.a,this.archivo.nombreblob="org/"+localStorage.getItem("org_ruc")+"/cp/"+DatatableFunctions.newUUID(),$("#btnEliminarAA").click(),$("#txtArchivo").val(null),t.preventDefault()},t.prototype.filtroGuiaDefecto=function(){var t=new Date;t.setMonth(t.getMonth()-1),this.filtroGuia={nroguia:"",estado:"NONE",fechaemitidadesde:t,fechaemitidahasta:new Date}},t.prototype.filtroClienteDefecto=function(){this.filtroCliente={ruccodigo:"",ruc:"",razonsocial:""}},t.prototype.BuscarHasClicked=function(t){this.validarfiltrosHAS()&&B.ajax.reload(),t.preventDefault()},t.prototype.validarfiltrosHAS=function(){if(w.filtrohas.nroconformidadservicio=w.filtrohas.nroconformidadservicio.trim(),w.filtrohas.nroerp=w.filtrohas.nroerp.trim(),""==this.filtrohas.nroconformidadservicio){if(null==this.filtrohas.fechacreacioninicio||""==this.filtrohas.fechacreacioninicio.toString())return swal({text:"Fecha de Aceptación inicio es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(null==this.filtrohas.fechacreacionfin||""==this.filtrohas.fechacreacionfin.toString())return swal({text:"Fecha de Aceptación fin es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(null!=this.filtrohas.fechacreacioninicio&&""!=this.filtrohas.fechacreacioninicio.toString()&&null!=this.filtrohas.fechacreacionfin&&""!=this.filtrohas.fechacreacionfin.toString()){var t=DatatableFunctions.ConvertStringToDatetime(w.filtrohas.fechacreacioninicio),r=DatatableFunctions.ConvertStringToDatetime(w.filtrohas.fechacreacionfin);if(moment(r).diff(t,"days")>30)return swal({text:'El filtro de búsqueda "Fecha de Aceptación" debe tener un rango máximo de 30 días entre la Fecha Inicial y la Fecha Fin.',type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;if(DatatableFunctions.FormatDatetimeForMicroService(t)>DatatableFunctions.FormatDatetimeForMicroService(r))return swal({text:"El rango de Fechas de Aceptación seleccionado no es correcto. La Fecha Inicial es mayor a la Fecha Fin.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1}}return!0},t.prototype.ngOnInit=function(){var t=this;$("#mdlBuscarCliente").on("hidden.bs.modal",function(){w.btnSeleccionar=!1}),$("#mdlBuscarCliente").on("shown.bs.modal",function(){w.btnSeleccionar=!1}),$("#mdlGuias").on("hidden.bs.modal",function(){w.btnSeleccionar=!1}),$("#mdlGuias").on("shown.bs.modal",function(){w.btnSeleccionar=!1}),this.usuarioActual=JSON.parse(localStorage.getItem("usuarioActual")),this.activatedRoute.params.subscribe(function(r){t.id=r.id,t.esBorrador=r.b,t.id_doc=r.c}),"0"!=this.id?(this.step=2,this.toggleButton=!0,$("#btnAgregarItemOC").addClass("disabled"),$("#btnEliminarItemOC").addClass("disabled"),$("#secCabecera").hide(),$("#secFactura").show(),$(".rowEditar").show()):(this.toggleButton=!1,this.esBorrador="1",$("#secCabecera").show(),$("#secFactura").hide(),$(".rowEditar").hide(),this.factura.razonsocialproveedor=localStorage.getItem("org_nombre"),this.factura.rucproveedor=localStorage.getItem("org_ruc").replace("PE",""),this.factura.tipodocumento="Factura"),w=this,this.util.listEstadoGuia(function(t){w.listEstadoGuia=t.filter(function(t){return"GACEP"==t.valor||"GFPAR"==t.valor})}),this.util.listEstadoHAS(function(t){w.listEstadoHAS=t.filter(function(t){return"HACEP"==t.valor||"HFPAR"==t.valor})}),this.util.listPaises(function(t){w.listPaises=t}),this.util.listMonedas(function(t){w.listMonedaCombo=t}),this.util.listEstadoCP(function(t){w.listEstadoCombo=t}),this.util.listTipoComprobante(function(t){w.listTipoComprobante=t}),this.util.listUnidadMedida(function(t){})},t.prototype.AgregarArticulosGuia=function(t){return _(this,void 0,void 0,function(){var r,n,a,o,e,i,l,s,c,d,u,b,f,i,p,m,g,v,h,y,x=this;return I(this,function(C){switch(C.label){case 0:if(this.btnSeleccionar=!0,t.preventDefault(),r=$("#dtBuscarGuia").find(".checkboxGuia:checked"),r.length<=0)return swal({text:"Debe seleccionar una Guía.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),this.btnSeleccionar=!1,[2,!1];n=function(t){var r,n,o;return I(this,function(e){switch(e.label){case 0:return r=$(t).val(),[4,a._dataGuiaService.obtener(r).toPromise()];case 1:return n=e.sent(),o=w.factura.detallefactura.filter(function(t){return t.IdGuia==r}),null!=o&&n.articulos.length==o.length?(swal({text:"No se puede volver a agregar la Guía #"+$(t).attr("numguia")+".",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),a.btnSeleccionar=!1,[2,{value:!1}]):[2]}})},a=this,o=0,e=r,C.label=1;case 1:return o<e.length?(i=e[o],[5,n(i)]):[3,4];case 2:if("object"==typeof(l=C.sent()))return[2,l.value];C.label=3;case 3:return o++,[3,1];case 4:s=[],null!=w.factura.detallefactura?s=w.factura.detallefactura.sort(function(t,r){return x.btnSeleccionar=!1,t.noitem<r.noitem?-1:t.noitem>r.noitem?1:0}):w.factura.detallefactura=[],c=1,s.length>0&&(c=s[s.length-1].noitem+1),d=0,u=0,u=DatatableFunctions.StringToNumber(w.factura.subtotal),b=0,f=r,C.label=5;case 5:return b<f.length?(i=f[b],p=$(i).val(),[4,this._dataGuiaService.obtener(p).toPromise()]):[3,8];case 6:for(m=C.sent(),g=function(t){if(null!=w.factura.detallefactura.find(function(r){return r.IdProdxGuia==t.IdProdxGuia}))return"continue";var r=c++;w.factura.detallefactura.push({noitem:r,IdGuia:m.id,IdOc:m.id,noguia:m.nroguia,nooc:t.nrooc,noitemoc:t.nroitemoc,noparte:t.nroparte,descproducto:t.descproducto,preciounitreferencial:DatatableFunctions.FormatNumber(t.precioitemoc),cantidad:DatatableFunctions.FormatNumber(t.cantidadatendida),importetotalitem:DatatableFunctions.FormatNumber(t.subtotalitemoc),IdProdxGuia:t.IdProdxGuia,posicion:r.toString(),CodigoGuiaERP:t.CodigoGuiaERP,EjercicioGuia:t.EjercicioGuia,IdTablaUnidad:t.IdTablaUnidad,IdRegistroUnidad:t.IdRegistroUnidad,unidadmedida:t.unidadmedida,estado:t.estado}),d=DatatableFunctions.StringToNumber(t.subtotalitemoc),u+=d},v=0,h=m.articulos;v<h.length;v++)y=h[v],g(y);C.label=7;case 7:return b++,[3,5];case 8:return w.factura.subtotal=DatatableFunctions.FormatNumber(u),w.factura.impuesto1=DatatableFunctions.FormatNumber(.18*u),w.factura.importetotal=DatatableFunctions.FormatNumber(DatatableFunctions.StringToNumber(w.factura.subtotal)+DatatableFunctions.StringToNumber(w.factura.impuesto1)+DatatableFunctions.StringToNumber(null==w.factura.impuesto2?0:w.factura.impuesto2)+DatatableFunctions.StringToNumber(null==w.factura.impuesto3?0:w.factura.impuesto3)),setTimeout(function(){$("input").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),D.ajax.reload(),$("#mdlGuias").modal("toggle")},500),[2]}})})},t.prototype.AgregarArticulosHAS=function(t){return _(this,void 0,void 0,function(){var r,n,a,o,e,i,l,s,c,d,u,b,f,i,p,m,g,v,h,y;return I(this,function(x){switch(x.label){case 0:if(t.preventDefault(),r=$("#dtBuscarAceptacionServicio").find(".checkboxAceptacionServicio:checked"),r.length<=0)return swal({text:"Debe seleccionar una Aceptación de Servicio",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];n=function(t){var r,n,o;return I(this,function(e){switch(e.label){case 0:return r=$(t).val(),[4,a._dataHASService.obtener(r).toPromise()];case 1:return n=e.sent(),o=w.factura.detallefactura.filter(function(t){return t.IdGuia==r}),null!=o&&n.productos.length==o.length?(swal({text:"No se puede volver a agregar la HAS #"+$(t).attr("numhas")+".",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,{value:!1}]):[2]}})},a=this,o=0,e=r,x.label=1;case 1:return o<e.length?(i=e[o],[5,n(i)]):[3,4];case 2:if("object"==typeof(l=x.sent()))return[2,l.value];x.label=3;case 3:return o++,[3,1];case 4:s=[],null!=w.factura.detallefactura?s=w.factura.detallefactura.sort(function(t,r){return t.noitem<r.noitem?-1:t.noitem>r.noitem?1:0}):w.factura.detallefactura=[],c=1,s.length>0&&(c=s[s.length-1].noitem+1),d=0,u=0,u=DatatableFunctions.StringToNumber(w.factura.subtotal),b=0,f=r,x.label=5;case 5:return b<f.length?(i=f[b],p=$(i).val(),[4,this._dataHASService.obtener(p).toPromise()]):[3,8];case 6:for(m=x.sent(),g=function(t){if(null!=w.factura.detallefactura.find(function(r){return r.IdProdxGuia==t.IdServicioxHAS}))return"continue";var r=c++;w.factura.detallefactura.push({noitem:r,IdGuia:t.IdHAS,IdOc:p,noguia:m.nroconformidadservicio,nooc:t.nroordenservicio,noitemoc:t.nroitemordenservicio,noparte:t.NumeroParte,descproducto:t.descripcion,preciounitreferencial:DatatableFunctions.FormatNumber(t.PrecioItem),cantidad:DatatableFunctions.FormatNumber(t.cantidadatendida),importetotalitem:DatatableFunctions.FormatNumber(t.valorrecibido),IdProdxGuia:t.IdServicioxHAS,posicion:r.toString(),CodigoGuiaERP:m.CodigoHASERP,EjercicioGuia:m.EjercicioHAS,IdTablaUnidad:"10000",IdRegistroUnidad:"0000045",unidadmedida:t.unidad,estado:t.estado}),d=DatatableFunctions.StringToNumber(t.valorrecibido),u+=d},v=0,h=m.productos;v<h.length;v++)y=h[v],g(y);x.label=7;case 7:return b++,[3,5];case 8:return w.factura.subtotal=DatatableFunctions.FormatNumber(u),w.factura.impuesto1=DatatableFunctions.FormatNumber(.18*u),w.factura.importetotal=DatatableFunctions.FormatNumber(DatatableFunctions.StringToNumber(w.factura.subtotal)+DatatableFunctions.StringToNumber(w.factura.impuesto1)+DatatableFunctions.StringToNumber(null==w.factura.impuesto2?0:w.factura.impuesto2)+DatatableFunctions.StringToNumber(null==w.factura.impuesto3?0:w.factura.impuesto3)),setTimeout(function(){$("input").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),S.ajax.reload(),$("#mdlConformidadServicio").modal("toggle")},500),[2]}})})},t.prototype.eliminarArticulos=function(t){t.preventDefault();var r;if(r=w.factura.esguiamaterial?$("#dtArticulos").find(".checkboxArticulos:checked"):$("#dtArticulosHAS").find(".checkboxArticulos:checked"),r.length<=0)return swal({text:"Debe seleccionar un Articulo.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;var n="¿Desea eliminar el artículo seleccionado?";r.length>1&&(n="¿Desea eliminar los artículos seleccionados?"),swal({text:n,type:"warning",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No",buttonsStyling:!1,confirmButtonClass:"btn btn-default",cancelButtonClass:"btn btn-warning"}).then(function(){for(var t=w.factura.detallefactura,n=0,a=r;n<a.length;n++){var o=a[n];!function(r){var n=$(r).val();t=t.filter(function(t){return t.noitem!=n})}(o)}w.factura.detallefactura=JSON.parse(JSON.stringify(l(t)));for(var e=0,i=0,s=0,c=w.factura.detallefactura;s<c.length;s++){var d=c[s];i=DatatableFunctions.StringToNumber(d.importetotalitem),e+=i}w.factura.subtotal=DatatableFunctions.FormatNumber(e),w.factura.impuesto1=DatatableFunctions.FormatNumber(.18*e),w.factura.importetotal=DatatableFunctions.FormatNumber(DatatableFunctions.StringToNumber(w.factura.subtotal)+DatatableFunctions.StringToNumber(w.factura.impuesto1)+DatatableFunctions.StringToNumber(null==w.factura.impuesto2?0:w.factura.impuesto2)+DatatableFunctions.StringToNumber(null==w.factura.impuesto3?0:w.factura.impuesto3)),setTimeout(function(){w.factura.esguiamaterial?D.ajax.reload():S.ajax.reload()},500)},function(t){})},t.prototype.onEsFisicoChange=function(t){this.factura.esfisico=!0,this.factura.eselectronico=!1,$("#nocomprobantepago1").attr("maxlength",3),$("#nocomprobantepago2").attr("maxlength",7),""==$("#nocomprobantepago1").val()&&""==$("#nocomprobantepago2").val()||swal({title:"Cambio en Tipo de Emisión",html:"<p class='text-center'>Se borrara el numero ingresado</p>",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-danger",confirmButtonText:"Si, Borrado",cancelButtonText:"No, cancelar",closeOnConfirm:!1,closeOnCancel:!1}).then(function(t){swal("Borrado","","success"),$("#nocomprobantepago1").val(""),$("#nocomprobantepago2").val("")})},t.prototype.onEsElectronicolChange=function(t){this.factura.esfisico=!1,this.factura.eselectronico=!0,$("#nocomprobantepago1").attr("maxlength",4),$("#nocomprobantepago2").attr("maxlength",8),""==$("#nocomprobantepago1").val()&&""==$("#nocomprobantepago2").val()||swal({title:"Cambio en Tipo de Emisión",html:"<p class='text-center'>Se borrara el numero ingresado</p>",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-danger",confirmButtonText:"Si, Borrado",cancelButtonText:"No, cancelar",closeOnConfirm:!1,closeOnCancel:!1}).then(function(t){swal("Borrado","","success"),$("#nocomprobantepago1").val(""),$("#nocomprobantepago2").val("")})},t.prototype.onEsMaterialChange=function(t){this.factura.esguiamaterial=!0,this.factura.eshas=!1},t.prototype.onEsHasChange=function(t){this.factura.esguiamaterial=!1,this.factura.eshas=!0},t.prototype.ngAfterViewInit=function(){var t=this;if(DatatableFunctions.ModalSettings(),"0"!=this.id){var r=!0;"1"===this.esBorrador&&(r=!1),this._dataService.obtener(this.id,"P",r).subscribe(function(r){t.factura=r,t.factura.id_doc=t.id_doc,"1"!==t.esBorrador&&($("#txtFechaEmision").prop("disabled",!0),$("#txtFechaVencimiento").prop("disabled",!0),$("#txtFechaRecepcion").prop("disabled",!0),$("#txtFechaRegistro").prop("disabled",!0)),setTimeout(function(){$("input").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),$("select").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),$("textarea").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")}),D.ajax.reload(),S.ajax.reload(),O.ajax.reload()},100)},function(t){return console.log(t)},function(){})}setTimeout(function(){"0"==w.id&&$("select[name='tipodocumento']").change()},100),$("#mdlArchivosAdjuntos").on("shown.bs.modal",function(){$("#btnEliminarAA").click()}),O=$("#dtArchivos").on("draw.dt",function(t,r,n){DatatableFunctions.initDatatable(t,r,n,O)}).DataTable({ajax:function(t,r,n){r({data:w.factura.docadjuntos})},columns:[{data:"id"},{data:"nombre"},{data:"descripcion"},{data:"id"}],columnDefs:[{className:"text-center",targets:[1,2,3]},{render:function(t,r,n){return'<div class="text-right" height="100%"><div class="checkbox text-right"><label><input type="checkbox" value="'+n.id+'" name="optionsCheckboxes" class="checkboxArchivos"></label></div></div>'},targets:0,orderable:!1},{render:function(t,r,n){return'<a class="editar" href="javascript:void(0);" row-id="'+n.id+'"><button class="btn btn-simple btn-info btn-icon download" rel="tooltip" title="Bajar Archivo" data-placement="left"><i class="material-icons">get_app</i></button></a><button class="btn btn-simple btn-danger btn-icon remove" rel="tooltip" title="Eliminar" data-placement="left"><i class="material-icons">delete</i></button>'},targets:3}]}),O.on("click",".download",function(t){var r=$(this).closest("tr"),n=r.find("a.editar").attr("row-id"),a=w.factura.docadjuntos;P=a.find(function(t){return t.id==n}),w._dataServiceAdjunto.DescargarArchivo(P).subscribe(function(t){saveAs(t,P.nombre)},function(t){return console.log(t)},function(){}),t.preventDefault()}),O.on("click",".remove",function(t){var r=$(this).closest("tr"),n=r.find("a.editar").attr("row-id");swal({text:"¿Desea eliminar el registro seleccionado?",type:"warning",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No",buttonsStyling:!1,confirmButtonClass:"btn btn-default",cancelButtonClass:"btn btn-warning"}).then(function(){var t=w.factura.docadjuntos,r=t.filter(function(t){return t.id!=n});w.factura.docadjuntos=JSON.parse(JSON.stringify(r)),setTimeout(function(){O.ajax.reload()},500)},function(t){}),t.preventDefault()}),i(),e(),a(),o(),DatatableFunctions.registerCheckAll(),$("#nocomprobantepago1").blur(function(t){if(console.log(t),null==w.factura.nocomprobantepago1&&(w.factura.nocomprobantepago1=""),""!=w.factura.nocomprobantepago1)if(w.factura.esfisico){var r=/^[0-9]+$/i,n=w.factura.nocomprobantepago1.trim();if(!r.test(n)||"000"==w.factura.nocomprobantepago1.trim()||w.factura.nocomprobantepago1.length<3)return swal({html:'La serie solo puede contener caracteres numéricos, deben ser 3 dígitos y no debe empezar en 000.<br/><br/>\n                    Puedes cambiar el tipo de emisión si lo requieres:<br/>\n                      <div class="radio">\n                        <label> Físico\n                          <input type="radio" id="rbEsFisico" name="optionsCheckboxes" '+(w.factura.esfisico?"checked":"")+' >\n                          </label>\n                        <label> Electrónico\n                          <input type="radio" id="rbEsElectronico" name="optionsCheckboxes" '+(w.factura.eselectronico?"checked":"")+"  >\n                          </label>\n                      </div>\n",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago1").focus(),$("#rbEsFisico").prop("checked")&&(w.factura.esfisico=!0,w.factura.eselectronico=!1,$("#nocomprobantepago1").attr("maxlength",3),$("#nocomprobantepago2").attr("maxlength",7)),$("#rbEsElectronico").prop("checked")&&(w.factura.eselectronico=!0,w.factura.esfisico=!1,$("#nocomprobantepago1").attr("maxlength",4),$("#nocomprobantepago2").attr("maxlength",8))}),!1}else if(w.factura.eselectronico){var a=/^[a-z0-9]+$/i,o=/^[a-z]+$/i,e=w.factura.nocomprobantepago1.trim();if(!o.test(e.substring(0,1)))return swal({html:'La serie es alfanumérica de cuatro caracteres empezando con un caracter.<br/><br/>\n                    Puedes cambiar el tipo de emisión si lo requieres:<br/>\n                      <div class="radio">\n                        <label> Físico\n                          <input type="radio" id="rbEsFisico" name="optionsCheckboxes" '+(w.factura.esfisico?"checked":"")+' >\n                          </label>\n                        <label> Electrónico\n                          <input type="radio" id="rbEsElectronico" name="optionsCheckboxes" '+(w.factura.eselectronico?"checked":"")+"  >\n                          </label>\n                      </div>\n",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago1").focus(),$("#rbEsFisico").prop("checked")&&(w.factura.esfisico=!0,w.factura.eselectronico=!1,$("#nocomprobantepago1").attr("maxlength",3),$("#nocomprobantepago2").attr("maxlength",7)),$("#rbEsElectronico").prop("checked")&&(w.factura.eselectronico=!0,w.factura.esfisico=!1,$("#nocomprobantepago1").attr("maxlength",4),$("#nocomprobantepago2").attr("maxlength",8))}),!1;if("Ñ"==e.substring(0,1)||"ñ"==e.substring(0,1)||e.length<4)return swal({html:'La serie es alfanumérica de cuatro caracteres empezando con un caracter.<br/><br/>\n                    Puedes cambiar el tipo de emisión si lo requieres:<br/>\n                      <div class="radio">\n                        <label> Físico\n                          <input type="radio" id="rbEsFisico" name="optionsCheckboxes" '+(w.factura.esfisico?"checked":"")+' >\n                          </label>\n                        <label> Electrónico\n                          <input type="radio" id="rbEsElectronico" name="optionsCheckboxes" '+(w.factura.eselectronico?"checked":"")+"  >\n                          </label>\n                      </div>\n",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago1").focus(),$("#rbEsFisico").prop("checked")&&(w.factura.esfisico=!0,w.factura.eselectronico=!1,$("#nocomprobantepago1").attr("maxlength",3),$("#nocomprobantepago2").attr("maxlength",7)),$("#rbEsElectronico").prop("checked")&&(w.factura.eselectronico=!0,w.factura.esfisico=!1,$("#nocomprobantepago1").attr("maxlength",4),$("#nocomprobantepago2").attr("maxlength",8))}),!1;if(!a.test(e))return swal({html:'La serie es alfanumérica de cuatro caracteres empezando con un caracter.<br/><br/>\n                    Puedes cambiar el tipo de emisión si lo requieres:<br/>\n                      <div class="radio">\n                        <label> Físico\n                          <input type="radio" id="rbEsFisico" name="optionsCheckboxes" '+(w.factura.esfisico?"checked":"")+' >\n                          </label>\n                        <label> Electrónico\n                          <input type="radio" id="rbEsElectronico" name="optionsCheckboxes" '+(w.factura.eselectronico?"checked":"")+"  >\n                          </label>\n                      </div>\n",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago1").focus(),$("#rbEsFisico").prop("checked")&&(w.factura.esfisico=!0,w.factura.eselectronico=!1,$("#nocomprobantepago1").attr("maxlength",3),$("#nocomprobantepago2").attr("maxlength",7)),$("#rbEsElectronico").prop("checked")&&(w.factura.eselectronico=!0,w.factura.esfisico=!1,$("#nocomprobantepago1").attr("maxlength",4),$("#nocomprobantepago2").attr("maxlength",8))}),!1}}),$("#nocomprobantepago2").blur(function(){if(null==w.factura.nocomprobantepago2&&(w.factura.nocomprobantepago2=""),""!=w.factura.nocomprobantepago2)if(w.factura.esfisico){var t=/^[0-9]+$/i,r=w.factura.nocomprobantepago2.trim();if(!t.test(r)||w.factura.nocomprobantepago2.length<7)return swal({html:'El correlativo solo puede contener caracteres numéricos y deben ser 7 dígitos.<br/><br/>\n                    Puedes cambiar el tipo de emisión si lo requieres:<br/>\n                      <div class="radio">\n                        <label> Físico\n                          <input type="radio" id="rbEsFisico" name="optionsCheckboxes" '+(w.factura.esfisico?"checked":"")+' >\n                          </label>\n                        <label> Electrónico\n                          <input type="radio" id="rbEsElectronico" name="optionsCheckboxes" '+(w.factura.eselectronico?"checked":"")+"  >\n                          </label>\n                      </div>\n",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago2").focus(),$("#rbEsFisico").prop("checked")&&(w.factura.esfisico=!0,w.factura.eselectronico=!1,$("#nocomprobantepago1").attr("maxlength",3),$("#nocomprobantepago2").attr("maxlength",7)),$("#rbEsElectronico").prop("checked")&&(w.factura.eselectronico=!0,w.factura.esfisico=!1,$("#nocomprobantepago1").attr("maxlength",4),$("#nocomprobantepago2").attr("maxlength",8))}),!1}else if(w.factura.eselectronico){var n=/^[0-9]+$/i,a=w.factura.nocomprobantepago2.trim();if(!n.test(a))return swal({html:'El correlativo solo puede contener caracteres numéricos y hasta 8 dígitos.<br/><br/>\n                    Puedes cambiar el tipo de emisión si lo requieres:<br/>\n                      <div class="radio">\n                        <label> Físico\n                          <input type="radio" id="rbEsFisico" name="optionsCheckboxes" '+(w.factura.esfisico?"checked":"")+' >\n                          </label>\n                        <label> Electrónico\n                          <input type="radio" id="rbEsElectronico" name="optionsCheckboxes" '+(w.factura.eselectronico?"checked":"")+"  >\n                          </label>\n                      </div>\n",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago2").focus(),$("#rbEsFisico").prop("checked")&&(w.factura.esfisico=!0,w.factura.eselectronico=!1,$("#nocomprobantepago1").attr("maxlength",3),$("#nocomprobantepago2").attr("maxlength",7)),$("#rbEsElectronico").prop("checked")&&(w.factura.eselectronico=!0,w.factura.esfisico=!1,$("#nocomprobantepago1").attr("maxlength",4),$("#nocomprobantepago2").attr("maxlength",8))}),!1}}),this.obtenerBotones()},t.prototype.ngAfterViewChecked=function(){this.cdRef.detectChanges()},t.prototype.validarDocumentos=function(){return 0!=$("#txtArchivo").get(0).files.length||(swal({text:"Un archivo es requerido. Por favor completar y volver a intentar!",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1)},t.prototype.descartarBorrador=function(t){swal({html:"¿Está seguro de descartar el comprobante de pago?",type:"warning",showCancelButton:!0,confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",buttonsStyling:!1,confirmButtonClass:"btn btn-default",cancelButtonClass:"btn btn-warning"}).then(function(){w._dataService.descartarBorrador(w.id).subscribe(function(t){swal({text:"Se descartó el comprobante de pago.",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Aceptar"}).then(function(){var t=["/factura/proveedor/buscar"];w.navigate(t)},function(t){var r=["/factura/proveedor/buscar"];w.navigate(r)})},function(t){return console.log(t)},function(){})},function(t){}),t.preventDefault()},t.prototype.onChangeFile=function(t){var r=t,n=r.target,a=n.files;this.archivo.contenido=a[0]},t.prototype.grabarArchivoAdjunto=function(){if(!this.validarDocumentos())return!1;var t=this.factura.docadjuntos.sort(function(t,r){return t.id<r.id?-1:t.id>r.id?1:0});t.length>0?this.archivo.id=t[t.length-1].id+1:this.archivo.id=1;var r=$("#txtArchivo").val();if(r){var n=r.indexOf("\\")>=0?r.lastIndexOf("\\"):r.lastIndexOf("/"),a=r.substring(n);0!==a.indexOf("\\")&&0!==a.indexOf("/")||(a=a.substring(1)),this.archivo.nombre=a}w._dataServiceAdjunto.AgregarArchivo(this.archivo).subscribe(function(t){w.archivo.url=w._dataServiceAdjunto.ObtenerUrlDescarga(w.archivo),w.factura.docadjuntos.push(JSON.parse(JSON.stringify(w.archivo))),setTimeout(function(){O.ajax.reload()},500),$("#mdlArchivosAdjuntos").modal("toggle")},function(t){return console.log(t)},function(){})},t.prototype.eliminarArchivos=function(t){t.preventDefault();var r=$("#dtArchivos").find(".checkboxArchivos:checked");if(r.length<=0)return swal({text:"Debe seleccionar un Archivo.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;var n="¿Desea eliminar el archivo seleccionado?";r.length>1&&(n="¿Desea eliminar los archivos seleccionados?"),swal({text:n,type:"warning",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No",buttonsStyling:!1,confirmButtonClass:"btn btn-default",cancelButtonClass:"btn btn-warning"}).then(function(){for(var t=w.factura.docadjuntos,n=0,a=r;n<a.length;n++){var o=a[n];!function(r){var n=$(r).val();t=t.filter(function(t){return t.id!=n})}(o)}w.factura.docadjuntos=JSON.parse(JSON.stringify(l(t))),setTimeout(function(){O.ajax.reload()},500)},function(t){})},t.prototype.ngOnChanges=function(t){},t.prototype.AbrirAgregarGuia=function(t){if(!this.factura.moneda||""==this.factura.moneda)return swal({text:"Debe seleccionar la moneda del Comprobante de Pago.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;$("#mdlGuias").modal("show"),E.ajax.reload(),t.preventDefault()},t.prototype.AbrirAgregarAceptacionServicio=function(t){if(!this.factura.moneda||""==this.factura.moneda)return swal({text:"Debe seleccionar la moneda del Comprobante de Pago.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1;$("#mdlConformidadServicio").modal("show"),B.ajax.reload(),t.preventDefault()},t.prototype.validardatos=function(t,r){return void 0===r&&(r=!1),_(this,void 0,void 0,function(){var t,n,a,o,e,i,l,s,c,l,d,u,b,f,s,c,c,c,c,p,m,g,v,h,y,o,x,C,w,o;return I(this,function(D){switch(D.label){case 0:return[4,this._dataService.verificar_duplicados(this.factura.nocomprobantepago,this.factura.rucproveedor,this.factura.ruccliente).toPromise()];case 1:for(t=D.sent(),n=0,a=t.data;n<a.length;n++)if(o=a[n],o.NumeroFactura==this.factura.nocomprobantepago)return swal({text:"El número de comprobante de pago ya existe.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago1").focus()}),[2,!1];if(null==this.factura.nocomprobantepago1||null==this.factura.nocomprobantepago2||""==this.factura.nocomprobantepago.trim()||"-"==this.factura.nocomprobantepago.trim()||""==this.factura.nocomprobantepago1.trim()||""==this.factura.nocomprobantepago2.trim())return swal({text:"Nro. Comprobante de Pago es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];if(this.factura.esfisico){if(e=/^[0-9]+$/i,i=this.factura.nocomprobantepago1.trim(),!e.test(i)||"000"==this.factura.nocomprobantepago1.trim()||this.factura.nocomprobantepago1.length<3)return swal({text:"La serie solo puede contener caracteres numéricos, deben ser 3 dígitos y no debe empezar en 000.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago1").focus()}),[2,!1];if(l=/^[0-9]+$/i,s=this.factura.nocomprobantepago2.trim(),!l.test(s)||this.factura.nocomprobantepago2.length<7)return swal({text:"El correlativo solo puede contener caracteres numéricos y deben ser 7 dígitos.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago2").focus()}),[2,!1]}else if(this.factura.eselectronico){if(c=/^[a-z0-9]+$/i,l=/^[0-9]+$/i,d=/^[a-z]+$/i,u=this.factura.nocomprobantepago1.trim(),!d.test(u.substring(0,1)))return swal({html:"La serie es alfanumérica de cuatro caracteres empezando con un caracter.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago1").focus()}),[2,!1];if("Ñ"==u.substring(0,1)||"ñ"==u.substring(0,1)||u.length<4)return swal({html:"La serie es alfanumérica de cuatro caracteres empezando con un caracter.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago1").focus()}),[2,!1];if(!c.test(u))return swal({html:"La serie es alfanumérica de cuatro caracteres empezando con un caracter.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago1").focus()}),[2,!1];if(b=/^[a-z0-9]+$/i,f=/^[0-9]+$/i,s=this.factura.nocomprobantepago2.trim(),!b.test(s)||this.factura.nocomprobantepago2.length<8)return swal({html:"El correlativo solo puede contener caracteres numéricos y hasta 8 dígitos.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago2").focus()}),[2,!1]}if(null==this.factura.razonsocialcliente||""==this.factura.razonsocialcliente.trim())return swal({text:"Organización Compradora es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];if(null==this.factura.ruccliente||""==this.factura.ruccliente.trim())return swal({text:"RUC Organización Compradora es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];if(null==this.factura.tipodocumento||""==this.factura.tipodocumento.trim())return swal({text:"Tipo Documento es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];if(null==this.factura.tipodocumento||""==this.factura.tipodocumento.trim())return swal({text:"Tipo Documento es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];if(null!=this.factura.impuesto2&&""!=this.factura.impuesto2&&(c=/^(((\d{1,3})(,\d{3})*)|(\d+))(.\d+)?$/i,!c.test(this.factura.impuesto2)))return swal({text:"Impuesto 2 es un campo numérico.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];if(null!=this.factura.impuesto3&&""!=this.factura.impuesto3&&(c=/^(((\d{1,3})(,\d{3})*)|(\d+))(.\d+)?$/i,!c.test(this.factura.impuesto3)))return swal({text:"Impuesto 3 es un campo numérico.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];if(null!=this.factura.importereferencial&&""!=this.factura.importereferencial.toString()&&(c=/^(((\d{1,3})(,\d{3})*)|(\d+))(.\d+)?$/i,!c.test(this.factura.importereferencial.toString())))return swal({text:"Impuesto Referencial es un campo numérico.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];if(null!=this.factura.dsctomonto&&""!=this.factura.dsctomonto&&(c=/^(((\d{1,3})(,\d{3})*)|(\d+))(.\d+)?$/i,!c.test(this.factura.dsctomonto)))return swal({text:"Total Descuento es un campo numérico.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];if(null==this.factura.impuesto1)return swal({text:"Impuesto 1 es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];if(null==this.factura.importetotal)return swal({text:"Importe Total es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];if(null==this.factura.moneda)return swal({text:"Moneda es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];if(null==this.factura.detallefactura||0==this.factura.detallefactura.length)return swal({text:"Al menos un ítem es requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];if(!r)return[3,3];for(p=0,m=this.factura.detallefactura;p<m.length;p++)if(g=m[p],"Facturada"==g.estado)return swal({text:"Eliminar los ítems que ya fueron facturados.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),[2,!1];return[4,this._dataService.verificar_duplicados(this.factura.nocomprobantepago,this.factura.rucproveedor,this.factura.ruccliente).toPromise()];case 2:for(v=D.sent(),h=0,y=v.data;h<y.length;h++)if(o=y[h],o.NumeroFactura==this.factura.nocomprobantepago)return swal({text:"El número de comprobante de pago ya existe.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago1").focus()}),[2,!1];return[3,5];case 3:return[4,this._dataService.verificar_duplicados_borrador(this.factura.nocomprobantepago,this.factura.rucproveedor,this.factura.ruccliente).toPromise()];case 4:for(x=D.sent(),C=0,w=x.data;C<w.length;C++)if(o=w[C],o.factura.nocomprobantepago==this.factura.nocomprobantepago&&o.id_doc!=this.factura.id_doc)return swal({text:"El número de comprobante de pago ya existe.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}).then(function(){$("#nocomprobantepago1").focus()}),[2,!1];D.label=5;case 5:return[2,!0]}})})},t.prototype.enviarFactura=function(t){return _(this,void 0,void 0,function(){var r=this;return I(this,function(n){switch(n.label){case 0:return this.toggleButton=!0,this.factura.nocomprobantepago=this.factura.nocomprobantepago1+"-"+this.factura.nocomprobantepago2,this.factura.estado="Q","1"===this.esBorrador&&(this.factura.IdBorrador=this.factura.id_doc),[4,this.validardatos(t,!0)];case 1:return n.sent()?this._dataService.agregar(this.factura).subscribe(function(t){swal({text:"La información ha sido enviada. Confirme el correcto registro de la misma verificando el Documento ERP en la columna correspondiente. Espere dicho número para la impresión de su constancia.",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success"});var r=["/factura/proveedor/buscar"];w.navigate(r)},function(t){r.toggleButton=!1,console.log(t)},function(){}):this.toggleButton=!1,[2]}})})},t.prototype.guardarFactura=function(t){return _(this,void 0,void 0,function(){var r=this;return I(this,function(n){switch(n.label){case 0:return this.toggleButton=!0,this.factura.nocomprobantepago=this.factura.nocomprobantepago1+"-"+this.factura.nocomprobantepago2,this.factura.estado="Q",this.factura.IdBorrador=this.factura.id_doc,[4,this.validardatos(t,!1)];case 1:return n.sent()?this._dataService.guardar(this.factura).subscribe(function(t){swal({text:"La información ha sido guardada. Confirme el correcto registro de la misma verificando el No. Doc. de Pago en la columna correspondiente.",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success"});var r=["/factura/proveedor/buscar"];w.navigate(r)},function(t){r.toggleButton=!1,console.log(t)},function(){}):this.toggleButton=!1,[2]}})})},t.prototype.calcularTotal=function(t){this.factura.importetotal=DatatableFunctions.FormatNumber(DatatableFunctions.StringToNumber(this.factura.subtotal)+DatatableFunctions.StringToNumber(this.factura.impuesto1)+DatatableFunctions.StringToNumber(null==this.factura.impuesto2?0:this.factura.impuesto2)+DatatableFunctions.StringToNumber(null==this.factura.impuesto3?0:this.factura.impuesto3)),$($("#importetotal").parent()).removeClass("is-empty")},t.prototype.registrarFactura=function(t){return null==this.factura.razonsocialcliente||""==this.factura.razonsocialcliente.trim()?(swal({text:"Organización Compradora es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1):null==this.factura.ruccliente||""==this.factura.ruccliente.trim()?(swal({text:"RUC Organización Compradora es un campo requerido.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),!1):($("#secCabecera").hide(),$("#secFactura").show(),void(this.step=2))},t.prototype.habilitarEdicion=function(t){return _(this,void 0,void 0,function(){var t,r,n,a,o,e,i,l,s,c,d,u,o,b,f,p,m,o,g,v,h,y,x,C,w,o;return I(this,function(F){switch(F.label){case 0:if(!this.factura.esguiamaterial)return[3,5];for(t=[],r="",n=0,a=this.factura.detallefactura;n<a.length;n++)o=a[n],r!=o.IdGuia&&t.push(o.IdGuia),r=o.IdGuia;e=0,i=t,F.label=1;case 1:return e<i.length?(l=i[e],[4,this._dataGuiaService.obtener(l).toPromise()]):[3,4];case 2:for(s=F.sent(),c=function(t){var r=s.articulos.filter(function(r){return r.IdProdxGuia==t.IdProdxGuia});if(null==r||0==r.length)return"continue";t.noparte=r[0].nroparte,t.descproducto=r[0].descproducto,t.preciounitreferencial=DatatableFunctions.FormatNumber(r[0].precioitemoc),t.cantidad=DatatableFunctions.FormatNumber(r[0].cantidadatendida),t.importetotalitem=DatatableFunctions.FormatNumber(r[0].subtotalitemoc),t.estado=r[0].estado},d=0,u=this.factura.detallefactura;d<u.length;d++)o=u[d],c(o);F.label=3;case 3:return e++,[3,1];case 4:return setTimeout(function(){D.ajax.reload()},500),[3,10];case 5:if(!this.factura.eshas)return[3,10];for(b=[],f="",p=0,m=this.factura.detallefactura;p<m.length;p++)o=m[p],f!=o.IdGuia&&b.push(o.IdGuia),f=o.IdGuia;g=0,v=b,F.label=6;case 6:return g<v.length?(h=v[g],[4,this._dataHASService.obtener(h).toPromise()]):[3,9];case 7:for(y=F.sent(),x=function(t){var r=y.productos.filter(function(r){return r.IdServicioxHAS==t.IdProdxGuia});if(null==r||0==r.length)return"continue";t.noparte=r[0].NumeroParte,t.descproducto=r[0].descripcion,t.preciounitreferencial=DatatableFunctions.FormatNumber(r[0].PrecioItem),t.cantidad=DatatableFunctions.FormatNumber(r[0].cantidadatendida),t.importetotalitem=DatatableFunctions.FormatNumber(r[0].valorrecibido),t.estado=r[0].estado},C=0,w=this.factura.detallefactura;C<w.length;C++)o=w[C],x(o);F.label=8;case 8:return g++,[3,6];case 9:setTimeout(function(){S.ajax.reload()},500),F.label=10;case 10:return this.toggleButton=!1,$("#btnAgregarItemOC").removeClass("disabled"),$("#btnEliminarItemOC").removeClass("disabled"),[2]}})})},t.prototype.validarfiltrosCliente=function(){return w.filtroCliente.razonsocial=w.filtroCliente.razonsocial.trim(),w.filtroCliente.ruc=w.filtroCliente.ruc.trim(),!0},t.prototype.buscarClienteDT=function(t){this.validarfiltrosCliente()&&F.ajax.reload()},t.prototype.SeleccionarCliente=function(t){this.btnSeleccionar=!0,t.preventDefault();var r=$("#dtBuscarCliente").find(".checkboxCliente:checked");if(r.length<=0)return swal({text:"Debe seleccionar una Organización Compradora.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),this.btnSeleccionar=!1,!1;for(var n=0,a=r;n<a.length;n++){var o=a[n],e=$(o).val();if(e==localStorage.getItem("org_id"))return swal({text:"La Organización Compradora no puede ser la misma que está realizando el pre-registro.",type:"warning",buttonsStyling:!1,confirmButtonClass:"btn btn-warning"}),void(this.btnSeleccionar=!1);this.factura.razonsocialcliente=$(o).attr("razonsocial"),this.factura.ruccliente=$(o).attr("ruc"),this.factura.IdOrgCliente=e}setTimeout(function(){F.ajax.reload(),$("#mdlBuscarCliente").modal("toggle"),$("input").each(function(){$(this).keydown(),$(this).val()||""!=$(this).val()||$(this.parentElement).addClass("is-empty")})},500)},t.prototype.print=function(t){this.factura.tipodocumento_text=$("#tipodocumento option:selected").text(),this.factura.estado_text=$("#estado option:selected").text(),this.factura.moneda_text=$("#moneda option:selected").text(),setTimeout(function(){$("div#print-section").printArea({popTitle:"Comprobante de Pago",mode:"iframe",popClose:!1})},200)},t.prototype.validarfiltrosGuia=function(){return!0},t.prototype.buscarGuiaDT=function(){this.validarfiltrosGuia()&&E.ajax.reload(),event.preventDefault()},t.prototype.buscarCliente=function(t){this.filtroCliente.razonsocial="",this.filtroCliente.ruc="",null!=F?this.buscarClienteDT(t):a()},t}();R=A([n.i(c.Component)({selector:"facturaproveedorformulario-cmp",template:n("./src/app/factura/proveedor/formulario/facturaproveedorformulario.component.html"),providers:[p.a,f.a,m.a,g.a,x.a]}),N("design:paramtypes",["function"==typeof(T=void 0!==s.c&&s.c)&&T||Object,"function"==typeof(k=void 0!==s.b&&s.b)&&k||Object,"function"==typeof(M=void 0!==f.a&&f.a)&&M||Object,"function"==typeof(j=void 0!==p.a&&p.a)&&j||Object,"function"==typeof(z=void 0!==m.a&&m.a)&&z||Object,"function"==typeof(G=void 0!==g.a&&g.a)&&G||Object,"function"==typeof(H=void 0!==v.a&&v.a)&&H||Object,"function"==typeof(q=void 0!==x.a&&x.a)&&q||Object,"function"==typeof(U=void 0!==c.ChangeDetectorRef&&c.ChangeDetectorRef)&&U||Object])],R);var T,k,M,j,z,G,H,q,U},"./src/app/model/factura.ts":function(t,r,n){"use strict";n.d(r,"a",function(){return a}),n.d(r,"b",function(){return o});var a=function(){function t(){this.eshas=!1,this.esguiamaterial=!0,this.fechaemision=new Date,this.fechavencimiento=new Date,this.fecharecepcion=new Date,this.fecharegistro=new Date,this.fechapago=new Date,this.docadjuntos=[],this.detallefactura=[],this.eshas=!1,this.esguiamaterial=!0,this.esfisico=!0,this.importetotal=""}return t}(),o=function(){function t(){}return t}();(function(){function t(){}})(),function(){function t(){}}(),function(){function t(){}}(),function(){function t(){}}()},"./src/app/model/facturams.ts":function(t,r,n){"use strict";n.d(r,"a",function(){return a}),n.d(r,"b",function(){return o}),n.d(r,"c",function(){return e}),n.d(r,"e",function(){return i}),n.d(r,"d",function(){return l});var a=function(){function t(){}return t}(),o=function(){function t(){}return t}(),e=function(){function t(){}return t}(),i=function(){function t(){}return t}(),l=(function(){function t(){}}(),function(){function t(){}return t}())},"./src/app/service/facturaservice.ts":function(t,r,n){"use strict";var a=n("./node_modules/@angular/core/@angular/core.es5.js"),o=n("./node_modules/@angular/http/@angular/http.es5.js"),e=n("./node_modules/rxjs/add/operator/map.js"),i=(n.n(e),n("./node_modules/rxjs/Observable.js")),l=(n.n(i),n("./node_modules/rxjs/add/operator/catch.js")),s=(n.n(l),n("./node_modules/rxjs/add/observable/throw.js")),c=(n.n(s),n("./src/app/model/factura.ts")),d=n("./src/app/model/facturams.ts"),u=n("./src/app/utils/app.constants.ts");n.d(r,"a",function(){return p});var b=this&&this.__decorate||function(t,r,n,a){var o,e=arguments.length,i=e<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,r,n,a);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(i=(e<3?o(i):e>3?o(r,n,i):o(r,n))||i);return e>3&&i&&Object.defineProperty(r,n,i),i},f=this&&this.__metadata||function(t,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,r)},p=function(){function t(t){this.http=t}return t.prototype.convertStringToDate=function(t){return new Date(t)},t.prototype.descartarBorrador=function(t){var r=this.getHeaders("P"),n={id_doc:t},a=new o.RequestOptions({headers:r,body:n});return this.http.delete(u.o,a).catch(this.handleError)},t.prototype.guardar=function(t){var r=this.getHeaders("P");r.append("org_id",localStorage.getItem("org_id"));var n=(JSON.parse(localStorage.getItem("usuarioActual")),JSON.parse(localStorage.getItem("listMonedas"))),a=JSON.parse(localStorage.getItem("listTipoComprobante")),e=(JSON.parse(localStorage.getItem("listUnidadMedida")),n.find(function(r){return r.vc_DESC_CORTA==t.moneda}),a.find(function(r){return r.vc_DESC_CORTA==t.tipodocumento}),new d.a);t.estado="Borrador",e.factura=t,e.recurso="factura",e.id_doc=t.id_doc,e.vc_numeroseguimiento=t.nocomprobantepago,e.session_id=localStorage.getItem("access_token");var i=new o.RequestOptions({headers:r});return this.http.post(u.p,e,i).catch(this.handleError)},t.prototype.agregar=function(t){var r=this.getHeaders("P");r.append("org_id",localStorage.getItem("org_id"));var n=JSON.parse(localStorage.getItem("usuarioActual")),a=JSON.parse(localStorage.getItem("listMonedas")),e=JSON.parse(localStorage.getItem("listTipoComprobante")),i=JSON.parse(localStorage.getItem("listUnidadMedida")),l=a.find(function(r){return r.vc_DESC_CORTA==t.moneda}),s=e.find(function(r){return r.vc_DESC_CORTA==t.tipodocumento}),c=new d.a;c.FACUPLOADMQ=new d.b,c.FACUPLOADMQ.IdUsrProveedor=n.id,c.FACUPLOADMQ.IdOrgProveedor=n.org_id,c.FACUPLOADMQ.RucProveedor=t.rucproveedor,c.FACUPLOADMQ.RazonSocialProveedor=t.razonsocialproveedor,c.FACUPLOADMQ.DireccionProveedor="",c.FACUPLOADMQ.Factura=[];var b=new d.c;if(b.IdBorrador=t.IdBorrador,b.NumeroFactura=t.nocomprobantepago,b.NumeroGuia="",b.NumeroOC="",b.IdOrgCliente=t.IdOrgCliente.toString(),b.RucCliente=t.ruccliente,b.RazonSocialCliente=t.razonsocialcliente,b.FechaRegistro=DatatableFunctions.FormatDatetimeForMicroServiceProducer(t.fecharegistro),b.FechaEnvio=DatatableFunctions.FormatDatetimeForMicroServiceProducer(new Date),b.FechaEmision=DatatableFunctions.FormatDatetimeForMicroServiceProducer(DatatableFunctions.ConvertStringToDatetime(t.fechaemision)),b.PlazoPago=" ",b.PeriodoPlazoPago=" ",b.CondicionPago=null==t.condicionpago?"":t.condicionpago,b.SubTotal=null!=t.subtotal?DatatableFunctions.StringToNumber(t.subtotal.toString()).toString():"0",b.Impuesto1=null!=t.impuesto1?DatatableFunctions.StringToNumber(t.impuesto1.toString()).toString():"0",b.Impuesto2=null!=t.impuesto2?DatatableFunctions.StringToNumber(t.impuesto2.toString()).toString():"0",b.Impuesto3=null!=t.impuesto3?DatatableFunctions.StringToNumber(t.impuesto3.toString()).toString():"0",b.ImpuestoReferencial=null!=t.importereferencial?DatatableFunctions.StringToNumber(t.importereferencial.toString()).toString():"0",b.ImpuestoGVR="",b.Total=null!=t.importetotal?DatatableFunctions.StringToNumber(t.importetotal.toString()).toString():"0",b.Observaciones=null==t.observaciones?"":t.observaciones,b.FechaVencimiento=null,b.FechaRecepcion=null,b.FechaPago=" ",b.FechaProgramadaPago=" ",b.FormaPago=t.formapago,b.DocumentoPago="",b.DocumentoERP="",b.PagoTipoDocumento="",b.PagoNroDocumento="",b.PagoMoneda=null==l?"":l.vc_DESC_CORTA,b.PagoMontoPagado="",b.PagoBanco="",b.DctoTipoDocumento="",b.DctoNroDocumento="",b.DctoMoneda=null==l?"":l.vc_DESC_CORTA,b.DctoMonto=t.dsctomonto,b.Almacen="",b.IdCierres="",b.Status="3909",b.IdTablaEstado="10005",b.IdRegistroEstadoProv="0000052",b.IdRegistroEstadoComp="0000053",b.ISOEstadoProv="B",b.ISOEstadoComp="Q",b.Estado="Activa",b.EstadoComprador="Publicada",b.CodigoERPProveedor="",b.CodigoSociedad="",b.IndicadorDetraccion="",b.CodigoBien="",b.DescripcionBien="",b.PorcentajeDetraccion="",b.IdCondicionPago="",b.DescripcionCondicionPago="",b.IndImpuesto="",b.TipoRegistro="",b.CodigoErp="",b.NumeroNota="",b.TipoNota="",b.Motivo="",b.Actividad="",b.PorcentajeImpuestoRetenido="0",b.IdTablaMoneda="10001",b.IdRegistroMoneda=null==l?"":l.vc_IDREGISTRO,b.IdTablaTipoComprobante="10007",b.IdRegistroTipoComprobante=null==s?"":s.vc_IDREGISTRO,b.IdTablaTipoEmision="10016",b.IdRegistroTipoEmision=t.esfisico?"01":"02",b.TipoFactura=t.esguiamaterial?"M":"S",b.ItemFactura=[],b.ArchivoAdjunto=[],null!=t.docadjuntos)for(var f=0,p=t.docadjuntos;f<p.length;f++){var m=p[f],g=new d.d;g.Nombre=m.nombre,g.Descripcion=m.descripcion,g.URL=m.url,b.ArchivoAdjunto.push(g)}if(null!=t.detallefactura)for(var v=0,h=t.detallefactura;v<h.length;v++){var y=h[v];!function(t){var r=new d.e,n=void 0;n="M"==b.TipoFactura?i.find(function(r){return r.vc_ISO==t.unidadmedida}):i.find(function(r){return r.vc_EQUIVALENCIA==t.unidadmedida}),r.NumGuiaItem=t.noguia,r.NumeroItemOC=t.noitemoc,r.IdGuia=t.IdGuia,r.IdProdxGuia=t.IdProdxGuia,r.NumeroParte=t.noparte,r.DescripcionItem=t.descproducto,r.CantidadItem=t.cantidad;var a=null==t.preciounitreferencial?0:Number.parseFloat(t.preciounitreferencial.replace(/,/g,""));r.PrecioUnitario=a.toString(),r.PrecioTotal=Number(t.cantidad)*a+"",r.NumeroGuiaItem=t.noitem.toString(),r.NumeroOcItem=t.nooc,r.Posicion=t.posicion,r.CodigoGuiaERP=t.CodigoGuiaERP,r.EjercicioGuia=t.EjercicioGuia,r.IdTablaUnidad="10000",r.IdRegistroUnidad=null==n?"":n.vc_IDREGISTRO,r.DocumentoMaterial=[],b.ItemFactura.push(r)}(y)}c.FACUPLOADMQ.Factura.push(b),console.clear(),console.log(JSON.stringify(c));var x=new o.RequestOptions({headers:r});return this.http.post(u.q,c,x).catch(this.handleError)},t.prototype.verificar_duplicados=function(t,r,n){var a=this.getHeaders("P");return a.append("org_id",localStorage.getItem("org_id")),this.http.get(u.r+"?draw=0&start=0&length=-1&NumeroFactura="+t+"&RucProveedor="+r+"&RucCliente="+n+"&column_names=IdComprobante,Estado,NumeroFactura",{headers:a}).map(this.mapDuplicados).catch(this.handleError)},t.prototype.verificar_duplicados_borrador=function(t,r,n){var a=this.getHeaders("P");return a.append("org_id",localStorage.getItem("org_id")),this.http.get(u.s+"?draw=0&start=0&length=-1&NumeroFactura="+t+"&RucProveedor="+r+"&RucCliente="+n+"&column_names=IdComprobante,Estado,NumeroFactura",{headers:a}).map(this.mapDuplicados).catch(this.handleError)},t.prototype.mapDuplicados=function(t){t&&t.status,t&&t.statusText,t&&t.json();return t.json()},t.prototype.obtener=function(t,r,n){void 0===n&&(n=!0);var a=u.t;return n&&(a=u.u),this.http.get(a+t,{headers:this.getHeaders(r)}).map(this.mapComprobantePago).catch(this.handleError)},t.prototype.mapComprobantePago=function(t){var r=(t&&t.status,t&&t.statusText,t&&t.json(),t.json());if(r.factura)return r.factura;var n=new c.a,a=r.data.NumeroFactura,o=[];a&&(o=a.split("-")),n.nocomprobantepago=r.data.NumeroFactura,n.nocomprobantepago1=o.length>0?o[0]:"",n.nocomprobantepago2=o.length>1?o[1]:"",n.id=r.data.IdComprobante,n.ruccliente=r.data.RucCliente,n.razonsocialcliente=r.data.RazonSocialCliente,n.rucproveedor=r.data.RucProveedor,n.razonsocialproveedor=r.data.RazonSocialProveedor,n.esfisico="F"==r.data.TipoEmision,n.eselectronico="E"==r.data.TipoEmision,n.fechaemision=DatatableFunctions.ConvertStringToDatetime2(r.data.FechaEmision),n.tipodocumento=r.data.TipoComprobante,n.moneda=r.data.Moneda,n.subtotal=DatatableFunctions.FormatNumber(r.data.SubTotal,4),n.igv=DatatableFunctions.FormatNumber(r.data.Impuesto1,4),n.dsctomonto=DatatableFunctions.FormatNumber(r.data.DctoMonto,2),n.impuesto1=DatatableFunctions.FormatNumber(r.data.Impuesto1,2),n.impuesto2=DatatableFunctions.FormatNumber(r.data.Impuesto2,2),n.impuesto3=DatatableFunctions.FormatNumber(r.data.Impuesto3,2),n.importetotal=DatatableFunctions.FormatNumber(r.data.ImporteTotal,2),n.total=DatatableFunctions.FormatNumber(r.data.ImporteTotal,4),n.importereferencial=r.data.ImporteReferencial,n.observaciones=DatatableFunctions.ReplaceToken(r.data.Observaciones),n.documentoerp=r.data.DocumentoErp,n.guiasdespacho=r.data.GuiasDespacho,n.ordencompraserviciocontrato=r.data.OrdenesCompra,n.fechavencimiento=DatatableFunctions.ConvertStringToDatetime2(r.data.FechaVencimiento),n.fecharecepcion=DatatableFunctions.ConvertStringToDatetime2(r.data.FechaRecepcion),n.fecharegistro=DatatableFunctions.ConvertStringToDatetime2(r.data.FechaRegistro),n.formapago=r.data.FormaPago,n.bienserviciodetraccion=r.data.CodigoBien,n.estado=r.data.EstadoProveedor,n.estadocomprador=r.data.EstadoComprador,n.condicionpago=r.data.CondicionPago,n.tipopago=r.data.PagoTipoDocumento,n.nrodocumento=r.data.PagoNroDocumento,n.banco=r.data.PagoBanco,n.fechapago=DatatableFunctions.ConvertStringToDatetime2(r.data.FechaPago),n.monto=DatatableFunctions.FormatNumber(r.data.PagoMontoPagado,2),n.datospagomoneda=r.data.PagoMoneda,n.nrocheque=r.data.NroCheque,n.tipodescuento=r.data.DctoTipoDocumento,n.nrocomprobante=r.data.DctoNroDocumento,n.dsctomonto=DatatableFunctions.FormatNumber(r.data.DctoMonto,2),n.dsctomoneda=r.data.DctoMoneda,n.obscomprobantepago=DatatableFunctions.ReplaceToken(r.data.ObservacionesPago),n.detallefactura=[];for(var e=1,i=0,l=r.data.Productos;i<l.length;i++){var s=l[i],d=new c.b;d.IdGuia=s.IdGuia,d.IdOc=s.IdOc,d.noitem=e,d.noguia=s.NumGuiaItem,d.nooc=s.NumeroOcItem,d.noitemoc=s.NumeroItemOC,d.noparte=s.NumeroParte?s.NumeroParte:"",d.descproducto=s.DescripcionItem?s.DescripcionItem:"",d.preciounitreferencial=DatatableFunctions.FormatNumber(s.PrecioUnitario),d.cantidad=DatatableFunctions.FormatNumber(s.CantidadItem),d.importetotalitem=DatatableFunctions.FormatNumber(s.PrecioTotal),d.estado="",n.detallefactura.push(d),e++}if(n.docadjuntos=[],r.data.Adjuntos)for(var u=1,b=0,f=r.data.Adjuntos;b<f.length;b++){var p=f[b];n.docadjuntos.push({id:u++,codigo:p.Id?p.IdArchivo:"",nombre:p.Nombre?p.Nombre:"",descripcion:p.Descripcion?p.Descripcion:"",url:p.UrlTemporal?p.UrlTemporal:""})}return console.log(JSON.stringify(n)),n},t.prototype.extractData=function(t){return{status:t?t.status:-1,statusText:t?t.statusText:"ERROR",data:t?t.json()||{}:{}}},t.prototype.handleError=function(t){console.error("handleError",t.message||t);var r=t?t.json()||{}:{};return r&&r.error&&"invalid_token"===r.error&&DatatableFunctions.logout(),i.Observable.throw(t.message||t)},t.prototype.getHeaders=function(t){var r=new o.Headers;return r.append("Content-Type","application/json"),r.append("Accept","application/json"),r.append("origen_datos","PEB2M"),""!=t&&r.append("tipo_empresa",t),r.append("Authorization","Bearer "+localStorage.getItem("access_token")),r.append("Ocp-Apim-Subscription-Key",localStorage.getItem("Ocp_Apim_Subscription_Key")),r},t}();p=b([n.i(a.Injectable)(),f("design:paramtypes",["function"==typeof(m=void 0!==o.Http&&o.Http)&&m||Object])],p);var m}});