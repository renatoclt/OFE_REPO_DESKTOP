webpackJsonp([4],{"./src/app/facturacion-electronica/percepcion-retencion/percepcion/modelos/percepcion-cabecera.ts":function(e,r,o){"use strict";o.d(r,"a",function(){return t});var t=function(){function e(){this.serie=null,this.fechaPago="",this.tipoMoneda="",this.observacion="",this.totalComprobante="0.00",this.tipoPorcentajePercepcion=null,this.porcentajePercepcion=0}return e}()},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/modelos/percepcion-crear-auxiliar.ts":function(e,r,o){"use strict";o.d(r,"a",function(){return t});var t=function(){function e(){this.cabecera=null,this.entidadReceptora=null,this.entidadEmisora=null,this.detalle=[]}return e}()},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/modelos/percepcion-crear-detalle.ts":function(e,r,o){"use strict";o.d(r,"a",function(){return t});var t=function(){function e(){this.id="",this.comprobante=null,this.tipoComprobante=null,this.idComprobante="",this.serieComprobante="",this.correlativoComprobante="",this.numeroComprobante="",this.fechaEmisionComprobante="-",this.monedaComprobante=null,this.importeTotalComprobante="0.00",this.tipoCambioComprobante="1.00",this.importeSolesComprobante="0.00",this.tipoPorcentajePercepcion=null,this.porcentajePercepcion=0,this.montoPercepcion="0.00"}return e}()},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/modelos/percepcion-crear-documento-entidad.ts":function(e,r,o){"use strict";o.d(r,"a",function(){return t});var t=function(){function e(){this.idTipoEntidad=0,this.tipoDocumento="",this.documento="",this.direccionFiscal="",this.denominacion="",this.correoElectronico=""}return e}()},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/modelos/percepcion-crear-documento-parametro-json.ts":function(e,r,o){"use strict";o.d(r,"a",function(){return t});var t=function(){function e(){this.tipo=null,this.valor="",this.auxiliarEntero=null,this.auxiliarCaracter="",this.auxiliarFecha=null,this.auxiliarImporte="0.00"}return e}()},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/modelos/percepcion-crear-documento-parametro.ts":function(e,r,o){"use strict";var t=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/modelos/percepcion-crear-documento-parametro-json.ts");o.d(r,"a",function(){return i});var i=function(){function e(){this.idParametro="",this.descripcionParametro="",this.json=JSON.stringify(new t.a)}return e}()},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/modelos/percepcion-crear-documento-referencia.ts":function(e,r,o){"use strict";o.d(r,"a",function(){return t});var t=function(){function e(){this.tipoDocumentoOrigen="",this.tipoDocumentoDestinoDescripcion="",this.idDocumentoDestino="",this.tipoDocumentoDestino="",this.tipoDocumentoDestinoDescripcion="",this.serieDocumentoDestino="",this.correlativoDocumentoDestino="",this.fechaEmisionDestino=null,this.totalImporteDestino="0.00",this.totalImporteAuxiliarDestino="0.00",this.totalPorcentajeAuxiliarDestino="0.00",this.monedaDestino="",this.totalMonedaDestino="",this.auxiliar1="0.00",this.auxiliar2="0.00"}return e}()},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/modelos/percepcion-crear.ts":function(e,r,o){"use strict";o.d(r,"a",function(){return t});var t=function(){function e(){this.numeroComprobante="",this.rucProveedor="",this.rucComprador="",this.idTipoComprobante="",this.tipoComprobante="",this.razonSocialProveedor="",this.razonSocialComprador="",this.moneda="",this.fechaEmision=null,this.observacionComprobante="",this.montoPagado="0.00",this.monedaDescuento="",this.montoDescuento="0.00",this.descuento="0.00",this.totalComprobante="0.00",this.tipoItem="",this.porcentajeImpuesto="0.00",this.idSerie="",this.documentoEntidad=[],this.documentoParametro=[],this.documentoReferencia=[]}return e}()},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-crear/percepcion-crear.component.css":function(e,r,o){r=e.exports=o("./node_modules/css-loader/lib/css-base.js")(!1),r.push([e.i,"",""]),e.exports=e.exports.toString()},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-crear/percepcion-crear.component.html":function(e,r){e.exports='<div class="card">\r\n  <div class="card-header card-header-text" data-background-color="blue">\r\n    <h4 class="card-title">{{titulo | translate}}</h4>\r\n  </div>\r\n  <div class="card-content">\r\n    <form [formGroup]="percepcionFormGroup" autocomplete="off">\r\n      <div class="row">\r\n        <div class="col-md-4">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'serie\' | translate}}<span class="star">*</span></label>\r\n            <select id="cmbserie" name="cmbserie" formControlName="cmbserie" class="form-control" [compareWith]="compararSerie">\r\n              <option *ngFor="let serie of series | async" [ngValue]="serie"> {{serie.serie}}</option>\r\n            </select>\r\n            <div class="row" *ngIf="!percepcionFormGroup.get(\'cmbserie\').valid && percepcionFormGroup.get(\'cmbserie\').touched">\r\n              <div class="col-md-12">\r\n                <span *ngIf="percepcionFormGroup.controls[\'cmbserie\'].hasError(\'required\')"\r\n                      class="text-danger">{{\'campoRequerido\' | translate}}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class="col-md-4">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'fechaPago\' | translate}} <span class="star">*</span> </label>\r\n            <input id="datefechapago" formControlName="datefechapago" autocomplete="off" type="text" class="form-control" datepicker/>\r\n            <div *ngIf="!percepcionFormGroup.get(\'datefechapago\').valid && percepcionFormGroup.get(\'datefechapago\').touched">\r\n              <div class="row">\r\n                <div class="col-md-12">\r\n                <span *ngIf="percepcionFormGroup.controls[\'datefechapago\'].hasError(\'required\')"\r\n                      class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                </div>\r\n              </div>\r\n              <div class="row">\r\n                <div class="col-md-12">\r\n                  <span *ngIf="percepcionFormGroup.controls[\'datefechapago\'].hasError(\'errorFecha\')" class="text-danger">\r\n                    {{percepcionFormGroup.controls[\'datefechapago\'].getError(\'errorFecha\') | translate}}\r\n                  </span>\r\n                  <span *ngIf="percepcionFormGroup.controls[\'datefechapago\'].hasError(\'errorFecha\')"\r\n                        class="text-danger">{{percepcionFormGroup.controls[\'datefechapago\'].getError(\'errorFecha\') | translate}}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-4">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'tipoMoneda\' | translate}} <span class="star">*</span> </label>\r\n            <input id="txttipomoneda"  formControlName="txttipomoneda" class="form-control" type="text">\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="row">\r\n        <div class="col-md-4">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label"> <i class="material-icons" style="font-size: 1.5rem;\r\n                  margin-right: 0.5rem;">search</i> {{\'ruc\' | translate}} <span class="star">*</span></label>\r\n            <input rucDirective id="txtruc" formControlName="txtruc" autocomplete="off" class="form-control" type="text"\r\n                   (keyup)="busquedaruc($event)">\r\n          </div>\r\n        </div>\r\n        <div class="col-md-4">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label"> <i class="material-icons" style="font-size: 1.5rem;\r\n                  margin-right: 0.5rem;">search</i>{{\'razonSocial\' | translate}}<span class="star">*</span></label>\r\n            <input ng2-auto-complete\r\n                   type="text"\r\n                   autocomplete="off"\r\n                   id="razonsocial"\r\n                   formControlName="razonsocial"\r\n                   [source]="listarOrganizacionesDeAutcompletado.bind(this)"\r\n                   [list-formatter]="autocompleListFormatter"\r\n                   [value-formatter]="autocompleListFormatter"\r\n                   [loading-text]="\'cargando\' | translate"\r\n                   (valueChanged)="cambioSeleccionEntidadEmisora($event)"\r\n                   (change)="cambioBusquedaAutocompleteEntidadEmisora()"\r\n                   min-chars=1\r\n                   [no-match-found-text]="\'noSeEncontraronResultados\' | translate"\r\n                   class="form-control">\r\n            <span\r\n              *ngIf="!percepcionFormGroup.get(\'razonsocial\').valid && percepcionFormGroup.get(\'razonsocial\').touched">\r\n                            <span *ngIf="percepcionFormGroup.controls[\'razonsocial\'].hasError(\'required\')"\r\n                                  class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                          </span>\r\n          </div>\r\n        </div>\r\n        <div class="col-lg-4">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'txtcorreo\' | translate}} <span class="star">*</span> </label>\r\n            <input id="txtcorreo" formControlName="txtcorreo" class="form-control" autocomplete="off" type="text">\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-8">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'txtdireccionfiscal\' | translate}} <span class="star">*</span> </label>\r\n            <input id="txtdireccionfiscal" formControlName="txtdireccionfiscal" autocomplete="off" class="form-control" type="text">\r\n          </div>\r\n        </div>\r\n        <div class="col-md-4">\r\n          <div class="form-group label-floating">\r\n            <label class="control-label">{{\'porcentajePercepcion\' | translate}} <span class="star">*</span> </label>\r\n            <select id="cmbPorcentajePercepcion" name="cmbPorcentajePercepcion" formControlName="cmbPorcentajePercepcion" class="form-control"\r\n                    (change)="cambioPorcentajePercepcion()"\r\n                    [compareWith]="compararParametros">\r\n              <option [ngValue]="null" disabled>{{\'seleccioneUnTipoDePercepcion\' | translate}}</option>\r\n              <option *ngFor="let tipoPercepcion of tiposPercepcion | async" [ngValue]="tipoPercepcion"> {{tipoPercepcion.descripcion_dominio}}</option>\r\n            </select>\r\n            <div class="row" *ngIf="!percepcionFormGroup.get(\'cmbPorcentajePercepcion\').valid && percepcionFormGroup.get(\'cmbPorcentajePercepcion\').touched">\r\n              <div class="col-md-12">\r\n                <span *ngIf="percepcionFormGroup.controls[\'cmbPorcentajePercepcion\'].hasError(\'required\')"  class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n              </div>\r\n              <div class="col-md-12">\r\n                  <span *ngIf="percepcionFormGroup.get(\'cmbPorcentajePercepcion\').hasError(\'seleccioneUnTipoDePercepcion\')"\r\n                        class="text-danger">{{\'seleccioneUnTipoDePercepcion\' | translate}}\r\n                  </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n\r\n    <div class="card">\r\n      <div class="card-header card-header-icon" data-background-color="blue">\r\n        <i class="material-icons">list</i>\r\n      </div>\r\n      <div class="row"><h3>{{\'listaItems\' | translate}}</h3></div>\r\n      <div class="row"><p>&nbsp;</p></div>\r\n      <nav class="navbar navbar-info" role="navigation"></nav>\r\n      <div class="card-content">\r\n        <app-data-table #tablaNormal\r\n                        (iniciarData)="iniciarData($event)"\r\n                        (accion)="ejecutarAccion($event)"\r\n                        (eliminar)="eliminar($event)"\r\n                        (agregar)="agregarItem($event)"\r\n                        [idTabla]="\'tabla1\'"\r\n                        [ordenarPorElCampo]="ordenarPorElCampo"\r\n                        [ordenarAscendente]="true"\r\n                        [columnas]="columnasTabla"\r\n                        [acciones]="accionesTabla"\r\n                        [tipoAccion]="tipoAccion"\r\n                        [habilitarAcciones]="true"\r\n                        [habilitarCheckBox]="true"\r\n                        [habilitarAgregar]="true"\r\n                        [habilitarEliminar]="true"></app-data-table>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-12">\r\n          <form [formGroup]="percepcionFormGroup">\r\n            <div class="row">\r\n              <div class="col-md-12">\r\n                <div class="col-md-9">&nbsp;</div>\r\n                <div class="col-md-3">\r\n                  <div class="form-group label-floating">\r\n                    <label class="control-label">{{\'total\' | translate}}</label>\r\n                    <input type="text" id="txttotal" formControlName="txttotal" class="form-control">\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </form>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="row"><p> &nbsp;</p></div>\r\n    <div class="row">\r\n      <div class="col-md-12">\r\n        <form [formGroup]="percepcionFormGroup">\r\n          <div class="label-floating">\r\n            <label class="control-label">{{\'observaciones\' | translate}}</label>\r\n            <input id="txtobservacion" formControlName="txtobservacion" class="form-control" type="text">\r\n            <span\r\n              *ngIf="!percepcionFormGroup.get(\'txtobservacion\').valid && percepcionFormGroup.get(\'txtobservacion\').touched">\r\n                            <span *ngIf="percepcionFormGroup.controls[\'txtobservacion\'].hasError(\'maxLength\')"\r\n                                  class="text-danger">{{\'maximoCaracteres\' | translate: {digito: 500} }}</span>\r\n                          </span>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n    <div class="row"><p> &nbsp;</p></div>\r\n    <div class="row">\r\n      <div class="col-md-12" align="right">\r\n        <button type="submit" class="btn btn-default" (click)=" vistaprevia()"\r\n                [disabled]="!(percepcionFormGroup.valid && validarDataTable())">{{\'vistaPrevia\' | translate}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n'},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-crear/percepcion-crear.component.ts":function(e,r,o){"use strict";var t=o("./node_modules/@angular/core/@angular/core.es5.js"),i=o("./node_modules/@angular/forms/@angular/forms.es5.js"),n=o("./node_modules/@angular/router/@angular/router.es5.js"),a=o("./src/app/facturacion-electronica/general/data-table/utils/accion.ts"),c=o("./src/app/facturacion-electronica/general/data-table/utils/tipo-accion.ts"),s=o("./src/app/facturacion-electronica/general/data-table/data-table.component.ts"),p=o("./src/app/facturacion-electronica/general/data-table/utils/modo-vista-accion.ts"),l=o("./src/app/facturacion-electronica/general/services/organizacion/entidad.service.ts"),m=o("./src/app/facturacion-electronica/general/models/organizacion/entidad.ts"),u=o("./node_modules/@angular/common/@angular/common/http.es5.js"),d=o("./src/app/facturacion-electronica/general/services/configuracionDocumento/series.service.ts"),b=o("./src/app/facturacion-electronica/general/models/documento/tablaMaestra.ts"),v=o("./src/app/facturacion-electronica/general/services/documento/tablaMaestra.service.ts"),h=o("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),f=o("./node_modules/rxjs/Observable.js"),g=(o.n(f),o("./src/app/facturacion-electronica/percepcion-retencion/services/padre-retencion-percepcion.service.ts")),C=o("./src/app/facturacion-electronica/general/utils/estilos.services.ts"),x=o("./src/app/facturacion-electronica/general/utils/catalogo-documento-identidad.service.ts"),P=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/servicios/percepcion-comun.service.ts"),E=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/modelos/percepcion-cabecera.ts"),_=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/modelos/percepcion-crear-auxiliar.ts"),F=o("./src/app/facturacion-electronica/general/utils/utils.service.ts"),y=o("./src/app/facturacion-electronica/general/services/configuracionDocumento/parametros.service.ts"),S=o("./src/app/facturacion-electronica/general/services/utils/validadorPersonalizado.ts"),I=o("./src/app/facturacion-electronica/general/data-table/utils/columna-data-table.ts");o.d(r,"a",function(){return M});var j=this&&this.__decorate||function(e,r,o,t){var i,n=arguments.length,a=n<3?r:null===t?t=Object.getOwnPropertyDescriptor(r,o):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,r,o,t);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(n<3?i(a):n>3?i(r,o,a):i(r,o))||a);return n>3&&a&&Object.defineProperty(r,o,a),a},G=this&&this.__metadata||function(e,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,r)},A=this&&this.__awaiter||function(e,r,o,t){return new(o||(o=Promise))(function(i,n){function a(e){try{s(t.next(e))}catch(e){n(e)}}function c(e){try{s(t.throw(e))}catch(e){n(e)}}function s(e){e.done?i(e.value):new o(function(r){r(e.value)}).then(a,c)}s((t=t.apply(e,r||[])).next())})},D=this&&this.__generator||function(e,r){function o(e){return function(r){return t([e,r])}}function t(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(a=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[0,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=r.call(e,s)}catch(e){o=[6,e],n=0}finally{i=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var i,n,a,c,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c},M=function(){function e(e,r,o,t,i,n,a,c,s,p,l,m,u){this.httpClient=e,this.route=r,this.router=o,this._entidadServices=t,this._serieService=i,this._tiposService=n,this._tablaMaestraService=a,this._estilosService=c,this._utilsService=s,this._parametrosService=p,this._percepcionComunService=l,this._catalogoDocumentoEntidadService=m,this._padreRetencionPerpcionService=u,this._padreRetencionPerpcionService.actualizarComprobante(this.route.snapshot.data.codigo,this.route.snapshot.data.mostrarCombo,!1)}return e.prototype.inicializarVariables=function(){this.entidadEmisor=null,this.titulo="crearPercepcion",this.inicializarVariablesDataTable(),this.filtrarComprobantes(),this.filtrarSeries(),this.obtenerTiposPercepcion()},e.prototype.obtenerTiposPercepcion=function(){this.tiposPercepcion=this._parametrosService.obtenerParametrosPorId(this._tiposService.PARAMETRO_REGIMENES_PERCEPCION)},e.prototype.filtrarComprobantes=function(){this.todosTiposComprobantes=this._tablaMaestraService.obtenerPorIdTabla(b.a);var e=[this._tiposService.TIPO_DOCUMENTO_PERCEPCION];this.tiposComprobantes=this._tablaMaestraService.obtenerPorCodigosDeTablaMaestra(this.todosTiposComprobantes,e)},e.prototype.filtrarSeries=function(){this.series=this._serieService.filtroSeries(localStorage.getItem("id_entidad"),this._tiposService.TIPO_DOCUMENTO_PERCEPCION,this._tiposService.TIPO_SERIE_OFFLINE.toString())},e.prototype.inicializarVariablesDataTable=function(){this.tipoAccion=p.a.ICONOS,this.columnasTabla=[new I.a("tipoComprobante","tipoComprobante.descripcionLarga"),new I.a("serie","serieComprobante"),new I.a("numeroCorrelativo","correlativoComprobante"),new I.a("fechaEmision","fechaEmisionComprobante"),new I.a("monedaOrigen","monedaComprobante.descripcionCorta"),new I.a("importeTotal","importeTotalComprobante",{"text-align":"right"}),new I.a("importeTotalsoles","importeSolesComprobante",{"text-align":"right"}),new I.a("porcentajePercepcion","tipoPorcentajePercepcion.descripcion_dominio"),new I.a("importePercepcionSoles","montoPercepcion",{"text-align":"right"})],this.ordenarPorElCampo="serieComprobante",this.accionesTabla=[new a.a("editar",new a.b("visibility","btn-info"),c.a.EDITAR)]},e.prototype.compararParametros=function(e,r){return!r||!!e&&e.id_dominio===r.id_dominio},e.prototype.ngOnInit=function(){this.inicializarVariables(),this.initForm()},e.prototype.cargarPersitencia=function(){this._percepcionComunService.hayPersistencia()&&(this.cargarPersistenciaCabecera(),this.cargarPersistenciaEntidad(),this.cargarPersistenciaDetalle(),this._percepcionComunService.eliminarPersistenciaPercepcionAuxiliar())},e.prototype.cargarPersistenciaCabecera=function(){var e=this._percepcionComunService.percepcionAuxiliar.value.cabecera;e&&(e.serie&&(this.percepcionFormGroup.controls.cmbserie.setValue(e.serie),this._estilosService.eliminarEstiloInput("cmbserie","is-empty")),this.percepcionFormGroup.controls.txtobservacion.setValue(e.observacion),this.percepcionFormGroup.controls.datefechapago.setValue(e.fechaPago),this.percepcionFormGroup.controls.cmbPorcentajePercepcion.setValue(e.tipoPorcentajePercepcion),this._estilosService.eliminarEstiloInput("txtobservacion","is-empty"),this._estilosService.eliminarEstiloInput("datefechapago","is-empty"),this._estilosService.eliminarEstiloInput("cmbPorcentajePercepcion","is-empty"))},e.prototype.cargarPersistenciaEntidad=function(){var e=this._percepcionComunService.percepcionAuxiliar.value.entidadReceptora;e&&(this.entidadEmisor=e,this.percepcionFormGroup.controls.txtruc.setValue(e.documento),this.percepcionFormGroup.controls.razonsocial.setValue(e.denominacion),this.percepcionFormGroup.controls.txtcorreo.setValue(e.correoElectronico),this.percepcionFormGroup.controls.txtdireccionfiscal.setValue(e.direccionFiscal),this._estilosService.eliminarEstiloInput("txtruc","is-empty"),this._estilosService.eliminarEstiloInputAutocomplete("razonsocial","is-empty"),this._estilosService.eliminarEstiloInput("txtcorreo","is-empty"),this._estilosService.eliminarEstiloInput("txtdireccionfiscal","is-empty"))},e.prototype.cargarPersistenciaDetalle=function(){var e=this._percepcionComunService.percepcionAuxiliar.value.detalle,r=this._percepcionComunService.itemDetalleEditar.value,o=e.length;if(r){var t=e.findIndex(function(e){return e.id===r.id});-1===t?r&&(r.id=o.toString(),e.push(r)):e[t]=r}if(e.length>0){for(var i=0,n=0,a=e;n<a.length;n++){var c=a[n];i+=Number(c.montoPercepcion)}this.percepcionFormGroup.controls.txttotal.setValue(i.toFixed(2)),this.tabla.insertarData(e)}},e.prototype.vistaprevia=function(){this.agregarPersistencia(),this.router.navigate(["./vista-previa"],{relativeTo:this.route})},e.prototype.initForm=function(){var e=new Date,r=e.getDate().toString()+"/"+(e.getMonth()+1).toString()+"/"+e.getFullYear().toString();this.percepcionFormGroup=new i.FormGroup({cmbserie:new i.FormControl("",[i.Validators.required]),txtruc:new i.FormControl("",[i.Validators.required,i.Validators.pattern("[0-9]{11}"),i.Validators.minLength(11),i.Validators.maxLength(11)]),razonsocial:new i.FormControl(""),txtcorreo:new i.FormControl({value:"",disabled:!0},[i.Validators.required]),txtdireccionfiscal:new i.FormControl({value:"",disabled:!0},[i.Validators.required]),cmbPorcentajePercepcion:new i.FormControl("",[i.Validators.required,S.a.validarSelectForm("seleccioneUnTipoDePercepcion",null)]),txttipomoneda:new i.FormControl({value:"PEN",disabled:!0}),txtobservacion:new i.FormControl("",[i.Validators.maxLength(500)]),datefechapago:new i.FormControl(r,[i.Validators.required,S.a.fechaDeberiaSerMenorAHoy("errorFecha")]),txttotal:new i.FormControl({value:"0.00",disabled:!0},[i.Validators.required,i.Validators.min(.01),i.Validators.minLength(4)])})},e.prototype.autocompleListFormatter=function(e){return e.denominacion},e.prototype.listarOrganizacionesDeAutcompletado=function(e){return e?this._entidadServices.buscarPorRazonSocialAutocomplete(e,this._catalogoDocumentoEntidadService.TIPO_DOCUMENTO_IDENTIDAD_RUC):f.Observable.of([])},e.prototype.iniciarData=function(e){this.cargarPersitencia()},e.prototype.limpiar=function(e){this.percepcionFormGroup.reset()},e.prototype.busquedaruc=function(e){var r=this;if(11===this.percepcionFormGroup.controls.txtruc.value.length){var o=this._entidadServices.buscarPorRuc(this.percepcionFormGroup.get("txtruc").value);null!=o&&o.subscribe(function(e){e?(r.entidadEmisor=e,r.llenarDatosEmisorEnFormulario(!0)):(r.percepcionFormGroup.controls.txtcorreo.enable(),r.percepcionFormGroup.controls.txtdireccionfiscal.enable())})}else!this.percepcionFormGroup.controls.txtcorreo.enabled&&this.percepcionFormGroup.controls.razonsocial.value.toString().length<1&&this.limpiarBusquedaEntidadEmisora(!0)},e.prototype.limpiarBusquedaEntidadEmisora=function(e){this.entidadEmisor=null,e?(this.percepcionFormGroup.controls.razonsocial.reset(),this._estilosService.agregarEstiloInputAutocomplete("razonsocial","is-empty")):(this.percepcionFormGroup.controls.txtruc.reset(),this._estilosService.agregarEstiloInput("txtruc","is-empty")),this.percepcionFormGroup.controls.txtcorreo.reset(),this._estilosService.agregarEstiloInput("txtcorreo","is-empty"),this.percepcionFormGroup.controls.txtdireccionfiscal.reset(),this._estilosService.agregarEstiloInput("txtdireccionfiscal","is-empty")},e.prototype.llenarDatosEmisorEnFormulario=function(e){e?(this.percepcionFormGroup.controls.razonsocial.setValue(this.entidadEmisor.denominacion),this._estilosService.eliminarEstiloInputAutocomplete("razonsocial","is-empty")):(this.percepcionFormGroup.controls.txtruc.setValue(this.entidadEmisor.documento),this._estilosService.eliminarEstiloInput("txtruc","is-empty")),this.percepcionFormGroup.controls.txtcorreo.setValue(this.entidadEmisor.correoElectronico),this._estilosService.eliminarEstiloInput("txtcorreo","is-empty"),this.percepcionFormGroup.controls.txtdireccionfiscal.setValue(this.entidadEmisor.direccionFiscal),this._estilosService.eliminarEstiloInput("txtdireccionfiscal","is-empty");var r=""===this.entidadEmisor.correoElectronico,o="-"===this.entidadEmisor.correoElectronico;r||o?this.percepcionFormGroup.controls.txtcorreo.enable():this.percepcionFormGroup.controls.txtcorreo.disable()},e.prototype.cambioBusquedaAutocompleteEntidadEmisora=function(){this.percepcionFormGroup.get("razonsocial").value},e.prototype.cambioSeleccionEntidadEmisora=function(e){void 0!==e&&(this.limpiarBusquedaEntidadEmisora(!1),this.entidadEmisor=e,this.llenarDatosEmisorEnFormulario(!1))},e.prototype.eliminar=function(e){},e.prototype.compararSerie=function(e,r){return!r||e.idSerie===r.idSerie},e.prototype.agregarItem=function(e){return A(this,void 0,void 0,function(){return D(this,function(r){return this.guardarOrganizacion(),e&&(this.percepcionFormGroup.controls.cmbPorcentajePercepcion.value?(this.agregarPersistencia(),this.router.navigate(["./agregar-item"],{relativeTo:this.route})):(this.percepcionFormGroup.controls.cmbPorcentajePercepcion.markAsTouched(),this.percepcionFormGroup.controls.cmbPorcentajePercepcion.setValue(null),this._estilosService.eliminarEstiloInput("cmbPorcentajePercepcion","is-empty"),this.percepcionFormGroup.controls.cmbPorcentajePercepcion.setErrors({seleccioneUnTipoDePercepcion:!0}))),[2]})})},e.prototype.guardarOrganizacion=function(){return A(this,void 0,void 0,function(){var e;return D(this,function(r){return e=new m.b,e.correo=this.percepcionFormGroup.controls.txtcorreo.value,e.direccion=this.percepcionFormGroup.controls.txtdireccionfiscal.value,e.nombreComercial=this.percepcionFormGroup.controls.razonsocial.value,e.ruc=this.percepcionFormGroup.controls.txtruc.value,e.ruc.toString().length>10&&this.documentoQueryService.guardarOrganizacion(e),[2]})})},e.prototype.agregarPersistencia=function(){var e=new E.a;e.tipoMoneda=this.percepcionFormGroup.controls.txttipomoneda.value;var r=this.percepcionFormGroup.controls.cmbserie.value;e.serie=""===r?null:r,e.observacion=this.percepcionFormGroup.controls.txtobservacion.value,e.fechaPago=this.percepcionFormGroup.controls.datefechapago.value,e.totalComprobante=this.percepcionFormGroup.controls.txttotal.value,e.tipoPorcentajePercepcion=this.percepcionFormGroup.controls.cmbPorcentajePercepcion.value,e.porcentajePercepcion=this.verificarMontoPorcentajePercepcion(e.tipoPorcentajePercepcion);var o=new _.a;o.entidadReceptora=this.entidadEmisor,o.cabecera=e,o.detalle=this.tabla.getData(),o.entidadEmisora=this._utilsService.cargarEntidadEmisora(),this._percepcionComunService.percepcionAuxiliar.next(o),this._percepcionComunService.setPersistenciaPercepcionAuxiliar()},e.prototype.verificarMontoPorcentajePercepcion=function(e){var r=0;if(console.log(e),e)switch(parseInt(e.id_dominio)){case this._tiposService.TIPO_PERCEPCION_VENTA_INTERNA_ID:console.log("this._tiposService.TIPO_PERCEPCION_VENTA_INTERNA_ID"),r=this._tiposService.TIPO_PERCEPCION_VENTA_INTERNA_TASA;break;case this._tiposService.TIPO_PERCEPCION_A_LA_ADQUISICION_DE_COMBUSTIBLE_ID:console.log("TIPO_PERCEPCION_A_LA_ADQUISICION_DE_COMBUSTIBLE_ID"),r=this._tiposService.TIPO_PERCEPCION_A_LA_ADQUISICION_DE_COMBUSTIBLE_TASA;break;case this._tiposService.TIPO_PERCEPCION_REALIZADA_AL_AGENTE_DE_PERCEPCION_CON_TASA_ESPECIAL_ID:console.log("TIPO_PERCEPCION_A_LA_ADQUISICION_DE_COMBUSTIBLE_ID"),r=this._tiposService.TIPO_PERCEPCION_REALIZADA_AL_AGENTE_DE_PERCEPCION_CON_TASA_ESPECIAL_TASA}return console.log(r),r},e.prototype.ejecutarAccion=function(e){var r=e[0],o=e[1];switch(this.agregarPersistencia(),o.tipoPorcentajePercepcion=this.percepcionFormGroup.controls.cmbPorcentajePercepcion.value,o.porcentajePercepcion=this.verificarMontoPorcentajePercepcion(this.percepcionFormGroup.controls.cmbPorcentajePercepcion.value),this._percepcionComunService.itemDetalleEditar.next(o),r){case c.a.EDITAR:this.router.navigate(["./editar-item/",o.id],{relativeTo:this.route})}},e.prototype.validarDataTable=function(){return this.tabla.getData().length>0},e.prototype.cambioPorcentajePercepcion=function(){for(var e=this.tabla.getData(),r=0,o=e;r<o.length;r++){var t=o[r];t.tipoPorcentajePercepcion=this.percepcionFormGroup.controls.cmbPorcentajePercepcion.value;var i=this.verificarMontoPorcentajePercepcion(t.tipoPorcentajePercepcion);t.porcentajePercepcion=i,t.montoPercepcion=(Number(t.importeSolesComprobante)*i/100).toFixed(2),console.log(t),console.log(t.montoPercepcion)}},e}();j([o.i(t.ViewChild)("tablaNormal"),G("design:type","function"==typeof(T=void 0!==s.a&&s.a)&&T||Object)],M.prototype,"tabla",void 0),M=j([o.i(t.Component)({selector:"app-percepcion-crear",template:o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-crear/percepcion-crear.component.html"),styles:[o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-crear/percepcion-crear.component.css")]}),G("design:paramtypes",["function"==typeof(O=void 0!==u.b&&u.b)&&O||Object,"function"==typeof(w=void 0!==n.b&&n.b)&&w||Object,"function"==typeof(R=void 0!==n.c&&n.c)&&R||Object,"function"==typeof(N=void 0!==l.a&&l.a)&&N||Object,"function"==typeof(V=void 0!==d.a&&d.a)&&V||Object,"function"==typeof(q=void 0!==h.a&&h.a)&&q||Object,"function"==typeof(z=void 0!==v.a&&v.a)&&z||Object,"function"==typeof(U=void 0!==C.a&&C.a)&&U||Object,"function"==typeof(L=void 0!==F.a&&F.a)&&L||Object,"function"==typeof(k=void 0!==y.a&&y.a)&&k||Object,"function"==typeof(B=void 0!==P.a&&P.a)&&B||Object,"function"==typeof($=void 0!==x.a&&x.a)&&$||Object,"function"==typeof(H=void 0!==g.a&&g.a)&&H||Object])],M);var T,O,w,R,N,V,q,z,U,L,k,B,$,H},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-crear/percepcion-crear.module.ts":function(e,r,o){"use strict";var t=o("./node_modules/@angular/core/@angular/core.es5.js"),i=o("./node_modules/@angular/common/@angular/common.es5.js"),n=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-crear/percepcion-crear.component.ts"),a=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-item-crear/percepcion-item-crear.module.ts"),c=o("./src/app/facturacion-electronica/general/services/organizacion/entidad.service.ts"),s=o("./src/app/facturacion-electronica/general/services/configuracionDocumento/series.service.ts"),p=o("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),l=o("./src/app/facturacion-electronica/general/services/documento/tablaMaestra.service.ts"),m=o("./node_modules/@angular/common/@angular/common/http.es5.js"),u=o("./src/app/facturacion-electronica/general/utils/estilos.services.ts"),d=o("./node_modules/@angular/forms/@angular/forms.es5.js"),b=o("./src/app/facturacion-electronica/general/directivas/directivas.module.ts"),v=o("./src/app/directives/datepicker.module.ts"),h=o("./node_modules/@ngx-translate/core/index.js"),f=o("./src/app/facturacion-electronica/general/data-table/data-table.module.ts"),g=o("./node_modules/ng2-auto-complete/dist/index.js"),C=(o.n(g),o("./src/app/facturacion-electronica/general/utils/catalogo-documento-identidad.service.ts")),x=o("./src/app/facturacion-electronica/general/services/utils/persistenciaDatos.service.ts"),P=o("./src/app/facturacion-electronica/general/utils/utils.service.ts");o.d(r,"a",function(){return _});var E=this&&this.__decorate||function(e,r,o,t){var i,n=arguments.length,a=n<3?r:null===t?t=Object.getOwnPropertyDescriptor(r,o):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,r,o,t);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(n<3?i(a):n>3?i(r,o,a):i(r,o))||a);return n>3&&a&&Object.defineProperty(r,o,a),a},_=function(){function e(){}return e}();_=E([o.i(t.NgModule)({imports:[i.CommonModule,m.a,d.ReactiveFormsModule,a.a,h.a,d.FormsModule,v.a,b.a,f.a,g.Ng2AutoCompleteModule],declarations:[n.a],exports:[n.a],providers:[c.a,s.a,p.a,u.a,l.a,C.a,x.a,P.a]})],_)},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-item-crear/percepcion-item-crear.component.css":function(e,r,o){r=e.exports=o("./node_modules/css-loader/lib/css-base.js")(!1),r.push([e.i,"",""]),e.exports=e.exports.toString()},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-item-crear/percepcion-item-crear.component.html":function(e,r){e.exports='<div class="row col-md-12">\r\n  <div class="card">\r\n    <div class="card-header card-header-text" data-background-color="blue">\r\n      <h4 class="card-title">{{titulo | translate}}</h4>\r\n    </div>\r\n    <div class="card-content">\r\n      <form [formGroup]="itemFormGroup" (ngSubmit)="guardarItem()" autocomplete="off" novalidate>\r\n        <div class="row">\r\n          <div class="col-md-3">\r\n            <div class="form-group label-floating">\r\n              <label class="control-label">{{\'tipoDocumento\' | translate}} <span class="star">*</span></label>\r\n              <select id="cmbTipoComprobante" name="cmbTipoComprobante" formControlName="cmbTipoComprobante" class="form-control" (change)="cambioTipoComprobante()" [compareWith]="compararTablaMaestra">\r\n                <option *ngFor="let tipoComprobante of tiposComprobantes | async" [ngValue]="tipoComprobante"> {{tipoComprobante.descripcionLarga}}</option>\r\n              </select>\r\n              <div class="row" *ngIf="!itemFormGroup.get(\'cmbTipoComprobante\').valid && itemFormGroup.get(\'cmbTipoComprobante\').touched">\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.controls[\'cmbTipoComprobante\'].hasError(\'required\')" class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-md-3">\r\n            <div class="form-group label-floating">\r\n              <label id="lblSerie" class="control-label">{{\'serie\' | translate}}<span class="star">*</span></label>\r\n              <input  type="text"\r\n                      id="txtSerieComprobante"\r\n                      formControlName="txtSerieComprobante"\r\n                      autocomplete="off"\r\n                      class="form-control"\r\n                      [SerieDirective]="true">\r\n              <div class="row" *ngIf="!itemFormGroup.get(\'txtSerieComprobante\').valid && itemFormGroup.get(\'txtSerieComprobante\').touched">\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.controls[\'txtSerieComprobante\'].hasError(\'required\')" class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-md-3">\r\n            <div class="form-group label-floating">\r\n              <label id="lblCorrelativo" class="control-label">{{\'correlativo\' | translate}}<span class="star">*</span></label>\r\n              <input  type="text"\r\n                      id="txtCorrelativo"\r\n                      formControlName="txtCorrelativoComprobante"\r\n                      class="form-control"\r\n                      correlativoDirective>\r\n              <div class="row" *ngIf="!itemFormGroup.get(\'txtCorrelativoComprobante\').valid && itemFormGroup.get(\'txtCorrelativoComprobante\').touched">\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.controls[\'txtCorrelativoComprobante\'].hasError(\'required\')" class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-md-3">\r\n            <div class="form-group">\r\n              <button id="btnBuscar" type="button" class="btn btn-xs btn-default"\r\n                      (click)="buscarComprobante()"\r\n                      [title]="\'buscar\' | translate"\r\n                      [disabled]="!(itemFormGroup.get(\'txtSerieComprobante\').valid && itemFormGroup.get(\'txtCorrelativoComprobante\').valid)">\r\n              <span class="btn-label">\r\n                  <i class="material-icons">search</i>\r\n                {{\'buscarComprobante\' | translate}}\r\n              </span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="row">\r\n          <div class="col-md-3">\r\n            <div class="form-group label-floating">\r\n              <label class="control-label">{{\'fechaEmision\' | translate}}<span class="star">*</span> </label>\r\n              <input id="txtFechaEmisionComprobante" [disabled]="(escogioUnComprobante | async)" formControlName="txtFechaEmisionComprobante"\r\n                     autocomplete="off" type="text" class="form-control" datepicker/>\r\n              <div *ngIf="!itemFormGroup.get(\'txtFechaEmisionComprobante\').valid">\r\n                <div class="row">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="itemFormGroup.controls[\'txtFechaEmisionComprobante\'].hasError(\'required\')" class="text-danger">\r\n                      {{\'campoRequerido\' | translate}}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                <div class="row">\r\n                  <div class="col-md-12">\r\n                    <span *ngIf="itemFormGroup.controls[\'txtFechaEmisionComprobante\'].hasError(\'errorFecha\')" class="text-danger">\r\n                      {{itemFormGroup.controls[\'txtFechaEmisionComprobante\'].getError(\'errorFecha\') | translate}}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-md-3">\r\n            <div class="form-group label-floating">\r\n              <label class="control-label">{{\'tipoMoneda\' | translate}} <span class="star">*</span></label>\r\n              <select id="cmbMonedaComprobante" name="cmbMonedaComprobante" formControlName="cmbMonedaComprobante" autocomplete="off" class="form-control"\r\n                      (change)="cambioMoneda()" [compareWith]="compararTablaMaestra">\r\n                <option [ngValue]="null" disabled>{{\'seleccioneUnaMoneda\' | translate}}</option>\r\n                <option *ngFor="let moneda of tiposMonedas | async" [ngValue]="moneda"> {{moneda.descripcionCorta}}</option>\r\n              </select>\r\n              <div class="row" *ngIf="!itemFormGroup.get(\'cmbMonedaComprobante\').valid && itemFormGroup.get(\'cmbMonedaComprobante\').touched">\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.controls[\'cmbMonedaComprobante\'].hasError(\'required\')" class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                </div>\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.get(\'cmbMonedaComprobante\').hasError(\'seleccioneUnaMoneda\')"\r\n                        class="text-danger">{{\'seleccioneUnaMoneda\' | translate}}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-md-3">\r\n            <div class="form-group label-floating">\r\n              <label class="control-label">{{\'importeTotal\' | translate}} <span class="star">*</span></label>\r\n              <input precioDirectiva id="txtMontoComprobante" formControlName="txtMontoComprobante" autocomplete="off" class="form-control"\r\n                     type="text">\r\n              <div class="row" *ngIf="!itemFormGroup.get(\'txtMontoComprobante\').valid && itemFormGroup.get(\'txtMontoComprobante\').touched">\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.controls[\'txtMontoComprobante\'].hasError(\'required\')"  class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                </div>\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.controls[\'txtMontoComprobante\'].hasError(\'pattern\')"   class="text-danger">{{\'formatoInvalido\' | translate}}</span>\r\n                </div>\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.controls[\'txtMontoComprobante\'].hasError(\'minlength\')" class="text-danger">{{\'minimoDigitos\' | translate:{digito:\'4\'} }}</span>\r\n                </div>\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.controls[\'txtMontoComprobante\'].hasError(\'maxlength\')" class="text-danger">{{\'maximoDigitos\' | translate:{digito:\'16\'} }}</span>\r\n                </div>\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.controls[\'txtMontoComprobante\'].hasError(\'min\')" class="text-danger">{{\'debeSerMayorA\' | translate:{digito:\'0.00\'} }}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-md-3">\r\n            <div class="form-group label-floating">\r\n              <label  class="control-label">{{\'tipoCambio\' | translate}} <span class="star">*</span></label>\r\n              <input precioDirectiva id="txtTipoCambioComprobante" formControlName="txtTipoCambioComprobante" autocomplete="off" class="form-control" type="text">\r\n              <div class="row" *ngIf="!itemFormGroup.get(\'txtTipoCambioComprobante\').valid && itemFormGroup.get(\'txtTipoCambioComprobante\').touched">\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.controls[\'txtTipoCambioComprobante\'].hasError(\'required\')"  class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                </div>\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.controls[\'txtTipoCambioComprobante\'].hasError(\'pattern\')"   class="text-danger">{{\'formatoInvalido\' | translate}}</span>\r\n                </div>\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.controls[\'txtTipoCambioComprobante\'].hasError(\'minlength\')" class="text-danger">{{\'minimoDigitos\' | translate:{digito:\'4\'} }}</span>\r\n                </div>\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.controls[\'txtTipoCambioComprobante\'].hasError(\'maxlength\')" class="text-danger">{{\'maximoDigitos\' | translate:{digito:\'16\'} }}</span>\r\n                </div>\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.controls[\'txtTipoCambioComprobante\'].hasError(\'min\')" class="text-danger">{{\'debeSerMayorA\' | translate:{digito:\'0.00\'} }}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class="row">\r\n          <div class="col-md-3">\r\n            <div class="form-group label-floating">\r\n              <label class="control-label">{{\'importeSoles\' | translate}}</label>\r\n              <input precioDirectiva id="txtImporteSoles" formControlName="txtImporteSoles" autocomplete="off" class="form-control" type="text">\r\n              <div class="row" *ngIf="!itemFormGroup.get(\'txtImporteSoles\').valid && itemFormGroup.get(\'txtImporteSoles\').touched">\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.controls[\'txtImporteSoles\'].hasError(\'required\')"  class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                </div>\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.controls[\'txtImporteSoles\'].hasError(\'pattern\')"   class="text-danger">Ej. 10.00</span>\r\n                </div>\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.controls[\'txtImporteSoles\'].hasError(\'minlength\')" class="text-danger">{{\'minimoDigitos\' | translate:{digito:\'4\'} }}</span>\r\n                </div>\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.controls[\'txtImporteSoles\'].hasError(\'maxlength\')" class="text-danger">{{\'maximoDigitos\' | translate:{digito:\'16\'} }}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-md-3">\r\n            <div class="form-group label-floating">\r\n              <label class="control-label">{{\'porcentajePercepcion\' | translate}}</label>\r\n              <select id="cmbPorcentajePercepcion" name="cmbPorcentajePercepcion" formControlName="cmbPorcentajePercepcion" class="form-control"\r\n                      [compareWith]="compararParametros">\r\n                <option [ngValue]="null" disabled>{{\'seleccioneUnTipoDePercepcion\' | translate}}</option>\r\n                <option *ngFor="let tipoPercepcion of tiposPercepcion | async" [ngValue]="tipoPercepcion"> {{tipoPercepcion.descripcion_dominio}}</option>\r\n              </select>\r\n              <div class="row" *ngIf="!itemFormGroup.get(\'cmbPorcentajePercepcion\').valid && itemFormGroup.get(\'cmbPorcentajePercepcion\').touched">\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.controls[\'cmbPorcentajePercepcion\'].hasError(\'required\')"  class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                </div>\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.get(\'cmbPorcentajePercepcion\').hasError(\'seleccioneUnTipoDePercepcion\')"\r\n                      class="text-danger">{{\'seleccioneUnTipoDePercepcion\' | translate}}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class="col-md-3">\r\n            <div class="form-group label-floating">\r\n              <label class="control-label">% {{\'percepcion\' | translate}}</label>\r\n              <input id="txtMontoPorcentajePercepcion" name="txtMontoPorcentajePercepcion" formControlName="txtMontoPorcentajePercepcion" class="form-control">\r\n              <div class="row" *ngIf="!itemFormGroup.get(\'txtMontoPorcentajePercepcion\').valid && itemFormGroup.get(\'txtMontoPorcentajePercepcion\').touched">\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.controls[\'txtMontoPorcentajePercepcion\'].hasError(\'required\')"  class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class="col-md-3">\r\n            <div class="form-group label-floating">\r\n              <label class="control-label">{{\'importePercepcion\' | translate}}</label>\r\n              <input precioDirectiva id="txtMontoPercepcion" formControlName="txtMontoPercepcion" autocomplete="off" class="form-control" type="text">\r\n              <div class="row" *ngIf="!itemFormGroup.get(\'txtMontoPercepcion\').valid && itemFormGroup.get(\'txtMontoPercepcion\').touched">\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.controls[\'txtMontoPercepcion\'].hasError(\'required\')"  class="text-danger">{{\'campoRequerido\' | translate}}</span>\r\n                </div>\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.controls[\'txtMontoPercepcion\'].hasError(\'pattern\')"   class="text-danger">Ej. 10.00</span>\r\n                </div>\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.controls[\'txtMontoPercepcion\'].hasError(\'minlength\')" class="text-danger">{{\'minimoDigitos\' | translate:{digito:\'4\'} }}</span>\r\n                </div>\r\n                <div class="col-md-12">\r\n                  <span *ngIf="itemFormGroup.controls[\'txtMontoPercepcion\'].hasError(\'maxlength\')" class="text-danger">{{\'maximoDigitos\' | translate:{digito:\'16\'} }}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class="row">\r\n          <div class="col-md-12" align="right">\r\n            <ng-container *ngIf="esEditable | async; then btnEditable else btnGuardar;"></ng-container>\r\n            <ng-template #btnEditable>\r\n              <button id="btnEditar" name="btnEditar" type="submit" class="btn btn-default" (click)="guardarItem(true)">\r\n                {{\'editar\' | translate}}\r\n              </button>\r\n            </ng-template>\r\n            <ng-template #btnGuardar>\r\n              <button id="btnGuardar" name="btnGuardar" type="submit" class="btn btn-default" (click)="guardarItem()" [disabled]="!itemFormGroup.valid">\r\n                {{\'agregarItem\' | translate}}\r\n              </button>\r\n            </ng-template>\r\n            <button type="button" id="btnCancelar" name="btnCancelar" class="btn btn-default" (click)="regresar()"> {{\'regresar \' | translate}}</button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n'},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-item-crear/percepcion-item-crear.component.ts":function(e,r,o){"use strict";var t=o("./node_modules/@angular/core/@angular/core.es5.js"),i=o("./node_modules/@angular/forms/@angular/forms.es5.js"),n=o("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),a=o("./src/app/facturacion-electronica/general/services/documento/tablaMaestra.service.ts"),c=o("./node_modules/@angular/router/@angular/router.es5.js"),s=o("./src/app/facturacion-electronica/percepcion-retencion/services/padre-retencion-percepcion.service.ts"),p=o("./src/app/facturacion-electronica/general/services/comprobantes/comprobantes.service.ts"),l=o("./src/app/facturacion-electronica/general/models/documento/tablaMaestra.ts"),m=o("./node_modules/rxjs/BehaviorSubject.js"),u=(o.n(m),o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/servicios/percepcion-comun.service.ts")),d=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/modelos/percepcion-crear-detalle.ts"),b=o("./src/app/facturacion-electronica/general/utils/estilos.services.ts"),v=o("./src/app/facturacion-electronica/general/pipes/precio.pipe.ts"),h=o("./src/app/facturacion-electronica/general/services/utils/validadorPersonalizado.ts"),f=o("./src/app/facturacion-electronica/general/services/configuracionDocumento/parametros.service.ts"),g=o("./src/app/facturacion-electronica/general/utils/utils.service.ts"),C=o("./src/app/facturacion-electronica/general/utils/formato-fechas.ts"),x=o("./node_modules/@ngx-translate/core/index.js"),P=o("./node_modules/@angular/common/@angular/common.es5.js");o.d(r,"a",function(){return F});var E=this&&this.__decorate||function(e,r,o,t){var i,n=arguments.length,a=n<3?r:null===t?t=Object.getOwnPropertyDescriptor(r,o):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,r,o,t);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(n<3?i(a):n>3?i(r,o,a):i(r,o))||a);return n>3&&a&&Object.defineProperty(r,o,a),a},_=this&&this.__metadata||function(e,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,r)},F=function(){function e(e,r,o,t,i,n,a,c,s,p,l,m,u){this.route=e,this.router=r,this._comprobantesService=o,this._tiposService=t,this._tablaMaestraService=i,this._percepcionComunService=n,this._estilosService=a,this._utilsService=c,this._precioPipe=s,this._datePipe=p,this._translateService=l,this._parametrosService=m,this._padreRetencionPerpcionService=u,this._padreRetencionPerpcionService.actualizarComprobante(this.route.snapshot.data.codigo,this.route.snapshot.data.mostrarCombo,!0)}return e.prototype.ngOnInit=function(){this.inicializarVariables()},e.prototype.ngOnDestroy=function(){this.comprobanteSubscription&&this.comprobanteSubscription.unsubscribe()},e.prototype.inicializarVariables=function(){this.titulo="agregarItem",this.escogioUnComprobante=new m.BehaviorSubject(!1),this.comprobanteReferencia=new m.BehaviorSubject(null),this.filtrarComprobantes(),this.obtenerTiposMonedas(),this.obtenerTiposPercepcion(),this.initForm(),this.obtenerParametros()},e.prototype.obtenerTiposPercepcion=function(){this.tiposPercepcion=this._parametrosService.obtenerParametrosPorId(this._tiposService.PARAMETRO_REGIMENES_PERCEPCION)},e.prototype.obtenerParametros=function(){this.esEditable=new m.BehaviorSubject(this.route.snapshot.data.esEditable),this.itemAEditar=new d.a,this._percepcionComunService.hayPersistencia()?this.esEditable.value?(this.itemAEditar=this._percepcionComunService.itemDetalleEditar.value,this.itemAEditar?this.cargarDatosItem():this.regresar()):(this._estilosService.eliminarEstiloInput("cmbPorcentajePercepcion","is-empty"),this.itemFormGroup.controls.cmbPorcentajePercepcion.setValue(this._percepcionComunService.percepcionAuxiliar.value.cabecera.tipoPorcentajePercepcion),this.itemFormGroup.controls.txtMontoPorcentajePercepcion.setValue(this._percepcionComunService.percepcionAuxiliar.value.cabecera.porcentajePercepcion.toFixed(2))):this.regresar()},e.prototype.cargarDatosItem=function(){this.itemFormGroup.controls.cmbTipoComprobante.setValue(this.itemAEditar.tipoComprobante),this.itemFormGroup.controls.txtSerieComprobante.setValue(this.itemAEditar.serieComprobante),this.itemFormGroup.controls.txtCorrelativoComprobante.setValue(this.itemAEditar.correlativoComprobante),this.itemFormGroup.controls.txtMontoComprobante.setValue(this.itemAEditar.importeTotalComprobante),this.itemFormGroup.controls.cmbMonedaComprobante.setValue(this.itemAEditar.monedaComprobante),this.itemFormGroup.controls.txtFechaEmisionComprobante.setValue(this.itemAEditar.fechaEmisionComprobante),this.itemFormGroup.controls.txtTipoCambioComprobante.setValue(this.itemAEditar.tipoCambioComprobante),this.itemFormGroup.controls.txtImporteSoles.setValue(this.itemAEditar.importeSolesComprobante),this.itemFormGroup.controls.cmbPorcentajePercepcion.setValue(this.itemAEditar.tipoPorcentajePercepcion),this.itemFormGroup.controls.txtMontoPorcentajePercepcion.setValue(this.itemAEditar.porcentajePercepcion.toFixed(2)),this.itemFormGroup.controls.txtMontoPercepcion.setValue(this.itemAEditar.montoPercepcion),this._estilosService.eliminarEstiloInput("cmbTipoComprobante","is-empty"),this._estilosService.eliminarEstiloInput("txtSerieComprobante","is-empty"),this._estilosService.eliminarEstiloInput("txtCorrelativoComprobante","is-empty"),this._estilosService.eliminarEstiloInput("txtMontoComprobante","is-empty"),this._estilosService.eliminarEstiloInput("cmbMonedaComprobante","is-empty"),this._estilosService.eliminarEstiloInput("txtFechaEmisionComprobante","is-empty"),this._estilosService.eliminarEstiloInput("txtTipoCambioComprobante","is-empty"),this._estilosService.eliminarEstiloInput("txtImporteSoles","is-empty"),this._estilosService.eliminarEstiloInput("cmbPorcentajePercepcion","is-empty"),this._estilosService.eliminarEstiloInput("txtMontoPorcentajePercepcion","is-empty"),this._estilosService.eliminarEstiloInput("txtMontoPercepcion","is-empty"),this.itemFormGroup.disable(!0),this.escogioUnComprobante.next(null!==this.itemAEditar.comprobante)},e.prototype.filtrarComprobantes=function(){this.todosTiposComprobantes=this._tablaMaestraService.obtenerPorIdTabla(l.a);var e=[this._tiposService.TIPO_DOCUMENTO_FACTURA,this._tiposService.TIPO_DOCUMENTO_BOLETA];this.tiposComprobantes=this._tablaMaestraService.obtenerPorCodigosDeTablaMaestra(this.todosTiposComprobantes,e)},e.prototype.obtenerTiposMonedas=function(){this.tiposMonedas=this._tablaMaestraService.obtenerPorIdTabla(l.e)},e.prototype.regresar=function(){var e="../";this.esEditable&&(e="../../"),this.router.navigate([e],{relativeTo:this.route})},e.prototype.initForm=function(){var e=new Date,r=e.getDate().toString()+"/"+(e.getMonth()+1).toString()+"/"+e.getFullYear().toString();this.itemFormGroup=new i.FormGroup({cmbTipoComprobante:new i.FormControl("",[i.Validators.required]),txtSerieComprobante:new i.FormControl("",[i.Validators.required]),txtCorrelativoComprobante:new i.FormControl("",[i.Validators.required]),txtMontoComprobante:new i.FormControl("0.00",[i.Validators.required,i.Validators.pattern("[0-9]+[.][0-9]{2}"),i.Validators.minLength(4),i.Validators.maxLength(15),i.Validators.min(.01)]),txtMontoPercepcion:new i.FormControl({value:"0.00",disabled:!0},[i.Validators.required,i.Validators.pattern("[0-9]+[.][0-9]{2}"),i.Validators.minLength(4),i.Validators.maxLength(15)]),cmbPorcentajePercepcion:new i.FormControl({value:"",disabled:!0},[i.Validators.required,h.a.validarSelectForm("seleccioneUnTipoDePercepcion",null)]),txtMontoPorcentajePercepcion:new i.FormControl({value:"0.00",disabled:!0},[i.Validators.required]),txtFechaEmisionComprobante:new i.FormControl(r,[i.Validators.required,h.a.fechaDeberiaSerMenorAHoy("errorFecha")]),cmbMonedaComprobante:new i.FormControl("",[i.Validators.required,h.a.validarSelectForm("seleccioneUnaMoneda",null)]),txtTipoCambioComprobante:new i.FormControl({value:"0.00",disabled:!0},[i.Validators.required,i.Validators.pattern("[0-9]+[.][0-9]{2}"),i.Validators.minLength(4),i.Validators.maxLength(15),i.Validators.min(.01)]),txtImporteSoles:new i.FormControl({value:"0.00",disabled:!0},[i.Validators.required,i.Validators.pattern("[0-9]+[.][0-9]{2}"),i.Validators.minLength(4),i.Validators.maxLength(15)])}),this.escucharEventosForm()},e.prototype.limpiar=function(){this.itemFormGroup.reset()},e.prototype.buscarComprobante=function(){var e=this;this.cambioComprobante(),this.comprobanteSubscription=this._comprobantesService.buscarPorTipoComprobanteSerieCorrelativo(this.itemFormGroup.controls.cmbTipoComprobante.value.codigo,this.itemFormGroup.controls.txtSerieComprobante.value,this.itemFormGroup.controls.txtCorrelativoComprobante.value).subscribe(function(r){if(r){var o="";e._translateService.get("continuar").take(1).subscribe(function(e){return o=e});var t="";if(e._translateService.get("accionExitosa").take(1).subscribe(function(e){return t=e}),e._utilsService.verificarEstadoComprobante(r.chEstadocomprobantepago))swal({type:"success",title:t,confirmButtonText:o,confirmButtonColor:"#4caf50"}),e.comprobanteReferencia.next(r),e.escogioUnComprobante.next(!0),e.itemFormGroup.get("txtMontoComprobante").setValue(e._precioPipe.transform(r.deTotalcomprobantepago)),e.itemFormGroup.get("cmbMonedaComprobante").setValue(e.tiposMonedas.value.find(function(e){return e.codigo===r.vcIdregistromoneda})),e.itemFormGroup.get("txtFechaEmisionComprobante").setValue(e._datePipe.transform(r.tsFechaemision,"dd/MM/yyyy")),e._estilosService.eliminarEstiloInput("cmbMonedaComprobante","is-empty"),e.cambioMoneda(),e.itemFormGroup.controls.cmbMonedaComprobante.disable(!0),e.itemFormGroup.controls.txtMontoComprobante.disable(!0);else{e.escogioUnComprobante.next(!1),e.comprobanteReferencia.next(null),e.itemFormGroup.get("cmbMonedaComprobante").reset(null),e.itemFormGroup.get("txtMontoComprobante").reset("0.00"),e.itemFormGroup.controls.cmbMonedaComprobante.enable(!0),e.itemFormGroup.controls.txtMontoComprobante.enable(!0);var i="";e._translateService.get("mensajeErrorComprobanteNoAutorizado").take(1).subscribe(function(e){return i=e}),swal({type:"warning",title:i,confirmButtonText:o,confirmButtonClass:"btn btn-warning",buttonsStyling:!1})}}else e.itemFormGroup.get("cmbMonedaComprobante").reset(null),e.itemFormGroup.get("txtMontoComprobante").reset("0.00"),e.itemFormGroup.controls.cmbMonedaComprobante.enable(!0),e.itemFormGroup.controls.txtMontoComprobante.enable(!0),e.escogioUnComprobante.next(!1),e.comprobanteReferencia.next(null)})},e.prototype.compararTablaMaestra=function(e,r){return!r||!!e&&e.codigo===r.codigo},e.prototype.compararParametros=function(e,r){return!r||!!e&&e.id_dominio===r.id_dominio},e.prototype.obtenerNuevaDataItem=function(){this.itemAEditar.tipoComprobante=this.itemFormGroup.controls.cmbTipoComprobante.value;var e=this.comprobanteReferencia.value;e?(this.itemAEditar.comprobante=e,this.itemAEditar.idComprobante=e.inIdcomprobantepago,this.itemAEditar.serieComprobante=e.vcSerie,this.itemAEditar.correlativoComprobante=e.vcCorrelativo,this.itemAEditar.numeroComprobante=e.vcSerie+"-"+e.vcCorrelativo):(this.itemAEditar.comprobante=null,this.itemAEditar.idComprobante=null,this.itemAEditar.serieComprobante=this.itemFormGroup.controls.txtSerieComprobante.value,this.itemAEditar.correlativoComprobante=this.itemFormGroup.controls.txtCorrelativoComprobante.value,this.itemAEditar.numeroComprobante=this.itemAEditar.serieComprobante+"-"+this.itemAEditar.correlativoComprobante),this.itemAEditar.importeTotalComprobante=this.itemFormGroup.controls.txtMontoComprobante.value,this.itemAEditar.monedaComprobante=this.itemFormGroup.controls.cmbMonedaComprobante.value,this.itemAEditar.fechaEmisionComprobante=this._utilsService.convertirFechaAFormato(this.itemFormGroup.controls.txtFechaEmisionComprobante.value,"/",C.a.DIA_MES_ANIO,C.a.DIA_MES_ANIO,"/"),this.itemAEditar.tipoCambioComprobante=this.itemFormGroup.controls.txtTipoCambioComprobante.value,this.itemAEditar.importeSolesComprobante=this.itemFormGroup.controls.txtImporteSoles.value,this.itemAEditar.tipoPorcentajePercepcion=this.itemFormGroup.controls.cmbPorcentajePercepcion.value,this.itemAEditar.montoPercepcion=this.itemFormGroup.controls.txtMontoPercepcion.value,this._percepcionComunService.itemDetalleEditar.next(this.itemAEditar)},e.prototype.guardarItem=function(e){e?(this.itemFormGroup.controls.cmbTipoComprobante.enable(!0),this.itemFormGroup.controls.txtSerieComprobante.enable(!0),this.itemFormGroup.controls.txtCorrelativoComprobante.enable(!0),this.itemFormGroup.controls.txtTipoCambioComprobante.enable(!0),this.esEditable.next(!1),this.escogioUnComprobante.value||(this.itemFormGroup.controls.cmbMonedaComprobante.enable(!0),this.itemFormGroup.controls.txtMontoComprobante.enable(!0))):(this.obtenerNuevaDataItem(),this.regresar())},e.prototype.cambioMoneda=function(){this.itemFormGroup.controls.cmbMonedaComprobante.value.iso===this._tiposService.TIPO_MONEDA_PEN_ISO?(this.itemFormGroup.controls.txtTipoCambioComprobante.setValue("1.00"),this.itemFormGroup.controls.txtTipoCambioComprobante.disable(!0)):(this.itemFormGroup.controls.txtTipoCambioComprobante.setValue("0.00"),this.itemFormGroup.controls.txtTipoCambioComprobante.enable(!0)),this.itemFormGroup.controls.txtTipoCambioComprobante.markAsUntouched(),this._estilosService.eliminarEstiloInput("txtTipoCambioComprobante","is-empty"),this.calcularImporteEnSoles()},e.prototype.escucharEventosForm=function(){this.calcularEventoImporteEnSoles()},e.prototype.calcularEventoImporteEnSoles=function(){var e=this;this.itemFormGroup.controls.txtTipoCambioComprobante.valueChanges.subscribe(function(r){0===Number(r)&&e.itemFormGroup.controls.txtTipoCambioComprobante.markAsTouched(),e.calcularImporteEnSoles()}),this.itemFormGroup.controls.txtMontoComprobante.valueChanges.subscribe(function(r){0===Number(r)&&e.itemFormGroup.controls.txtMontoComprobante.markAsTouched(),e.calcularImporteEnSoles()})},e.prototype.calcularImporteEnSoles=function(){var e=this.itemFormGroup.controls.txtMontoComprobante.value,r=this.itemFormGroup.controls.txtTipoCambioComprobante.value;e=Number(""===e?0:e),r=Number(""===r?0:r);var o=e*r;this.itemFormGroup.controls.txtImporteSoles.setValue(o.toFixed(2)),this.ponerErrorMin("txtMontoComprobante",e),this.ponerErrorMin("txtTipoCambioComprobante",r),this.calcularMontoPercepcion()},e.prototype.ponerErrorMin=function(e,r){0===r?this.itemFormGroup.controls[e].setErrors({min:!0}):this.itemFormGroup.controls[e].setErrors(null)},e.prototype.cambioTipoComprobante=function(){this.itemFormGroup.controls.txtSerieComprobante.reset(),this.itemFormGroup.controls.txtCorrelativoComprobante.reset(),this.cambioComprobante(),this._estilosService.eliminarEstiloInput("cmbTipoComprobante","is-empty")},e.prototype.cambioComprobante=function(){var e=new Date,r=e.getDate().toString()+"/"+(e.getMonth()+1).toString()+"/"+e.getFullYear().toString();this.itemFormGroup.controls.txtFechaEmisionComprobante.reset(r),this.itemFormGroup.controls.cmbMonedaComprobante.reset(null),this.itemFormGroup.controls.txtMontoComprobante.reset("0.00"),this.itemFormGroup.controls.txtMontoComprobante.markAsUntouched(),this.itemFormGroup.controls.txtTipoCambioComprobante.reset("0.00"),this.itemFormGroup.controls.txtTipoCambioComprobante.markAsUntouched(),this.itemFormGroup.controls.txtImporteSoles.reset("0.00"),this.itemFormGroup.controls.txtMontoPercepcion.reset("0.00"),this._estilosService.eliminarEstiloInput("cmbMonedaComprobante","is-empty"),this.escogioUnComprobante.next(!1),this.comprobanteReferencia.next(null)},e.prototype.calcularMontoPercepcion=function(){var e=Number(this.itemFormGroup.controls.txtImporteSoles.value),r=this._percepcionComunService.percepcionAuxiliar.value.cabecera.porcentajePercepcion,o=e*r/100;this.itemFormGroup.controls.txtMontoPercepcion.setValue(o.toFixed(2))},e}();F=E([o.i(t.Component)({selector:"app-percepcion-item-crear",template:o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-item-crear/percepcion-item-crear.component.html"),styles:[o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-item-crear/percepcion-item-crear.component.css")]}),_("design:paramtypes",["function"==typeof(y=void 0!==c.b&&c.b)&&y||Object,"function"==typeof(S=void 0!==c.c&&c.c)&&S||Object,"function"==typeof(I=void 0!==p.a&&p.a)&&I||Object,"function"==typeof(j=void 0!==n.a&&n.a)&&j||Object,"function"==typeof(G=void 0!==a.a&&a.a)&&G||Object,"function"==typeof(A=void 0!==u.a&&u.a)&&A||Object,"function"==typeof(D=void 0!==b.a&&b.a)&&D||Object,"function"==typeof(M=void 0!==g.a&&g.a)&&M||Object,"function"==typeof(T=void 0!==v.a&&v.a)&&T||Object,"function"==typeof(O=void 0!==P.DatePipe&&P.DatePipe)&&O||Object,"function"==typeof(w=void 0!==x.c&&x.c)&&w||Object,"function"==typeof(R=void 0!==f.a&&f.a)&&R||Object,"function"==typeof(N=void 0!==s.a&&s.a)&&N||Object])],F);var y,S,I,j,G,A,D,M,T,O,w,R,N},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-item-crear/percepcion-item-crear.module.ts":function(e,r,o){"use strict";var t=o("./node_modules/@angular/core/@angular/core.es5.js"),i=o("./node_modules/@angular/common/@angular/common.es5.js"),n=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-item-crear/percepcion-item-crear.component.ts"),a=o("./node_modules/@angular/common/@angular/common/http.es5.js"),c=o("./src/app/directives/datepicker.module.ts"),s=o("./node_modules/@angular/forms/@angular/forms.es5.js"),p=o("./src/app/facturacion-electronica/general/directivas/directivas.module.ts"),l=o("./node_modules/@ngx-translate/core/index.js"),m=o("./node_modules/@angular/http/@angular/http.es5.js"),u=o("./src/app/facturacion-electronica/general/services/comprobantes/comprobantes.service.ts"),d=o("./src/app/facturacion-electronica/general/services/configuracionDocumento/parametros.service.ts"),b=o("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),v=o("./src/app/facturacion-electronica/general/services/documento/tablaMaestra.service.ts"),h=o("./src/app/facturacion-electronica/general/utils/estilos.services.ts");o.d(r,"a",function(){return g});var f=this&&this.__decorate||function(e,r,o,t){var i,n=arguments.length,a=n<3?r:null===t?t=Object.getOwnPropertyDescriptor(r,o):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,r,o,t);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(n<3?i(a):n>3?i(r,o,a):i(r,o))||a);return n>3&&a&&Object.defineProperty(r,o,a),a},g=function(){function e(){}return e}();g=f([o.i(t.NgModule)({imports:[i.CommonModule,s.ReactiveFormsModule,p.a,s.FormsModule,m.HttpModule,a.a,c.a,l.a,p.a],declarations:[n.a],exports:[n.a],providers:[d.a,u.a,b.a,v.a,h.a]})],g)},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-vista-previa/percepcion-vista-previa.component.css":function(e,r,o){r=e.exports=o("./node_modules/css-loader/lib/css-base.js")(!1),r.push([e.i,".center{text-align:center}.left{text-align:left}.borde-simple{border-style:solid;border-radius:2px;border-color:#aaa}.logoVisualizar{width:100%;height:45px;overflow:hidden;border-radius:5px;background-color:#fff;left:70px;z-index:5}.card img{max-width:100%;max-height:100%;width:auto;height:auto}",""]),e.exports=e.exports.toString()},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-vista-previa/percepcion-vista-previa.component.html":function(e,r){e.exports='<div class="row col-md-12">\r\n  <div class="card">\r\n    <div class="card-header card-header-text" data-background-color="blue">\r\n      <h4 class="card-title">{{\'vistaPrevia\' | translate}}</h4>\r\n    </div>\r\n    <div class="card-content" *ngIf="percepcionAuxiliar">\r\n\r\n        <div class="row">\r\n            <div class="col-md-4 left">\r\n                  \x3c!-- Muestra de la empresa emisora, agregar metodo que recupera url del logo de localstorage, ver ejemplo menu --\x3e\r\n                  \x3c!-- <div class="logoVisualizar">\r\n                    <img src="{{urlLogo}}">\r\n                  </div> --\x3e\r\n              <label>\r\n                <b *ngIf="percepcionAuxiliar.entidadEmisora">{{percepcionAuxiliar.entidadEmisora.denominacion}}</b>\r\n                \x3c!-- <b>{{percepcionAuxiliar.entidadEmisora.denominacion}}</b> --\x3e\r\n              </label>\r\n              <br>\r\n              <label>\r\n                <b>{{percepcionAuxiliar.entidadEmisora.direccionFiscal}}</b>\r\n              </label>\r\n            </div>\r\n            <div class="col-md-4 col-md-offset-4 center">\r\n              <div class="col-md-12 borde-simple">\r\n                <label>\r\n                  \x3c!-- <b *ngIf="percepcionAuxiliar.entidadEmisora">{{percepcionAuxiliar.entidadEmisora.direccionFiscal}}</b> --\x3e\r\n                  <b>{{\'rucNumero\'| translate}}: {{percepcionAuxiliar.entidadEmisora.documento}}</b>\r\n                </label>\r\n                <br>\r\n                <label>\r\n                  \x3c!-- <b>{{\'retencion\' | translate | uppercase}} {{\'baseComprobanteElectronica\' | translate | uppercase}}</b> --\x3e\r\n                  <b>{{tituloComprobante | translate | uppercase}}</b>\r\n                </label>\r\n                <br>\r\n                <label>\r\n                    <b>{{\'serie\'| translate}}:  {{percepcionAuxiliar.cabecera.serie.serie}}</b>\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n      \x3c!-- <div class="row">\r\n        <div class="col-md-4">\r\n          <label>\r\n            <h5>\r\n              <b *ngIf="percepcionAuxiliar.entidadEmisora">{{percepcionAuxiliar.entidadEmisora.denominacion}}</b>\r\n            </h5>\r\n          </label>\r\n        </div>\r\n        <div class="col-md-4 col-md-offset-4">\r\n          <div class="row">\r\n            <div class="col-md-4">\r\n              <label>\r\n                <h4>\r\n                  <b>{{\'ruc\' | translate}}:</b>\r\n                </h4>\r\n              </label>\r\n            </div>\r\n            <div class="col-md-8">\r\n              <label>\r\n                <h5 *ngIf="percepcionAuxiliar.entidadEmisora">{{percepcionAuxiliar.entidadEmisora.documento}}</h5>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-4">\r\n          <label>\r\n            <h5>\r\n              <b *ngIf="percepcionAuxiliar.entidadEmisora">{{percepcionAuxiliar.entidadEmisora.direccionFiscal}}</b>\r\n            </h5>\r\n          </label>\r\n        </div>\r\n        <div class="col-md-4 col-md-offset-4">\r\n          <label>\r\n            <h3>\r\n              <b>{{tituloComprobante | translate | uppercase}}</b>\r\n            </h3>\r\n          </label>\r\n        </div>\r\n      </div>\r\n      <br>\r\n      <div class="row">\r\n        <div class="col-md-4 col-md-offset-8">\r\n          <div class="row">\r\n            <div class="col-md-4">\r\n              <label>\r\n                <h3>\r\n                  <b>{{\'serie\' | translate}}:</b>\r\n                </h3>\r\n              </label>\r\n            </div>\r\n            <div class="col-md-8">\r\n              <label>\r\n                <h3>{{percepcionAuxiliar.cabecera.serie.serie}}</h3>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div> --\x3e\r\n\r\n      <br>\r\n      <div class="row">\r\n        <div class="col-md-6">\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <label>\r\n                <b>{{\'seniorSeniors\' | translate}}:</b>\r\n              </label>\r\n            </div>\r\n            <div class="col-md-6">\r\n              <label *ngIf="percepcionAuxiliar.entidadReceptora">{{percepcionAuxiliar.entidadReceptora.denominacion}}</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-6">\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <label>\r\n                <b>{{\'ruc\' | translate}}:</b>\r\n              </label>\r\n            </div>\r\n            <div class="col-md-6">\r\n              <label *ngIf="percepcionAuxiliar.entidadReceptora">{{percepcionAuxiliar.entidadReceptora.documento}}</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-6">\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <label>\r\n                <b>{{\'domicilioFiscal\' | translate}}:</b>\r\n              </label>\r\n            </div>\r\n            <div class="col-md-6">\r\n              <label *ngIf="percepcionAuxiliar.entidadReceptora">{{percepcionAuxiliar.entidadReceptora.direccionFiscal}}</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-6">\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <label>\r\n                <b>{{\'fechaEmision\' | translate}}:</b>\r\n              </label>\r\n            </div>\r\n            <div class="col-md-6">\r\n              <label>{{formatoFechaEmision}}</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-6">\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <label>\r\n                <b>{{\'tipoMoneda\' | translate}}:</b>\r\n              </label>\r\n            </div>\r\n            <div class="col-md-6">\r\n              <label>{{percepcionAuxiliar.cabecera.tipoMoneda}}</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <br>\r\n      <app-data-table\r\n        #tablaNormal\r\n        (iniciarData)="iniciarDataTable($event)"\r\n        [idTabla]="\'tablaVistaPrevia\'"\r\n        [columnas]="columnasTabla"\r\n        [ordenarPorElCampo]="ordenarPorElCampo"\r\n      ></app-data-table>\r\n      <br>\r\n      <div class="row">\r\n        <div class="col-md-6">\r\n          <div class="row">\r\n            <div class="col-md-6">\r\n              <label>\r\n                <b>{{\'observaciones\' | translate}}:</b>\r\n              </label>\r\n            </div>\r\n            <div class="col-md-6">\r\n              <label>{{percepcionAuxiliar.cabecera.observacion}}</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <br>\r\n      <div class="row">\r\n        <div class="col-md-2 col-md-offset-5">\r\n          <label>\r\n            <b>{{\'importeTotal\' | translate}}:</b>\r\n          </label>\r\n        </div>\r\n        <div class="col-md-5">\r\n          <label>{{percepcionAuxiliar.cabecera.totalComprobante}}</label>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-2 col-md-offset-5">\r\n          <label>\r\n            <b>{{\'montoEnLetras\' | translate}}:</b>\r\n          </label>\r\n        </div>\r\n        <div class="col-md-5">\r\n          <label>{{totalEnPalabras | uppercase}}</label>\r\n        </div>\r\n      </div>\r\n      <br>\r\n      <br>\r\n    </div>\r\n    <div class="row">\r\n      <div class="col-md-12" align="right">\r\n        <button name="btnRegresar" type="button" class="btn btn-default" style="right: 15px;" (click)="regresar()">\r\n          {{\'regresar\' | translate}}\r\n        </button>\r\n        <button name="btnEmitir" type="button" class="btn btn-default" style="right: 15px;" (click)="emitir()">\r\n          {{\'emitir\' | translate}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n'},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-vista-previa/percepcion-vista-previa.component.ts":function(e,r,o){"use strict";var t=o("./node_modules/@angular/core/@angular/core.es5.js"),i=o("./node_modules/@angular/router/@angular/router.es5.js"),n=o("./src/app/facturacion-electronica/percepcion-retencion/services/padre-retencion-percepcion.service.ts"),a=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/servicios/percepcion-comun.service.ts"),c=o("./src/app/facturacion-electronica/general/data-table/data-table.component.ts"),s=o("./src/app/facturacion-electronica/general/utils/utils.service.ts"),p=o("./src/app/facturacion-electronica/general/services/comprobantes/creacionComprobantes.ts"),l=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/modelos/percepcion-crear.ts"),m=o("./src/app/facturacion-electronica/general/data-table/utils/columna-data-table.ts"),u=o("./node_modules/rxjs/BehaviorSubject.js");o.n(u);o.d(r,"a",function(){return v});var d=this&&this.__decorate||function(e,r,o,t){var i,n=arguments.length,a=n<3?r:null===t?t=Object.getOwnPropertyDescriptor(r,o):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,r,o,t);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(n<3?i(a):n>3?i(r,o,a):i(r,o))||a);return n>3&&a&&Object.defineProperty(r,o,a),a},b=this&&this.__metadata||function(e,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,r)},v=function(){function e(e,r,o,t,i,n){this.route=e,this.router=r,this._utilsService=o,this._creacionComprobantes=t,this._percepcionComunService=i,this._padreRetencionPerpcionService=n,this._padreRetencionPerpcionService.actualizarComprobante(this.route.snapshot.data.codigo,this.route.snapshot.data.mostrarCombo,!0)}return e.prototype.ngOnInit=function(){this.inicializarVariables(),this.cargarPersistencia()},e.prototype.ngOnDestroy=function(){this.eliminarPersistencia.value&&this._percepcionComunService.eliminarPersistenciaPercepcionAuxiliar()},e.prototype.cargarPersistencia=function(){this.percepcionAuxiliar=this._percepcionComunService.percepcionAuxiliar.value,this.formatoFechaEmision="",this.percepcionAuxiliar?(this.formatoFechaEmision=this._utilsService.convertirFechaAFormato(this.percepcionAuxiliar.cabecera.fechaPago),this.totalEnPalabras=this._utilsService.convertirMontoEnLetras(this.percepcionAuxiliar.cabecera.totalComprobante,this.percepcionAuxiliar.cabecera.tipoMoneda)):this.regresar()},e.prototype.cargarDataTablePersistencia=function(){this.tabla.insertarData(this.percepcionAuxiliar.detalle)},e.prototype.inicializarVariables=function(){this.tituloComprobante="percepcionElectronica",this.eliminarPersistencia=new u.BehaviorSubject(!0),this.inicializarVariablesDataTable()},e.prototype.inicializarVariablesDataTable=function(){this.columnasTabla=[new m.a("tipoComprobante","tipoComprobante.descripcionLarga"),new m.a("serie","serieComprobante"),new m.a("numeroCorrelativo","correlativoComprobante"),new m.a("fechaEmision","fechaEmisionComprobante"),new m.a("monedaOrigen","monedaComprobante.descripcionLarga"),new m.a("importeTotal","importeTotalComprobante",{"text-align":"right"}),new m.a("importeTotalsoles","importeSolesComprobante",{"text-align":"right"}),new m.a("porcentajePercepcion","tipoPorcentajePercepcion.descripcion_dominio"),new m.a("importePercepcionSoles","montoPercepcion",{"text-align":"right"})],this.ordenarPorElCampo="serieComprobante"},e.prototype.regresar=function(){this.eliminarPersistencia.next(!1),this.router.navigate(["../"],{relativeTo:this.route})},e.prototype.emitir=function(){var e=this;this._percepcionComunService.fillPercepcionAEmitir(),this._creacionComprobantes.crearPercepcion(this._percepcionComunService.percepcion.value).subscribe(function(r){null!==r&&(e._percepcionComunService.percepcion.next(new l.a),e._percepcionComunService.eliminarPersistenciaPercepcionAuxiliar(),e.router.navigate(["../../emision",r.id],{relativeTo:e.route}))})},e.prototype.iniciarDataTable=function(e){this.cargarDataTablePersistencia()},e}();d([o.i(t.ViewChild)("tablaNormal"),b("design:type","function"==typeof(h=void 0!==c.a&&c.a)&&h||Object)],v.prototype,"tabla",void 0),v=d([o.i(t.Component)({selector:"app-percepcion-vista-previa",template:o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-vista-previa/percepcion-vista-previa.component.html"),styles:[o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-vista-previa/percepcion-vista-previa.component.css")]}),b("design:paramtypes",["function"==typeof(f=void 0!==i.b&&i.b)&&f||Object,"function"==typeof(g=void 0!==i.c&&i.c)&&g||Object,"function"==typeof(C=void 0!==s.a&&s.a)&&C||Object,"function"==typeof(x=void 0!==p.a&&p.a)&&x||Object,"function"==typeof(P=void 0!==a.a&&a.a)&&P||Object,"function"==typeof(E=void 0!==n.a&&n.a)&&E||Object])],v);var h,f,g,C,x,P,E},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-vista-previa/percepcion-vista-previa.module.ts":function(e,r,o){"use strict";var t=o("./node_modules/@angular/core/@angular/core.es5.js"),i=o("./node_modules/@angular/common/@angular/common.es5.js"),n=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-vista-previa/percepcion-vista-previa.component.ts"),a=o("./src/app/facturacion-electronica/general/data-table/data-table.module.ts"),c=o("./node_modules/@angular/common/@angular/common/http.es5.js"),s=o("./node_modules/@angular/forms/@angular/forms.es5.js"),p=o("./src/app/facturacion-electronica/general/directivas/directivas.module.ts"),l=o("./node_modules/@ngx-translate/core/index.js"),m=o("./node_modules/@angular/http/@angular/http.es5.js"),u=o("./src/app/facturacion-electronica/general/services/comprobantes/creacionComprobantes.ts");o.d(r,"a",function(){return b});var d=this&&this.__decorate||function(e,r,o,t){var i,n=arguments.length,a=n<3?r:null===t?t=Object.getOwnPropertyDescriptor(r,o):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,r,o,t);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(n<3?i(a):n>3?i(r,o,a):i(r,o))||a);return n>3&&a&&Object.defineProperty(r,o,a),a},b=function(){function e(){}return e}();b=d([o.i(t.NgModule)({imports:[i.CommonModule,s.ReactiveFormsModule,p.a,s.FormsModule,m.HttpModule,c.a,a.a,l.a],declarations:[n.a],exports:[n.a],providers:[u.a]})],b)},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion.component.css":function(e,r,o){r=e.exports=o("./node_modules/css-loader/lib/css-base.js")(!1),r.push([e.i,"",""]),e.exports=e.exports.toString()},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion.component.html":function(e,r){e.exports="<router-outlet></router-outlet>\r\n"},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion.component.ts":function(e,r,o){"use strict";var t=o("./node_modules/@angular/core/@angular/core.es5.js");o.d(r,"a",function(){return a});var i=this&&this.__decorate||function(e,r,o,t){var i,n=arguments.length,a=n<3?r:null===t?t=Object.getOwnPropertyDescriptor(r,o):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,r,o,t);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(n<3?i(a):n>3?i(r,o,a):i(r,o))||a);return n>3&&a&&Object.defineProperty(r,o,a),a},n=this&&this.__metadata||function(e,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,r)},a=function(){function e(){this.titulo="crearPercepcion"}return e.prototype.ngOnInit=function(){},e}();a=i([o.i(t.Component)({selector:"app-percepcion",template:o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion.component.html"),styles:[o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion.component.css")]}),n("design:paramtypes",[])],a)},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion.module.ts":function(e,r,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=o("./node_modules/@angular/core/@angular/core.es5.js"),i=o("./node_modules/@angular/common/@angular/common.es5.js"),n=o("./node_modules/@ngx-translate/core/index.js"),a=o("./node_modules/@angular/common/@angular/common/http.es5.js"),c=o("./node_modules/@angular/forms/@angular/forms.es5.js"),s=o("./src/app/directives/datepicker.module.ts"),p=o("./src/app/facturacion-electronica/general/directivas/directivas.module.ts"),l=o("./node_modules/@angular/http/@angular/http.es5.js"),m=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion.routing.module.ts"),u=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion.component.ts"),d=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/servicios/percepcion-comun.service.ts"),b=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-crear/percepcion-crear.module.ts"),v=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-vista-previa/percepcion-vista-previa.module.ts"),h=o("./src/app/facturacion-electronica/general/emision-comprobante/emision-comprobante.module.ts"),f=o("./src/app/facturacion-electronica/general/services/tokenInterceptor.service.ts");o.d(r,"PercepcionModule",function(){return C});var g=this&&this.__decorate||function(e,r,o,t){var i,n=arguments.length,a=n<3?r:null===t?t=Object.getOwnPropertyDescriptor(r,o):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,r,o,t);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(n<3?i(a):n>3?i(r,o,a):i(r,o))||a);return n>3&&a&&Object.defineProperty(r,o,a),a},C=function(){function e(){}return e}();C=g([o.i(t.NgModule)({imports:[m.a,i.CommonModule,n.a,c.FormsModule,l.HttpModule,c.ReactiveFormsModule,a.a,s.a,n.a,p.a,b.a,v.a,h.a],declarations:[u.a],providers:[d.a,{provide:a.c,useClass:f.a,multi:!0}]})],C)},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion.routing.module.ts":function(e,r,o){"use strict";var t=o("./node_modules/@angular/core/@angular/core.es5.js"),i=o("./node_modules/@angular/router/@angular/router.es5.js"),n=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion.component.ts"),a=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-crear/percepcion-crear.component.ts"),c=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-item-crear/percepcion-item-crear.component.ts"),s=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/percepcion-vista-previa/percepcion-vista-previa.component.ts"),p=o("./src/app/facturacion-electronica/general/emision-comprobante/emision-comprobante.component.ts");o.d(r,"a",function(){return u});var l=this&&this.__decorate||function(e,r,o,t){var i,n=arguments.length,a=n<3?r:null===t?t=Object.getOwnPropertyDescriptor(r,o):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,r,o,t);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(n<3?i(a):n>3?i(r,o,a):i(r,o))||a);return n>3&&a&&Object.defineProperty(r,o,a),a},m=[{path:"",component:n.a,children:[{path:"",pathMatch:"full",redirectTo:"crear"},{path:"crear",component:a.a,data:{mostrarCombo:!0,codigo:"40"}},{path:"crear/agregar-item",component:c.a,data:{mostrarCombo:!1,codigo:"40",esEditable:!1}},{path:"crear/editar-item/:id",component:c.a,data:{mostrarCombo:!1,codigo:"40",esEditable:!0}},{path:"crear/vista-previa",component:s.a,data:{codigo:"40",mostrarCombo:!1}},{path:"emision/:id",component:p.a,data:{codigo:"40",mostrarCombo:!1,titulo:"percepcionElectronica"}}]}],u=function(){function e(){}return e}();u=l([o.i(t.NgModule)({imports:[i.a.forChild(m)],exports:[i.a]})],u)},"./src/app/facturacion-electronica/percepcion-retencion/percepcion/servicios/percepcion-comun.service.ts":function(e,r,o){"use strict";var t=o("./node_modules/@angular/core/@angular/core.es5.js"),i=o("./src/app/facturacion-electronica/general/services/utils/persistenciaDatos.service.ts"),n=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/modelos/percepcion-crear.ts"),a=o("./node_modules/rxjs/BehaviorSubject.js"),c=(o.n(a),o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/modelos/percepcion-crear-documento-entidad.ts")),s=o("./src/app/facturacion-electronica/general/utils/catalogo-documento-identidad.service.ts"),p=o("./src/app/facturacion-electronica/general/utils/tipos.service.ts"),l=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/modelos/percepcion-crear-documento-parametro.ts"),m=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/modelos/percepcion-crear-documento-parametro-json.ts"),u=o("./src/app/facturacion-electronica/percepcion-retencion/percepcion/modelos/percepcion-crear-documento-referencia.ts"),d=o("./src/app/facturacion-electronica/general/utils/utils.service.ts");o.d(r,"a",function(){return h});var b=this&&this.__decorate||function(e,r,o,t){var i,n=arguments.length,a=n<3?r:null===t?t=Object.getOwnPropertyDescriptor(r,o):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,r,o,t);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(n<3?i(a):n>3?i(r,o,a):i(r,o))||a);return n>3&&a&&Object.defineProperty(r,o,a),a},v=this&&this.__metadata||function(e,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,r)},h=function(){function e(e,r,o,t){this._catalogoDocumentoEntidadService=e,this._tiposService=r,this._utilsService=o,this._percepcionAuxiliarPersistenciaService=t,this.inicializarVariables()}return e.prototype.inicializarVariables=function(){this._percepcionAuxiliarPersistenciaService.nombrePersistencia="percepcionAuxliar",this.percepcion=new a.BehaviorSubject(null),this.percepcionAuxiliar=new a.BehaviorSubject(null),this.itemDetalleEditar=new a.BehaviorSubject(null)},e.prototype.fillPercepcionAEmitir=function(){this.percepcion.next(new n.a),this.cargarDatosEntidades(),this.cargarDatosParametros(),this.cargarDatosEnCabeceraNoDependeDetalle(this.percepcionAuxiliar.value.cabecera.serie,this.percepcionAuxiliar.value.cabecera.fechaPago,this.percepcionAuxiliar.value.cabecera.tipoMoneda,this.percepcionAuxiliar.value.cabecera.observacion),this.calcularDatosDetalle(),console.log("JSON PERCEPCION"),console.log(this.percepcionAuxiliar)},e.prototype.cargarDatosEnCabeceraNoDependeDetalle=function(e,r,o,t){this.percepcion.value.fechaEmision=this._utilsService.convertirFechaStringATimestamp(r),this.percepcion.value.tipoItem="3",this.percepcion.value.idSerie=e.idSerie.toString(),this.percepcion.value.descuento="0.00",this.percepcion.value.monedaDescuento=o,this.percepcion.value.moneda=o,this.percepcion.value.observacionComprobante=t,this.percepcion.value.razonSocialComprador=this.percepcionAuxiliar.value.entidadReceptora.denominacion,this.percepcion.value.razonSocialProveedor=localStorage.getItem("org_nombre"),this.percepcion.value.tipoComprobante=this._tiposService.TIPO_DOCUMENTO_PERCEPCION_NOMBRE,this.percepcion.value.idTipoComprobante=this._tiposService.TIPO_DOCUMENTO_PERCEPCION,this.percepcion.value.rucComprador=this.percepcionAuxiliar.value.entidadReceptora.documento,this.percepcion.value.rucProveedor=localStorage.getItem("org_ruc"),this.percepcion.value.numeroComprobante=e.serie},e.prototype.cargarCabeceraDependeDetalle=function(e,r,o,t){this.percepcion.value.porcentajeImpuesto=e.toFixed(2),this.percepcion.value.totalComprobante=r.toFixed(2),this.percepcion.value.montoDescuento=o.toFixed(2),this.percepcion.value.montoPagado=t.toFixed(2),this.percepcion.value.porcentajeImpuesto=this.percepcionAuxiliar.value.cabecera.porcentajePercepcion.toFixed()},e.prototype.cargarDatosEntidades=function(){var e=new c.a;e.idTipoEntidad=1,e.tipoDocumento=Number(this._catalogoDocumentoEntidadService.TIPO_DOCUMENTO_IDENTIDAD_RUC).toString(),e.documento=this.percepcionAuxiliar.value.entidadEmisora.documento,e.direccionFiscal=this.percepcionAuxiliar.value.entidadEmisora.direccionFiscal,e.denominacion=this.percepcionAuxiliar.value.entidadEmisora.denominacion,e.correoElectronico=this.percepcionAuxiliar.value.entidadEmisora.correoElectronico;var r=new c.a;r.idTipoEntidad=2,r.tipoDocumento=this.percepcionAuxiliar.value.entidadReceptora.idTipoDocumento,r.documento=this.percepcionAuxiliar.value.entidadReceptora.documento,r.direccionFiscal=this.percepcionAuxiliar.value.entidadReceptora.direccionFiscal,r.denominacion=this.percepcionAuxiliar.value.entidadReceptora.denominacion,r.correoElectronico=this.percepcionAuxiliar.value.entidadReceptora.correoElectronico,this.percepcion.value.documentoEntidad=[e,r]},e.prototype.calcularDatosDetalle=function(){for(var e=0,r=0,o=0,t=0,i=this.percepcionAuxiliar.value.detalle;t<i.length;t++){var n=i[t],a=this.cargarDatosReferencia(n);r+=Number(n.importeTotalComprobante),o+=Number(n.montoPercepcion),e+=Number(n.porcentajePercepcion),this.percepcion.value.documentoReferencia.push(a)}var c=r-o;this.cargarCabeceraDependeDetalle(e,r,o,c)},e.prototype.cargarDatosParametros=function(){var e=this.percepcionAuxiliar.value.cabecera.tipoPorcentajePercepcion,r=new l.a;r.idParametro=e.idparametro.toFixed(),r.descripcionParametro=e.parametro_descripcion;var o=new m.a;o.tipo=3,o.valor=e.descripcion_dominio,o.auxiliarEntero=e.id_dominio,o.auxiliarCaracter=e.codigo_dominio,o.auxiliarFecha=null,o.auxiliarImporte="0.00",r.json=JSON.stringify(o),this.percepcion.value.documentoParametro=[r]},e.prototype.cargarDatosReferencia=function(e){var r=new u.a;return e.comprobante&&(r.idDocumentoDestino=e.idComprobante),r.tipoDocumentoOrigen=this._tiposService.TIPO_DOCUMENTO_PERCEPCION,r.tipoDocumentoOrigenDescripcion=this._tiposService.TIPO_DOCUMENTO_PERCEPCION_NOMBRE,r.tipoDocumentoDestino=e.tipoComprobante.codigo,r.tipoDocumentoDestinoDescripcion=e.tipoComprobante.descripcionLarga,r.serieDocumentoDestino=e.serieComprobante,r.correlativoDocumentoDestino=e.correlativoComprobante,r.fechaEmisionDestino=this._utilsService.convertirFechaStringATimestamp(e.fechaEmisionComprobante),r.totalImporteDestino=e.importeTotalComprobante,r.totalImporteAuxiliarDestino=e.montoPercepcion,r.totalPorcentajeAuxiliarDestino=e.porcentajePercepcion.toFixed(2),r.monedaDestino=e.monedaComprobante.descripcionCorta,r.totalMonedaDestino=e.importeSolesComprobante,r.auxiliar1=e.tipoCambioComprobante,r.auxiliar2=(Number(e.importeSolesComprobante)-Number(e.montoPercepcion)).toFixed(2),r},e.prototype.setPersistenciaPercepcionAuxiliar=function(){this._percepcionAuxiliarPersistenciaService.agregar(this.percepcionAuxiliar.value)},e.prototype.hayPersistencia=function(){var e=this._percepcionAuxiliarPersistenciaService.obtener();return this.percepcionAuxiliar.next(e),null!==e},e.prototype.eliminarPersistenciaPercepcionAuxiliar=function(){this._percepcionAuxiliarPersistenciaService.eliminar()},e}();h=b([o.i(t.Injectable)(),v("design:paramtypes",["function"==typeof(f=void 0!==s.a&&s.a)&&f||Object,"function"==typeof(g=void 0!==p.a&&p.a)&&g||Object,"function"==typeof(C=void 0!==d.a&&d.a)&&C||Object,"function"==typeof(x=void 0!==i.a&&i.a)&&x||Object])],h);var f,g,C,x}});